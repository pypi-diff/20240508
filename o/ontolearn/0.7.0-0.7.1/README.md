# Comparing `tmp/ontolearn-0.7.0.tar.gz` & `tmp/ontolearn-0.7.1.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "ontolearn-0.7.0.tar", last modified: Thu Mar  7 12:45:26 2024, max compression
+gzip compressed data, was "ontolearn-0.7.1.tar", last modified: Wed May  8 18:33:31 2024, max compression
```

## Comparing `ontolearn-0.7.0.tar` & `ontolearn-0.7.1.tar`

### file list

```diff
@@ -1,102 +1,105 @@
-drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-03-07 12:45:26.783862 ontolearn-0.7.0/
--rw-rw-r--   0 demir     (1000) demir     (1000)    34523 2023-10-24 13:10:39.000000 ontolearn-0.7.0/LICENSE
--rw-r--r--   0 demir     (1000) demir     (1000)    21081 2024-03-07 12:45:26.783862 ontolearn-0.7.0/PKG-INFO
--rw-rw-r--   0 demir     (1000) demir     (1000)    18683 2024-03-07 10:05:24.000000 ontolearn-0.7.0/README.md
-drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-03-07 12:45:26.767861 ontolearn-0.7.0/ontolearn/
--rw-rw-r--   0 demir     (1000) demir     (1000)      674 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/__init__.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    19784 2024-01-22 12:21:41.000000 ontolearn-0.7.0/ontolearn/abstracts.py
-drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-03-07 12:45:26.767861 ontolearn-0.7.0/ontolearn/base/
--rw-rw-r--   0 demir     (1000) demir     (1000)      715 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/base/__init__.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    45104 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/base/_base.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    31083 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/base/axioms.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     5151 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/base/complex_ce_instances.py
-drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-03-07 12:45:26.767861 ontolearn-0.7.0/ontolearn/base/ext/
--rw-rw-r--   0 demir     (1000) demir     (1000)     3995 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/base/ext/__init__.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    26437 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/base/fast_instance_checker.py
-drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-03-07 12:45:26.771862 ontolearn-0.7.0/ontolearn/base/owl/
--rw-rw-r--   0 demir     (1000) demir     (1000)       20 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/base/owl/__init__.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    16946 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/base/owl/hierarchy.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    24075 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/base/owl/utils.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     4214 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/base/plus.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    15590 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/base/utils.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    25099 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/base_concept_learner.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     4090 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/base_nces.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    13348 2023-12-03 14:05:27.000000 ontolearn-0.7.0/ontolearn/binders.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     4634 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/clip_architectures.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     6420 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/clip_trainer.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     9925 2023-12-03 14:05:27.000000 ontolearn-0.7.0/ontolearn/concept_generator.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    81916 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/concept_learner.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    11404 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/data_struct.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     8529 2023-10-26 12:21:14.000000 ontolearn-0.7.0/ontolearn/ea_algorithms.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    13944 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/ea_initialization.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     6266 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/ea_utils.py
-drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-03-07 12:45:26.771862 ontolearn-0.7.0/ontolearn/endpoint/
--rw-rw-r--   0 demir     (1000) demir     (1000)       17 2023-10-26 12:21:14.000000 ontolearn-0.7.0/ontolearn/endpoint/__init__.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     7940 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/experiments.py
--rw-rw-r--   0 demir     (1000) demir     (1000)      647 2023-10-26 12:21:14.000000 ontolearn-0.7.0/ontolearn/fitness_functions.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     6031 2024-01-22 12:21:41.000000 ontolearn-0.7.0/ontolearn/heuristics.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    50181 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/knowledge_base.py
-drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-03-07 12:45:26.771862 ontolearn-0.7.0/ontolearn/learners/
--rw-rw-r--   0 demir     (1000) demir     (1000)       55 2024-01-22 12:21:41.000000 ontolearn-0.7.0/ontolearn/learners/__init__.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    42202 2024-01-22 12:21:41.000000 ontolearn-0.7.0/ontolearn/learners/drill.py
--rw-rw-r--   0 demir     (1000) demir     (1000)      117 2024-01-22 12:21:41.000000 ontolearn-0.7.0/ontolearn/learners/nero.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    31318 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/learners/tree_learner.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     2740 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/learning_problem.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    21177 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/learning_problem_generator.py
-drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-03-07 12:45:26.771862 ontolearn-0.7.0/ontolearn/lp_generator/
--rw-rw-r--   0 demir     (1000) demir     (1000)       80 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/lp_generator/__init__.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     1582 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/lp_generator/generate_data.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     8816 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/lp_generator/helper_classes.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     3073 2023-10-26 12:21:14.000000 ontolearn-0.7.0/ontolearn/metrics.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    16436 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/model_adapter.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     3592 2023-10-26 12:21:14.000000 ontolearn-0.7.0/ontolearn/nces_architectures.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     2436 2023-10-26 12:21:14.000000 ontolearn-0.7.0/ontolearn/nces_modules.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     9218 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/nces_trainer.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     1271 2023-10-26 12:21:14.000000 ontolearn-0.7.0/ontolearn/nces_utils.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     1038 2024-01-22 12:21:41.000000 ontolearn-0.7.0/ontolearn/quality_funcs.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    56385 2024-01-22 12:21:41.000000 ontolearn-0.7.0/ontolearn/refinement_operators.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    27530 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/search.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    13689 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/tentris.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    23578 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/triple_store.py
-drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-03-07 12:45:26.771862 ontolearn-0.7.0/ontolearn/utils/
--rw-rw-r--   0 demir     (1000) demir     (1000)     6407 2024-01-22 12:21:41.000000 ontolearn-0.7.0/ontolearn/utils/__init__.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     1142 2023-10-26 12:21:14.000000 ontolearn-0.7.0/ontolearn/utils/log_config.py
--rw-rw-r--   0 demir     (1000) demir     (1000)      206 2023-10-26 12:21:14.000000 ontolearn-0.7.0/ontolearn/utils/oplogging.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     3558 2024-03-07 10:05:24.000000 ontolearn-0.7.0/ontolearn/utils/static_funcs.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     9281 2023-11-28 09:06:33.000000 ontolearn-0.7.0/ontolearn/value_splitter.py
-drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-03-07 12:45:26.767861 ontolearn-0.7.0/ontolearn.egg-info/
--rw-r--r--   0 demir     (1000) demir     (1000)    21081 2024-03-07 12:45:26.000000 ontolearn-0.7.0/ontolearn.egg-info/PKG-INFO
--rw-rw-r--   0 demir     (1000) demir     (1000)     2515 2024-03-07 12:45:26.000000 ontolearn-0.7.0/ontolearn.egg-info/SOURCES.txt
--rw-rw-r--   0 demir     (1000) demir     (1000)        1 2024-03-07 12:45:26.000000 ontolearn-0.7.0/ontolearn.egg-info/dependency_links.txt
--rw-rw-r--   0 demir     (1000) demir     (1000)       49 2024-03-07 12:45:26.000000 ontolearn-0.7.0/ontolearn.egg-info/entry_points.txt
--rw-rw-r--   0 demir     (1000) demir     (1000)      631 2024-03-07 12:45:26.000000 ontolearn-0.7.0/ontolearn.egg-info/requires.txt
--rw-rw-r--   0 demir     (1000) demir     (1000)       16 2024-03-07 12:45:26.000000 ontolearn-0.7.0/ontolearn.egg-info/top_level.txt
--rw-rw-r--   0 demir     (1000) demir     (1000)       90 2023-10-24 13:10:39.000000 ontolearn-0.7.0/pyproject.toml
--rw-rw-r--   0 demir     (1000) demir     (1000)       38 2024-03-07 12:45:26.783862 ontolearn-0.7.0/setup.cfg
--rw-rw-r--   0 demir     (1000) demir     (1000)     1993 2024-03-07 10:05:24.000000 ontolearn-0.7.0/setup.py
-drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-03-07 12:45:26.779862 ontolearn-0.7.0/tests/
--rw-rw-r--   0 demir     (1000) demir     (1000)        0 2023-10-24 13:10:39.000000 ontolearn-0.7.0/tests/__init__.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     1293 2024-01-22 12:21:41.000000 ontolearn-0.7.0/tests/test_base.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     7792 2024-01-22 12:21:41.000000 ontolearn-0.7.0/tests/test_base_concept_learner.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     6919 2023-12-03 14:05:27.000000 ontolearn-0.7.0/tests/test_celoe.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     1058 2024-01-22 12:21:41.000000 ontolearn-0.7.0/tests/test_concept.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     6123 2023-11-28 09:06:33.000000 ontolearn-0.7.0/tests/test_core_owl_hierarchy.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     4536 2023-11-28 09:06:33.000000 ontolearn-0.7.0/tests/test_core_utils_length.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     3065 2024-03-07 10:05:24.000000 ontolearn-0.7.0/tests/test_evolearner.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     2187 2024-01-22 12:21:41.000000 ontolearn-0.7.0/tests/test_express_refinement.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    40252 2024-03-07 10:05:24.000000 ontolearn-0.7.0/tests/test_knowledge_base.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     1966 2024-01-22 12:21:41.000000 ontolearn-0.7.0/tests/test_learners_regression.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     2571 2023-12-03 14:05:27.000000 ontolearn-0.7.0/tests/test_learning_problem_generator.py
--rw-rw-r--   0 demir     (1000) demir     (1000)      896 2024-03-07 10:05:24.000000 ontolearn-0.7.0/tests/test_lp_generator.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     1039 2023-10-26 12:21:14.000000 ontolearn-0.7.0/tests/test_metrics.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     4750 2024-01-22 12:21:41.000000 ontolearn-0.7.0/tests/test_model_adapter.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     1613 2023-11-28 09:06:33.000000 ontolearn-0.7.0/tests/test_owlapy.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    11164 2023-11-28 09:06:33.000000 ontolearn-0.7.0/tests/test_owlapy_cnf_dnf.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    22391 2023-11-28 09:06:33.000000 ontolearn-0.7.0/tests/test_owlapy_fastinstancechecker.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    18138 2023-11-28 09:06:33.000000 ontolearn-0.7.0/tests/test_owlapy_nnf.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    21675 2023-11-28 09:06:33.000000 ontolearn-0.7.0/tests/test_owlapy_owl2sparql_converter.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    46794 2023-11-28 09:06:33.000000 ontolearn-0.7.0/tests/test_owlapy_owlready2.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    29978 2023-11-28 09:06:33.000000 ontolearn-0.7.0/tests/test_owlapy_parser.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     8586 2023-11-28 09:06:33.000000 ontolearn-0.7.0/tests/test_owlapy_render.py
--rw-rw-r--   0 demir     (1000) demir     (1000)    18459 2023-11-28 09:06:33.000000 ontolearn-0.7.0/tests/test_refinement_operators.py
--rw-rw-r--   0 demir     (1000) demir     (1000)     3232 2023-11-28 09:06:33.000000 ontolearn-0.7.0/tests/test_value_splitter.py
+drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-05-08 18:33:31.514563 ontolearn-0.7.1/
+-rw-rw-r--   0 demir     (1000) demir     (1000)     1068 2024-05-08 18:13:16.000000 ontolearn-0.7.1/LICENSE
+-rw-r--r--   0 demir     (1000) demir     (1000)    24210 2024-05-08 18:33:31.514563 ontolearn-0.7.1/PKG-INFO
+-rw-rw-r--   0 demir     (1000) demir     (1000)    21183 2024-05-08 18:13:16.000000 ontolearn-0.7.1/README.md
+drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-05-08 18:33:31.498563 ontolearn-0.7.1/ontolearn/
+-rw-rw-r--   0 demir     (1000) demir     (1000)       22 2024-05-08 18:30:41.000000 ontolearn-0.7.1/ontolearn/__init__.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    19888 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/abstracts.py
+drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-05-08 18:33:31.498563 ontolearn-0.7.1/ontolearn/base/
+-rw-rw-r--   0 demir     (1000) demir     (1000)      713 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/base/__init__.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    44775 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/base/_base.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    31941 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/base/axioms.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     5234 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/base/complex_ce_instances.py
+drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-05-08 18:33:31.498563 ontolearn-0.7.1/ontolearn/base/ext/
+-rw-rw-r--   0 demir     (1000) demir     (1000)     4123 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/base/ext/__init__.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    26591 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/base/fast_instance_checker.py
+drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-05-08 18:33:31.502563 ontolearn-0.7.1/ontolearn/base/owl/
+-rw-rw-r--   0 demir     (1000) demir     (1000)       20 2023-11-28 09:06:33.000000 ontolearn-0.7.1/ontolearn/base/owl/__init__.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    17074 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/base/owl/hierarchy.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    24273 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/base/owl/utils.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     4197 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/base/plus.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    16181 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/base/utils.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    26194 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/base_concept_learner.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     4063 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/base_nces.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    13318 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/binders.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     4634 2024-03-07 10:05:24.000000 ontolearn-0.7.1/ontolearn/clip_architectures.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     6420 2024-03-07 10:05:24.000000 ontolearn-0.7.1/ontolearn/clip_trainer.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    10059 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/concept_generator.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    82774 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/concept_learner.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    11404 2024-03-07 10:05:24.000000 ontolearn-0.7.1/ontolearn/data_struct.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     8529 2023-10-26 12:21:14.000000 ontolearn-0.7.1/ontolearn/ea_algorithms.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    14033 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/ea_initialization.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     6358 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/ea_utils.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     7940 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/experiments.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)      647 2023-10-26 12:21:14.000000 ontolearn-0.7.1/ontolearn/fitness_functions.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     6031 2024-01-22 12:21:41.000000 ontolearn-0.7.1/ontolearn/heuristics.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    54576 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/knowledge_base.py
+drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-05-08 18:33:31.502563 ontolearn-0.7.1/ontolearn/learners/
+-rw-rw-r--   0 demir     (1000) demir     (1000)       55 2024-01-22 12:21:41.000000 ontolearn-0.7.1/ontolearn/learners/__init__.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    42302 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/learners/drill.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)      117 2024-01-22 12:21:41.000000 ontolearn-0.7.1/ontolearn/learners/nero.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    23171 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/learners/tree_learner.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     2749 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/learning_problem.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    21357 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/learning_problem_generator.py
+drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-05-08 18:33:31.502563 ontolearn-0.7.1/ontolearn/lp_generator/
+-rw-rw-r--   0 demir     (1000) demir     (1000)       80 2024-03-07 10:05:24.000000 ontolearn-0.7.1/ontolearn/lp_generator/__init__.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     1583 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/lp_generator/generate_data.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     8786 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/lp_generator/helper_classes.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     3073 2024-03-23 09:15:26.000000 ontolearn-0.7.1/ontolearn/metrics.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    16548 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/model_adapter.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     3592 2023-10-26 12:21:14.000000 ontolearn-0.7.1/ontolearn/nces_architectures.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     2436 2023-10-26 12:21:14.000000 ontolearn-0.7.1/ontolearn/nces_modules.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     9218 2024-03-07 10:05:24.000000 ontolearn-0.7.1/ontolearn/nces_trainer.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     1271 2023-10-26 12:21:14.000000 ontolearn-0.7.1/ontolearn/nces_utils.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     1038 2024-01-22 12:21:41.000000 ontolearn-0.7.1/ontolearn/quality_funcs.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    53841 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/refinement_operators.py
+drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-05-08 18:33:31.502563 ontolearn-0.7.1/ontolearn/scripts/
+-rw-rw-r--   0 demir     (1000) demir     (1000)        0 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/scripts/__init__.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     5179 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/scripts/run.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    27832 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/search.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    13828 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/tentris.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    41477 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/triple_store.py
+drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-05-08 18:33:31.502563 ontolearn-0.7.1/ontolearn/utils/
+-rw-rw-r--   0 demir     (1000) demir     (1000)     6545 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/utils/__init__.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     1142 2023-10-26 12:21:14.000000 ontolearn-0.7.1/ontolearn/utils/log_config.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)      206 2023-10-26 12:21:14.000000 ontolearn-0.7.1/ontolearn/utils/oplogging.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     7259 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/utils/static_funcs.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     9352 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/value_splitter.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)      907 2024-05-08 18:13:16.000000 ontolearn-0.7.1/ontolearn/verbalizer.py
+drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-05-08 18:33:31.510563 ontolearn-0.7.1/ontolearn.egg-info/
+-rw-r--r--   0 demir     (1000) demir     (1000)    24210 2024-05-08 18:33:31.000000 ontolearn-0.7.1/ontolearn.egg-info/PKG-INFO
+-rw-rw-r--   0 demir     (1000) demir     (1000)     2576 2024-05-08 18:33:31.000000 ontolearn-0.7.1/ontolearn.egg-info/SOURCES.txt
+-rw-rw-r--   0 demir     (1000) demir     (1000)        1 2024-05-08 18:33:31.000000 ontolearn-0.7.1/ontolearn.egg-info/dependency_links.txt
+-rw-rw-r--   0 demir     (1000) demir     (1000)       68 2024-05-08 18:33:31.000000 ontolearn-0.7.1/ontolearn.egg-info/entry_points.txt
+-rw-rw-r--   0 demir     (1000) demir     (1000)      916 2024-05-08 18:33:31.000000 ontolearn-0.7.1/ontolearn.egg-info/requires.txt
+-rw-rw-r--   0 demir     (1000) demir     (1000)       16 2024-05-08 18:33:31.000000 ontolearn-0.7.1/ontolearn.egg-info/top_level.txt
+-rw-rw-r--   0 demir     (1000) demir     (1000)       90 2023-10-24 13:10:39.000000 ontolearn-0.7.1/pyproject.toml
+-rw-rw-r--   0 demir     (1000) demir     (1000)       38 2024-05-08 18:33:31.514563 ontolearn-0.7.1/setup.cfg
+-rw-rw-r--   0 demir     (1000) demir     (1000)     2735 2024-05-08 18:13:16.000000 ontolearn-0.7.1/setup.py
+drwxrwxr-x   0 demir     (1000) demir     (1000)        0 2024-05-08 18:33:31.510563 ontolearn-0.7.1/tests/
+-rw-rw-r--   0 demir     (1000) demir     (1000)        0 2023-10-24 13:10:39.000000 ontolearn-0.7.1/tests/__init__.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     1300 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_base.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     7897 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_base_concept_learner.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     6996 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_celoe.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     1093 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_concept.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     6164 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_core_owl_hierarchy.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     4696 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_core_utils_length.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     3121 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_evolearner.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     2254 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_express_refinement.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    40418 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_knowledge_base.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     3369 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_learners_regression.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     2571 2023-12-03 14:05:27.000000 ontolearn-0.7.1/tests/test_learning_problem_generator.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)      896 2024-03-07 10:05:24.000000 ontolearn-0.7.1/tests/test_lp_generator.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     1039 2023-10-26 12:21:14.000000 ontolearn-0.7.1/tests/test_metrics.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     4737 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_model_adapter.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     1646 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_owlapy.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    11257 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_owlapy_cnf_dnf.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    22699 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_owlapy_fastinstancechecker.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    18298 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_owlapy_nnf.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    47074 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_owlapy_owlready2.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    30230 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_owlapy_parser.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     8820 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_owlapy_render.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)    18591 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_refinement_operators.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     5067 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_tdl_regression.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     3019 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_triplestore.py
+-rw-rw-r--   0 demir     (1000) demir     (1000)     3274 2024-05-08 18:13:16.000000 ontolearn-0.7.1/tests/test_value_splitter.py
```

### Comparing `ontolearn-0.7.0/PKG-INFO` & `ontolearn-0.7.1/PKG-INFO`

 * *Files 13% similar despite different names*

```diff
@@ -1,167 +1,230 @@
 Metadata-Version: 2.1
 Name: ontolearn
-Version: 0.7.0
+Version: 0.7.1
 Summary: Ontolearn is an open-source software library for structured machine learning in Python. Ontolearn includes modules for processing knowledge bases, inductive logic programming and ontology engineering.
 Home-page: https://github.com/dice-group/Ontolearn
 Author: Caglar Demir
 Author-email: caglardemir8@gmail.com
-Classifier: Programming Language :: Python :: 3.8
-Classifier: License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)
+Classifier: Programming Language :: Python :: 3.10
+Classifier: License :: OSI Approved :: MIT License
 Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
-Requires-Python: >=3.9.18
+Requires-Python: >=3.10.13
 Description-Content-Type: text/markdown
 License-File: LICENSE
 Requires-Dist: matplotlib>=3.3.4
-Requires-Dist: torch>=1.7.1
+Requires-Dist: torch<2.2.0,>=1.7.1
 Requires-Dist: rdflib>=6.0.2
 Requires-Dist: pandas>=1.5.0
 Requires-Dist: sortedcontainers>=2.4.0
 Requires-Dist: owlready2>=0.40
-Requires-Dist: owlapy==0.1.1
+Requires-Dist: owlapy==1.0.2
 Requires-Dist: flask>=1.1.2
 Requires-Dist: tqdm>=4.64.0
 Requires-Dist: transformers>=4.38.1
-Requires-Dist: dicee==0.1.2
+Requires-Dist: dicee>=0.1.2
 Requires-Dist: deap>=1.3.1
+Requires-Dist: fastapi>=0.110.1
+Requires-Dist: uvicorn>=0.29.0
 Provides-Extra: min
 Requires-Dist: matplotlib>=3.3.4; extra == "min"
-Requires-Dist: torch>=1.7.1; extra == "min"
+Requires-Dist: torch<2.2.0,>=1.7.1; extra == "min"
 Requires-Dist: rdflib>=6.0.2; extra == "min"
 Requires-Dist: pandas>=1.5.0; extra == "min"
 Requires-Dist: sortedcontainers>=2.4.0; extra == "min"
 Requires-Dist: owlready2>=0.40; extra == "min"
-Requires-Dist: owlapy==0.1.1; extra == "min"
+Requires-Dist: owlapy==1.0.2; extra == "min"
 Requires-Dist: flask>=1.1.2; extra == "min"
 Requires-Dist: tqdm>=4.64.0; extra == "min"
 Requires-Dist: transformers>=4.38.1; extra == "min"
-Requires-Dist: dicee==0.1.2; extra == "min"
+Requires-Dist: dicee>=0.1.2; extra == "min"
 Requires-Dist: deap>=1.3.1; extra == "min"
+Requires-Dist: fastapi>=0.110.1; extra == "min"
+Requires-Dist: uvicorn>=0.29.0; extra == "min"
+Provides-Extra: doc
+Requires-Dist: sphinx>=7.2.6; extra == "doc"
+Requires-Dist: sphinx-autoapi>=3.0.0; extra == "doc"
+Requires-Dist: sphinx-theme>=1.0; extra == "doc"
+Requires-Dist: sphinx_rtd_theme>=2.0.0; extra == "doc"
+Requires-Dist: sphinxcontrib-plantuml>=0.27; extra == "doc"
+Requires-Dist: plantuml-local-client>=1.2022.6; extra == "doc"
+Requires-Dist: myst-parser>=2.0.0; extra == "doc"
 Provides-Extra: full
 Requires-Dist: matplotlib>=3.3.4; extra == "full"
-Requires-Dist: torch>=1.7.1; extra == "full"
+Requires-Dist: torch<2.2.0,>=1.7.1; extra == "full"
 Requires-Dist: rdflib>=6.0.2; extra == "full"
 Requires-Dist: pandas>=1.5.0; extra == "full"
 Requires-Dist: sortedcontainers>=2.4.0; extra == "full"
 Requires-Dist: owlready2>=0.40; extra == "full"
-Requires-Dist: owlapy==0.1.1; extra == "full"
+Requires-Dist: owlapy==1.0.2; extra == "full"
 Requires-Dist: flask>=1.1.2; extra == "full"
 Requires-Dist: tqdm>=4.64.0; extra == "full"
 Requires-Dist: transformers>=4.38.1; extra == "full"
-Requires-Dist: dicee==0.1.2; extra == "full"
+Requires-Dist: dicee>=0.1.2; extra == "full"
 Requires-Dist: deap>=1.3.1; extra == "full"
+Requires-Dist: fastapi>=0.110.1; extra == "full"
+Requires-Dist: uvicorn>=0.29.0; extra == "full"
 Requires-Dist: httpx>=0.25.2; extra == "full"
 Requires-Dist: pytest>=7.2.2; extra == "full"
 Requires-Dist: gradio>=4.11.0; extra == "full"
 Requires-Dist: ontosample>=0.2.2; extra == "full"
 
-# Ontolearn
+# Ontolearn: Learning OWL Class Expression
 
-*Ontolearn* is an open-source software library for description logic learning problem.
-Find more in the [Documentation](https://ontolearn-docs-dice-group.netlify.app/usage/01_introduction).
+*Ontolearn* is an open-source software library for learning owl class expressions at large scale.
+
+Given positive and negative [OWL named individual](https://www.w3.org/TR/owl2-syntax/#Individuals) examples
+$E^+$ and $E^-$, learning [OWL Class expression](https://www.w3.org/TR/owl2-syntax/#Class_Expressions) problem refers to the following supervised Machine Learning problem
+
+$$\forall p \in E^+\ \mathcal{K} \models H(p) \wedge \forall n \in E^-\ \mathcal{K} \not \models H(n).$$
 
-Learning algorithms: 
+To tackle this supervised learnign problem, ontolearn offers many symbolic, neuro-sybmoloc and deep learning based Learning algorithms: 
 - **Drill** &rarr; [Neuro-Symbolic Class Expression Learning](https://www.ijcai.org/proceedings/2023/0403.pdf)
 - **EvoLearner** &rarr; [EvoLearner: Learning Description Logics with Evolutionary Algorithms](https://dl.acm.org/doi/abs/10.1145/3485447.3511925)
 - **NCES2** &rarr; (soon) [Neural Class Expression Synthesis in ALCHIQ(D)](https://papers.dice-research.org/2023/ECML_NCES2/NCES2_public.pdf)
 - **NCES** &rarr; [Neural Class Expression Synthesis](https://link.springer.com/chapter/10.1007/978-3-031-33455-9_13) 
 - **NERO** &rarr; (soon) [Learning Permutation-Invariant Embeddings for Description Logic Concepts](https://link.springer.com/chapter/10.1007/978-3-031-30047-9_9)
 - **CLIP** &rarr; [Learning Concept Lengths Accelerates Concept Learning in ALC](https://link.springer.com/chapter/10.1007/978-3-031-06981-9_14)
 - **CELOE** &rarr; [Class Expression Learning for Ontology Engineering](https://www.sciencedirect.com/science/article/abs/pii/S1570826811000023)
 - **OCEL** &rarr; A limited version of CELOE
 
+Find more in the [Documentation](https://ontolearn-docs-dice-group.netlify.app/usage/01_introduction).
+
 ## Installation
 
 ```shell
 pip install ontolearn 
 ```
 or
 ```shell
 git clone https://github.com/dice-group/Ontolearn.git 
-python -m venv venv && source venv/bin/activate # for Windows use: .\venv\Scripts\activate 
-pip install -r requirements.txt
+# To create a virtual python env with conda 
+conda create -n venv python=3.10.14 --no-default-packages && conda activate venv && pip install -e .
+# To download knowledge graphs
 wget https://files.dice-research.org/projects/Ontolearn/KGs.zip -O ./KGs.zip && unzip KGs.zip
 ```
-
 ```shell
-pytest -p no:warnings -x # Running 158 tests takes ~ 3 mins
+pytest -p no:warnings -x # Running 171 tests takes ~ 6 mins
 ```
 
-## Description Logic Concept Learning 
+## Learning OWL Class Expression
 ```python
-from ontolearn.concept_learner import CELOE
-from ontolearn.knowledge_base import KnowledgeBase
+from ontolearn.learners import TDL
+from ontolearn.triple_store import TripleStore
 from ontolearn.learning_problem import PosNegLPStandard
-from ontolearn.search import EvoLearnerNode
-from owlapy.model import OWLClass, OWLClassAssertionAxiom, OWLNamedIndividual, IRI, OWLObjectProperty, OWLObjectPropertyAssertionAxiom
-from owlapy.render import DLSyntaxObjectRenderer
-# (1) Load a knowledge graph.
-kb = KnowledgeBase(path='KGs/father.owl')
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy import owl_expression_to_sparql, owl_expression_to_dl
+# (1) Initialize Triplestore
+# sudo docker run -p 3030:3030 -e ADMIN_PASSWORD=pw123 stain/jena-fuseki
+# Login http://localhost:3030/#/ with admin and pw123
+# Create a new dataset called family and upload KGs/Family/family.owl
+kb = TripleStore(url="http://localhost:3030/family")
 # (2) Initialize a learner.
-model = CELOE(knowledge_base=kb)
+model = TDL(knowledge_base=kb)
 # (3) Define a description logic concept learning problem.
-lp = PosNegLPStandard(pos={OWLNamedIndividual(IRI.create("http://example.com/father#stefan")),
-                           OWLNamedIndividual(IRI.create("http://example.com/father#markus")),
-                           OWLNamedIndividual(IRI.create("http://example.com/father#martin"))},
-                      neg={OWLNamedIndividual(IRI.create("http://example.com/father#heinz")),
-                           OWLNamedIndividual(IRI.create("http://example.com/father#anna")),
-                           OWLNamedIndividual(IRI.create("http://example.com/father#michelle"))})
+lp = PosNegLPStandard(pos={OWLNamedIndividual("http://example.com/father#stefan")},
+                      neg={OWLNamedIndividual("http://example.com/father#heinz"),
+                           OWLNamedIndividual("http://example.com/father#anna"),
+                           OWLNamedIndividual("http://example.com/father#michelle")})
 # (4) Learn description logic concepts best fitting (3).
-dl_classifiers=model.fit(learning_problem=lp).best_hypotheses(2)
+h = model.fit(learning_problem=lp).best_hypotheses()
+print(h)
+print(owl_expression_to_dl(h))
+print(owl_expression_to_sparql(expression=h))
+```
 
-# (5) Inference over unseen individuals
-namespace = 'http://example.com/father#'
-# (6) New Individuals
-julia = OWLNamedIndividual(IRI.create(namespace, 'julia'))
-julian = OWLNamedIndividual(IRI.create(namespace, 'julian'))
-thomas = OWLNamedIndividual(IRI.create(namespace, 'thomas'))
-# (7) OWLClassAssertionAxiom  about (6)
-male = OWLClass(IRI.create(namespace, 'male'))
-female = OWLClass(IRI.create(namespace, 'female'))
-axiom1 = OWLClassAssertionAxiom(individual=julia, class_expression=female)
-axiom2 = OWLClassAssertionAxiom(individual=julian, class_expression=male)
-axiom3 = OWLClassAssertionAxiom(individual=thomas, class_expression=male)
-# (8) OWLObjectPropertyAssertionAxiom about (6)
-has_child = OWLObjectProperty(IRI.create(namespace, 'hasChild'))
-# Existing Individuals
-anna = OWLNamedIndividual(IRI.create(namespace, 'anna'))
-markus = OWLNamedIndividual(IRI.create(namespace, 'markus'))
-michelle = OWLNamedIndividual(IRI.create(namespace, 'michelle'))
-axiom4 = OWLObjectPropertyAssertionAxiom(subject=thomas, property_=has_child, object_=julian)
-axiom5 = OWLObjectPropertyAssertionAxiom(subject=julia, property_=has_child, object_=julian)
-
-# 4. Use loaded class expressions for predictions
-predictions = model.predict(individuals=[julia, julian, thomas, anna, markus, michelle],
-                            axioms=[axiom1, axiom2, axiom3, axiom4, axiom5],
-                            hypotheses=dl_classifiers)
-print(predictions)
-"""
-          (¬female) ⊓ (∃ hasChild.⊤)  male
-julia                            0.0   0.0
-julian                           0.0   1.0
-thomas                           1.0   1.0
-anna                             0.0   0.0
-markus                           1.0   1.0
-michelle                         0.0   0.0
-"""
+## Learning OWL Class Expression over DBpedia
+```python
+from ontolearn.utils.static_funcs import save_owl_class_expressions
+
+# (1) Initialize Triplestore
+kb = TripleStore(url="http://dice-dbpedia.cs.upb.de:9080/sparql")
+# (3) Initialize a learner.
+model = TDL(knowledge_base=kb)
+# (4) Define a description logic concept learning problem.
+lp = PosNegLPStandard(pos={OWLNamedIndividual("http://dbpedia.org/resource/Angela_Merkel")},
+                      neg={OWLNamedIndividual("http://dbpedia.org/resource/Barack_Obama")})
+# (5) Learn description logic concepts best fitting (4).
+h = model.fit(learning_problem=lp).best_hypotheses()
+print(h)
+print(owl_expression_to_dl(h))
+print(owl_expression_to_sparql(expression=h))
+save_owl_class_expressions(expressions=h,path="owl_prediction")
 ```
 
 Fore more please refer to  the [examples](https://github.com/dice-group/Ontolearn/tree/develop/examples) folder.
 
+## ontolearn-webservice 
+
+<details><summary> Click me! </summary>
+
+Load an RDF knowledge graph 
+```shell
+ontolearn-webservice --path_knowledge_base KGs/Mutagenesis/mutagenesis.owl
+```
+or launch a Tentris instance https://github.com/dice-group/tentris over Mutagenesis.
+```shell
+ontolearn-webservice --endpoint_triple_store http://0.0.0.0:9080/sparql
+```
+The below code trains DRILL with 6 randomly generated learning problems
+provided that **path_to_pretrained_drill** does not lead to a directory containing pretrained DRILL.
+Thereafter, trained DRILL is saved in the directory **path_to_pretrained_drill**.
+Finally, trained DRILL will learn an OWL class expression.
+```python
+import json
+import requests
+with open(f"LPs/Mutagenesis/lps.json") as json_file:
+    learning_problems = json.load(json_file)["problems"]
+for str_target_concept, examples in learning_problems.items():
+    response = requests.get('http://0.0.0.0:8000/cel',
+                            headers={'accept': 'application/json', 'Content-Type': 'application/json'},
+                            json={"pos": examples['positive_examples'],
+                                  "neg": examples['negative_examples'],
+                                  "model": "Drill",
+                                  "path_embeddings": "mutagenesis_embeddings/Keci_entity_embeddings.csv",
+                                  "path_to_pretrained_drill": "pretrained_drill",
+                                  # if pretrained_drill exists, upload, otherwise train one and save it there
+                                  "num_of_training_learning_problems": 2,
+                                  "num_of_target_concepts": 3,
+                                  "max_runtime": 60000,  # seconds
+                                  "iter_bound": 1  # number of iterations/applied refinement opt.
+                                  })
+    print(response.json())  # {'Prediction': '∀ hasAtom.(¬Nitrogen-34)', 'F1': 0.7283582089552239, 'saved_prediction': 'Predictions.owl'}
+```
+TDL (a more scalable learner) can also be used as follows
+```python
+import json
+import requests
+with open(f"LPs/Mutagenesis/lps.json") as json_file:
+    learning_problems = json.load(json_file)["problems"]
+for str_target_concept, examples in learning_problems.items():
+    response = requests.get('http://0.0.0.0:8000/cel',
+                            headers={'accept': 'application/json', 'Content-Type': 'application/json'},
+                            json={"pos": examples['positive_examples'],
+                                  "neg": examples['negative_examples'],
+                                  "model": "TDL"})
+    print(response.json())
+```
+
+
+</details>
+
 ## Benchmark Results
+
+<details> <summary> To see the results </summary>
+
 ```shell
 # To download learning problems. # Benchmark learners on the Family benchmark dataset with benchmark learning problems.
 wget https://files.dice-research.org/projects/Ontolearn/LPs.zip -O ./LPs.zip && unzip LPs.zip
 ```
 
 ```shell
 # To download learning problems and benchmark learners on the Family benchmark dataset with benchmark learning problems.
 python examples/concept_learning_evaluation.py --lps LPs/Family/lps.json --kb KGs/Family/family-benchmark_rich_background.owl --max_runtime 60 --report family_results.csv  && python -c 'import pandas as pd; print(pd.read_csv("family_results.csv", index_col=0).to_markdown(floatfmt=".3f"))'
 ```
-<details> <summary> To see the results </summary>
 
 Below, we report the average results of 5 runs.
 Each model has 60 second to find a fitting answer. DRILL results are obtained by using F1 score as heuristic function.
 Note that F1 scores denote the quality of the find/constructed concept w.r.t. E^+ and E^-.
 
 ### Family Benchmark Results
 
@@ -208,14 +271,16 @@
 
 Use `python examples/concept_learning_cv_evaluation.py` to apply stratified k-fold cross validation on learning problems. 
 
 </details>
 
 ## Deployment 
 
+<details> <summary> To see the results </summary>
+
 ```shell
 pip install gradio # (check `pip show gradio` first)
 ```
 
 Available models to deploy: **EvoLearner**, **NCES**, **CELOE** and **OCEL**.
 To deploy **EvoLearner** on the **Family** knowledge graph:
 ```shell
@@ -223,15 +288,29 @@
 ```
 Run the help command to see the description on this script usage:
 
 ```shell
 python deploy_cl.py --help
 ```
 
-### Citing
+</details>
+
+## Development
+
+<details> <summary> To see the results </summary>
+  
+Creating a feature branch **refactoring** from development branch
+
+```shell
+git branch refactoring develop
+```
+
+</details>
+
+## References
 Currently, we are working on our manuscript describing our framework. 
 If you find our work useful in your research, please consider citing the respective paper:
 ```
 # DRILL
 @inproceedings{demir2023drill,
   author = {Demir, Caglar and Ngomo, Axel-Cyrille Ngonga},
   booktitle = {The 32nd International Joint Conference on Artificial Intelligence, IJCAI 2023},
@@ -278,8 +357,8 @@
   booktitle={European Semantic Web Conference},
   pages={236--252},
   year={2022},
   publisher={Springer Nature Switzerland}
 }
 ```
 
-In case you have any question, please contact:  ```onto-learn@lists.uni-paderborn.de```
+In case you have any question, please contact: ```caglar.demir@upb.de``` or ```caglardemir8@gmail.com```
```

### Comparing `ontolearn-0.7.0/ontolearn/abstracts.py` & `ontolearn-0.7.1/ontolearn/abstracts.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,26 +1,27 @@
 """The main abstract classes."""
 
 import logging
 from abc import ABCMeta, abstractmethod
 from typing import Set, List, Tuple, Iterable, TypeVar, Generic, ClassVar, Optional
-
-from owlapy.model import OWLClassExpression, OWLOntology
+from owlapy.class_expression import OWLClassExpression
+from owlapy.owl_ontology import OWLOntology
 from owlapy.util import iter_count
 from .data_struct import Experience
 from .utils import read_csv
 from collections import OrderedDict
+
 _N = TypeVar('_N')  #:
 _KB = TypeVar('_KB', bound='AbstractKnowledgeBase')  #:
 
 logger = logging.getLogger(__name__)
 
 # @TODO:CD: Each Class definiton in abstract.py should share a prefix, e.g., BaseX or AbstractX.
 # @TODO:CD: All imports must be located on top of the script
-
+from owlapy import owl_expression_to_dl
 class EncodedLearningProblem(metaclass=ABCMeta):
     """Encoded Abstract learning problem for use in Scorers."""
     __slots__ = ()
 
 
 class EncodedPosNegLPStandardKind(EncodedLearningProblem, metaclass=ABCMeta):
     """Encoded Abstract learning problem following pos-neg lp standard."""
@@ -595,25 +596,27 @@
         self._nodes = OrderedDict(sorted_x)
 
     def best_hypotheses(self, n=10) -> List:
         assert self.search_tree is not None
         assert len(self.search_tree) > 1
         return [i for i in self.search_tree.get_top_n_nodes(n)]
 
-    def show_search_tree(self, th, top_n=10):
+    def show_search_tree(self, top_n=100):
         """
         Show search tree.
         """
-        print(f'######## {th}.step\t Top 10 nodes in Search Tree \t |Search Tree|={self.__len__()} ###########')
         predictions = list(self.get_top_n_nodes(top_n))
-        for ith, node in enumerate(predictions):
-            print(f'{ith + 1}-\t{node}')
         print('######## Search Tree ###########\n')
+        for ith, node in enumerate(predictions):
+            print(f"{ith + 1}-\t{owl_expression_to_dl(node.concept)} | Quality:{node.quality}| Heuristic:{node.heuristic}")
+        print('\n######## Search Tree ###########\n')
         return predictions
 
+
+
     def show_best_nodes(self, top_n, key=None):
         assert key
         self.sort_search_tree_by_decreasing_order(key=key)
         return self.show_search_tree('Final', top_n=top_n + 1)
 
     @staticmethod
     def save_current_top_n_nodes(key=None, n=10, path=None):
```

### Comparing `ontolearn-0.7.0/ontolearn/base/__init__.py` & `ontolearn-0.7.1/ontolearn/base/__init__.py`

 * *Files 17% similar despite different names*

```diff
@@ -1,9 +1,9 @@
 """Implementations of owlapy abstract classes based on owlready2."""
-from owlapy._utils import MOVE
+from owlapy.util import move
 from ontolearn.base._base import OWLOntologyManager_Owlready2, OWLReasoner_Owlready2, \
     OWLOntology_Owlready2, BaseReasoner_Owlready2
 from ontolearn.base.complex_ce_instances import OWLReasoner_Owlready2_ComplexCEInstances
 from ontolearn.base.fast_instance_checker import OWLReasoner_FastInstanceChecker
-MOVE(OWLOntologyManager_Owlready2, OWLReasoner_Owlready2, OWLOntology_Owlready2, BaseReasoner_Owlready2)
+move(OWLOntologyManager_Owlready2, OWLReasoner_Owlready2, OWLOntology_Owlready2, BaseReasoner_Owlready2)
 __all__ = 'OWLOntologyManager_Owlready2', 'OWLReasoner_Owlready2', 'OWLOntology_Owlready2', 'BaseReasoner_Owlready2', \
     'OWLReasoner_Owlready2_ComplexCEInstances', 'OWLReasoner_FastInstanceChecker'
```

### Comparing `ontolearn-0.7.0/ontolearn/base/_base.py` & `ontolearn-0.7.1/ontolearn/base/_base.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,27 +2,31 @@
 from datetime import date, datetime
 from enum import Enum, auto
 from itertools import chain
 from types import MappingProxyType
 from typing import Iterable, Set, Final, List
 
 import owlready2
+from owlapy.class_expression import OWLClassExpression, OWLThing, OWLClass, OWLObjectSomeValuesFrom
+from owlapy.iri import IRI
+from owlapy.owl_axiom import OWLObjectPropertyRangeAxiom, OWLAxiom, OWLObjectPropertyDomainAxiom, \
+    OWLDataPropertyRangeAxiom, OWLDataPropertyDomainAxiom, OWLClassAxiom, OWLSubClassOfAxiom, OWLEquivalentClassesAxiom
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import DoubleOWLDatatype, OWLLiteral, BooleanOWLDatatype, IntegerOWLDatatype, DateOWLDatatype, \
+    DateTimeOWLDatatype, DurationOWLDatatype, StringOWLDatatype
+from owlapy.owl_ontology import OWLOntologyID, OWLOntology
+from owlapy.owl_ontology_manager import OWLOntologyManager, OWLOntologyChange, AddImport
+from owlapy.owl_property import OWLDataProperty, OWLObjectPropertyExpression, OWLObjectInverseOf, OWLObjectProperty
 from owlready2 import declare_datatype
 from pandas import Timedelta
 
-from owlapy.owl2sparql.converter import Owl2SparqlConverter
+from owlapy.converter import Owl2SparqlConverter
 from ontolearn.base import axioms
 from owlapy import namespaces
 from ontolearn.base.ext import OWLReasonerEx
-from owlapy.model import OWLObjectPropertyRangeAxiom, OWLOntologyManager, OWLDataProperty, \
-    OWLNamedIndividual, OWLClassExpression, OWLObjectPropertyExpression, OWLOntologyID, OWLAxiom, OWLOntology, \
-    OWLOntologyChange, AddImport, OWLThing, DoubleOWLDatatype, OWLObjectPropertyDomainAxiom, OWLLiteral, \
-    OWLObjectInverseOf, BooleanOWLDatatype, IntegerOWLDatatype, DateOWLDatatype, DateTimeOWLDatatype, OWLClass, \
-    DurationOWLDatatype, StringOWLDatatype, IRI, OWLDataPropertyRangeAxiom, OWLDataPropertyDomainAxiom, OWLClassAxiom, \
-    OWLSubClassOfAxiom, OWLEquivalentClassesAxiom, OWLObjectSomeValuesFrom, OWLObjectProperty
 from ontolearn.base.utils import FromOwlready2
 
 logger = logging.getLogger(__name__)
 
 _Datatype_map: Final = MappingProxyType({
     int: IntegerOWLDatatype,
     float: DoubleOWLDatatype,
@@ -87,15 +91,15 @@
         return OWLOntology_Owlready2(self, iri, load=True)
 
     def apply_change(self, change: OWLOntologyChange):
         if isinstance(change, AddImport):
             ont_x: owlready2.namespace.Ontology = self._world.get_ontology(
                 change.get_ontology().get_ontology_id().get_ontology_iri().as_str())
             ont_x.imported_ontologies.append(
-                self._world.get_ontology(change.get_import_declaration().get_iri().as_str()))
+                self._world.get_ontology(change.get_import_declaration().str))
         else:
             # TODO XXX
             raise NotImplementedError
 
     def add_axiom(self, ontology: OWLOntology, axiom: OWLAxiom):
         axioms._add_axiom(axiom, ontology, self._world)
 
@@ -155,15 +159,15 @@
             yield OWLObjectProperty(IRI.create(op.iri))
 
     def individuals_in_signature(self) -> Iterable[OWLNamedIndividual]:
         for i in self._onto.individuals():
             yield OWLNamedIndividual(IRI.create(i.iri))
 
     def equivalent_classes_axioms(self, c: OWLClass) -> Iterable[OWLEquivalentClassesAxiom]:
-        c_x: owlready2.ThingClass = self._world[c.get_iri().as_str()]
+        c_x: owlready2.ThingClass = self._world[c.str]
         # TODO: Should this also return EquivalentClasses general class axioms? Compare to java owlapi
         for ec_x in c_x.equivalent_to:
             yield OWLEquivalentClassesAxiom([c, _parse_concept_to_owlapy(ec_x)])
 
     def general_class_axioms(self) -> Iterable[OWLClassAxiom]:
         # TODO: At the moment owlready2 only supports SubClassOf general class axioms. (18.02.2023)
         for ca in self._onto.general_class_axioms():
@@ -183,28 +187,28 @@
         else:
             version_iri = None
 
         return OWLOntologyID(IRI.create(onto_iri) if onto_iri is not None else None,
                              IRI.create(version_iri) if version_iri is not None else None)
 
     def data_property_domain_axioms(self, pe: OWLDataProperty) -> Iterable[OWLDataPropertyDomainAxiom]:
-        p_x: owlready2.DataPropertyClass = self._world[pe.get_iri().as_str()]
+        p_x: owlready2.DataPropertyClass = self._world[pe.str]
         domains = set(p_x.domains_indirect())
         if len(domains) == 0:
             yield OWLDataPropertyDomainAxiom(pe, OWLThing)
         else:
             for dom in domains:
                 if isinstance(dom, (owlready2.ThingClass, owlready2.ClassConstruct)):
                     yield OWLDataPropertyDomainAxiom(pe, _parse_concept_to_owlapy(dom))
                 else:
                     logger.warning("Construct %s not implemented at %s", dom, pe)
                     pass  # XXX TODO
 
     def data_property_range_axioms(self, pe: OWLDataProperty) -> Iterable[OWLDataPropertyRangeAxiom]:
-        p_x: owlready2.DataPropertyClass = self._world[pe.get_iri().as_str()]
+        p_x: owlready2.DataPropertyClass = self._world[pe.str]
         ranges = set(chain.from_iterable(super_prop.range for super_prop in p_x.ancestors()))
         if len(ranges) == 0:
             pass
             # TODO
         else:
             for rng in ranges:
                 if rng in _Datatype_map:
@@ -212,28 +216,28 @@
                 elif isinstance(rng, owlready2.ClassConstruct):
                     yield OWLDataPropertyRangeAxiom(pe, _parse_datarange_to_owlapy(rng))
                 else:
                     logger.warning("Datatype %s not implemented at %s", rng, pe)
                     pass  # XXX TODO
 
     def object_property_domain_axioms(self, pe: OWLObjectProperty) -> Iterable[OWLObjectPropertyDomainAxiom]:
-        p_x: owlready2.ObjectPropertyClass = self._world[pe.get_iri().as_str()]
+        p_x: owlready2.ObjectPropertyClass = self._world[pe.str]
         domains = set(p_x.domains_indirect())
         if len(domains) == 0:
             yield OWLObjectPropertyDomainAxiom(pe, OWLThing)
         else:
             for dom in domains:
                 if isinstance(dom, (owlready2.ThingClass, owlready2.ClassConstruct)):
                     yield OWLObjectPropertyDomainAxiom(pe, _parse_concept_to_owlapy(dom))
                 else:
                     logger.warning("Construct %s not implemented at %s", dom, pe)
                     pass  # XXX TODO
 
     def object_property_range_axioms(self, pe: OWLObjectProperty) -> Iterable[OWLObjectPropertyRangeAxiom]:
-        p_x: owlready2.ObjectPropertyClass = self._world[pe.get_iri().as_str()]
+        p_x: owlready2.ObjectPropertyClass = self._world[pe.str]
         ranges = set(chain.from_iterable(super_prop.range for super_prop in p_x.ancestors()))
         if len(ranges) == 0:
             yield OWLObjectPropertyRangeAxiom(pe, OWLThing)
         else:
             for rng in ranges:
                 if isinstance(rng, (owlready2.ThingClass, owlready2.ClassConstruct)):
                     yield OWLObjectPropertyRangeAxiom(pe, _parse_concept_to_owlapy(rng))
@@ -336,15 +340,15 @@
         yield from ranges - super_ranges
         if not direct:
             yield from super_ranges
 
     def equivalent_classes(self, ce: OWLClassExpression, only_named: bool = True) -> Iterable[OWLClassExpression]:
         seen_set = {ce}
         if isinstance(ce, OWLClass):
-            c_x: owlready2.ThingClass = self._world[ce.get_iri().as_str()]
+            c_x: owlready2.ThingClass = self._world[ce.str]
             for eq_x in c_x.INDIRECT_equivalent_to:
                 eq = _parse_concept_to_owlapy(eq_x)
                 if (isinstance(eq, OWLClass) or
                     (isinstance(eq, OWLClassExpression) and not only_named)) and eq not in seen_set:
                     seen_set.add(eq)
                     yield eq
                 # Workaround for problems in owlready2. It does not always recognize equivalent complex class
@@ -369,15 +373,15 @@
                             seen_set.add(e_c)
                             yield e_c
         else:
             raise ValueError(f'Equivalent classes not implemented for: {ce}')
 
     def _find_disjoint_classes(self, ce: OWLClassExpression, only_named: bool = True, seen_set=None):
         if isinstance(ce, OWLClass):
-            c_x: owlready2.ThingClass = self._world[ce.get_iri().as_str()]
+            c_x: owlready2.ThingClass = self._world[ce.str]
             for d_x in chain.from_iterable(map(lambda d: d.entities, c_x.disjoints())):
                 if d_x != c_x and (isinstance(d_x, owlready2.ThingClass) or
                                    (isinstance(d_x, owlready2.ClassConstruct) and not only_named)):
                     d_owlapy = _parse_concept_to_owlapy(d_x)
                     seen_set.add(d_owlapy)
                     yield d_owlapy
                     for c in self.equivalent_classes(d_owlapy, only_named=only_named):
@@ -400,94 +404,94 @@
         seen_set = set()
         yield from self._find_disjoint_classes(ce, only_named, seen_set)
         for c in self.super_classes(ce, only_named=only_named):
             if c != OWLClass(IRI('http://www.w3.org/2002/07/owl#', 'Thing')):
                 yield from self._find_disjoint_classes(c, only_named=only_named, seen_set=seen_set)
 
     def different_individuals(self, ind: OWLNamedIndividual) -> Iterable[OWLNamedIndividual]:
-        i: owlready2.Thing = self._world[ind.get_iri().as_str()]
+        i: owlready2.Thing = self._world[ind.str]
         yield from (OWLNamedIndividual(IRI.create(d_i.iri))
                     for d_i in chain.from_iterable(map(lambda x: x.entities, i.differents()))
                     if isinstance(d_i, owlready2.Thing) and i != d_i)
 
     def same_individuals(self, ind: OWLNamedIndividual) -> Iterable[OWLNamedIndividual]:
-        i: owlready2.Thing = self._world[ind.get_iri().as_str()]
+        i: owlready2.Thing = self._world[ind.str]
         yield from (OWLNamedIndividual(IRI.create(d_i.iri)) for d_i in i.equivalent_to
                     if isinstance(d_i, owlready2.Thing))
 
     def data_property_values(self, ind: OWLNamedIndividual, pe: OWLDataProperty, direct: bool = True) \
             -> Iterable[OWLLiteral]:
-        i: owlready2.Thing = self._world[ind.get_iri().as_str()]
-        p: owlready2.DataPropertyClass = self._world[pe.get_iri().as_str()]
+        i: owlready2.Thing = self._world[ind.str]
+        p: owlready2.DataPropertyClass = self._world[pe.str]
         retrieval_func = p._get_values_for_individual if direct else p._get_indirect_values_for_individual
         for val in retrieval_func(i):
             yield OWLLiteral(val)
 
     def all_data_property_values(self, pe: OWLDataProperty, direct: bool = True) -> Iterable[OWLLiteral]:
-        p: owlready2.DataPropertyClass = self._world[pe.get_iri().as_str()]
+        p: owlready2.DataPropertyClass = self._world[pe.str]
         relations = p.get_relations()
         if not direct:
             indirect_relations = chain.from_iterable(
-                map(lambda x: self._world[x.get_iri().as_str()].get_relations(),
+                map(lambda x: self._world[x.str].get_relations(),
                     self.sub_data_properties(pe, direct=False)))
             relations = chain(relations, indirect_relations)
         for _, val in relations:
             yield OWLLiteral(val)
 
     def object_property_values(self, ind: OWLNamedIndividual, pe: OWLObjectPropertyExpression, direct: bool = False) \
             -> Iterable[OWLNamedIndividual]:
         if isinstance(pe, OWLObjectProperty):
-            i: owlready2.Thing = self._world[ind.get_iri().as_str()]
-            p: owlready2.ObjectPropertyClass = self._world[pe.get_iri().as_str()]
+            i: owlready2.Thing = self._world[ind.str]
+            p: owlready2.ObjectPropertyClass = self._world[pe.str]
             # Recommended to use direct=False because _get_values_for_individual does not give consistent result
             # for the case when there are equivalent object properties. At least until this is fixed on owlready2.
             retieval_func = p._get_values_for_individual if direct else p._get_indirect_values_for_individual
             for val in retieval_func(i):
                 yield OWLNamedIndividual(IRI.create(val.iri))
         elif isinstance(pe, OWLObjectInverseOf):
-            p: owlready2.ObjectPropertyClass = self._world[pe.get_named_property().get_iri().as_str()]
+            p: owlready2.ObjectPropertyClass = self._world[pe.get_named_property().str]
             inverse_p = p.inverse_property
             # If the inverse property is explicitly defined we can take shortcut
             if inverse_p is not None:
                 yield from self.object_property_values(ind, OWLObjectProperty(IRI.create(inverse_p.iri)), direct)
             else:
                 if not direct:
                     raise NotImplementedError('Indirect values of inverse properties are only implemented if the '
                                               'inverse property is explicitly defined in the ontology.'
                                               f'Property: {pe}')
-                i: owlready2.Thing = self._world[ind.get_iri().as_str()]
+                i: owlready2.Thing = self._world[ind.str]
                 for val in p._get_inverse_values_for_individual(i):
                     yield OWLNamedIndividual(IRI.create(val.iri))
         else:
             raise NotImplementedError(pe)
 
     def flush(self) -> None:
         pass
 
     def instances(self, ce: OWLClassExpression, direct: bool = False) -> Iterable[OWLNamedIndividual]:
         if direct:
             if isinstance(ce, OWLClass):
-                c_x: owlready2.ThingClass = self._world[ce.get_iri().as_str()]
+                c_x: owlready2.ThingClass = self._world[ce.str]
                 for i in self._ontology._onto.get_instances_of(c_x):
                     if isinstance(i, owlready2.Thing):
                         yield OWLNamedIndividual(IRI.create(i.iri))
             else:
                 raise NotImplementedError("instances for complex class expressions not implemented", ce)
         else:
             if ce.is_owl_thing():
                 yield from self._ontology.individuals_in_signature()
             elif isinstance(ce, OWLClass):
-                c_x: owlready2.ThingClass = self._world[ce.get_iri().as_str()]
+                c_x: owlready2.ThingClass = self._world[ce.str]
                 for i in c_x.instances(world=self._world):
                     if isinstance(i, owlready2.Thing):
                         yield OWLNamedIndividual(IRI.create(i.iri))
             # elif isinstance(ce, OWLObjectSomeValuesFrom) and ce.get_filler().is_owl_thing()\
             #         and isinstance(ce.get_property(), OWLProperty):
             #     seen_set = set()
-            #     p_x: owlready2.ObjectProperty = self._world[ce.get_property().get_named_property().get_iri().as_str()]
+            #     p_x: owlready2.ObjectProperty = self._world[ce.get_property().get_named_property().str]
             #     for i, _ in p_x.get_relations():
             #         if isinstance(i, owlready2.Thing) and i not in seen_set:
             #             seen_set.add(i)
             #             yield OWLNamedIndividual(IRI.create(i.iri))
             else:
                 raise NotImplementedError("instances for complex class expressions not implemented", ce)
 
@@ -506,15 +510,15 @@
                         and axiom.get_sub_class() not in seen_set):
                     seen_set.add(axiom.get_sub_class())
                     if not only_named:
                         yield axiom.get_sub_class()
                     yield from self._sub_classes_recursive(axiom.get_sub_class(), seen_set, only_named)
 
             if isinstance(c, OWLClass):
-                c_x: owlready2.EntityClass = self._world[c.get_iri().as_str()]
+                c_x: owlready2.EntityClass = self._world[c.str]
                 # Subclasses will only return named classes
                 for sc_x in c_x.subclasses(world=self._world):
                     sc = _parse_concept_to_owlapy(sc_x)
                     if isinstance(sc, OWLClass) and sc not in seen_set:
                         seen_set.add(sc)
                         yield sc
                         yield from self._sub_classes_recursive(sc, seen_set, only_named=only_named)
@@ -545,15 +549,15 @@
             # First go through all general class axioms, they should only have complex classes as sub_classes.
             # Done for OWLClass and OWLClassExpression.
             if not only_named:
                 for axiom in self._ontology.general_class_axioms():
                     if isinstance(axiom, OWLSubClassOfAxiom) and axiom.get_super_class() == ce:
                         yield axiom.get_sub_class()
             if isinstance(ce, OWLClass):
-                c_x: owlready2.ThingClass = self._world[ce.get_iri().as_str()]
+                c_x: owlready2.ThingClass = self._world[ce.str]
                 # Subclasses will only return named classes
                 for sc in c_x.subclasses(world=self._world):
                     if isinstance(sc, owlready2.ThingClass):
                         yield OWLClass(IRI.create(sc.iri))
             elif isinstance(ce, OWLClassExpression):
                 # Slow but works. No better way to do this in owlready2 without using the reasoners at the moment.
                 for c in self._ontology.classes_in_signature():
@@ -566,15 +570,15 @@
             -> Iterable[OWLClassExpression]:
         # work around issue in class equivalence detection in Owlready2
         for c in [ce, *self.equivalent_classes(ce, only_named=False)]:
             if c not in seen_set:
                 seen_set.add(c)
                 yield c
             if isinstance(c, OWLClass):
-                c_x: owlready2.EntityClass = self._world[c.get_iri().as_str()]
+                c_x: owlready2.EntityClass = self._world[c.str]
                 for sc_x in c_x.is_a:
                     sc = _parse_concept_to_owlapy(sc_x)
                     if (isinstance(sc, OWLClass) or isinstance(sc, OWLClassExpression)) and sc not in seen_set:
                         seen_set.add(sc)
                         # Return class expression if it is a named class or complex class expressions should be
                         # included
                         if isinstance(sc, OWLClass) or not only_named:
@@ -604,15 +608,15 @@
     def super_classes(self, ce: OWLClassExpression, direct: bool = False, only_named: bool = True) \
             -> Iterable[OWLClassExpression]:
         if not direct:
             seen_set = {ce}
             yield from self._super_classes_recursive(ce, seen_set, only_named=only_named)
         else:
             if isinstance(ce, OWLClass):
-                c_x: owlready2.ThingClass = self._world[ce.get_iri().as_str()]
+                c_x: owlready2.ThingClass = self._world[ce.str]
                 for sc in c_x.is_a:
                     if (isinstance(sc, owlready2.ThingClass) or
                             (not only_named and isinstance(sc, owlready2.ClassConstruct))):
                         yield _parse_concept_to_owlapy(sc)
             elif isinstance(ce, OWLClassExpression):
                 seen_set = set()
                 for axiom in self._ontology.general_class_axioms():
@@ -628,29 +632,29 @@
                         seen_set.add(c)
                         yield c
             else:
                 raise ValueError(f'Super classes retrieval not supported for {ce}')
 
     def equivalent_object_properties(self, op: OWLObjectPropertyExpression) -> Iterable[OWLObjectPropertyExpression]:
         if isinstance(op, OWLObjectProperty):
-            p_x: owlready2.ObjectPropertyClass = self._world[op.get_iri().as_str()]
+            p_x: owlready2.ObjectPropertyClass = self._world[op.str]
             yield from (OWLObjectProperty(IRI.create(ep_x.iri)) for ep_x in p_x.INDIRECT_equivalent_to
                         if isinstance(ep_x, owlready2.ObjectPropertyClass))
         else:
             raise NotImplementedError("equivalent properties of inverse properties not yet implemented", op)
 
     def equivalent_data_properties(self, dp: OWLDataProperty) -> Iterable[OWLDataProperty]:
-        p_x: owlready2.DataPropertyClass = self._world[dp.get_iri().as_str()]
+        p_x: owlready2.DataPropertyClass = self._world[dp.str]
         yield from (OWLDataProperty(IRI.create(ep_x.iri)) for ep_x in p_x.INDIRECT_equivalent_to
                     if isinstance(ep_x, owlready2.DataPropertyClass))
 
     def _find_disjoint_object_properties(self, op: OWLObjectPropertyExpression, seen_set=None) \
             -> Iterable[OWLObjectPropertyExpression]:
         if isinstance(op, OWLObjectProperty):
-            p_x: owlready2.ObjectPropertyClass = self._world[op.get_iri().as_str()]
+            p_x: owlready2.ObjectPropertyClass = self._world[op.str]
             ont_x: owlready2.Ontology = self.get_root_ontology()._onto
             for disjoint in ont_x.disjoint_properties():
                 if p_x in disjoint.entities:
                     for o_p in disjoint.entities:
                         if isinstance(o_p, owlready2.ObjectPropertyClass) and o_p != p_x:
                             op_owlapy = OWLObjectProperty(IRI.create(o_p.iri))
                             seen_set.add(op_owlapy)
@@ -670,15 +674,15 @@
         seen_set = set()
         yield from self._find_disjoint_object_properties(op, seen_set)
         for o in self.super_object_properties(op):
             if o != OWLObjectProperty(IRI('http://www.w3.org/2002/07/owl#', 'ObjectProperty')):
                 yield from self._find_disjoint_object_properties(o, seen_set=seen_set)
 
     def _find_disjoint_data_properties(self, dp: OWLDataProperty, seen_set=None) -> Iterable[OWLDataProperty]:
-        p_x: owlready2.DataPropertyClass = self._world[dp.get_iri().as_str()]
+        p_x: owlready2.DataPropertyClass = self._world[dp.str]
         ont_x: owlready2.Ontology = self.get_root_ontology()._onto
         for disjoint in ont_x.disjoint_properties():
             if p_x in disjoint.entities:
                 for d_p in disjoint.entities:
                     if isinstance(d_p, owlready2.DataPropertyClass) and d_p != p_x:
                         dp_owlapy = OWLDataProperty(IRI.create(d_p.iri))
                         seen_set.add(dp_owlapy)
@@ -701,15 +705,15 @@
 
     def _sup_or_sub_data_properties_recursive(self, dp: OWLDataProperty, seen_set: Set, super_or_sub="") \
             -> Iterable[OWLDataProperty]:
         for d in self.equivalent_data_properties(dp):
             if d not in seen_set:
                 seen_set.add(d)
                 yield d
-        p_x: owlready2.DataPropertyClass = self._world[dp.get_iri().as_str()]
+        p_x: owlready2.DataPropertyClass = self._world[dp.str]
         assert isinstance(p_x, owlready2.DataPropertyClass)
         if super_or_sub == "super":
             dps = set(p_x.is_a)
         else:
             dps = set(p_x.subclasses(world=self._world))
         for sp_x in dps:
             if isinstance(sp_x, owlready2.DataPropertyClass):
@@ -718,15 +722,15 @@
                     seen_set.add(sp)
                     yield sp
                     yield from self._sup_or_sub_data_properties_recursive(sp, seen_set, super_or_sub)
 
     def _sup_or_sub_data_properties(self, dp: OWLDataProperty, direct: bool = False, super_or_sub=""):
         assert isinstance(dp, OWLDataProperty)
         if direct:
-            p_x: owlready2.DataPropertyClass = self._world[dp.get_iri().as_str()]
+            p_x: owlready2.DataPropertyClass = self._world[dp.str]
             if super_or_sub == "super":
                 dps = set(p_x.is_a)
             else:
                 dps = set(p_x.subclasses(world=self._world))
             for sp in dps:
                 if isinstance(sp, owlready2.DataPropertyClass):
                     yield OWLDataProperty(IRI.create(sp.iri))
@@ -752,15 +756,15 @@
         yield from self._sup_or_sub_data_properties(dp, direct, "sub")
 
     def _sup_or_sub_object_properties_recursive(self, op: OWLObjectProperty, seen_set: Set, super_or_sub=""):
         for o in self.equivalent_object_properties(op):
             if o not in seen_set:
                 seen_set.add(o)
                 yield o
-        p_x: owlready2.ObjectPropertyClass = self._world[op.get_iri().as_str()]
+        p_x: owlready2.ObjectPropertyClass = self._world[op.str]
         assert isinstance(p_x, owlready2.ObjectPropertyClass)
         if super_or_sub == "super":
             dps = set(p_x.is_a)
         else:
             dps = set(p_x.subclasses(world=self._world))
         for sp_x in dps:
             if isinstance(sp_x, owlready2.ObjectPropertyClass):
@@ -770,27 +774,27 @@
                     yield sp
                     yield from self._sup_or_sub_object_properties_recursive(sp, seen_set, super_or_sub)
 
     def _sup_or_sub_object_properties(self, op: OWLObjectPropertyExpression, direct: bool = False, super_or_sub="") \
             -> Iterable[OWLObjectPropertyExpression]:
         if isinstance(op, OWLObjectProperty):
             if direct:
-                p_x: owlready2.ObjectPropertyClass = self._world[op.get_iri().as_str()]
+                p_x: owlready2.ObjectPropertyClass = self._world[op.str]
                 if super_or_sub == "super":
                     dps = set(p_x.is_a)
                 else:
                     dps = set(p_x.subclasses(world=self._world))
                 for sp in dps:
                     if isinstance(sp, owlready2.ObjectPropertyClass):
                         yield OWLObjectProperty(IRI.create(sp.iri))
             else:
                 seen_set = set()
                 yield from self._sup_or_sub_object_properties_recursive(op, seen_set, super_or_sub)
         elif isinstance(op, OWLObjectInverseOf):
-            p: owlready2.ObjectPropertyClass = self._world[op.get_named_property().get_iri().as_str()]
+            p: owlready2.ObjectPropertyClass = self._world[op.get_named_property().str]
             inverse_p = p.inverse_property
             if inverse_p is not None:
                 yield from self._sup_or_sub_object_properties(OWLObjectProperty(IRI.create(inverse_p.iri)), direct,
                                                               super_or_sub)
             else:
                 raise NotImplementedError(f'{super_or_sub} properties of inverse properties are only implemented if the'
                                           ' inverse property is explicitly defined in the ontology. '
@@ -815,15 +819,15 @@
         yield from self._sup_or_sub_object_properties(op, direct, "super")
 
     def sub_object_properties(self, op: OWLObjectPropertyExpression, direct: bool = False) \
             -> Iterable[OWLObjectPropertyExpression]:
         yield from self._sup_or_sub_object_properties(op, direct, "sub")
 
     def types(self, ind: OWLNamedIndividual, direct: bool = False) -> Iterable[OWLClass]:
-        i: owlready2.Thing = self._world[ind.get_iri().as_str()]
+        i: owlready2.Thing = self._world[ind.str]
         if direct:
             for c in i.is_a:
                 if isinstance(c, owlready2.ThingClass):
                     yield OWLClass(IRI.create(c.iri))
                 # Anonymous classes are ignored
         else:
             for c in i.INDIRECT_is_a:
```

### Comparing `ontolearn-0.7.0/ontolearn/base/axioms.py` & `ontolearn-0.7.1/ontolearn/base/axioms.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,30 +1,33 @@
 """Logic behind adding and removing axioms."""
 from functools import singledispatch
 from itertools import islice, combinations
 import types
 from typing import cast
 
 import owlready2
+from owlapy.owl_object import OWLObject
 from owlready2 import destroy_entity, AllDisjoint, AllDifferent, GeneralClassAxiom
-
-from owlapy.model import OWLDisjointUnionAxiom, OWLQuantifiedDataRestriction, \
-    OWLAnnotationAssertionAxiom, OWLClass, OWLClassAssertionAxiom, OWLEquivalentClassesAxiom, OWLObject, \
-    OWLAnnotationProperty, OWLDataHasValue, OWLDataProperty, OWLDeclarationAxiom, OWLIndividual, \
-    OWLNamedIndividual, OWLNaryBooleanClassExpression, OWLObjectComplementOf, OWLObjectHasValue, \
-    OWLObjectInverseOf, OWLObjectOneOf, OWLObjectProperty, OWLObjectPropertyAssertionAxiom,  OWLAxiom, \
-    OWLSubClassOfAxiom, OWLSubPropertyAxiom, OWLSymmetricObjectPropertyAxiom, OWLThing, OWLOntology, \
-    OWLPropertyDomainAxiom, OWLPropertyRangeAxiom, OWLObjectPropertyRangeAxiom, OWLTransitiveObjectPropertyAxiom, \
+from owlapy.class_expression import OWLThing, OWLClass, \
+    OWLQuantifiedDataRestriction, OWLDataHasValue, OWLNaryBooleanClassExpression, OWLObjectOneOf, OWLObjectComplementOf, \
+    OWLObjectHasValue, OWLQuantifiedObjectRestriction
+from owlapy.owl_axiom import OWLObjectPropertyRangeAxiom, OWLAxiom, OWLSubClassOfAxiom, OWLEquivalentClassesAxiom, \
+    OWLDisjointUnionAxiom, OWLAnnotationAssertionAxiom, OWLAnnotationProperty, OWLSubPropertyAxiom, \
+    OWLPropertyRangeAxiom, OWLClassAssertionAxiom, OWLDeclarationAxiom, OWLObjectPropertyAssertionAxiom, \
+    OWLSymmetricObjectPropertyAxiom, OWLTransitiveObjectPropertyAxiom, OWLPropertyDomainAxiom, \
     OWLAsymmetricObjectPropertyAxiom, OWLDataPropertyCharacteristicAxiom, OWLFunctionalDataPropertyAxiom, \
-    OWLDataPropertyAssertionAxiom,  OWLReflexiveObjectPropertyAxiom, OWLFunctionalObjectPropertyAxiom, \
-    OWLInverseFunctionalObjectPropertyAxiom, OWLIrreflexiveObjectPropertyAxiom, OWLObjectPropertyCharacteristicAxiom, \
+    OWLReflexiveObjectPropertyAxiom, OWLDataPropertyAssertionAxiom, OWLFunctionalObjectPropertyAxiom, \
+    OWLObjectPropertyCharacteristicAxiom, OWLIrreflexiveObjectPropertyAxiom, OWLInverseFunctionalObjectPropertyAxiom, \
     OWLDisjointDataPropertiesAxiom, OWLDisjointObjectPropertiesAxiom, OWLEquivalentDataPropertiesAxiom, \
     OWLEquivalentObjectPropertiesAxiom, OWLInverseObjectPropertiesAxiom, OWLNaryPropertyAxiom, OWLNaryIndividualAxiom, \
-    OWLDifferentIndividualsAxiom, OWLDisjointClassesAxiom, OWLSameIndividualAxiom, OWLProperty, \
-    OWLQuantifiedObjectRestriction
+    OWLDifferentIndividualsAxiom, OWLDisjointClassesAxiom, OWLSameIndividualAxiom
+from owlapy.owl_individual import OWLNamedIndividual, OWLIndividual
+from owlapy.owl_ontology import OWLOntology
+from owlapy.owl_property import OWLDataProperty, OWLObjectInverseOf, OWLObjectProperty, \
+    OWLProperty
 from ontolearn.base.utils import ToOwlready2
 
 
 @singledispatch
 def _add_axiom(axiom: OWLAxiom):
     raise NotImplementedError(f'Axiom type {axiom} is not implemented yet.')
 
@@ -41,26 +44,26 @@
         if entity_x is not None:
             return
 
         thing_x: owlready2.entity.ThingClass = conv.map_concept(OWLThing)
         if isinstance(entity, OWLClass):
             if entity.is_owl_thing() or entity.is_owl_nothing():
                 return
-            entity_x = types.new_class(name=entity.get_iri().get_remainder(), bases=(thing_x,))
+            entity_x = types.new_class(name=entity.iri.get_remainder(), bases=(thing_x,))
         elif isinstance(entity, OWLIndividual):
-            entity_x = thing_x(entity.get_iri().get_remainder())
+            entity_x = thing_x(entity.iri.get_remainder())
         elif isinstance(entity, OWLObjectProperty):
-            entity_x = types.new_class(name=entity.get_iri().get_remainder(), bases=(owlready2.ObjectProperty,))
+            entity_x = types.new_class(name=entity.iri.get_remainder(), bases=(owlready2.ObjectProperty,))
         elif isinstance(entity, OWLDataProperty):
-            entity_x = types.new_class(name=entity.get_iri().get_remainder(), bases=(owlready2.DatatypeProperty,))
+            entity_x = types.new_class(name=entity.iri.get_remainder(), bases=(owlready2.DatatypeProperty,))
         elif isinstance(entity, OWLAnnotationProperty):
-            entity_x = types.new_class(name=entity.get_iri().get_remainder(), bases=(owlready2.AnnotationProperty,))
+            entity_x = types.new_class(name=entity.iri.get_remainder(), bases=(owlready2.AnnotationProperty,))
         else:
             raise ValueError(f'Cannot add ({entity}). Not an atomic class, property, or individual.')
-        entity_x.namespace = ont_x.get_namespace(entity.get_iri().get_namespace())
+        entity_x.namespace = ont_x.get_namespace(entity.iri.get_namespace())
         entity_x.namespace.world._refactor(entity_x.storid, entity_x.iri)
 
 
 @_add_axiom.register
 def _(axiom: OWLClassAssertionAxiom, ontology: OWLOntology, world: owlready2.namespace.World):
     conv = ToOwlready2(world)
     ont_x: owlready2.namespace.Ontology = conv.map_object(ontology)
@@ -144,16 +147,30 @@
 
     assert axiom.contains_named_equivalent_class(), 'Owlready2 does not support general' \
                                                     'class axioms for equivalent classes.'
     for ce in axiom.class_expressions():
         _check_expression(ce, ontology, world)
     with ont_x:
         for ce_1, ce_2 in combinations(axiom.class_expressions(), 2):
+            assert ce_1 is not None, f"ce_1 cannot be None: {ce_1}, {type(ce_1)}"
+            assert ce_2 is not None, f"ce_2_x cannot be None: {ce_2}, {type(ce_2)}"
+
             ce_1_x = conv.map_concept(ce_1)
             ce_2_x = conv.map_concept(ce_2)
+            try:
+                assert ce_1_x is not None, f"ce_1_x cannot be None: {ce_1_x}, {type(ce_1_x)}"
+                assert ce_2_x is not None, f"ce_2_x cannot be None: {ce_2_x}, {type(ce_2_x)}"
+            except AssertionError:
+                print("function of ToOwlready2.map_concept() returns None")
+                print(ce_1, ce_1_x)
+                print(ce_2, ce_2_x)
+                print("Axiom:", axiom)
+                print("Temporary solution is reinitializing ce_1_x=ce_2_x\n\n")
+                ce_1_x=ce_2_x
+
             if isinstance(ce_1_x, owlready2.ThingClass):
                 ce_1_x.equivalent_to.append(ce_2_x)
             if isinstance(ce_2_x, owlready2.ThingClass):
                 ce_2_x.equivalent_to.append(ce_1_x)
 
 
 @_add_axiom.register
@@ -190,17 +207,17 @@
 
     prop_x = conv.map_object(axiom.get_property())
     if prop_x is None:
         with ont_x:
             prop_x: owlready2.annotation.AnnotationPropertyClass = cast(
                 owlready2.AnnotationProperty,
                 types.new_class(
-                    name=axiom.get_property().get_iri().get_remainder(),
+                    name=axiom.get_property().iri.get_remainder(),
                     bases=(owlready2.AnnotationProperty,)))
-            prop_x.namespace = ont_x.get_namespace(axiom.get_property().get_iri().get_namespace())
+            prop_x.namespace = ont_x.get_namespace(axiom.get_property().iri.get_namespace())
     sub_x = world[axiom.get_subject().as_iri().as_str()]
     assert sub_x is not None, f'{axiom.get_subject} not found in {ontology}'
     with ont_x:
         if axiom.get_value().is_literal():
             literal = axiom.get_value().as_literal()
             setattr(sub_x, prop_x.python_name, literal.to_python())
         else:
@@ -216,15 +233,15 @@
 
     for ind in axiom.individuals():
         _add_axiom(OWLDeclarationAxiom(ind), ontology, world)
     with ont_x:
         if isinstance(axiom, OWLSameIndividualAxiom):
             for idx, ind in enumerate(axiom.individuals()):
                 ind_x = conv._to_owlready2_individual(ind)
-                for ind_2 in islice(axiom.individuals(), idx+1, None):
+                for ind_2 in islice(axiom.individuals(), idx + 1, None):
                     ind_2_x = conv._to_owlready2_individual(ind_2)
                     ind_x.equivalent_to.append(ind_2_x)
         elif isinstance(axiom, OWLDifferentIndividualsAxiom):
             AllDifferent(list(map(conv._to_owlready2_individual, axiom.individuals())))
         else:
             raise ValueError(f'OWLNaryIndividualAxiom ({axiom}) is not defined.')
 
@@ -283,15 +300,15 @@
 
     for property_ in axiom.properties():
         _add_axiom(OWLDeclarationAxiom(property_), ontology, world)
     with ont_x:
         if isinstance(axiom, (OWLEquivalentObjectPropertiesAxiom, OWLEquivalentDataPropertiesAxiom,)):
             for idx, property_ in enumerate(axiom.properties()):
                 property_x = conv._to_owlready2_property(property_)
-                for property_2 in islice(axiom.properties(), idx+1, None):
+                for property_2 in islice(axiom.properties(), idx + 1, None):
                     property_2_x = conv._to_owlready2_property(property_2)
                     property_x.equivalent_to.append(property_2_x)
         elif isinstance(axiom, (OWLDisjointObjectPropertiesAxiom, OWLDisjointDataPropertiesAxiom,)):
             AllDisjoint(list(map(conv._to_owlready2_property, axiom.properties())))
         elif isinstance(axiom, OWLInverseObjectPropertiesAxiom):
             property_first_x = conv._to_owlready2_property(axiom.get_first_property())
             property_second_x = conv._to_owlready2_property(axiom.get_second_property())
@@ -482,15 +499,15 @@
 def _(axiom: OWLAnnotationAssertionAxiom, ontology: OWLOntology, world: owlready2.namespace.World):
     conv = ToOwlready2(world)
     ont_x: owlready2.Ontology = conv.map_object(ontology)
 
     sub_x = world[axiom.get_subject().as_iri().as_str()]
     if sub_x is None:
         return
-    name = axiom.get_property().get_iri().get_remainder()
+    name = axiom.get_property().iri.get_remainder()
     with ont_x:
         if axiom.get_value().is_literal():
             o_x = axiom.get_value().as_literal().to_python()
         else:
             o_x = world[axiom.get_value().as_iri().as_str()]
 
         value = getattr(sub_x, name, None)
@@ -636,17 +653,21 @@
     with ont_x:
         property_x = conv._to_owlready2_property(axiom.get_property())
         if property_x is not None and isinstance(axiom, OWLFunctionalDataPropertyAxiom) \
                 and owlready2.FunctionalProperty in property_x.is_a:
             property_x.is_a.remove(owlready2.FunctionalProperty)
 
 
-# Creates all entities (individuals, classes, properties) that appear in the given (complex) class expression
-# and do not exist in the given ontology yet
 def _check_expression(expr: OWLObject, ontology: OWLOntology, world: owlready2.namespace.World):
+    """
+    @TODO:CD: Documentation
+    Creates all entities (individuals, classes, properties) that appear in the given (complex) class expression
+    and do not exist in the given ontology yet
+
+    """
     if isinstance(expr, (OWLClass, OWLProperty, OWLNamedIndividual,)):
         _add_axiom(OWLDeclarationAxiom(expr), ontology, world)
     elif isinstance(expr, (OWLNaryBooleanClassExpression, OWLObjectComplementOf, OWLObjectOneOf,)):
         for op in expr.operands():
             _check_expression(op, ontology, world)
     elif isinstance(expr, (OWLQuantifiedObjectRestriction, OWLObjectHasValue,)):
         _check_expression(expr.get_property(), ontology, world)
```

### Comparing `ontolearn-0.7.0/ontolearn/base/complex_ce_instances.py` & `ontolearn-0.7.1/ontolearn/base/complex_ce_instances.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,16 +1,18 @@
 """OWL Reasoner - Complex Class Expression Instances (CCEI)."""
 import logging
 import types
 from logging import warning
 from typing import Iterable, cast, Optional, List
 import os
 import owlready2
-
-from owlapy.model import OWLClass, OWLClassExpression, OWLNamedIndividual, IRI, OWLAxiom
+from owlapy.class_expression import OWLClassExpression
+from owlapy.iri import IRI
+from owlapy.owl_axiom import OWLAxiom
+from owlapy.owl_individual import OWLNamedIndividual
 from ontolearn.base import OWLReasoner_Owlready2, OWLOntology_Owlready2, BaseReasoner_Owlready2, \
     OWLOntologyManager_Owlready2
 from ontolearn.base.utils import ToOwlready2
 
 logger = logging.getLogger(__name__)
```

### Comparing `ontolearn-0.7.0/ontolearn/base/ext/__init__.py` & `ontolearn-0.7.1/ontolearn/base/ext/__init__.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,15 +1,17 @@
 """Extra classes."""
 import logging
 from abc import ABCMeta
 from typing import Iterable
 
-from owlapy.model import OWLNamedIndividual, OWLObjectProperty, OWLReasoner, OWLDataProperty, OWLDataRange, \
-    OWLLiteral
-
+from owlapy.owl_data_ranges import OWLDataRange
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import OWLLiteral
+from owlapy.owl_property import OWLObjectProperty, OWLDataProperty
+from owlapy.owl_reasoner import OWLReasoner
 
 logger = logging.getLogger(__name__)
 
 
 class OWLReasonerEx(OWLReasoner, metaclass=ABCMeta):
     """Extra convenience methods for OWL Reasoners
```

### Comparing `ontolearn-0.7.0/ontolearn/base/fast_instance_checker.py` & `ontolearn-0.7.1/ontolearn/base/fast_instance_checker.py`

 * *Files 2% similar despite different names*

```diff
@@ -4,23 +4,29 @@
 import operator
 import owlready2
 from functools import singledispatchmethod, reduce
 from itertools import repeat, chain
 from types import MappingProxyType, FunctionType
 from typing import DefaultDict, Iterable, Dict, Mapping, Set, Type, TypeVar, Optional, FrozenSet, cast
 
-from ontolearn.base import OWLReasoner_Owlready2
+from owlapy.class_expression import OWLObjectOneOf, OWLClass, OWLObjectUnionOf, OWLObjectIntersectionOf, \
+    OWLObjectSomeValuesFrom, OWLObjectComplementOf, OWLObjectAllValuesFrom, OWLDataSomeValuesFrom, \
+    OWLDatatypeRestriction, OWLClassExpression, OWLDataAllValuesFrom, OWLDataHasValue, OWLDataOneOf, \
+    OWLObjectCardinalityRestriction, OWLObjectMinCardinality, OWLObjectMaxCardinality, OWLObjectExactCardinality, \
+    OWLObjectHasValue, OWLFacetRestriction
+from owlapy.iri import IRI
+from owlapy.owl_data_ranges import OWLDataRange, OWLDataComplementOf, OWLDataIntersectionOf, OWLDataUnionOf
+from owlapy.owl_datatype import OWLDatatype
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import OWLLiteral
+from owlapy.owl_ontology import OWLOntology
+from owlapy.owl_property import OWLObjectProperty, OWLDataProperty, OWLObjectPropertyExpression, OWLObjectInverseOf, \
+    OWLDataPropertyExpression, OWLPropertyExpression
+from owlapy.owl_reasoner import OWLReasoner
 from ontolearn.base.ext import OWLReasonerEx
-from owlapy.model import OWLDataRange, OWLObjectOneOf, OWLOntology, OWLNamedIndividual, OWLClass, \
-    OWLObjectProperty, OWLDataProperty, OWLObjectUnionOf, OWLObjectIntersectionOf, OWLObjectSomeValuesFrom, \
-    OWLObjectPropertyExpression, OWLObjectComplementOf, OWLObjectAllValuesFrom, IRI, OWLObjectInverseOf, \
-    OWLDataSomeValuesFrom, OWLDataPropertyExpression, OWLDatatypeRestriction, OWLLiteral, OWLClassExpression, \
-    OWLDataComplementOf, OWLDataAllValuesFrom, OWLDatatype, OWLDataHasValue, OWLDataOneOf, OWLReasoner, \
-    OWLDataIntersectionOf, OWLDataUnionOf, OWLObjectCardinalityRestriction, OWLObjectMinCardinality, \
-    OWLObjectMaxCardinality, OWLObjectExactCardinality, OWLObjectHasValue, OWLPropertyExpression, OWLFacetRestriction
 from owlapy.util import LRUCache
 
 logger = logging.getLogger(__name__)
 
 _P = TypeVar('_P', bound=OWLPropertyExpression)
 
 
@@ -580,23 +586,23 @@
         self._cls_to_ind[c] = frozenset(temp)
 
     def _retrieve_triples(self, pe: OWLPropertyExpression) -> Iterable:
         """Retrieve all subject/object pairs for the given property."""
 
         if isinstance(pe, OWLObjectPropertyExpression):
             retrieval_func = self.sub_object_properties
-            p_x: owlready2.ObjectProperty = self._ontology._world[pe.get_named_property().get_iri().as_str()]
+            p_x: owlready2.ObjectProperty = self._ontology._world[pe.get_named_property().str]
         else:
             retrieval_func = self.sub_data_properties
-            p_x: owlready2.DataProperty = self._ontology._world[pe.get_iri().as_str()]
+            p_x: owlready2.DataProperty = self._ontology._world[pe.str]
 
         relations = p_x.get_relations()
         if self._sub_properties:
             # Retrieve the subject/object pairs for all sub properties of pe
             indirect_relations = chain.from_iterable(
-                map(lambda x: self._ontology._world[x.get_iri().as_str()].get_relations(),
+                map(lambda x: self._ontology._world[x.str].get_relations(),
                     retrieval_func(pe, direct=False)))
             # If pe is an OWLObjectInverseOf we need to swap the pairs
             if isinstance(pe, OWLObjectInverseOf):
                 indirect_relations = ((r[1], r[0]) for r in indirect_relations)
             relations = chain(relations, indirect_relations)
         yield from relations
```

### Comparing `ontolearn-0.7.0/ontolearn/base/owl/hierarchy.py` & `ontolearn-0.7.1/ontolearn/base/owl/hierarchy.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,16 +1,19 @@
 """Classes representing hierarchy in OWL."""
 
 import operator
 from abc import ABCMeta, abstractmethod
 from functools import reduce
 from typing import Dict, Iterable, Tuple, overload, TypeVar, Generic, Type, cast, Optional, FrozenSet, Set
 
-from owlapy.model import OWLClass, OWLReasoner, OWLObjectProperty, OWLDataProperty, OWLTopObjectProperty, \
-    OWLBottomObjectProperty, OWLTopDataProperty, OWLBottomDataProperty, OWLThing, OWLNothing, HasIRI
+from owlapy.class_expression import OWLClass, OWLThing, OWLNothing
+from owlapy.meta_classes import HasIRI
+from owlapy.owl_literal import OWLTopObjectProperty, OWLBottomObjectProperty, OWLTopDataProperty, OWLBottomDataProperty
+from owlapy.owl_property import OWLObjectProperty, OWLDataProperty
+from owlapy.owl_reasoner import OWLReasoner
 
 _S = TypeVar('_S', bound=HasIRI)  #:
 _U = TypeVar('_U', bound='AbstractHierarchy')  #:
 
 
 class AbstractHierarchy(Generic[_S], metaclass=ABCMeta):
     """Representation of an abstract hierarchy which can be used for classes or properties.
```

### Comparing `ontolearn-0.7.0/ontolearn/base/owl/utils.py` & `ontolearn-0.7.1/ontolearn/base/owl/utils.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,18 +1,23 @@
 from collections import Counter
 from functools import singledispatchmethod
 from typing import Iterable, Generic, TypeVar, Callable, List
-
-from owlapy.model import OWLDataRange, OWLLiteral, OWLObject, OWLClass, OWLObjectProperty, \
-    OWLObjectAllValuesFrom, OWLObjectUnionOf, OWLObjectIntersectionOf, OWLObjectComplementOf, OWLObjectInverseOf, \
-    OWLObjectCardinalityRestriction, OWLObjectHasSelf, OWLObjectHasValue, OWLObjectOneOf, OWLNamedIndividual, \
-    OWLObjectMinCardinality, OWLObjectExactCardinality, OWLObjectMaxCardinality, OWLClassExpression, OWLThing, \
-    OWLDataSomeValuesFrom, OWLDataOneOf, OWLDatatypeRestriction, OWLDataComplementOf, OWLDataAllValuesFrom, \
-    OWLDataCardinalityRestriction, OWLDatatype, OWLDataHasValue, OWLDataUnionOf, OWLDataIntersectionOf, \
-    OWLDataExactCardinality, OWLDataMaxCardinality, OWLDataMinCardinality, OWLDataProperty, OWLObjectSomeValuesFrom
+from owlapy.class_expression import OWLObjectOneOf, OWLClass, OWLObjectUnionOf, OWLObjectIntersectionOf, \
+    OWLObjectSomeValuesFrom, OWLObjectComplementOf, OWLObjectAllValuesFrom, OWLDataSomeValuesFrom, \
+    OWLDatatypeRestriction, OWLClassExpression, OWLDataAllValuesFrom, OWLDataHasValue, OWLDataOneOf, \
+    OWLObjectMinCardinality, OWLObjectMaxCardinality, OWLObjectExactCardinality, \
+    OWLObjectHasValue, OWLDataExactCardinality, OWLDataMaxCardinality, \
+    OWLDataMinCardinality, OWLObjectHasSelf, OWLObjectCardinalityRestriction, \
+    OWLDataCardinalityRestriction, OWLThing
+from owlapy.owl_data_ranges import OWLDataRange, OWLDataComplementOf, OWLDataIntersectionOf, OWLDataUnionOf
+from owlapy.owl_datatype import OWLDatatype
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import OWLLiteral
+from owlapy.owl_object import OWLObject
+from owlapy.owl_property import OWLObjectProperty, OWLDataProperty, OWLObjectInverseOf
 
 from owlapy.util import OrderedOWLObject, iter_count
 from sortedcontainers import SortedSet
 
 
 class OWLClassExpressionLengthMetric:
     """Length calculation of OWLClassExpression
```

### Comparing `ontolearn-0.7.0/ontolearn/base/plus.py` & `ontolearn-0.7.1/ontolearn/base/plus.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,15 +1,16 @@
 """OWL Reasoner Plus."""
 from typing import Iterable, Set
 
 import owlready2
 
 from owlapy import namespaces
-from owlapy.model import OWLObjectPropertyExpression, OWLObjectProperty, OWLClassExpression, OWLClass, \
-    OWLThing, IRI
+from owlapy.class_expression import OWLClassExpression, OWLClass, OWLThing
+from owlapy.iri import IRI
+from owlapy.owl_property import OWLObjectPropertyExpression, OWLObjectProperty
 from ontolearn.base import OWLReasoner_Owlready2, OWLOntology_Owlready2
 
 
 class OWLReasoner_Owlready2_Plus(OWLReasoner_Owlready2):
     """OWL Reasoner based on owlready2.
 
     Contains some behavioural fixes."""
@@ -17,26 +18,26 @@
     def __init__(self, ontology: OWLOntology_Owlready2, isolate: bool = False):
         super().__init__(ontology, isolate)
 
     def sub_classes(self, ce: OWLClassExpression, direct: bool = False, only_named: bool = True) -> Iterable[OWLClass]:
         if isinstance(ce, OWLClass):
             if direct:
                 if ce.is_owl_thing():
-                    thing_x = self._world[OWLThing.get_iri().as_str()]
+                    thing_x = self._world[OWLThing.str]
                     for c in self._ontology.classes_in_signature():
-                        c_x: owlready2.ThingClass = self._world[c.get_iri().as_str()]
+                        c_x: owlready2.ThingClass = self._world[c.str]
                         super_classes_x = []
                         for super_class_x in c_x.is_a:
                             if isinstance(super_class_x, owlready2.ThingClass):
                                 super_classes_x.append(super_class_x)
                             # elif isinstance(super_class_x, )
                         if super_classes_x == [thing_x]:
                             yield c
                 else:
-                    c_x: owlready2.ThingClass = self._world[ce.get_iri().as_str()]
+                    c_x: owlready2.ThingClass = self._world[ce.str]
                     sub_classes_x = set()
                     for sc_x in c_x.subclasses(world=self._world):
                         if isinstance(sc_x, owlready2.ThingClass):
                             if sc_x != c_x:
                                 sub_classes_x.add(sc_x)
                     # filter out indirect sub-classes
                     for sc_x in sub_classes_x.copy():
@@ -64,19 +65,19 @@
         assert isinstance(op, OWLObjectPropertyExpression)
         if isinstance(op, OWLObjectProperty):
             if direct:
                 if op.is_owl_top_object_property():
                     owl_objectproperty_x: owlready2.ObjectPropertyClass = self._world[
                         IRI.create(namespaces.OWL, "ObjectProperty").as_str()]
                     for oop in self._ontology.object_properties_in_signature():
-                        p_x: owlready2.ObjectPropertyClass = self._world[oop.get_iri().as_str()]
+                        p_x: owlready2.ObjectPropertyClass = self._world[oop.str]
                         if p_x.is_a == [owl_objectproperty_x]:
                             yield oop
                 else:
-                    p_x: owlready2.ObjectPropertyClass = self._world[op.get_iri().as_str()]
+                    p_x: owlready2.ObjectPropertyClass = self._world[op.str]
                     for sp in p_x.subclasses(world=self._world):
                         if isinstance(sp, owlready2.ObjectPropertyClass):
                             yield OWLObjectProperty(IRI.create(sp.iri))
             else:
                 seen_set = set()
                 yield from self._sub_object_properties_recursive(op, seen_set)
         else:
```

### Comparing `ontolearn-0.7.0/ontolearn/base/utils.py` & `ontolearn-0.7.1/ontolearn/base/utils.py`

 * *Files 7% similar despite different names*

```diff
@@ -1,30 +1,37 @@
 """Utils for mapping to and from owlready2."""
 from datetime import date, datetime
 from functools import singledispatchmethod
 from types import MappingProxyType
 from typing import Union
 
 import owlready2
+from owlapy.class_expression import OWLObjectOneOf, OWLClass, OWLObjectUnionOf, OWLObjectIntersectionOf, \
+    OWLObjectSomeValuesFrom, OWLObjectComplementOf, OWLObjectAllValuesFrom, OWLDataSomeValuesFrom, \
+    OWLDatatypeRestriction, OWLClassExpression, OWLDataAllValuesFrom, OWLDataHasValue, OWLDataOneOf, \
+    OWLObjectMinCardinality, OWLObjectMaxCardinality, OWLObjectExactCardinality, \
+    OWLObjectHasValue, OWLFacetRestriction, OWLObjectRestriction, OWLDataExactCardinality, OWLDataMaxCardinality, \
+    OWLDataMinCardinality, OWLRestriction, OWLDataRestriction
+from owlapy.iri import IRI
+from owlapy.owl_axiom import OWLAnnotationProperty
+from owlapy.owl_data_ranges import OWLDataRange, OWLDataComplementOf, OWLDataIntersectionOf, OWLDataUnionOf
+from owlapy.owl_datatype import OWLDatatype
+from owlapy.owl_individual import OWLNamedIndividual, OWLIndividual
+from owlapy.owl_literal import OWLLiteral, IntegerOWLDatatype, DoubleOWLDatatype, BooleanOWLDatatype, DateOWLDatatype, \
+    DateTimeOWLDatatype, DurationOWLDatatype, StringOWLDatatype
+from owlapy.owl_object import OWLObject
+from owlapy.owl_ontology import OWLOntology
+from owlapy.owl_property import OWLObjectProperty, OWLDataProperty, OWLObjectPropertyExpression, OWLObjectInverseOf, \
+    OWLDataPropertyExpression, OWLPropertyExpression
+
 from pandas import Timedelta
 
-from owlapy.model import OWLObjectMinCardinality, OWLObjectOneOf, OWLObjectRestriction, \
-    OWLObjectComplementOf, OWLObjectUnionOf, OWLObjectIntersectionOf, OWLObjectSomeValuesFrom, OWLObjectAllValuesFrom, \
-    OWLObjectPropertyExpression, OWLObject, OWLOntology, OWLAnnotationProperty, IRI, OWLObjectInverseOf, \
-    DoubleOWLDatatype, IntegerOWLDatatype, OWLClassExpression, OWLDataAllValuesFrom, OWLDataComplementOf, \
-    OWLDataIntersectionOf, OWLDataProperty, OWLDataRange, OWLDataSomeValuesFrom, OWLDataUnionOf, OWLDatatype, \
-    BooleanOWLDatatype, OWLDataHasValue, OWLDataExactCardinality, OWLDataMaxCardinality, OWLDataMinCardinality, \
-    OWLDataPropertyExpression, OWLDatatypeRestriction, OWLFacetRestriction, OWLLiteral, OWLObjectHasValue, \
-    OWLNamedIndividual, OWLObjectExactCardinality, OWLObjectMaxCardinality, OWLObjectProperty, OWLClass, \
-    DateOWLDatatype, DateTimeOWLDatatype, DurationOWLDatatype, OWLRestriction, OWLDataOneOf, OWLDataRestriction, \
-    OWLIndividual, StringOWLDatatype, OWLPropertyExpression
 
 from owlapy.vocab import OWLFacet
 
-
 OWLREADY2_FACET_KEYS = MappingProxyType({
     OWLFacet.MIN_INCLUSIVE: "min_inclusive",
     OWLFacet.MIN_EXCLUSIVE: "min_exclusive",
     OWLFacet.MAX_INCLUSIVE: "max_inclusive",
     OWLFacet.MAX_EXCLUSIVE: "max_exclusive",
     OWLFacet.LENGTH: "length",
     OWLFacet.MIN_LENGTH: "min_length",
@@ -32,15 +39,14 @@
     OWLFacet.PATTERN: "pattern",
     OWLFacet.TOTAL_DIGITS: "total_digits",
     OWLFacet.FRACTION_DIGITS: "fraction_digits"
 })
 
 
 class ToOwlready2:
-
     __slots__ = '_world'
 
     _world: owlready2.World
 
     def __init__(self, world: owlready2.World):
         """Map owlapy model classes to owlready2.
 
@@ -57,21 +63,22 @@
     @map_object.register
     def _(self, ce: OWLClassExpression) -> Union[owlready2.ClassConstruct, owlready2.ThingClass]:
         return self.map_concept(ce)
 
     @map_object.register
     def _(self, ont: OWLOntology) -> owlready2.namespace.Ontology:
         return self._world.get_ontology(
-                ont.get_ontology_id().get_ontology_iri().as_str()
-            )
+            ont.get_ontology_id().get_ontology_iri().as_str()
+        )
 
     @map_object.register
     def _(self, ap: OWLAnnotationProperty) -> owlready2.annotation.AnnotationPropertyClass:
-        return self._world[ap.get_iri().as_str()]
+        return self._world[ap.str]
 
+    # @TODO CD: map_object is buggy. and it can return None
     # single dispatch is still not implemented in mypy, see https://github.com/python/mypy/issues/2904
     @singledispatchmethod
     def map_concept(self, o: OWLClassExpression) \
             -> Union[owlready2.ClassConstruct, owlready2.ThingClass]:
         """Map owlapy concept classes."""
         raise NotImplementedError(o)
 
@@ -82,31 +89,37 @@
     @_to_owlready2_property.register
     def _(self, p: OWLObjectInverseOf):
         p_x = self._to_owlready2_property(p.get_named_property())
         return owlready2.Inverse(p_x)
 
     @_to_owlready2_property.register
     def _(self, p: OWLObjectProperty) -> owlready2.prop.ObjectPropertyClass:
-        return self._world[p.get_iri().as_str()]
+        return self._world[p.str]
 
     @_to_owlready2_property.register
     def _(self, p: OWLDataProperty) -> owlready2.prop.DataPropertyClass:
-        return self._world[p.get_iri().as_str()]
+        return self._world[p.str]
 
     @singledispatchmethod
     def _to_owlready2_individual(self, i: OWLIndividual) -> owlready2.Thing:
         raise NotImplementedError(i)
 
     @_to_owlready2_individual.register
     def _(self, i: OWLNamedIndividual):
-        return self._world[i.get_iri().as_str()]
+        return self._world[i.str]
 
     @map_concept.register
     def _(self, c: OWLClass) -> owlready2.ThingClass:
-        return self._world[c.get_iri().as_str()]
+        x = self._world[c.str]
+        try:
+            assert x is not None
+        except AssertionError:
+            print(f"The world attribute{self._world} maps {c} into None")
+
+        return x
 
     @map_concept.register
     def _(self, c: OWLObjectComplementOf) -> owlready2.class_construct.Not:
         return owlready2.Not(self.map_concept(c.get_operand()))
 
     @map_concept.register
     def _(self, ce: OWLObjectUnionOf) -> owlready2.class_construct.Or:
@@ -115,14 +128,16 @@
     @map_concept.register
     def _(self, ce: OWLObjectIntersectionOf) -> owlready2.class_construct.And:
         return owlready2.And(map(self.map_concept, ce.operands()))
 
     @map_concept.register
     def _(self, ce: OWLObjectSomeValuesFrom) -> owlready2.class_construct.Restriction:
         prop = self._to_owlready2_property(ce.get_property())
+        assert isinstance(ce.get_filler(),
+                          OWLClassExpression), f"{ce.get_filler()} is not an OWL Class expression and cannot be serialized at the moment"
         return prop.some(self.map_concept(ce.get_filler()))
 
     @map_concept.register
     def _(self, ce: OWLObjectAllValuesFrom) -> owlready2.class_construct.Restriction:
         prop = self._to_owlready2_property(ce.get_property())
         return prop.only(self.map_concept(ce.get_filler()))
```

### Comparing `ontolearn-0.7.0/ontolearn/base_concept_learner.py` & `ontolearn-0.7.1/ontolearn/base_concept_learner.py`

 * *Files 3% similar despite different names*

```diff
@@ -4,23 +4,27 @@
 import time
 from abc import ABCMeta, abstractmethod
 from typing import List, Tuple, Dict, Optional, Iterable, Generic, TypeVar, ClassVar, Final, Union, cast, Callable, Type
 import xml.etree.ElementTree as ET
 import numpy as np
 import pandas as pd
 import os
+
+from owlapy.class_expression import OWLClass, OWLClassExpression, OWLThing
+from owlapy.iri import IRI
+from owlapy.owl_axiom import OWLDeclarationAxiom, OWLEquivalentClassesAxiom, OWLAxiom
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_ontology import OWLOntology
+from owlapy.owl_ontology_manager import OWLOntologyManager, AddImport, OWLImportsDeclaration
+from owlapy.owl_reasoner import OWLReasoner
+
 from ontolearn.heuristics import CELOEHeuristic
 from ontolearn.knowledge_base import KnowledgeBase
-from ontolearn.metrics import F1, Accuracy
+from ontolearn.metrics import F1
 from ontolearn.refinement_operators import ModifiedCELOERefinement
-from ontolearn.search import _NodeQuality
-
-from owlapy.model import OWLDeclarationAxiom, OWLNamedIndividual, OWLOntologyManager, OWLOntology, AddImport,\
-    OWLImportsDeclaration, OWLClass, OWLEquivalentClassesAxiom, OWLAnnotationAssertionAxiom, OWLAnnotation, \
-    OWLAnnotationProperty, OWLLiteral, IRI, OWLClassExpression, OWLReasoner, OWLAxiom, OWLThing
 from ontolearn.base import OWLOntologyManager_Owlready2, OWLOntology_Owlready2
 from ontolearn.base import OWLReasoner_Owlready2_ComplexCEInstances
 from owlapy.render import DLSyntaxObjectRenderer
 from .abstracts import BaseRefinement, AbstractScorer, AbstractHeuristic, \
     AbstractConceptNode, AbstractLearningProblem
 from .utils import oplogging
 
@@ -29,14 +33,17 @@
 Factory = Callable
 
 logger = logging.getLogger(__name__)
 
 
 class BaseConceptLearner(Generic[_N], metaclass=ABCMeta):
     """
+    @TODO: CD: Why should this class inherit from AbstractConceptNode ?
+    @TODO: CD: This class should be redefined. An owl class expression learner does not need to be a search based model.
+
     Base class for Concept Learning approaches.
 
     Learning problem definition, Let
         * K = (TBOX, ABOX) be a knowledge base.
         * \\ALCConcepts be a set of all ALC concepts.
         * \\hypotheses be a set of ALC concepts : \\hypotheses \\subseteq \\ALCConcepts.
 
@@ -59,15 +66,15 @@
         max_runtime (int): Limit to stop the algorithm after n seconds.
         _number_of_tested_concepts (int): Yes, you got it. This stores the number of tested concepts.
         reasoner (OWLReasoner): The reasoner that this model is using.
         start_time (float): The time when :meth:`fit` starts the execution. Used to calculate the total time :meth:`fit`
                             takes to execute.
     """
     __slots__ = 'kb', 'reasoner', 'quality_func', 'max_num_of_concepts_tested', 'terminate_on_goal', 'max_runtime', \
-                'start_time', '_goal_found', '_number_of_tested_concepts'
+        'start_time', '_goal_found', '_number_of_tested_concepts'
 
     name: ClassVar[str]
 
     kb: KnowledgeBase
     quality_func: Optional[AbstractScorer]
     max_num_of_concepts_tested: Optional[int]
     terminate_on_goal: Optional[bool]
@@ -193,22 +200,23 @@
     def fit(self, *args, **kwargs):
         """Run the concept learning algorithm according to its configuration.
 
         Once finished, the results can be queried with the `best_hypotheses` function."""
         pass
 
     @abstractmethod
-    def best_hypotheses(self, n=10) -> Iterable[_N]:
+    def best_hypotheses(self, n=10) -> Iterable[OWLClassExpression]:
         """Get the current best found hypotheses according to the quality.
 
         Args:
             n: Maximum number of results.
 
         Returns:
             Iterable with hypotheses in form of search tree nodes.
+
         """
         pass
 
     def _assign_labels_to_individuals(self, individuals: List[OWLNamedIndividual],
                                       hypotheses: List[OWLClassExpression],
                                       reasoner: Optional[OWLReasoner] = None) -> np.ndarray:
         """
@@ -229,18 +237,24 @@
             kb_individuals = set(retrieval_func(hyp))  # type: ignore
             for idx_ind, ind in enumerate(individuals):
                 if ind in kb_individuals:
                     labels[idx_ind][idx_hyp] = 1
         return labels
 
     def predict(self, individuals: List[OWLNamedIndividual],
-                hypotheses: Optional[ Union[OWLClassExpression, List[Union[_N, OWLClassExpression]]]] = None,
+                hypotheses: Optional[Union[OWLClassExpression, List[Union[_N, OWLClassExpression]]]] = None,
                 axioms: Optional[List[OWLAxiom]] = None,
                 n: int = 10) -> pd.DataFrame:
-        """Creates a binary data frame showing for each individual whether it is entailed in the given hypotheses
+        """
+        @TODO: CD: Predicting an individual can be done by a retrieval function not a concept learner
+        @TODO: A concept learner learns an owl class expression.
+        @TODO: This learned expression can be used as a binary predictor.
+
+
+        Creates a binary data frame showing for each individual whether it is entailed in the given hypotheses
         (class expressions). The individuals do not have to be in the ontology/knowledge base yet. In that case,
         axioms describing these individuals must be provided.
 
         The state of the knowledge base/ontology is not changed, any provided axioms will be removed again.
 
         Args:
             individuals: A list of individuals/instances.
@@ -269,18 +283,18 @@
             for axiom in axioms:
                 manager.add_axiom(ontology, axiom)
             if reasoner is None:
                 reasoner = OWLReasoner_Owlready2_ComplexCEInstances(ontology)
 
         if hypotheses is None:
             hypotheses = [hyp.concept for hyp in self.best_hypotheses(n)]
-        elif isinstance(hypotheses,list):
-                hypotheses = [(hyp.concept if isinstance(hyp, AbstractConceptNode) else hyp) for hyp in hypotheses]
+        elif isinstance(hypotheses, list):
+            hypotheses = [(hyp.concept if isinstance(hyp, AbstractConceptNode) else hyp) for hyp in hypotheses]
         else:
-            hypotheses=[hypotheses]
+            hypotheses = [hypotheses]
 
         renderer = DLSyntaxObjectRenderer()
         predictions = pd.DataFrame(data=self._assign_labels_to_individuals(individuals, hypotheses, reasoner),
                                    index=[renderer.render(i) for i in individuals],
                                    columns=[renderer.render(c) for c in hypotheses])
 
         # Remove the axioms from the ontology
@@ -294,14 +308,16 @@
 
     @property
     def number_of_tested_concepts(self):
         return self._number_of_tested_concepts
 
     def save_best_hypothesis(self, n: int = 10, path: str = 'Predictions', rdf_format: str = 'rdfxml') -> None:
         """Serialise the best hypotheses to a file.
+        @TODO: CD: This function should be deprecated.
+        @TODO: CD: Saving owl class expressions into disk should be disentangled from a concept earner
 
         Args:
             n: Maximum number of hypotheses to save.
             path: Filename base (extension will be added automatically).
             rdf_format: Serialisation format. currently supported: "rdfxml".
         """
         SNS: Final = 'https://dice-research.org/predictions-schema/'
@@ -319,50 +335,60 @@
         manager: OWLOntologyManager = OWLOntologyManager_Owlready2()
 
         ontology: OWLOntology = manager.create_ontology(IRI.create(NS))
         manager.load_ontology(IRI.create(self.kb.path))
         manager.apply_change(AddImport(ontology, OWLImportsDeclaration(IRI.create('file://' + self.kb.path))))
         for ith, h in enumerate(self.best_hypotheses(n=n)):
             cls_a: OWLClass = OWLClass(IRI.create(NS, "Pred_" + str(ith)))
-            equivalent_classes_axiom = OWLEquivalentClassesAxiom([cls_a, h.concept])
+            equivalent_classes_axiom = OWLEquivalentClassesAxiom([cls_a, h])
             manager.add_axiom(ontology, equivalent_classes_axiom)
-
+            # @TODO:CD: We should find a way to include information (F1score etc) outside of OWL class expression instances
+            """
             try:
                 assert isinstance(h, _NodeQuality)
                 quality = h.quality
             except AttributeError:
                 quality = None
-
             if isinstance(self.quality_func, Accuracy):
-                accuracy = OWLAnnotationAssertionAxiom(cls_a.get_iri(), OWLAnnotation(
+                accuracy = OWLAnnotationAssertionAxiom(cls_a.iri, OWLAnnotation(
                     OWLAnnotationProperty(IRI.create(SNS, "accuracy")), OWLLiteral(quality)))
                 manager.add_axiom(ontology, accuracy)
             elif isinstance(self.quality_func, F1):
-                f1_score = OWLAnnotationAssertionAxiom(cls_a.get_iri(), OWLAnnotation(
+                f1_score = OWLAnnotationAssertionAxiom(cls_a.iri, OWLAnnotation(
                     OWLAnnotationProperty(IRI.create(SNS, "f1_score")), OWLLiteral(quality)))
                 manager.add_axiom(ontology, f1_score)
+            """
 
         manager.save_ontology(ontology, IRI.create('file:/' + path + '.owl'))
 
     def load_hypotheses(self, path: str) -> Iterable[OWLClassExpression]:
-        """Loads hypotheses (class expressions) from a file saved by :func:`BaseConceptLearner.save_best_hypothesis`.
+        """
+        @TODO: CD: This function should be deprecated.
+        @TODO: CD: Loading owl class expressions from disk should be disentangled from a concept earner
+
+
+        Loads hypotheses (class expressions) from a file saved by :func:`BaseConceptLearner.save_best_hypothesis`.
 
         Args:
             path: Path to the file containing hypotheses.
         """
         manager: OWLOntologyManager_Owlready2 = OWLOntologyManager_Owlready2()
         ontology: OWLOntology_Owlready2 = manager.load_ontology(IRI.create('file://' + path))
         for c in ontology.classes_in_signature():
             for equivalent_classes in ontology.equivalent_classes_axioms(c):
                 for equivalent_c in equivalent_classes.class_expressions():
                     if equivalent_c != c:
                         yield equivalent_c
 
     @staticmethod
     def verbalize(predictions_file_path: str):
+        """
+        @TODO:CD: this function should be removed from this class. This should be defined at best as a static func.
+
+        """
 
         tree = ET.parse(predictions_file_path)
         root = tree.getroot()
         tmp_file = 'tmp_file_' + predictions_file_path
         owl = 'http://www.w3.org/2002/07/owl#'
         ontology_elem = root.find(f'{{{owl}}}Ontology')
         ontology_elem.remove(ontology_elem.find(f'{{{owl}}}imports'))
@@ -504,15 +530,15 @@
             assert isinstance(self.kb, KnowledgeBase)
             self.operator = ModifiedCELOERefinement(self.kb, max_child_length=self.max_child_length)
 
         if self.heuristic_func is None:
             self.heuristic_func = CELOEHeuristic()
 
         if self.start_class is None:
-            self.start_class = self.kb.generator.thing
+            self.start_class = OWLThing
         if self.iter_bound is None:
             self.iter_bound = 10_000
 
     def __sanity_checking(self):
         assert self.start_class
         assert self.heuristic_func
         assert self.operator
```

### Comparing `ontolearn-0.7.0/ontolearn/base_nces.py` & `ontolearn-0.7.1/ontolearn/base_nces.py`

 * *Files 4% similar despite different names*

```diff
@@ -11,25 +11,25 @@
 
 class BaseNCES:
 
     def __init__(self, knowledge_base_path, learner_name, path_of_embeddings, batch_size=256, learning_rate=1e-4,
                  decay_rate=0.0, clip_value=5.0, num_workers=8):
         self.name = "NCES"
         kb = KnowledgeBase(path=knowledge_base_path)
-        self.kb_namespace = list(kb.ontology.classes_in_signature())[0].get_iri().get_namespace()
+        self.kb_namespace = list(kb.ontology.classes_in_signature())[0].iri.get_namespace()
         self.renderer = DLSyntaxObjectRenderer()
         atomic_concepts = list(kb.ontology.classes_in_signature())
         atomic_concept_names = [self.renderer.render(a) for a in atomic_concepts]
         self.atomic_concept_names = atomic_concept_names
-        role_names = [rel.get_iri().get_remainder() for rel in kb.ontology.object_properties_in_signature()]
+        role_names = [rel.iri.get_remainder() for rel in kb.ontology.object_properties_in_signature()]
         vocab = atomic_concept_names + role_names + ['⊔', '⊓', '∃', '∀', '¬', '⊤', '⊥', '.', ' ', '(', ')']
         vocab = sorted(vocab) + ['PAD']
         self.knowledge_base_path = knowledge_base_path
         self.kb = kb
-        self.all_individuals = set([ind.get_iri().as_str().split("/")[-1] for ind in kb.individuals()])
+        self.all_individuals = set([ind.str.split("/")[-1] for ind in kb.individuals()])
         self.inv_vocab = np.array(vocab, dtype='object')
         self.vocab = {vocab[i]: i for i in range(len(vocab))}
         self.learner_name = learner_name
         self.num_examples = self.find_optimal_number_of_examples(kb)
         self.batch_size = batch_size
         self.learning_rate = learning_rate
         self.decay_rate = decay_rate
```

### Comparing `ontolearn-0.7.0/ontolearn/binders.py` & `ontolearn-0.7.1/ontolearn/binders.py`

 * *Files 1% similar despite different names*

```diff
@@ -132,16 +132,16 @@
 
         Returns:
             self.
         """
         if max_runtime:
             self.max_runtime = max_runtime
 
-        pathToConfig = self.write_dl_learner_config(pos=[i.get_iri().as_str() for i in lp.pos],
-                                                    neg=[i.get_iri().as_str() for i in lp.neg])
+        pathToConfig = self.write_dl_learner_config(pos=[i.str for i in lp.pos],
+                                                    neg=[i.str for i in lp.neg])
         total_runtime = time.time()
         res = subprocess.run([self.binary_path, pathToConfig], capture_output=True, universal_newlines=True)
         total_runtime = round(time.time() - total_runtime, 3)
         self.best_predictions = self.parse_dl_learner_output(res.stdout.splitlines(), pathToConfig)
         self.best_predictions['Runtime'] = total_runtime
         return self
```

### Comparing `ontolearn-0.7.0/ontolearn/clip_architectures.py` & `ontolearn-0.7.1/ontolearn/clip_architectures.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/clip_trainer.py` & `ontolearn-0.7.1/ontolearn/clip_trainer.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/concept_generator.py` & `ontolearn-0.7.1/ontolearn/concept_generator.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,17 +1,21 @@
 """A module to generate concepts."""
 
 from typing import Iterable, List, Generator
 
+from owlapy.class_expression import OWLObjectMaxCardinality, OWLObjectMinCardinality, OWLObjectSomeValuesFrom, \
+    OWLObjectAllValuesFrom, OWLObjectIntersectionOf, OWLObjectUnionOf, OWLThing, OWLNothing, OWLClass, \
+    OWLClassExpression, OWLObjectComplementOf, OWLObjectExactCardinality, OWLDataAllValuesFrom, OWLDataSomeValuesFrom, \
+    OWLDataHasValue, OWLObjectHasValue
+from owlapy.owl_data_ranges import OWLDataRange
+from owlapy.owl_individual import OWLIndividual
+from owlapy.owl_literal import OWLLiteral
+from owlapy.owl_property import OWLObjectPropertyExpression, OWLDataPropertyExpression
+
 from ontolearn.utils import parametrized_performance_debugger
-from owlapy.model import OWLObjectMaxCardinality, OWLObjectMinCardinality, OWLObjectSomeValuesFrom, \
-    OWLObjectAllValuesFrom, OWLObjectIntersectionOf, OWLObjectUnionOf, OWLObjectPropertyExpression, OWLThing, \
-    OWLNothing, OWLClass, OWLClassExpression, OWLObjectComplementOf, \
-    OWLObjectExactCardinality, OWLDataAllValuesFrom, OWLDataPropertyExpression, OWLDataRange, OWLDataSomeValuesFrom, \
-    OWLDataHasValue, OWLIndividual, OWLLiteral, OWLObjectHasValue
 
 
 class ConceptGenerator:
     """A class that can generate some sorts of OWL Class Expressions."""
 
     @parametrized_performance_debugger()
     def negation_from_iterables(self, class_expressions: Iterable[OWLClassExpression]):
```

### Comparing `ontolearn-0.7.0/ontolearn/concept_learner.py` & `ontolearn-0.7.1/ontolearn/concept_learner.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,5120 +1,5174 @@
 00000000: 2222 2243 6f6e 6365 7074 206c 6561 726e  """Concept learn
 00000010: 696e 6720 616c 676f 7269 7468 6d73 206f  ing algorithms o
 00000020: 6620 4f6e 746f 6c65 6172 6e2e 2222 220a  f Ontolearn.""".
 00000030: 0a69 6d70 6f72 7420 6c6f 6767 696e 670a  .import logging.
 00000040: 696d 706f 7274 206f 7065 7261 746f 720a  import operator.
 00000050: 696d 706f 7274 2072 616e 646f 6d0a 696d  import random.im
 00000060: 706f 7274 2074 696d 650a 6672 6f6d 2063  port time.from c
-00000070: 6f6c 6c65 6374 696f 6e73 2069 6d70 6f72  ollections impor
-00000080: 7420 6465 7175 652c 2043 6f75 6e74 6572  t deque, Counter
-00000090: 0a66 726f 6d20 636f 6e74 6578 746c 6962  .from contextlib
-000000a0: 2069 6d70 6f72 7420 636f 6e74 6578 746d   import contextm
-000000b0: 616e 6167 6572 0a66 726f 6d20 6974 6572  anager.from iter
-000000c0: 746f 6f6c 7320 696d 706f 7274 2069 736c  tools import isl
-000000d0: 6963 652c 2063 6861 696e 0a66 726f 6d20  ice, chain.from 
-000000e0: 7479 7069 6e67 2069 6d70 6f72 7420 416e  typing import An
-000000f0: 792c 2043 616c 6c61 626c 652c 2044 6963  y, Callable, Dic
-00000100: 742c 2046 726f 7a65 6e53 6574 2c20 5365  t, FrozenSet, Se
-00000110: 742c 204c 6973 742c 2054 7570 6c65 2c20  t, List, Tuple, 
-00000120: 4974 6572 6162 6c65 2c20 4f70 7469 6f6e  Iterable, Option
-00000130: 616c 2c20 4765 6e65 7261 746f 722c 2053  al, Generator, S
-00000140: 7570 706f 7274 7346 6c6f 6174 2c20 556e  upportsFloat, Un
-00000150: 696f 6e0a 0a69 6d70 6f72 7420 6e75 6d70  ion..import nump
-00000160: 7920 6173 206e 700a 696d 706f 7274 2070  y as np.import p
-00000170: 616e 6461 7320 6173 2070 640a 696d 706f  andas as pd.impo
-00000180: 7274 2074 6f72 6368 0a66 726f 6d20 746f  rt torch.from to
-00000190: 7263 6820 696d 706f 7274 206e 6e0a 6672  rch import nn.fr
-000001a0: 6f6d 2074 6f72 6368 2e75 7469 6c73 2e64  om torch.utils.d
-000001b0: 6174 6120 696d 706f 7274 2044 6174 614c  ata import DataL
-000001c0: 6f61 6465 720a 6672 6f6d 2074 6f72 6368  oader.from torch
-000001d0: 2e66 756e 6374 696f 6e61 6c20 696d 706f  .functional impo
-000001e0: 7274 2046 0a66 726f 6d20 746f 7263 682e  rt F.from torch.
-000001f0: 6e6e 2e75 7469 6c73 2e72 6e6e 2069 6d70  nn.utils.rnn imp
-00000200: 6f72 7420 7061 645f 7365 7175 656e 6365  ort pad_sequence
-00000210: 0a66 726f 6d20 746f 7263 682e 6e6e 2e69  .from torch.nn.i
-00000220: 6e69 7420 696d 706f 7274 2078 6176 6965  nit import xavie
-00000230: 725f 6e6f 726d 616c 5f0a 6672 6f6d 2064  r_normal_.from d
-00000240: 6561 7020 696d 706f 7274 2067 702c 2074  eap import gp, t
-00000250: 6f6f 6c73 2c20 6261 7365 2c20 6372 6561  ools, base, crea
-00000260: 746f 720a 0a66 726f 6d20 6f6e 746f 6c65  tor..from ontole
-00000270: 6172 6e2e 6b6e 6f77 6c65 6467 655f 6261  arn.knowledge_ba
-00000280: 7365 2069 6d70 6f72 7420 4b6e 6f77 6c65  se import Knowle
-00000290: 6467 6542 6173 650a 6672 6f6d 206f 6e74  dgeBase.from ont
-000002a0: 6f6c 6561 726e 2e61 6273 7472 6163 7473  olearn.abstracts
-000002b0: 2069 6d70 6f72 7420 4162 7374 7261 6374   import Abstract
-000002c0: 4669 746e 6573 732c 2041 6273 7472 6163  Fitness, Abstrac
-000002d0: 7453 636f 7265 722c 2041 6273 7472 6163  tScorer, Abstrac
-000002e0: 744e 6f64 652c 2042 6173 6552 6566 696e  tNode, BaseRefin
-000002f0: 656d 656e 742c 205c 0a20 2020 2041 6273  ement, \.    Abs
-00000300: 7472 6163 7448 6575 7269 7374 6963 2c20  tractHeuristic, 
-00000310: 456e 636f 6465 6450 6f73 4e65 674c 5053  EncodedPosNegLPS
-00000320: 7461 6e64 6172 644b 696e 640a 6672 6f6d  tandardKind.from
-00000330: 206f 6e74 6f6c 6561 726e 2e62 6173 655f   ontolearn.base_
-00000340: 636f 6e63 6570 745f 6c65 6172 6e65 7220  concept_learner 
-00000350: 696d 706f 7274 2042 6173 6543 6f6e 6365  import BaseConce
-00000360: 7074 4c65 6172 6e65 722c 2052 6566 696e  ptLearner, Refin
-00000370: 656d 656e 7442 6173 6564 436f 6e63 6570  ementBasedConcep
-00000380: 744c 6561 726e 6572 0a66 726f 6d20 6f6e  tLearner.from on
-00000390: 746f 6c65 6172 6e2e 6261 7365 2e6f 776c  tolearn.base.owl
-000003a0: 2e75 7469 6c73 2069 6d70 6f72 7420 4576  .utils import Ev
-000003b0: 616c 7561 7465 6444 6573 6372 6970 7469  aluatedDescripti
-000003c0: 6f6e 5365 742c 2043 6f6e 6365 7074 4f70  onSet, ConceptOp
-000003d0: 6572 616e 6453 6f72 7465 722c 204f 7065  erandSorter, Ope
-000003e0: 7261 6e64 5365 7454 7261 6e73 666f 726d  randSetTransform
-000003f0: 0a66 726f 6d20 6f6e 746f 6c65 6172 6e2e  .from ontolearn.
-00000400: 6461 7461 5f73 7472 7563 7420 696d 706f  data_struct impo
-00000410: 7274 2050 7265 7061 7265 4261 7463 684f  rt PrepareBatchO
-00000420: 6654 7261 696e 696e 672c 2050 7265 7061  fTraining, Prepa
-00000430: 7265 4261 7463 684f 6650 7265 6469 6374  reBatchOfPredict
-00000440: 696f 6e2c 204e 4345 5344 6174 614c 6f61  ion, NCESDataLoa
-00000450: 6465 722c 205c 0a20 2020 204e 4345 5344  der, \.    NCESD
-00000460: 6174 614c 6f61 6465 7249 6e66 6572 656e  ataLoaderInferen
-00000470: 6365 2c20 434c 4950 4461 7461 4c6f 6164  ce, CLIPDataLoad
-00000480: 6572 2c20 434c 4950 4461 7461 4c6f 6164  er, CLIPDataLoad
-00000490: 6572 496e 6665 7265 6e63 650a 6672 6f6d  erInference.from
-000004a0: 206f 6e74 6f6c 6561 726e 2e65 615f 616c   ontolearn.ea_al
-000004b0: 676f 7269 7468 6d73 2069 6d70 6f72 7420  gorithms import 
-000004c0: 4162 7374 7261 6374 4576 6f6c 7574 696f  AbstractEvolutio
-000004d0: 6e61 7279 416c 676f 7269 7468 6d2c 2045  naryAlgorithm, E
-000004e0: 4153 696d 706c 650a 6672 6f6d 206f 6e74  ASimple.from ont
-000004f0: 6f6c 6561 726e 2e65 615f 696e 6974 6961  olearn.ea_initia
-00000500: 6c69 7a61 7469 6f6e 2069 6d70 6f72 7420  lization import 
-00000510: 4162 7374 7261 6374 4541 496e 6974 6961  AbstractEAInitia
-00000520: 6c69 7a61 7469 6f6e 2c20 4541 5261 6e64  lization, EARand
-00000530: 6f6d 496e 6974 6961 6c69 7a61 7469 6f6e  omInitialization
-00000540: 2c20 4541 5261 6e64 6f6d 5761 6c6b 496e  , EARandomWalkIn
-00000550: 6974 6961 6c69 7a61 7469 6f6e 0a66 726f  itialization.fro
-00000560: 6d20 6f6e 746f 6c65 6172 6e2e 6561 5f75  m ontolearn.ea_u
-00000570: 7469 6c73 2069 6d70 6f72 7420 5072 696d  tils import Prim
-00000580: 6974 6976 6546 6163 746f 7279 2c20 4f70  itiveFactory, Op
-00000590: 6572 6174 6f72 566f 6361 6275 6c61 7279  eratorVocabulary
-000005a0: 2c20 546f 6f6c 626f 7856 6f63 6162 756c  , ToolboxVocabul
-000005b0: 6172 792c 2054 7265 652c 2065 7363 6170  ary, Tree, escap
-000005c0: 652c 2069 6e64 5f74 6f5f 7374 7269 6e67  e, ind_to_string
-000005d0: 2c20 5c0a 2020 2020 6f77 6c6c 6974 6572  , \.    owlliter
-000005e0: 616c 5f74 6f5f 7072 696d 6974 6976 655f  al_to_primitive_
-000005f0: 7374 7269 6e67 0a66 726f 6d20 6f6e 746f  string.from onto
-00000600: 6c65 6172 6e2e 6669 746e 6573 735f 6675  learn.fitness_fu
-00000610: 6e63 7469 6f6e 7320 696d 706f 7274 204c  nctions import L
-00000620: 696e 6561 7250 7265 7373 7572 6546 6974  inearPressureFit
-00000630: 6e65 7373 0a66 726f 6d20 6f6e 746f 6c65  ness.from ontole
-00000640: 6172 6e2e 6865 7572 6973 7469 6373 2069  arn.heuristics i
-00000650: 6d70 6f72 7420 4f43 454c 4865 7572 6973  mport OCELHeuris
-00000660: 7469 630a 6672 6f6d 206f 6e74 6f6c 6561  tic.from ontolea
-00000670: 726e 2e6c 6561 726e 696e 675f 7072 6f62  rn.learning_prob
-00000680: 6c65 6d20 696d 706f 7274 2050 6f73 4e65  lem import PosNe
-00000690: 674c 5053 7461 6e64 6172 642c 2045 6e63  gLPStandard, Enc
-000006a0: 6f64 6564 506f 734e 6567 4c50 5374 616e  odedPosNegLPStan
-000006b0: 6461 7264 0a66 726f 6d20 6f6e 746f 6c65  dard.from ontole
-000006c0: 6172 6e2e 6d65 7472 6963 7320 696d 706f  arn.metrics impo
-000006d0: 7274 2041 6363 7572 6163 792c 2046 310a  rt Accuracy, F1.
-000006e0: 6672 6f6d 206f 6e74 6f6c 6561 726e 2e72  from ontolearn.r
-000006f0: 6566 696e 656d 656e 745f 6f70 6572 6174  efinement_operat
-00000700: 6f72 7320 696d 706f 7274 204c 656e 6774  ors import Lengt
-00000710: 6842 6173 6564 5265 6669 6e65 6d65 6e74  hBasedRefinement
-00000720: 2c20 4578 7072 6573 7352 6566 696e 656d  , ExpressRefinem
-00000730: 656e 740a 6672 6f6d 206f 6e74 6f6c 6561  ent.from ontolea
-00000740: 726e 2e73 6561 7263 6820 696d 706f 7274  rn.search import
-00000750: 2045 766f 4c65 6172 6e65 724e 6f64 652c   EvoLearnerNode,
-00000760: 204e 4345 534e 6f64 652c 2048 6575 7269   NCESNode, Heuri
-00000770: 7374 6963 4f72 6465 7265 644e 6f64 652c  sticOrderedNode,
-00000780: 204c 424c 4e6f 6465 2c20 4f45 4e6f 6465   LBLNode, OENode
-00000790: 2c20 5472 6565 4e6f 6465 2c20 4c65 6e67  , TreeNode, Leng
-000007a0: 7468 4f72 6465 7265 644e 6f64 652c 205c  thOrderedNode, \
-000007b0: 0a20 2020 2051 7561 6c69 7479 4f72 6465  .    QualityOrde
-000007c0: 7265 644e 6f64 652c 2052 4c5f 5374 6174  redNode, RL_Stat
-000007d0: 652c 2044 5249 4c4c 5365 6172 6368 5472  e, DRILLSearchTr
-000007e0: 6565 5072 696f 7269 7479 5175 6575 652c  eePriorityQueue,
-000007f0: 2045 7661 6c75 6174 6564 436f 6e63 6570   EvaluatedConcep
-00000800: 740a 6672 6f6d 206f 6e74 6f6c 6561 726e  t.from ontolearn
-00000810: 2e75 7469 6c73 2069 6d70 6f72 7420 6f70  .utils import op
-00000820: 6c6f 6767 696e 672c 2063 7265 6174 655f  logging, create_
-00000830: 6578 7065 7269 6d65 6e74 5f66 6f6c 6465  experiment_folde
-00000840: 720a 6672 6f6d 206f 6e74 6f6c 6561 726e  r.from ontolearn
-00000850: 2e75 7469 6c73 2e73 7461 7469 635f 6675  .utils.static_fu
-00000860: 6e63 7320 696d 706f 7274 2069 6e69 745f  ncs import init_
-00000870: 6c65 6e67 7468 5f6d 6574 7269 632c 2063  length_metric, c
-00000880: 6f6d 7075 7465 5f74 705f 666e 5f66 705f  ompute_tp_fn_fp_
-00000890: 746e 0a66 726f 6d20 6f6e 746f 6c65 6172  tn.from ontolear
-000008a0: 6e2e 7661 6c75 655f 7370 6c69 7474 6572  n.value_splitter
-000008b0: 2069 6d70 6f72 7420 4162 7374 7261 6374   import Abstract
-000008c0: 5661 6c75 6553 706c 6974 7465 722c 2042  ValueSplitter, B
-000008d0: 696e 6e69 6e67 5661 6c75 6553 706c 6974  inningValueSplit
-000008e0: 7465 722c 2045 6e74 726f 7079 5661 6c75  ter, EntropyValu
-000008f0: 6553 706c 6974 7465 720a 6672 6f6d 206f  eSplitter.from o
-00000900: 6e74 6f6c 6561 726e 2e62 6173 655f 6e63  ntolearn.base_nc
-00000910: 6573 2069 6d70 6f72 7420 4261 7365 4e43  es import BaseNC
-00000920: 4553 0a66 726f 6d20 6f6e 746f 6c65 6172  ES.from ontolear
-00000930: 6e2e 6e63 6573 5f61 7263 6869 7465 6374  n.nces_architect
-00000940: 7572 6573 2069 6d70 6f72 7420 4c53 544d  ures import LSTM
-00000950: 2c20 4752 552c 2053 6574 5472 616e 7366  , GRU, SetTransf
-00000960: 6f72 6d65 720a 6672 6f6d 206f 6e74 6f6c  ormer.from ontol
-00000970: 6561 726e 2e63 6c69 705f 6172 6368 6974  earn.clip_archit
-00000980: 6563 7475 7265 7320 696d 706f 7274 204c  ectures import L
-00000990: 656e 6774 684c 6561 726e 6572 5f4c 5354  engthLearner_LST
-000009a0: 4d2c 204c 656e 6774 684c 6561 726e 6572  M, LengthLearner
-000009b0: 5f47 5255 2c20 4c65 6e67 7468 4c65 6172  _GRU, LengthLear
-000009c0: 6e65 725f 434e 4e2c 204c 656e 6774 684c  ner_CNN, LengthL
-000009d0: 6561 726e 6572 5f53 6574 5472 616e 7366  earner_SetTransf
-000009e0: 6f72 6d65 720a 6672 6f6d 206f 6e74 6f6c  ormer.from ontol
-000009f0: 6561 726e 2e6e 6365 735f 7472 6169 6e65  earn.nces_traine
-00000a00: 7220 696d 706f 7274 204e 4345 5354 7261  r import NCESTra
-00000a10: 696e 6572 2c20 6265 666f 7265 5f70 6164  iner, before_pad
-00000a20: 0a66 726f 6d20 6f6e 746f 6c65 6172 6e2e  .from ontolearn.
-00000a30: 636c 6970 5f74 7261 696e 6572 2069 6d70  clip_trainer imp
-00000a40: 6f72 7420 434c 4950 5472 6169 6e65 720a  ort CLIPTrainer.
-00000a50: 6672 6f6d 206f 6e74 6f6c 6561 726e 2e6e  from ontolearn.n
-00000a60: 6365 735f 7574 696c 7320 696d 706f 7274  ces_utils import
-00000a70: 2053 696d 706c 6553 6f6c 7574 696f 6e0a   SimpleSolution.
-00000a80: 6672 6f6d 206f 776c 6170 792e 6d6f 6465  from owlapy.mode
-00000a90: 6c20 696d 706f 7274 204f 574c 436c 6173  l import OWLClas
-00000aa0: 7345 7870 7265 7373 696f 6e2c 204f 574c  sExpression, OWL
-00000ab0: 4461 7461 5072 6f70 6572 7479 2c20 4f57  DataProperty, OW
-00000ac0: 4c4c 6974 6572 616c 2c20 4f57 4c4e 616d  LLiteral, OWLNam
-00000ad0: 6564 496e 6469 7669 6475 616c 2c20 4f57  edIndividual, OW
-00000ae0: 4c52 6561 736f 6e65 722c 204f 574c 436c  LReasoner, OWLCl
-00000af0: 6173 730a 6672 6f6d 206f 776c 6170 792e  ass.from owlapy.
-00000b00: 7265 6e64 6572 2069 6d70 6f72 7420 444c  render import DL
-00000b10: 5379 6e74 6178 4f62 6a65 6374 5265 6e64  SyntaxObjectRend
-00000b20: 6572 6572 0a66 726f 6d20 6f77 6c61 7079  erer.from owlapy
-00000b30: 2e70 6172 7365 7220 696d 706f 7274 2044  .parser import D
-00000b40: 4c53 796e 7461 7850 6172 7365 720a 6672  LSyntaxParser.fr
-00000b50: 6f6d 206f 776c 6170 792e 7574 696c 2069  om owlapy.util i
-00000b60: 6d70 6f72 7420 4f72 6465 7265 644f 574c  mport OrderedOWL
-00000b70: 4f62 6a65 6374 0a66 726f 6d20 736f 7274  Object.from sort
-00000b80: 6564 636f 6e74 6169 6e65 7273 2069 6d70  edcontainers imp
-00000b90: 6f72 7420 536f 7274 6564 5365 740a 696d  ort SortedSet.im
-00000ba0: 706f 7274 206f 730a 6c6f 6767 6572 203d  port os.logger =
-00000bb0: 206c 6f67 6769 6e67 2e67 6574 4c6f 6767   logging.getLogg
-00000bc0: 6572 285f 5f6e 616d 655f 5f29 0a0a 5f63  er(__name__).._c
-00000bd0: 6f6e 6365 7074 5f6f 7065 7261 6e64 5f73  oncept_operand_s
-00000be0: 6f72 7465 7220 3d20 436f 6e63 6570 744f  orter = ConceptO
-00000bf0: 7065 7261 6e64 536f 7274 6572 2829 0a0a  perandSorter()..
-00000c00: 0a63 6c61 7373 2043 454c 4f45 2852 6566  .class CELOE(Ref
-00000c10: 696e 656d 656e 7442 6173 6564 436f 6e63  inementBasedConc
-00000c20: 6570 744c 6561 726e 6572 5b4f 454e 6f64  eptLearner[OENod
-00000c30: 655d 293a 0a20 2020 2022 2222 436c 6173  e]):.    """Clas
-00000c40: 7320 4578 7072 6573 7369 6f6e 204c 6561  s Expression Lea
-00000c50: 726e 696e 6720 666f 7220 4f6e 746f 6c6f  rning for Ontolo
-00000c60: 6779 2045 6e67 696e 6565 7269 6e67 2e0a  gy Engineering..
-00000c70: 0a20 2020 2041 7474 7269 6275 7465 733a  .    Attributes:
-00000c80: 0a20 2020 2020 2020 2062 6573 745f 6465  .        best_de
-00000c90: 7363 7269 7074 696f 6e73 2028 4576 616c  scriptions (Eval
-00000ca0: 7561 7465 6444 6573 6372 6970 7469 6f6e  uatedDescription
-00000cb0: 5365 745b 4f45 4e6f 6465 2c20 5175 616c  Set[OENode, Qual
-00000cc0: 6974 794f 7264 6572 6564 4e6f 6465 5d29  ityOrderedNode])
-00000cd0: 3a20 4265 7374 2068 7970 6f74 6865 7365  : Best hypothese
-00000ce0: 7320 6f72 6465 7265 642e 0a20 2020 2020  s ordered..     
-00000cf0: 2020 2062 6573 745f 6f6e 6c79 2028 626f     best_only (bo
-00000d00: 6f6c 293a 2049 6620 4661 6c73 6520 7069  ol): If False pi
-00000d10: 636b 206f 6e6c 7920 6e6f 6465 7320 7769  ck only nodes wi
-00000d20: 7468 2071 7561 6c69 7479 203c 2031 2e30  th quality < 1.0
-00000d30: 2c20 656c 7365 2070 6963 6b20 7769 7468  , else pick with
-00000d40: 6f75 7420 7175 616c 6974 7920 7265 7374  out quality rest
-00000d50: 7269 6374 696f 6e73 2e0a 2020 2020 2020  rictions..      
-00000d60: 2020 6361 6c63 756c 6174 655f 6d69 6e5f    calculate_min_
-00000d70: 6d61 7820 2862 6f6f 6c29 3a20 4361 6c63  max (bool): Calc
-00000d80: 756c 6174 6520 6d69 6e69 6d75 6d20 616e  ulate minimum an
-00000d90: 6420 6d61 7869 6d75 6d20 686f 7269 7a6f  d maximum horizo
-00000da0: 6e74 616c 2065 7870 616e 7369 6f6e 3f20  ntal expansion? 
-00000db0: 5374 6174 6973 7469 6361 6c20 7075 7270  Statistical purp
-00000dc0: 6f73 6520 6f6e 6c79 2e0a 2020 2020 2020  ose only..      
-00000dd0: 2020 6865 7572 6973 7469 635f 6675 6e63    heuristic_func
-00000de0: 2028 4162 7374 7261 6374 4865 7572 6973   (AbstractHeuris
-00000df0: 7469 6329 3a20 4675 6e63 7469 6f6e 2074  tic): Function t
-00000e00: 6f20 6775 6964 6520 7468 6520 7365 6172  o guide the sear
-00000e10: 6368 2068 6575 7269 7374 6963 2e0a 2020  ch heuristic..  
-00000e20: 2020 2020 2020 6865 7572 6973 7469 635f        heuristic_
-00000e30: 7175 6575 6520 2853 6f72 7465 6453 6574  queue (SortedSet
-00000e40: 5b4f 454e 6f64 655d 293a 2041 2073 6f72  [OENode]): A sor
-00000e50: 7465 6420 7365 7420 7468 6174 2063 6f6d  ted set that com
-00000e60: 7061 7265 7320 7468 6520 6e6f 6465 7320  pares the nodes 
-00000e70: 6261 7365 6420 6f6e 2048 6575 7269 7374  based on Heurist
-00000e80: 6963 2e0a 2020 2020 2020 2020 6974 6572  ic..        iter
-00000e90: 5f62 6f75 6e64 2028 696e 7429 3a20 4c69  _bound (int): Li
-00000ea0: 6d69 7420 746f 2073 746f 7020 7468 6520  mit to stop the 
-00000eb0: 616c 676f 7269 7468 6d20 6166 7465 7220  algorithm after 
-00000ec0: 6e20 7265 6669 6e65 6d65 6e74 2073 7465  n refinement ste
-00000ed0: 7073 2061 7265 2064 6f6e 652e 0a20 2020  ps are done..   
-00000ee0: 2020 2020 206b 6220 284b 6e6f 776c 6564       kb (Knowled
-00000ef0: 6765 4261 7365 293a 2054 6865 206b 6e6f  geBase): The kno
-00000f00: 776c 6564 6765 2062 6173 6520 7468 6174  wledge base that
-00000f10: 2074 6865 2063 6f6e 6365 7074 206c 6561   the concept lea
-00000f20: 726e 6572 2069 7320 7573 696e 672e 0a20  rner is using.. 
-00000f30: 2020 2020 2020 206d 6178 5f63 6869 6c64         max_child
-00000f40: 5f6c 656e 6774 6820 2869 6e74 293a 204c  _length (int): L
-00000f50: 696d 6974 2074 6865 206c 656e 6774 6820  imit the length 
-00000f60: 6f66 2063 6f6e 6365 7074 7320 6765 6e65  of concepts gene
-00000f70: 7261 7465 6420 6279 2074 6865 2072 6566  rated by the ref
-00000f80: 696e 656d 656e 7420 6f70 6572 6174 6f72  inement operator
-00000f90: 2e0a 2020 2020 2020 2020 6d61 785f 6865  ..        max_he
-00000fa0: 2028 696e 7429 3a20 4d61 7869 6d61 6c20   (int): Maximal 
-00000fb0: 7661 6c75 6520 6f66 2068 6f72 697a 6f6e  value of horizon
-00000fc0: 7461 6c20 6578 7061 6e73 696f 6e2e 0a20  tal expansion.. 
-00000fd0: 2020 2020 2020 206d 6178 5f6e 756d 5f6f         max_num_o
-00000fe0: 665f 636f 6e63 6570 7473 5f74 6573 7465  f_concepts_teste
-00000ff0: 6420 2869 6e74 2920 4c69 6d69 7420 746f  d (int) Limit to
-00001000: 2073 746f 7020 7468 6520 616c 676f 7269   stop the algori
-00001010: 7468 6d20 6166 7465 7220 6e20 636f 6e63  thm after n conc
-00001020: 6570 7473 2074 6573 7465 642e 0a20 2020  epts tested..   
-00001030: 2020 2020 206d 6178 5f72 756e 7469 6d65       max_runtime
-00001040: 2028 696e 7429 3a20 4c69 6d69 7420 746f   (int): Limit to
-00001050: 2073 746f 7020 7468 6520 616c 676f 7269   stop the algori
-00001060: 7468 6d20 6166 7465 7220 6e20 7365 636f  thm after n seco
-00001070: 6e64 732e 0a20 2020 2020 2020 206d 696e  nds..        min
-00001080: 5f68 6520 2869 6e74 293a 204d 696e 696d  _he (int): Minim
-00001090: 616c 2076 616c 7565 206f 6620 686f 7269  al value of hori
-000010a0: 7a6f 6e74 616c 2065 7870 616e 7369 6f6e  zontal expansion
-000010b0: 2e0a 2020 2020 2020 2020 6e61 6d65 2028  ..        name (
-000010c0: 7374 7229 3a20 4e61 6d65 206f 6620 7468  str): Name of th
-000010d0: 6520 6d6f 6465 6c20 3d20 2763 656c 6f65  e model = 'celoe
-000010e0: 5f70 7974 686f 6e27 2e0a 2020 2020 2020  _python'..      
-000010f0: 2020 5f6e 756d 6265 725f 6f66 5f74 6573    _number_of_tes
-00001100: 7465 645f 636f 6e63 6570 7473 2028 696e  ted_concepts (in
-00001110: 7429 3a20 5965 732c 2079 6f75 2067 6f74  t): Yes, you got
-00001120: 2069 742e 2054 6869 7320 7374 6f72 6573   it. This stores
-00001130: 2074 6865 206e 756d 6265 7220 6f66 2074   the number of t
-00001140: 6573 7465 6420 636f 6e63 6570 7473 2e0a  ested concepts..
-00001150: 2020 2020 2020 2020 6f70 6572 6174 6f72          operator
-00001160: 2028 4261 7365 5265 6669 6e65 6d65 6e74   (BaseRefinement
-00001170: 293a 204f 7065 7261 746f 7220 7573 6564  ): Operator used
-00001180: 2074 6f20 6765 6e65 7261 7465 2072 6566   to generate ref
-00001190: 696e 656d 656e 7473 2e0a 2020 2020 2020  inements..      
-000011a0: 2020 7175 616c 6974 795f 6675 6e63 2028    quality_func (
-000011b0: 4162 7374 7261 6374 5363 6f72 6572 2920  AbstractScorer) 
-000011c0: 5468 6520 7175 616c 6974 7920 6675 6e63  The quality func
-000011d0: 7469 6f6e 2074 6f20 6265 2075 7365 642e  tion to be used.
-000011e0: 0a20 2020 2020 2020 2072 6561 736f 6e65  .        reasone
-000011f0: 7220 284f 574c 5265 6173 6f6e 6572 293a  r (OWLReasoner):
-00001200: 2054 6865 2072 6561 736f 6e65 7220 7468   The reasoner th
-00001210: 6174 2074 6869 7320 6d6f 6465 6c20 6973  at this model is
-00001220: 2075 7369 6e67 2e0a 2020 2020 2020 2020   using..        
-00001230: 7365 6172 6368 5f74 7265 6520 2844 6963  search_tree (Dic
-00001240: 745b 4f57 4c43 6c61 7373 4578 7072 6573  t[OWLClassExpres
-00001250: 7369 6f6e 2c20 5472 6565 4e6f 6465 5b4f  sion, TreeNode[O
-00001260: 454e 6f64 655d 5d29 3a20 4469 6374 2074  ENode]]): Dict t
-00001270: 6f20 7374 6f72 6520 7468 6520 5472 6565  o store the Tree
-00001280: 4e6f 6465 2066 6f72 2061 2063 6c61 7373  Node for a class
-00001290: 2065 7870 7265 7373 696f 6e2e 0a20 2020   expression..   
-000012a0: 2020 2020 2073 7461 7274 5f63 6c61 7373       start_class
-000012b0: 2028 4f57 4c43 6c61 7373 4578 7072 6573   (OWLClassExpres
-000012c0: 7369 6f6e 293a 2054 6865 2073 7461 7274  sion): The start
-000012d0: 696e 6720 636c 6173 7320 6578 7072 6573  ing class expres
-000012e0: 7369 6f6e 2066 6f72 2074 6865 2072 6566  sion for the ref
-000012f0: 696e 656d 656e 7420 6f70 6572 6174 696f  inement operatio
-00001300: 6e2e 0a20 2020 2020 2020 2073 7461 7274  n..        start
-00001310: 5f74 696d 6520 2866 6c6f 6174 293a 2054  _time (float): T
-00001320: 6865 2074 696d 6520 7768 656e 203a 6d65  he time when :me
-00001330: 7468 3a60 6669 7460 2073 7461 7274 7320  th:`fit` starts 
-00001340: 7468 6520 6578 6563 7574 696f 6e2e 2055  the execution. U
-00001350: 7365 6420 746f 2063 616c 6375 6c61 7465  sed to calculate
-00001360: 2074 6865 2074 6f74 616c 2074 696d 6520   the total time 
-00001370: 3a6d 6574 683a 6066 6974 600a 2020 2020  :meth:`fit`.    
-00001380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001390: 2020 2020 2020 2020 7461 6b65 7320 746f          takes to
-000013a0: 2065 7865 6375 7465 2e0a 2020 2020 2020   execute..      
-000013b0: 2020 7465 726d 696e 6174 655f 6f6e 5f67    terminate_on_g
-000013c0: 6f61 6c20 2862 6f6f 6c29 3a20 5768 6574  oal (bool): Whet
-000013d0: 6865 7220 746f 2073 746f 7020 7468 6520  her to stop the 
-000013e0: 616c 676f 7269 7468 6d20 6966 2061 2070  algorithm if a p
-000013f0: 6572 6665 6374 2073 6f6c 7574 696f 6e20  erfect solution 
-00001400: 6973 2066 6f75 6e64 2e0a 0a20 2020 2022  is found...    "
-00001410: 2222 0a20 2020 205f 5f73 6c6f 7473 5f5f  "".    __slots__
-00001420: 203d 2027 6265 7374 5f64 6573 6372 6970   = 'best_descrip
-00001430: 7469 6f6e 7327 2c20 276d 6178 5f68 6527  tions', 'max_he'
-00001440: 2c20 276d 696e 5f68 6527 2c20 2762 6573  , 'min_he', 'bes
-00001450: 745f 6f6e 6c79 272c 2027 6361 6c63 756c  t_only', 'calcul
-00001460: 6174 655f 6d69 6e5f 6d61 7827 2c20 2768  ate_min_max', 'h
-00001470: 6575 7269 7374 6963 5f71 7565 7565 272c  euristic_queue',
-00001480: 205c 0a20 2020 2020 2020 2027 7365 6172   \.        'sear
-00001490: 6368 5f74 7265 6527 2c20 275f 6c65 6172  ch_tree', '_lear
-000014a0: 6e69 6e67 5f70 726f 626c 656d 272c 2027  ning_problem', '
-000014b0: 5f6d 6178 5f72 756e 7469 6d65 272c 2027  _max_runtime', '
-000014c0: 5f73 6565 6e5f 6e6f 726d 5f63 6f6e 6365  _seen_norm_conce
-000014d0: 7074 7327 0a0a 2020 2020 6e61 6d65 203d  pts'..    name =
-000014e0: 2027 6365 6c6f 655f 7079 7468 6f6e 270a   'celoe_python'.
-000014f0: 0a20 2020 206b 623a 204b 6e6f 776c 6564  .    kb: Knowled
-00001500: 6765 4261 7365 0a20 2020 206d 6178 5f68  geBase.    max_h
-00001510: 653a 2069 6e74 0a20 2020 206d 696e 5f68  e: int.    min_h
-00001520: 653a 2069 6e74 0a20 2020 2062 6573 745f  e: int.    best_
-00001530: 6f6e 6c79 3a20 626f 6f6c 0a20 2020 2063  only: bool.    c
-00001540: 616c 6375 6c61 7465 5f6d 696e 5f6d 6178  alculate_min_max
-00001550: 3a20 626f 6f6c 0a0a 2020 2020 7365 6172  : bool..    sear
-00001560: 6368 5f74 7265 653a 2044 6963 745b 4f57  ch_tree: Dict[OW
-00001570: 4c43 6c61 7373 4578 7072 6573 7369 6f6e  LClassExpression
-00001580: 2c20 5472 6565 4e6f 6465 5b4f 454e 6f64  , TreeNode[OENod
-00001590: 655d 5d0a 2020 2020 7365 656e 5f6e 6f72  e]].    seen_nor
-000015a0: 6d5f 636f 6e63 6570 7473 3a20 5365 745b  m_concepts: Set[
-000015b0: 4f57 4c43 6c61 7373 4578 7072 6573 7369  OWLClassExpressi
-000015c0: 6f6e 5d0a 2020 2020 6865 7572 6973 7469  on].    heuristi
-000015d0: 635f 7175 6575 653a 2027 536f 7274 6564  c_queue: 'Sorted
-000015e0: 5365 745b 4f45 4e6f 6465 5d27 0a20 2020  Set[OENode]'.   
-000015f0: 2062 6573 745f 6465 7363 7269 7074 696f   best_descriptio
-00001600: 6e73 3a20 4576 616c 7561 7465 6444 6573  ns: EvaluatedDes
-00001610: 6372 6970 7469 6f6e 5365 745b 4f45 4e6f  criptionSet[OENo
-00001620: 6465 2c20 5175 616c 6974 794f 7264 6572  de, QualityOrder
-00001630: 6564 4e6f 6465 5d0a 2020 2020 5f6c 6561  edNode].    _lea
-00001640: 726e 696e 675f 7072 6f62 6c65 6d3a 204f  rning_problem: O
-00001650: 7074 696f 6e61 6c5b 456e 636f 6465 6450  ptional[EncodedP
-00001660: 6f73 4e65 674c 5053 7461 6e64 6172 644b  osNegLPStandardK
-00001670: 696e 645d 0a0a 2020 2020 6465 6620 5f5f  ind]..    def __
-00001680: 696e 6974 5f5f 2873 656c 662c 0a20 2020  init__(self,.   
-00001690: 2020 2020 2020 2020 2020 2020 2020 6b6e                kn
-000016a0: 6f77 6c65 6467 655f 6261 7365 3a20 4b6e  owledge_base: Kn
-000016b0: 6f77 6c65 6467 6542 6173 652c 0a20 2020  owledgeBase,.   
-000016c0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000016d0: 6173 6f6e 6572 3a20 4f70 7469 6f6e 616c  asoner: Optional
-000016e0: 5b4f 574c 5265 6173 6f6e 6572 5d20 3d20  [OWLReasoner] = 
-000016f0: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-00001700: 2020 2020 2020 2072 6566 696e 656d 656e         refinemen
-00001710: 745f 6f70 6572 6174 6f72 3a20 4f70 7469  t_operator: Opti
-00001720: 6f6e 616c 5b42 6173 6552 6566 696e 656d  onal[BaseRefinem
-00001730: 656e 745b 4f45 4e6f 6465 5d5d 203d 204e  ent[OENode]] = N
-00001740: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-00001750: 2020 2020 2020 7175 616c 6974 795f 6675        quality_fu
-00001760: 6e63 3a20 4f70 7469 6f6e 616c 5b41 6273  nc: Optional[Abs
-00001770: 7472 6163 7453 636f 7265 725d 203d 204e  tractScorer] = N
-00001780: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-00001790: 2020 2020 2020 6865 7572 6973 7469 635f        heuristic_
-000017a0: 6675 6e63 3a20 4f70 7469 6f6e 616c 5b41  func: Optional[A
-000017b0: 6273 7472 6163 7448 6575 7269 7374 6963  bstractHeuristic
-000017c0: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
-000017d0: 2020 2020 2020 2020 2020 2074 6572 6d69             termi
-000017e0: 6e61 7465 5f6f 6e5f 676f 616c 3a20 4f70  nate_on_goal: Op
-000017f0: 7469 6f6e 616c 5b62 6f6f 6c5d 203d 204e  tional[bool] = N
+00000070: 6f6e 7465 7874 6c69 6220 696d 706f 7274  ontextlib import
+00000080: 2063 6f6e 7465 7874 6d61 6e61 6765 720a   contextmanager.
+00000090: 6672 6f6d 2069 7465 7274 6f6f 6c73 2069  from itertools i
+000000a0: 6d70 6f72 7420 6973 6c69 6365 2c20 6368  mport islice, ch
+000000b0: 6169 6e0a 6672 6f6d 2074 7970 696e 6720  ain.from typing 
+000000c0: 696d 706f 7274 2041 6e79 2c20 4361 6c6c  import Any, Call
+000000d0: 6162 6c65 2c20 4469 6374 2c20 4672 6f7a  able, Dict, Froz
+000000e0: 656e 5365 742c 2053 6574 2c20 4c69 7374  enSet, Set, List
+000000f0: 2c20 5475 706c 652c 2049 7465 7261 626c  , Tuple, Iterabl
+00000100: 652c 204f 7074 696f 6e61 6c2c 2055 6e69  e, Optional, Uni
+00000110: 6f6e 0a0a 696d 706f 7274 2070 616e 6461  on..import panda
+00000120: 7320 6173 2070 640a 696d 706f 7274 2074  s as pd.import t
+00000130: 6f72 6368 0a66 726f 6d20 6f77 6c61 7079  orch.from owlapy
+00000140: 2e63 6c61 7373 5f65 7870 7265 7373 696f  .class_expressio
+00000150: 6e20 696d 706f 7274 204f 574c 436c 6173  n import OWLClas
+00000160: 7345 7870 7265 7373 696f 6e0a 6672 6f6d  sExpression.from
+00000170: 206f 776c 6170 792e 6f77 6c5f 696e 6469   owlapy.owl_indi
+00000180: 7669 6475 616c 2069 6d70 6f72 7420 4f57  vidual import OW
+00000190: 4c4e 616d 6564 496e 6469 7669 6475 616c  LNamedIndividual
+000001a0: 0a66 726f 6d20 6f77 6c61 7079 2e6f 776c  .from owlapy.owl
+000001b0: 5f6c 6974 6572 616c 2069 6d70 6f72 7420  _literal import 
+000001c0: 4f57 4c4c 6974 6572 616c 0a66 726f 6d20  OWLLiteral.from 
+000001d0: 6f77 6c61 7079 2e6f 776c 5f70 726f 7065  owlapy.owl_prope
+000001e0: 7274 7920 696d 706f 7274 204f 574c 4461  rty import OWLDa
+000001f0: 7461 5072 6f70 6572 7479 0a66 726f 6d20  taProperty.from 
+00000200: 6f77 6c61 7079 2e6f 776c 5f72 6561 736f  owlapy.owl_reaso
+00000210: 6e65 7220 696d 706f 7274 204f 574c 5265  ner import OWLRe
+00000220: 6173 6f6e 6572 0a66 726f 6d20 746f 7263  asoner.from torc
+00000230: 682e 7574 696c 732e 6461 7461 2069 6d70  h.utils.data imp
+00000240: 6f72 7420 4461 7461 4c6f 6164 6572 0a66  ort DataLoader.f
+00000250: 726f 6d20 746f 7263 682e 6675 6e63 7469  rom torch.functi
+00000260: 6f6e 616c 2069 6d70 6f72 7420 460a 6672  onal import F.fr
+00000270: 6f6d 2074 6f72 6368 2e6e 6e2e 7574 696c  om torch.nn.util
+00000280: 732e 726e 6e20 696d 706f 7274 2070 6164  s.rnn import pad
+00000290: 5f73 6571 7565 6e63 650a 6672 6f6d 2064  _sequence.from d
+000002a0: 6561 7020 696d 706f 7274 2067 702c 2074  eap import gp, t
+000002b0: 6f6f 6c73 2c20 6261 7365 2c20 6372 6561  ools, base, crea
+000002c0: 746f 720a 0a66 726f 6d20 6f6e 746f 6c65  tor..from ontole
+000002d0: 6172 6e2e 6b6e 6f77 6c65 6467 655f 6261  arn.knowledge_ba
+000002e0: 7365 2069 6d70 6f72 7420 4b6e 6f77 6c65  se import Knowle
+000002f0: 6467 6542 6173 650a 6672 6f6d 206f 6e74  dgeBase.from ont
+00000300: 6f6c 6561 726e 2e61 6273 7472 6163 7473  olearn.abstracts
+00000310: 2069 6d70 6f72 7420 4162 7374 7261 6374   import Abstract
+00000320: 4669 746e 6573 732c 2041 6273 7472 6163  Fitness, Abstrac
+00000330: 7453 636f 7265 722c 2042 6173 6552 6566  tScorer, BaseRef
+00000340: 696e 656d 656e 742c 205c 0a20 2020 2041  inement, \.    A
+00000350: 6273 7472 6163 7448 6575 7269 7374 6963  bstractHeuristic
+00000360: 2c20 456e 636f 6465 6450 6f73 4e65 674c  , EncodedPosNegL
+00000370: 5053 7461 6e64 6172 644b 696e 640a 6672  PStandardKind.fr
+00000380: 6f6d 206f 6e74 6f6c 6561 726e 2e62 6173  om ontolearn.bas
+00000390: 655f 636f 6e63 6570 745f 6c65 6172 6e65  e_concept_learne
+000003a0: 7220 696d 706f 7274 2042 6173 6543 6f6e  r import BaseCon
+000003b0: 6365 7074 4c65 6172 6e65 722c 2052 6566  ceptLearner, Ref
+000003c0: 696e 656d 656e 7442 6173 6564 436f 6e63  inementBasedConc
+000003d0: 6570 744c 6561 726e 6572 0a66 726f 6d20  eptLearner.from 
+000003e0: 6f6e 746f 6c65 6172 6e2e 6261 7365 2e6f  ontolearn.base.o
+000003f0: 776c 2e75 7469 6c73 2069 6d70 6f72 7420  wl.utils import 
+00000400: 4576 616c 7561 7465 6444 6573 6372 6970  EvaluatedDescrip
+00000410: 7469 6f6e 5365 742c 2043 6f6e 6365 7074  tionSet, Concept
+00000420: 4f70 6572 616e 6453 6f72 7465 722c 204f  OperandSorter, O
+00000430: 7065 7261 6e64 5365 7454 7261 6e73 666f  perandSetTransfo
+00000440: 726d 0a66 726f 6d20 6f6e 746f 6c65 6172  rm.from ontolear
+00000450: 6e2e 6461 7461 5f73 7472 7563 7420 696d  n.data_struct im
+00000460: 706f 7274 204e 4345 5344 6174 614c 6f61  port NCESDataLoa
+00000470: 6465 722c 204e 4345 5344 6174 614c 6f61  der, NCESDataLoa
+00000480: 6465 7249 6e66 6572 656e 6365 2c20 434c  derInference, CL
+00000490: 4950 4461 7461 4c6f 6164 6572 2c20 434c  IPDataLoader, CL
+000004a0: 4950 4461 7461 4c6f 6164 6572 496e 6665  IPDataLoaderInfe
+000004b0: 7265 6e63 650a 6672 6f6d 206f 6e74 6f6c  rence.from ontol
+000004c0: 6561 726e 2e65 615f 616c 676f 7269 7468  earn.ea_algorith
+000004d0: 6d73 2069 6d70 6f72 7420 4162 7374 7261  ms import Abstra
+000004e0: 6374 4576 6f6c 7574 696f 6e61 7279 416c  ctEvolutionaryAl
+000004f0: 676f 7269 7468 6d2c 2045 4153 696d 706c  gorithm, EASimpl
+00000500: 650a 6672 6f6d 206f 6e74 6f6c 6561 726e  e.from ontolearn
+00000510: 2e65 615f 696e 6974 6961 6c69 7a61 7469  .ea_initializati
+00000520: 6f6e 2069 6d70 6f72 7420 4162 7374 7261  on import Abstra
+00000530: 6374 4541 496e 6974 6961 6c69 7a61 7469  ctEAInitializati
+00000540: 6f6e 2c20 4541 5261 6e64 6f6d 496e 6974  on, EARandomInit
+00000550: 6961 6c69 7a61 7469 6f6e 2c20 4541 5261  ialization, EARa
+00000560: 6e64 6f6d 5761 6c6b 496e 6974 6961 6c69  ndomWalkInitiali
+00000570: 7a61 7469 6f6e 0a66 726f 6d20 6f6e 746f  zation.from onto
+00000580: 6c65 6172 6e2e 6561 5f75 7469 6c73 2069  learn.ea_utils i
+00000590: 6d70 6f72 7420 5072 696d 6974 6976 6546  mport PrimitiveF
+000005a0: 6163 746f 7279 2c20 4f70 6572 6174 6f72  actory, Operator
+000005b0: 566f 6361 6275 6c61 7279 2c20 546f 6f6c  Vocabulary, Tool
+000005c0: 626f 7856 6f63 6162 756c 6172 792c 2054  boxVocabulary, T
+000005d0: 7265 652c 2065 7363 6170 652c 2069 6e64  ree, escape, ind
+000005e0: 5f74 6f5f 7374 7269 6e67 2c20 5c0a 2020  _to_string, \.  
+000005f0: 2020 6f77 6c6c 6974 6572 616c 5f74 6f5f    owlliteral_to_
+00000600: 7072 696d 6974 6976 655f 7374 7269 6e67  primitive_string
+00000610: 0a66 726f 6d20 6f6e 746f 6c65 6172 6e2e  .from ontolearn.
+00000620: 6669 746e 6573 735f 6675 6e63 7469 6f6e  fitness_function
+00000630: 7320 696d 706f 7274 204c 696e 6561 7250  s import LinearP
+00000640: 7265 7373 7572 6546 6974 6e65 7373 0a66  ressureFitness.f
+00000650: 726f 6d20 6f6e 746f 6c65 6172 6e2e 6865  rom ontolearn.he
+00000660: 7572 6973 7469 6373 2069 6d70 6f72 7420  uristics import 
+00000670: 4f43 454c 4865 7572 6973 7469 630a 6672  OCELHeuristic.fr
+00000680: 6f6d 206f 6e74 6f6c 6561 726e 2e6c 6561  om ontolearn.lea
+00000690: 726e 696e 675f 7072 6f62 6c65 6d20 696d  rning_problem im
+000006a0: 706f 7274 2050 6f73 4e65 674c 5053 7461  port PosNegLPSta
+000006b0: 6e64 6172 642c 2045 6e63 6f64 6564 506f  ndard, EncodedPo
+000006c0: 734e 6567 4c50 5374 616e 6461 7264 0a66  sNegLPStandard.f
+000006d0: 726f 6d20 6f6e 746f 6c65 6172 6e2e 6d65  rom ontolearn.me
+000006e0: 7472 6963 7320 696d 706f 7274 2041 6363  trics import Acc
+000006f0: 7572 6163 790a 6672 6f6d 206f 6e74 6f6c  uracy.from ontol
+00000700: 6561 726e 2e72 6566 696e 656d 656e 745f  earn.refinement_
+00000710: 6f70 6572 6174 6f72 7320 696d 706f 7274  operators import
+00000720: 2045 7870 7265 7373 5265 6669 6e65 6d65   ExpressRefineme
+00000730: 6e74 0a66 726f 6d20 6f6e 746f 6c65 6172  nt.from ontolear
+00000740: 6e2e 7365 6172 6368 2069 6d70 6f72 7420  n.search import 
+00000750: 4576 6f4c 6561 726e 6572 4e6f 6465 2c20  EvoLearnerNode, 
+00000760: 4e43 4553 4e6f 6465 2c20 4865 7572 6973  NCESNode, Heuris
+00000770: 7469 634f 7264 6572 6564 4e6f 6465 2c20  ticOrderedNode, 
+00000780: 4c42 4c4e 6f64 652c 204f 454e 6f64 652c  LBLNode, OENode,
+00000790: 2054 7265 654e 6f64 652c 205c 0a20 2020   TreeNode, \.   
+000007a0: 204c 656e 6774 684f 7264 6572 6564 4e6f   LengthOrderedNo
+000007b0: 6465 2c20 5c0a 2020 2020 5175 616c 6974  de, \.    Qualit
+000007c0: 794f 7264 6572 6564 4e6f 6465 2c20 4576  yOrderedNode, Ev
+000007d0: 616c 7561 7465 6443 6f6e 6365 7074 0a66  aluatedConcept.f
+000007e0: 726f 6d20 6f6e 746f 6c65 6172 6e2e 7574  rom ontolearn.ut
+000007f0: 696c 7320 696d 706f 7274 206f 706c 6f67  ils import oplog
+00000800: 6769 6e67 0a66 726f 6d20 6f6e 746f 6c65  ging.from ontole
+00000810: 6172 6e2e 7574 696c 732e 7374 6174 6963  arn.utils.static
+00000820: 5f66 756e 6373 2069 6d70 6f72 7420 696e  _funcs import in
+00000830: 6974 5f6c 656e 6774 685f 6d65 7472 6963  it_length_metric
+00000840: 2c20 636f 6d70 7574 655f 7470 5f66 6e5f  , compute_tp_fn_
+00000850: 6670 5f74 6e0a 6672 6f6d 206f 6e74 6f6c  fp_tn.from ontol
+00000860: 6561 726e 2e76 616c 7565 5f73 706c 6974  earn.value_split
+00000870: 7465 7220 696d 706f 7274 2041 6273 7472  ter import Abstr
+00000880: 6163 7456 616c 7565 5370 6c69 7474 6572  actValueSplitter
+00000890: 2c20 4269 6e6e 696e 6756 616c 7565 5370  , BinningValueSp
+000008a0: 6c69 7474 6572 2c20 456e 7472 6f70 7956  litter, EntropyV
+000008b0: 616c 7565 5370 6c69 7474 6572 0a66 726f  alueSplitter.fro
+000008c0: 6d20 6f6e 746f 6c65 6172 6e2e 6261 7365  m ontolearn.base
+000008d0: 5f6e 6365 7320 696d 706f 7274 2042 6173  _nces import Bas
+000008e0: 654e 4345 530a 6672 6f6d 206f 6e74 6f6c  eNCES.from ontol
+000008f0: 6561 726e 2e6e 6365 735f 6172 6368 6974  earn.nces_archit
+00000900: 6563 7475 7265 7320 696d 706f 7274 204c  ectures import L
+00000910: 5354 4d2c 2047 5255 2c20 5365 7454 7261  STM, GRU, SetTra
+00000920: 6e73 666f 726d 6572 0a66 726f 6d20 6f6e  nsformer.from on
+00000930: 746f 6c65 6172 6e2e 636c 6970 5f61 7263  tolearn.clip_arc
+00000940: 6869 7465 6374 7572 6573 2069 6d70 6f72  hitectures impor
+00000950: 7420 4c65 6e67 7468 4c65 6172 6e65 725f  t LengthLearner_
+00000960: 4c53 544d 2c20 4c65 6e67 7468 4c65 6172  LSTM, LengthLear
+00000970: 6e65 725f 4752 552c 204c 656e 6774 684c  ner_GRU, LengthL
+00000980: 6561 726e 6572 5f43 4e4e 2c20 5c0a 2020  earner_CNN, \.  
+00000990: 2020 4c65 6e67 7468 4c65 6172 6e65 725f    LengthLearner_
+000009a0: 5365 7454 7261 6e73 666f 726d 6572 0a66  SetTransformer.f
+000009b0: 726f 6d20 6f6e 746f 6c65 6172 6e2e 6e63  rom ontolearn.nc
+000009c0: 6573 5f74 7261 696e 6572 2069 6d70 6f72  es_trainer impor
+000009d0: 7420 4e43 4553 5472 6169 6e65 722c 2062  t NCESTrainer, b
+000009e0: 6566 6f72 655f 7061 640a 6672 6f6d 206f  efore_pad.from o
+000009f0: 6e74 6f6c 6561 726e 2e63 6c69 705f 7472  ntolearn.clip_tr
+00000a00: 6169 6e65 7220 696d 706f 7274 2043 4c49  ainer import CLI
+00000a10: 5054 7261 696e 6572 0a66 726f 6d20 6f6e  PTrainer.from on
+00000a20: 746f 6c65 6172 6e2e 6e63 6573 5f75 7469  tolearn.nces_uti
+00000a30: 6c73 2069 6d70 6f72 7420 5369 6d70 6c65  ls import Simple
+00000a40: 536f 6c75 7469 6f6e 0a66 726f 6d20 6f77  Solution.from ow
+00000a50: 6c61 7079 2e72 656e 6465 7220 696d 706f  lapy.render impo
+00000a60: 7274 2044 4c53 796e 7461 784f 626a 6563  rt DLSyntaxObjec
+00000a70: 7452 656e 6465 7265 720a 6672 6f6d 206f  tRenderer.from o
+00000a80: 776c 6170 792e 7061 7273 6572 2069 6d70  wlapy.parser imp
+00000a90: 6f72 7420 444c 5379 6e74 6178 5061 7273  ort DLSyntaxPars
+00000aa0: 6572 0a66 726f 6d20 6f77 6c61 7079 2e75  er.from owlapy.u
+00000ab0: 7469 6c20 696d 706f 7274 204f 7264 6572  til import Order
+00000ac0: 6564 4f57 4c4f 626a 6563 740a 6672 6f6d  edOWLObject.from
+00000ad0: 2073 6f72 7465 6463 6f6e 7461 696e 6572   sortedcontainer
+00000ae0: 7320 696d 706f 7274 2053 6f72 7465 6453  s import SortedS
+00000af0: 6574 0a69 6d70 6f72 7420 6f73 0a0a 6c6f  et.import os..lo
+00000b00: 6767 6572 203d 206c 6f67 6769 6e67 2e67  gger = logging.g
+00000b10: 6574 4c6f 6767 6572 285f 5f6e 616d 655f  etLogger(__name_
+00000b20: 5f29 0a0a 5f63 6f6e 6365 7074 5f6f 7065  _).._concept_ope
+00000b30: 7261 6e64 5f73 6f72 7465 7220 3d20 436f  rand_sorter = Co
+00000b40: 6e63 6570 744f 7065 7261 6e64 536f 7274  nceptOperandSort
+00000b50: 6572 2829 0a0a 0a63 6c61 7373 2043 454c  er()...class CEL
+00000b60: 4f45 2852 6566 696e 656d 656e 7442 6173  OE(RefinementBas
+00000b70: 6564 436f 6e63 6570 744c 6561 726e 6572  edConceptLearner
+00000b80: 5b4f 454e 6f64 655d 293a 0a20 2020 2022  [OENode]):.    "
+00000b90: 2222 436c 6173 7320 4578 7072 6573 7369  ""Class Expressi
+00000ba0: 6f6e 204c 6561 726e 696e 6720 666f 7220  on Learning for 
+00000bb0: 4f6e 746f 6c6f 6779 2045 6e67 696e 6565  Ontology Enginee
+00000bc0: 7269 6e67 2e0a 0a20 2020 2041 7474 7269  ring...    Attri
+00000bd0: 6275 7465 733a 0a20 2020 2020 2020 2062  butes:.        b
+00000be0: 6573 745f 6465 7363 7269 7074 696f 6e73  est_descriptions
+00000bf0: 2028 4576 616c 7561 7465 6444 6573 6372   (EvaluatedDescr
+00000c00: 6970 7469 6f6e 5365 745b 4f45 4e6f 6465  iptionSet[OENode
+00000c10: 2c20 5175 616c 6974 794f 7264 6572 6564  , QualityOrdered
+00000c20: 4e6f 6465 5d29 3a20 4265 7374 2068 7970  Node]): Best hyp
+00000c30: 6f74 6865 7365 7320 6f72 6465 7265 642e  otheses ordered.
+00000c40: 0a20 2020 2020 2020 2062 6573 745f 6f6e  .        best_on
+00000c50: 6c79 2028 626f 6f6c 293a 2049 6620 4661  ly (bool): If Fa
+00000c60: 6c73 6520 7069 636b 206f 6e6c 7920 6e6f  lse pick only no
+00000c70: 6465 7320 7769 7468 2071 7561 6c69 7479  des with quality
+00000c80: 203c 2031 2e30 2c20 656c 7365 2070 6963   < 1.0, else pic
+00000c90: 6b20 7769 7468 6f75 7420 7175 616c 6974  k without qualit
+00000ca0: 7920 7265 7374 7269 6374 696f 6e73 2e0a  y restrictions..
+00000cb0: 2020 2020 2020 2020 6361 6c63 756c 6174          calculat
+00000cc0: 655f 6d69 6e5f 6d61 7820 2862 6f6f 6c29  e_min_max (bool)
+00000cd0: 3a20 4361 6c63 756c 6174 6520 6d69 6e69  : Calculate mini
+00000ce0: 6d75 6d20 616e 6420 6d61 7869 6d75 6d20  mum and maximum 
+00000cf0: 686f 7269 7a6f 6e74 616c 2065 7870 616e  horizontal expan
+00000d00: 7369 6f6e 3f20 5374 6174 6973 7469 6361  sion? Statistica
+00000d10: 6c20 7075 7270 6f73 6520 6f6e 6c79 2e0a  l purpose only..
+00000d20: 2020 2020 2020 2020 6865 7572 6973 7469          heuristi
+00000d30: 635f 6675 6e63 2028 4162 7374 7261 6374  c_func (Abstract
+00000d40: 4865 7572 6973 7469 6329 3a20 4675 6e63  Heuristic): Func
+00000d50: 7469 6f6e 2074 6f20 6775 6964 6520 7468  tion to guide th
+00000d60: 6520 7365 6172 6368 2068 6575 7269 7374  e search heurist
+00000d70: 6963 2e0a 2020 2020 2020 2020 6865 7572  ic..        heur
+00000d80: 6973 7469 635f 7175 6575 6520 2853 6f72  istic_queue (Sor
+00000d90: 7465 6453 6574 5b4f 454e 6f64 655d 293a  tedSet[OENode]):
+00000da0: 2041 2073 6f72 7465 6420 7365 7420 7468   A sorted set th
+00000db0: 6174 2063 6f6d 7061 7265 7320 7468 6520  at compares the 
+00000dc0: 6e6f 6465 7320 6261 7365 6420 6f6e 2048  nodes based on H
+00000dd0: 6575 7269 7374 6963 2e0a 2020 2020 2020  euristic..      
+00000de0: 2020 6974 6572 5f62 6f75 6e64 2028 696e    iter_bound (in
+00000df0: 7429 3a20 4c69 6d69 7420 746f 2073 746f  t): Limit to sto
+00000e00: 7020 7468 6520 616c 676f 7269 7468 6d20  p the algorithm 
+00000e10: 6166 7465 7220 6e20 7265 6669 6e65 6d65  after n refineme
+00000e20: 6e74 2073 7465 7073 2061 7265 2064 6f6e  nt steps are don
+00000e30: 652e 0a20 2020 2020 2020 206b 6220 284b  e..        kb (K
+00000e40: 6e6f 776c 6564 6765 4261 7365 293a 2054  nowledgeBase): T
+00000e50: 6865 206b 6e6f 776c 6564 6765 2062 6173  he knowledge bas
+00000e60: 6520 7468 6174 2074 6865 2063 6f6e 6365  e that the conce
+00000e70: 7074 206c 6561 726e 6572 2069 7320 7573  pt learner is us
+00000e80: 696e 672e 0a20 2020 2020 2020 206d 6178  ing..        max
+00000e90: 5f63 6869 6c64 5f6c 656e 6774 6820 2869  _child_length (i
+00000ea0: 6e74 293a 204c 696d 6974 2074 6865 206c  nt): Limit the l
+00000eb0: 656e 6774 6820 6f66 2063 6f6e 6365 7074  ength of concept
+00000ec0: 7320 6765 6e65 7261 7465 6420 6279 2074  s generated by t
+00000ed0: 6865 2072 6566 696e 656d 656e 7420 6f70  he refinement op
+00000ee0: 6572 6174 6f72 2e0a 2020 2020 2020 2020  erator..        
+00000ef0: 6d61 785f 6865 2028 696e 7429 3a20 4d61  max_he (int): Ma
+00000f00: 7869 6d61 6c20 7661 6c75 6520 6f66 2068  ximal value of h
+00000f10: 6f72 697a 6f6e 7461 6c20 6578 7061 6e73  orizontal expans
+00000f20: 696f 6e2e 0a20 2020 2020 2020 206d 6178  ion..        max
+00000f30: 5f6e 756d 5f6f 665f 636f 6e63 6570 7473  _num_of_concepts
+00000f40: 5f74 6573 7465 6420 2869 6e74 2920 4c69  _tested (int) Li
+00000f50: 6d69 7420 746f 2073 746f 7020 7468 6520  mit to stop the 
+00000f60: 616c 676f 7269 7468 6d20 6166 7465 7220  algorithm after 
+00000f70: 6e20 636f 6e63 6570 7473 2074 6573 7465  n concepts teste
+00000f80: 642e 0a20 2020 2020 2020 206d 6178 5f72  d..        max_r
+00000f90: 756e 7469 6d65 2028 696e 7429 3a20 4c69  untime (int): Li
+00000fa0: 6d69 7420 746f 2073 746f 7020 7468 6520  mit to stop the 
+00000fb0: 616c 676f 7269 7468 6d20 6166 7465 7220  algorithm after 
+00000fc0: 6e20 7365 636f 6e64 732e 0a20 2020 2020  n seconds..     
+00000fd0: 2020 206d 696e 5f68 6520 2869 6e74 293a     min_he (int):
+00000fe0: 204d 696e 696d 616c 2076 616c 7565 206f   Minimal value o
+00000ff0: 6620 686f 7269 7a6f 6e74 616c 2065 7870  f horizontal exp
+00001000: 616e 7369 6f6e 2e0a 2020 2020 2020 2020  ansion..        
+00001010: 6e61 6d65 2028 7374 7229 3a20 4e61 6d65  name (str): Name
+00001020: 206f 6620 7468 6520 6d6f 6465 6c20 3d20   of the model = 
+00001030: 2763 656c 6f65 5f70 7974 686f 6e27 2e0a  'celoe_python'..
+00001040: 2020 2020 2020 2020 5f6e 756d 6265 725f          _number_
+00001050: 6f66 5f74 6573 7465 645f 636f 6e63 6570  of_tested_concep
+00001060: 7473 2028 696e 7429 3a20 5965 732c 2079  ts (int): Yes, y
+00001070: 6f75 2067 6f74 2069 742e 2054 6869 7320  ou got it. This 
+00001080: 7374 6f72 6573 2074 6865 206e 756d 6265  stores the numbe
+00001090: 7220 6f66 2074 6573 7465 6420 636f 6e63  r of tested conc
+000010a0: 6570 7473 2e0a 2020 2020 2020 2020 6f70  epts..        op
+000010b0: 6572 6174 6f72 2028 4261 7365 5265 6669  erator (BaseRefi
+000010c0: 6e65 6d65 6e74 293a 204f 7065 7261 746f  nement): Operato
+000010d0: 7220 7573 6564 2074 6f20 6765 6e65 7261  r used to genera
+000010e0: 7465 2072 6566 696e 656d 656e 7473 2e0a  te refinements..
+000010f0: 2020 2020 2020 2020 7175 616c 6974 795f          quality_
+00001100: 6675 6e63 2028 4162 7374 7261 6374 5363  func (AbstractSc
+00001110: 6f72 6572 2920 5468 6520 7175 616c 6974  orer) The qualit
+00001120: 7920 6675 6e63 7469 6f6e 2074 6f20 6265  y function to be
+00001130: 2075 7365 642e 0a20 2020 2020 2020 2072   used..        r
+00001140: 6561 736f 6e65 7220 284f 574c 5265 6173  easoner (OWLReas
+00001150: 6f6e 6572 293a 2054 6865 2072 6561 736f  oner): The reaso
+00001160: 6e65 7220 7468 6174 2074 6869 7320 6d6f  ner that this mo
+00001170: 6465 6c20 6973 2075 7369 6e67 2e0a 2020  del is using..  
+00001180: 2020 2020 2020 7365 6172 6368 5f74 7265        search_tre
+00001190: 6520 2844 6963 745b 4f57 4c43 6c61 7373  e (Dict[OWLClass
+000011a0: 4578 7072 6573 7369 6f6e 2c20 5472 6565  Expression, Tree
+000011b0: 4e6f 6465 5b4f 454e 6f64 655d 5d29 3a20  Node[OENode]]): 
+000011c0: 4469 6374 2074 6f20 7374 6f72 6520 7468  Dict to store th
+000011d0: 6520 5472 6565 4e6f 6465 2066 6f72 2061  e TreeNode for a
+000011e0: 2063 6c61 7373 2065 7870 7265 7373 696f   class expressio
+000011f0: 6e2e 0a20 2020 2020 2020 2073 7461 7274  n..        start
+00001200: 5f63 6c61 7373 2028 4f57 4c43 6c61 7373  _class (OWLClass
+00001210: 4578 7072 6573 7369 6f6e 293a 2054 6865  Expression): The
+00001220: 2073 7461 7274 696e 6720 636c 6173 7320   starting class 
+00001230: 6578 7072 6573 7369 6f6e 2066 6f72 2074  expression for t
+00001240: 6865 2072 6566 696e 656d 656e 7420 6f70  he refinement op
+00001250: 6572 6174 696f 6e2e 0a20 2020 2020 2020  eration..       
+00001260: 2073 7461 7274 5f74 696d 6520 2866 6c6f   start_time (flo
+00001270: 6174 293a 2054 6865 2074 696d 6520 7768  at): The time wh
+00001280: 656e 203a 6d65 7468 3a60 6669 7460 2073  en :meth:`fit` s
+00001290: 7461 7274 7320 7468 6520 6578 6563 7574  tarts the execut
+000012a0: 696f 6e2e 2055 7365 6420 746f 2063 616c  ion. Used to cal
+000012b0: 6375 6c61 7465 2074 6865 2074 6f74 616c  culate the total
+000012c0: 2074 696d 6520 3a6d 6574 683a 6066 6974   time :meth:`fit
+000012d0: 600a 2020 2020 2020 2020 2020 2020 2020  `.              
+000012e0: 2020 2020 2020 2020 2020 2020 2020 7461                ta
+000012f0: 6b65 7320 746f 2065 7865 6375 7465 2e0a  kes to execute..
+00001300: 2020 2020 2020 2020 7465 726d 696e 6174          terminat
+00001310: 655f 6f6e 5f67 6f61 6c20 2862 6f6f 6c29  e_on_goal (bool)
+00001320: 3a20 5768 6574 6865 7220 746f 2073 746f  : Whether to sto
+00001330: 7020 7468 6520 616c 676f 7269 7468 6d20  p the algorithm 
+00001340: 6966 2061 2070 6572 6665 6374 2073 6f6c  if a perfect sol
+00001350: 7574 696f 6e20 6973 2066 6f75 6e64 2e0a  ution is found..
+00001360: 0a20 2020 2022 2222 0a20 2020 205f 5f73  .    """.    __s
+00001370: 6c6f 7473 5f5f 203d 2027 6265 7374 5f64  lots__ = 'best_d
+00001380: 6573 6372 6970 7469 6f6e 7327 2c20 276d  escriptions', 'm
+00001390: 6178 5f68 6527 2c20 276d 696e 5f68 6527  ax_he', 'min_he'
+000013a0: 2c20 2762 6573 745f 6f6e 6c79 272c 2027  , 'best_only', '
+000013b0: 6361 6c63 756c 6174 655f 6d69 6e5f 6d61  calculate_min_ma
+000013c0: 7827 2c20 2768 6575 7269 7374 6963 5f71  x', 'heuristic_q
+000013d0: 7565 7565 272c 205c 0a20 2020 2020 2020  ueue', \.       
+000013e0: 2027 7365 6172 6368 5f74 7265 6527 2c20   'search_tree', 
+000013f0: 275f 6c65 6172 6e69 6e67 5f70 726f 626c  '_learning_probl
+00001400: 656d 272c 2027 5f6d 6178 5f72 756e 7469  em', '_max_runti
+00001410: 6d65 272c 2027 5f73 6565 6e5f 6e6f 726d  me', '_seen_norm
+00001420: 5f63 6f6e 6365 7074 7327 0a0a 2020 2020  _concepts'..    
+00001430: 6e61 6d65 203d 2027 6365 6c6f 655f 7079  name = 'celoe_py
+00001440: 7468 6f6e 270a 0a20 2020 206b 623a 204b  thon'..    kb: K
+00001450: 6e6f 776c 6564 6765 4261 7365 0a20 2020  nowledgeBase.   
+00001460: 206d 6178 5f68 653a 2069 6e74 0a20 2020   max_he: int.   
+00001470: 206d 696e 5f68 653a 2069 6e74 0a20 2020   min_he: int.   
+00001480: 2062 6573 745f 6f6e 6c79 3a20 626f 6f6c   best_only: bool
+00001490: 0a20 2020 2063 616c 6375 6c61 7465 5f6d  .    calculate_m
+000014a0: 696e 5f6d 6178 3a20 626f 6f6c 0a0a 2020  in_max: bool..  
+000014b0: 2020 7365 6172 6368 5f74 7265 653a 2044    search_tree: D
+000014c0: 6963 745b 4f57 4c43 6c61 7373 4578 7072  ict[OWLClassExpr
+000014d0: 6573 7369 6f6e 2c20 5472 6565 4e6f 6465  ession, TreeNode
+000014e0: 5b4f 454e 6f64 655d 5d0a 2020 2020 7365  [OENode]].    se
+000014f0: 656e 5f6e 6f72 6d5f 636f 6e63 6570 7473  en_norm_concepts
+00001500: 3a20 5365 745b 4f57 4c43 6c61 7373 4578  : Set[OWLClassEx
+00001510: 7072 6573 7369 6f6e 5d0a 2020 2020 6865  pression].    he
+00001520: 7572 6973 7469 635f 7175 6575 653a 2027  uristic_queue: '
+00001530: 536f 7274 6564 5365 745b 4f45 4e6f 6465  SortedSet[OENode
+00001540: 5d27 0a20 2020 2062 6573 745f 6465 7363  ]'.    best_desc
+00001550: 7269 7074 696f 6e73 3a20 4576 616c 7561  riptions: Evalua
+00001560: 7465 6444 6573 6372 6970 7469 6f6e 5365  tedDescriptionSe
+00001570: 745b 4f45 4e6f 6465 2c20 5175 616c 6974  t[OENode, Qualit
+00001580: 794f 7264 6572 6564 4e6f 6465 5d0a 2020  yOrderedNode].  
+00001590: 2020 5f6c 6561 726e 696e 675f 7072 6f62    _learning_prob
+000015a0: 6c65 6d3a 204f 7074 696f 6e61 6c5b 456e  lem: Optional[En
+000015b0: 636f 6465 6450 6f73 4e65 674c 5053 7461  codedPosNegLPSta
+000015c0: 6e64 6172 644b 696e 645d 0a0a 2020 2020  ndardKind]..    
+000015d0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+000015e0: 662c 0a20 2020 2020 2020 2020 2020 2020  f,.             
+000015f0: 2020 2020 6b6e 6f77 6c65 6467 655f 6261      knowledge_ba
+00001600: 7365 3a20 4b6e 6f77 6c65 6467 6542 6173  se: KnowledgeBas
+00001610: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00001620: 2020 2020 7265 6173 6f6e 6572 3a20 4f70      reasoner: Op
+00001630: 7469 6f6e 616c 5b4f 574c 5265 6173 6f6e  tional[OWLReason
+00001640: 6572 5d20 3d20 4e6f 6e65 2c0a 2020 2020  er] = None,.    
+00001650: 2020 2020 2020 2020 2020 2020 2072 6566               ref
+00001660: 696e 656d 656e 745f 6f70 6572 6174 6f72  inement_operator
+00001670: 3a20 4f70 7469 6f6e 616c 5b42 6173 6552  : Optional[BaseR
+00001680: 6566 696e 656d 656e 745b 4f45 4e6f 6465  efinement[OENode
+00001690: 5d5d 203d 204e 6f6e 652c 0a20 2020 2020  ]] = None,.     
+000016a0: 2020 2020 2020 2020 2020 2020 7175 616c              qual
+000016b0: 6974 795f 6675 6e63 3a20 4f70 7469 6f6e  ity_func: Option
+000016c0: 616c 5b41 6273 7472 6163 7453 636f 7265  al[AbstractScore
+000016d0: 725d 203d 204e 6f6e 652c 0a20 2020 2020  r] = None,.     
+000016e0: 2020 2020 2020 2020 2020 2020 6865 7572              heur
+000016f0: 6973 7469 635f 6675 6e63 3a20 4f70 7469  istic_func: Opti
+00001700: 6f6e 616c 5b41 6273 7472 6163 7448 6575  onal[AbstractHeu
+00001710: 7269 7374 6963 5d20 3d20 4e6f 6e65 2c0a  ristic] = None,.
+00001720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001730: 2074 6572 6d69 6e61 7465 5f6f 6e5f 676f   terminate_on_go
+00001740: 616c 3a20 4f70 7469 6f6e 616c 5b62 6f6f  al: Optional[boo
+00001750: 6c5d 203d 204e 6f6e 652c 0a20 2020 2020  l] = None,.     
+00001760: 2020 2020 2020 2020 2020 2020 6974 6572              iter
+00001770: 5f62 6f75 6e64 3a20 4f70 7469 6f6e 616c  _bound: Optional
+00001780: 5b69 6e74 5d20 3d20 4e6f 6e65 2c0a 2020  [int] = None,.  
+00001790: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+000017a0: 6178 5f6e 756d 5f6f 665f 636f 6e63 6570  ax_num_of_concep
+000017b0: 7473 5f74 6573 7465 643a 204f 7074 696f  ts_tested: Optio
+000017c0: 6e61 6c5b 696e 745d 203d 204e 6f6e 652c  nal[int] = None,
+000017d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000017e0: 2020 6d61 785f 7275 6e74 696d 653a 204f    max_runtime: O
+000017f0: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
 00001800: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-00001810: 2020 2020 2020 6974 6572 5f62 6f75 6e64        iter_bound
-00001820: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-00001830: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
-00001840: 2020 2020 2020 2020 206d 6178 5f6e 756d           max_num
-00001850: 5f6f 665f 636f 6e63 6570 7473 5f74 6573  _of_concepts_tes
-00001860: 7465 643a 204f 7074 696f 6e61 6c5b 696e  ted: Optional[in
-00001870: 745d 203d 204e 6f6e 652c 0a20 2020 2020  t] = None,.     
-00001880: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
-00001890: 7275 6e74 696d 653a 204f 7074 696f 6e61  runtime: Optiona
-000018a0: 6c5b 696e 745d 203d 204e 6f6e 652c 0a20  l[int] = None,. 
-000018b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000018c0: 6d61 785f 7265 7375 6c74 733a 2069 6e74  max_results: int
-000018d0: 203d 2031 302c 0a20 2020 2020 2020 2020   = 10,.         
-000018e0: 2020 2020 2020 2020 6265 7374 5f6f 6e6c          best_onl
-000018f0: 793a 2062 6f6f 6c20 3d20 4661 6c73 652c  y: bool = False,
-00001900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001910: 2020 6361 6c63 756c 6174 655f 6d69 6e5f    calculate_min_
-00001920: 6d61 783a 2062 6f6f 6c20 3d20 5472 7565  max: bool = True
-00001930: 293a 0a20 2020 2020 2020 2022 2222 2043  ):.        """ C
-00001940: 7265 6174 6520 6120 6e65 7720 696e 7374  reate a new inst
-00001950: 616e 6365 206f 6620 4345 4c4f 452e 0a0a  ance of CELOE...
-00001960: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
-00001970: 2020 2020 2020 2020 2020 6265 7374 5f6f            best_o
-00001980: 6e6c 7920 2862 6f6f 6c29 3a20 4966 2046  nly (bool): If F
-00001990: 616c 7365 2070 6963 6b20 6f6e 6c79 206e  alse pick only n
-000019a0: 6f64 6573 2077 6974 6820 7175 616c 6974  odes with qualit
-000019b0: 7920 3c20 312e 302c 2065 6c73 6520 7069  y < 1.0, else pi
-000019c0: 636b 2077 6974 686f 7574 2071 7561 6c69  ck without quali
-000019d0: 7479 2072 6573 7472 6963 7469 6f6e 732e  ty restrictions.
-000019e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001810: 2020 2020 2020 6d61 785f 7265 7375 6c74        max_result
+00001820: 733a 2069 6e74 203d 2031 302c 0a20 2020  s: int = 10,.   
+00001830: 2020 2020 2020 2020 2020 2020 2020 6265                be
+00001840: 7374 5f6f 6e6c 793a 2062 6f6f 6c20 3d20  st_only: bool = 
+00001850: 4661 6c73 652c 0a20 2020 2020 2020 2020  False,.         
+00001860: 2020 2020 2020 2020 6361 6c63 756c 6174          calculat
+00001870: 655f 6d69 6e5f 6d61 783a 2062 6f6f 6c20  e_min_max: bool 
+00001880: 3d20 5472 7565 293a 0a20 2020 2020 2020  = True):.       
+00001890: 2022 2222 2043 7265 6174 6520 6120 6e65   """ Create a ne
+000018a0: 7720 696e 7374 616e 6365 206f 6620 4345  w instance of CE
+000018b0: 4c4f 452e 0a0a 2020 2020 2020 2020 4172  LOE...        Ar
+000018c0: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+000018d0: 6265 7374 5f6f 6e6c 7920 2862 6f6f 6c29  best_only (bool)
+000018e0: 3a20 4966 2046 616c 7365 2070 6963 6b20  : If False pick 
+000018f0: 6f6e 6c79 206e 6f64 6573 2077 6974 6820  only nodes with 
+00001900: 7175 616c 6974 7920 3c20 312e 302c 2065  quality < 1.0, e
+00001910: 6c73 6520 7069 636b 2077 6974 686f 7574  lse pick without
+00001920: 2071 7561 6c69 7479 2072 6573 7472 6963   quality restric
+00001930: 7469 6f6e 732e 0a20 2020 2020 2020 2020  tions..         
+00001940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001950: 2020 2020 2020 2044 6566 6175 6c74 7320         Defaults 
+00001960: 746f 2046 616c 7365 2e0a 2020 2020 2020  to False..      
+00001970: 2020 2020 2020 6361 6c63 756c 6174 655f        calculate_
+00001980: 6d69 6e5f 6d61 7820 2862 6f6f 6c29 3a20  min_max (bool): 
+00001990: 4361 6c63 756c 6174 6520 6d69 6e69 6d75  Calculate minimu
+000019a0: 6d20 616e 6420 6d61 7869 6d75 6d20 686f  m and maximum ho
+000019b0: 7269 7a6f 6e74 616c 2065 7870 616e 7369  rizontal expansi
+000019c0: 6f6e 3f20 5374 6174 6973 7469 6361 6c20  on? Statistical 
+000019d0: 7075 7270 6f73 6520 6f6e 6c79 2e0a 2020  purpose only..  
+000019e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000019f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001a00: 2044 6566 6175 6c74 7320 746f 2046 616c   Defaults to Fal
-00001a10: 7365 2e0a 2020 2020 2020 2020 2020 2020  se..            
-00001a20: 6361 6c63 756c 6174 655f 6d69 6e5f 6d61  calculate_min_ma
-00001a30: 7820 2862 6f6f 6c29 3a20 4361 6c63 756c  x (bool): Calcul
-00001a40: 6174 6520 6d69 6e69 6d75 6d20 616e 6420  ate minimum and 
-00001a50: 6d61 7869 6d75 6d20 686f 7269 7a6f 6e74  maximum horizont
-00001a60: 616c 2065 7870 616e 7369 6f6e 3f20 5374  al expansion? St
-00001a70: 6174 6973 7469 6361 6c20 7075 7270 6f73  atistical purpos
-00001a80: 6520 6f6e 6c79 2e0a 2020 2020 2020 2020  e only..        
+00001a00: 2020 2020 2020 4465 6661 756c 7473 2074        Defaults t
+00001a10: 6f20 5472 7565 2e0a 2020 2020 2020 2020  o True..        
+00001a20: 2020 2020 7265 6669 6e65 6d65 6e74 5f6f      refinement_o
+00001a30: 7065 7261 746f 7220 2842 6173 6552 6566  perator (BaseRef
+00001a40: 696e 656d 656e 745b 4f45 4e6f 6465 5d29  inement[OENode])
+00001a50: 3a20 4f70 6572 6174 6f72 2075 7365 6420  : Operator used 
+00001a60: 746f 2067 656e 6572 6174 6520 7265 6669  to generate refi
+00001a70: 6e65 6d65 6e74 732e 0a20 2020 2020 2020  nements..       
+00001a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00001a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00001aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001ab0: 4465 6661 756c 7473 2074 6f20 5472 7565  Defaults to True
-00001ac0: 2e0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00001ad0: 6669 6e65 6d65 6e74 5f6f 7065 7261 746f  finement_operato
-00001ae0: 7220 2842 6173 6552 6566 696e 656d 656e  r (BaseRefinemen
-00001af0: 745b 4f45 4e6f 6465 5d29 3a20 4f70 6572  t[OENode]): Oper
-00001b00: 6174 6f72 2075 7365 6420 746f 2067 656e  ator used to gen
-00001b10: 6572 6174 6520 7265 6669 6e65 6d65 6e74  erate refinement
-00001b20: 732e 0a20 2020 2020 2020 2020 2020 2020  s..             
-00001b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001b50: 2020 2020 2020 2020 2020 2044 6566 6175             Defau
-00001b60: 6c74 7320 746f 2060 4d6f 6469 6669 6564  lts to `Modified
-00001b70: 4345 4c4f 4552 6566 696e 656d 656e 7460  CELOERefinement`
-00001b80: 2e0a 2020 2020 2020 2020 2020 2020 6865  ..            he
-00001b90: 7572 6973 7469 635f 6675 6e63 2028 4162  uristic_func (Ab
-00001ba0: 7374 7261 6374 4865 7572 6973 7469 6329  stractHeuristic)
-00001bb0: 3a20 4675 6e63 7469 6f6e 2074 6f20 6775  : Function to gu
-00001bc0: 6964 6520 7468 6520 7365 6172 6368 2068  ide the search h
-00001bd0: 6575 7269 7374 6963 2e20 4465 6661 756c  euristic. Defaul
-00001be0: 7473 2074 6f20 6043 454c 4f45 4865 7572  ts to `CELOEHeur
-00001bf0: 6973 7469 6360 2e0a 2020 2020 2020 2020  istic`..        
-00001c00: 2020 2020 6974 6572 5f62 6f75 6e64 2028      iter_bound (
-00001c10: 696e 7429 3a20 4c69 6d69 7420 746f 2073  int): Limit to s
-00001c20: 746f 7020 7468 6520 616c 676f 7269 7468  top the algorith
-00001c30: 6d20 6166 7465 7220 6e20 7265 6669 6e65  m after n refine
-00001c40: 6d65 6e74 2073 7465 7073 2061 7265 2064  ment steps are d
-00001c50: 6f6e 652e 2044 6566 6175 6c74 7320 746f  one. Defaults to
-00001c60: 2031 3027 3030 302e 0a20 2020 2020 2020   10'000..       
-00001c70: 2020 2020 206b 6e6f 776c 6564 6765 5f62       knowledge_b
-00001c80: 6173 6520 284b 6e6f 776c 6564 6765 4261  ase (KnowledgeBa
-00001c90: 7365 293a 2054 6865 206b 6e6f 776c 6564  se): The knowled
-00001ca0: 6765 2062 6173 6520 7468 6174 2074 6865  ge base that the
-00001cb0: 2063 6f6e 6365 7074 206c 6561 726e 6572   concept learner
-00001cc0: 2069 7320 7573 696e 672e 0a20 2020 2020   is using..     
-00001cd0: 2020 2020 2020 206d 6178 5f6e 756d 5f6f         max_num_o
-00001ce0: 665f 636f 6e63 6570 7473 5f74 6573 7465  f_concepts_teste
-00001cf0: 6420 2869 6e74 2920 4c69 6d69 7420 746f  d (int) Limit to
-00001d00: 2073 746f 7020 7468 6520 616c 676f 7269   stop the algori
-00001d10: 7468 6d20 6166 7465 7220 6e20 636f 6e63  thm after n conc
-00001d20: 6570 7473 2074 6573 7465 642e 2044 6566  epts tested. Def
-00001d30: 6175 6c74 7320 746f 2031 3027 3030 302e  aults to 10'000.
-00001d40: 0a20 2020 2020 2020 2020 2020 206d 6178  .            max
-00001d50: 5f72 756e 7469 6d65 2028 696e 7429 3a20  _runtime (int): 
-00001d60: 4c69 6d69 7420 746f 2073 746f 7020 7468  Limit to stop th
-00001d70: 6520 616c 676f 7269 7468 6d20 6166 7465  e algorithm afte
-00001d80: 7220 6e20 7365 636f 6e64 732e 2044 6566  r n seconds. Def
-00001d90: 6175 6c74 7320 746f 2035 2e0a 2020 2020  aults to 5..    
-00001da0: 2020 2020 2020 2020 6d61 785f 7265 7375          max_resu
-00001db0: 6c74 7320 2869 6e74 293a 204d 6178 696d  lts (int): Maxim
-00001dc0: 756d 2068 7970 6f74 6865 7369 7320 746f  um hypothesis to
-00001dd0: 2073 746f 7265 2e20 4465 6661 756c 7473   store. Defaults
-00001de0: 2074 6f20 3130 2e0a 2020 2020 2020 2020   to 10..        
-00001df0: 2020 2020 7175 616c 6974 795f 6675 6e63      quality_func
-00001e00: 2028 4162 7374 7261 6374 5363 6f72 6572   (AbstractScorer
-00001e10: 2920 5468 6520 7175 616c 6974 7920 6675  ) The quality fu
-00001e20: 6e63 7469 6f6e 2074 6f20 6265 2075 7365  nction to be use
-00001e30: 642e 2044 6566 6175 6c74 7320 746f 2060  d. Defaults to `
-00001e40: 4631 602e 0a20 2020 2020 2020 2020 2020  F1`..           
-00001e50: 2072 6561 736f 6e65 7220 284f 574c 5265   reasoner (OWLRe
-00001e60: 6173 6f6e 6572 293a 204f 7074 696f 6e61  asoner): Optiona
-00001e70: 6c6c 7920 7573 6520 6120 6469 6666 6572  lly use a differ
-00001e80: 656e 7420 7265 6173 6f6e 6572 2e20 4966  ent reasoner. If
-00001e90: 2072 6561 736f 6e65 723d 4e6f 6e65 2c20   reasoner=None, 
-00001ea0: 7468 6520 7265 6173 6f6e 6572 206f 660a  the reasoner of.
-00001eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001ed0: 2020 2020 7468 6520 3a61 7474 723a 606b      the :attr:`k
-00001ee0: 6e6f 776c 6564 6765 5f62 6173 6560 2069  nowledge_base` i
-00001ef0: 7320 7573 6564 2e0a 2020 2020 2020 2020  s used..        
-00001f00: 2020 2020 7465 726d 696e 6174 655f 6f6e      terminate_on
-00001f10: 5f67 6f61 6c20 2862 6f6f 6c29 3a20 5768  _goal (bool): Wh
-00001f20: 6574 6865 7220 746f 2073 746f 7020 7468  ether to stop th
-00001f30: 6520 616c 676f 7269 7468 6d20 6966 2061  e algorithm if a
-00001f40: 2070 6572 6665 6374 2073 6f6c 7574 696f   perfect solutio
-00001f50: 6e20 6973 2066 6f75 6e64 2e20 4465 6661  n is found. Defa
-00001f60: 756c 7473 2074 6f20 5472 7565 2e0a 0a0a  ults to True....
-00001f70: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00001f80: 2020 2020 7375 7065 7228 292e 5f5f 696e      super().__in
-00001f90: 6974 5f5f 286b 6e6f 776c 6564 6765 5f62  it__(knowledge_b
-00001fa0: 6173 653d 6b6e 6f77 6c65 6467 655f 6261  ase=knowledge_ba
-00001fb0: 7365 2c0a 2020 2020 2020 2020 2020 2020  se,.            
-00001fc0: 2020 2020 2020 2020 2020 2020 2072 6561               rea
-00001fd0: 736f 6e65 723d 7265 6173 6f6e 6572 2c0a  soner=reasoner,.
-00001fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001ff0: 2020 2020 2020 2020 2072 6566 696e 656d           refinem
-00002000: 656e 745f 6f70 6572 6174 6f72 3d72 6566  ent_operator=ref
-00002010: 696e 656d 656e 745f 6f70 6572 6174 6f72  inement_operator
+00001ab0: 2044 6566 6175 6c74 7320 746f 2060 4d6f   Defaults to `Mo
+00001ac0: 6469 6669 6564 4345 4c4f 4552 6566 696e  difiedCELOERefin
+00001ad0: 656d 656e 7460 2e0a 2020 2020 2020 2020  ement`..        
+00001ae0: 2020 2020 6865 7572 6973 7469 635f 6675      heuristic_fu
+00001af0: 6e63 2028 4162 7374 7261 6374 4865 7572  nc (AbstractHeur
+00001b00: 6973 7469 6329 3a20 4675 6e63 7469 6f6e  istic): Function
+00001b10: 2074 6f20 6775 6964 6520 7468 6520 7365   to guide the se
+00001b20: 6172 6368 2068 6575 7269 7374 6963 2e20  arch heuristic. 
+00001b30: 4465 6661 756c 7473 2074 6f20 6043 454c  Defaults to `CEL
+00001b40: 4f45 4865 7572 6973 7469 6360 2e0a 2020  OEHeuristic`..  
+00001b50: 2020 2020 2020 2020 2020 6974 6572 5f62            iter_b
+00001b60: 6f75 6e64 2028 696e 7429 3a20 4c69 6d69  ound (int): Limi
+00001b70: 7420 746f 2073 746f 7020 7468 6520 616c  t to stop the al
+00001b80: 676f 7269 7468 6d20 6166 7465 7220 6e20  gorithm after n 
+00001b90: 7265 6669 6e65 6d65 6e74 2073 7465 7073  refinement steps
+00001ba0: 2061 7265 2064 6f6e 652e 2044 6566 6175   are done. Defau
+00001bb0: 6c74 7320 746f 2031 3027 3030 302e 0a20  lts to 10'000.. 
+00001bc0: 2020 2020 2020 2020 2020 206b 6e6f 776c             knowl
+00001bd0: 6564 6765 5f62 6173 6520 284b 6e6f 776c  edge_base (Knowl
+00001be0: 6564 6765 4261 7365 293a 2054 6865 206b  edgeBase): The k
+00001bf0: 6e6f 776c 6564 6765 2062 6173 6520 7468  nowledge base th
+00001c00: 6174 2074 6865 2063 6f6e 6365 7074 206c  at the concept l
+00001c10: 6561 726e 6572 2069 7320 7573 696e 672e  earner is using.
+00001c20: 0a20 2020 2020 2020 2020 2020 206d 6178  .            max
+00001c30: 5f6e 756d 5f6f 665f 636f 6e63 6570 7473  _num_of_concepts
+00001c40: 5f74 6573 7465 6420 2869 6e74 2920 4c69  _tested (int) Li
+00001c50: 6d69 7420 746f 2073 746f 7020 7468 6520  mit to stop the 
+00001c60: 616c 676f 7269 7468 6d20 6166 7465 7220  algorithm after 
+00001c70: 6e20 636f 6e63 6570 7473 2074 6573 7465  n concepts teste
+00001c80: 642e 2044 6566 6175 6c74 7320 746f 2031  d. Defaults to 1
+00001c90: 3027 3030 302e 0a20 2020 2020 2020 2020  0'000..         
+00001ca0: 2020 206d 6178 5f72 756e 7469 6d65 2028     max_runtime (
+00001cb0: 696e 7429 3a20 4c69 6d69 7420 746f 2073  int): Limit to s
+00001cc0: 746f 7020 7468 6520 616c 676f 7269 7468  top the algorith
+00001cd0: 6d20 6166 7465 7220 6e20 7365 636f 6e64  m after n second
+00001ce0: 732e 2044 6566 6175 6c74 7320 746f 2035  s. Defaults to 5
+00001cf0: 2e0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
+00001d00: 785f 7265 7375 6c74 7320 2869 6e74 293a  x_results (int):
+00001d10: 204d 6178 696d 756d 2068 7970 6f74 6865   Maximum hypothe
+00001d20: 7369 7320 746f 2073 746f 7265 2e20 4465  sis to store. De
+00001d30: 6661 756c 7473 2074 6f20 3130 2e0a 2020  faults to 10..  
+00001d40: 2020 2020 2020 2020 2020 7175 616c 6974            qualit
+00001d50: 795f 6675 6e63 2028 4162 7374 7261 6374  y_func (Abstract
+00001d60: 5363 6f72 6572 2920 5468 6520 7175 616c  Scorer) The qual
+00001d70: 6974 7920 6675 6e63 7469 6f6e 2074 6f20  ity function to 
+00001d80: 6265 2075 7365 642e 2044 6566 6175 6c74  be used. Default
+00001d90: 7320 746f 2060 4631 602e 0a20 2020 2020  s to `F1`..     
+00001da0: 2020 2020 2020 2072 6561 736f 6e65 7220         reasoner 
+00001db0: 284f 574c 5265 6173 6f6e 6572 293a 204f  (OWLReasoner): O
+00001dc0: 7074 696f 6e61 6c6c 7920 7573 6520 6120  ptionally use a 
+00001dd0: 6469 6666 6572 656e 7420 7265 6173 6f6e  different reason
+00001de0: 6572 2e20 4966 2072 6561 736f 6e65 723d  er. If reasoner=
+00001df0: 4e6f 6e65 2c20 7468 6520 7265 6173 6f6e  None, the reason
+00001e00: 6572 206f 660a 2020 2020 2020 2020 2020  er of.          
+00001e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001e20: 2020 2020 2020 2020 2020 7468 6520 3a61            the :a
+00001e30: 7474 723a 606b 6e6f 776c 6564 6765 5f62  ttr:`knowledge_b
+00001e40: 6173 6560 2069 7320 7573 6564 2e0a 2020  ase` is used..  
+00001e50: 2020 2020 2020 2020 2020 7465 726d 696e            termin
+00001e60: 6174 655f 6f6e 5f67 6f61 6c20 2862 6f6f  ate_on_goal (boo
+00001e70: 6c29 3a20 5768 6574 6865 7220 746f 2073  l): Whether to s
+00001e80: 746f 7020 7468 6520 616c 676f 7269 7468  top the algorith
+00001e90: 6d20 6966 2061 2070 6572 6665 6374 2073  m if a perfect s
+00001ea0: 6f6c 7574 696f 6e20 6973 2066 6f75 6e64  olution is found
+00001eb0: 2e20 4465 6661 756c 7473 2074 6f20 5472  . Defaults to Tr
+00001ec0: 7565 2e0a 0a0a 2020 2020 2020 2020 2222  ue....        ""
+00001ed0: 220a 2020 2020 2020 2020 7375 7065 7228  ".        super(
+00001ee0: 292e 5f5f 696e 6974 5f5f 286b 6e6f 776c  ).__init__(knowl
+00001ef0: 6564 6765 5f62 6173 653d 6b6e 6f77 6c65  edge_base=knowle
+00001f00: 6467 655f 6261 7365 2c0a 2020 2020 2020  dge_base,.      
+00001f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001f20: 2020 2072 6561 736f 6e65 723d 7265 6173     reasoner=reas
+00001f30: 6f6e 6572 2c0a 2020 2020 2020 2020 2020  oner,.          
+00001f40: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00001f50: 6566 696e 656d 656e 745f 6f70 6572 6174  efinement_operat
+00001f60: 6f72 3d72 6566 696e 656d 656e 745f 6f70  or=refinement_op
+00001f70: 6572 6174 6f72 2c0a 2020 2020 2020 2020  erator,.        
+00001f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001f90: 2071 7561 6c69 7479 5f66 756e 633d 7175   quality_func=qu
+00001fa0: 616c 6974 795f 6675 6e63 2c0a 2020 2020  ality_func,.    
+00001fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001fc0: 2020 2020 2068 6575 7269 7374 6963 5f66       heuristic_f
+00001fd0: 756e 633d 6865 7572 6973 7469 635f 6675  unc=heuristic_fu
+00001fe0: 6e63 2c0a 2020 2020 2020 2020 2020 2020  nc,.            
+00001ff0: 2020 2020 2020 2020 2020 2020 2074 6572               ter
+00002000: 6d69 6e61 7465 5f6f 6e5f 676f 616c 3d74  minate_on_goal=t
+00002010: 6572 6d69 6e61 7465 5f6f 6e5f 676f 616c  erminate_on_goal
 00002020: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00002030: 2020 2020 2020 2020 2020 2071 7561 6c69             quali
-00002040: 7479 5f66 756e 633d 7175 616c 6974 795f  ty_func=quality_
-00002050: 6675 6e63 2c0a 2020 2020 2020 2020 2020  func,.          
-00002060: 2020 2020 2020 2020 2020 2020 2020 2068                 h
-00002070: 6575 7269 7374 6963 5f66 756e 633d 6865  euristic_func=he
-00002080: 7572 6973 7469 635f 6675 6e63 2c0a 2020  uristic_func,.  
-00002090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000020a0: 2020 2020 2020 2074 6572 6d69 6e61 7465         terminate
-000020b0: 5f6f 6e5f 676f 616c 3d74 6572 6d69 6e61  _on_goal=termina
-000020c0: 7465 5f6f 6e5f 676f 616c 2c0a 2020 2020  te_on_goal,.    
-000020d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000020e0: 2020 2020 2069 7465 725f 626f 756e 643d       iter_bound=
-000020f0: 6974 6572 5f62 6f75 6e64 2c0a 2020 2020  iter_bound,.    
-00002100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002110: 2020 2020 206d 6178 5f6e 756d 5f6f 665f       max_num_of_
-00002120: 636f 6e63 6570 7473 5f74 6573 7465 643d  concepts_tested=
-00002130: 6d61 785f 6e75 6d5f 6f66 5f63 6f6e 6365  max_num_of_conce
-00002140: 7074 735f 7465 7374 6564 2c0a 2020 2020  pts_tested,.    
-00002150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002160: 2020 2020 206d 6178 5f72 756e 7469 6d65       max_runtime
-00002170: 3d6d 6178 5f72 756e 7469 6d65 290a 0a20  =max_runtime).. 
-00002180: 2020 2020 2020 2073 656c 662e 7365 6172         self.sear
-00002190: 6368 5f74 7265 6520 3d20 6469 6374 2829  ch_tree = dict()
-000021a0: 0a20 2020 2020 2020 2073 656c 662e 6865  .        self.he
-000021b0: 7572 6973 7469 635f 7175 6575 6520 3d20  uristic_queue = 
-000021c0: 536f 7274 6564 5365 7428 6b65 793d 4865  SortedSet(key=He
-000021d0: 7572 6973 7469 634f 7264 6572 6564 4e6f  uristicOrderedNo
-000021e0: 6465 290a 2020 2020 2020 2020 7365 6c66  de).        self
-000021f0: 2e5f 7365 656e 5f6e 6f72 6d5f 636f 6e63  ._seen_norm_conc
-00002200: 6570 7473 203d 2073 6574 2829 0a20 2020  epts = set().   
-00002210: 2020 2020 2073 656c 662e 6265 7374 5f64       self.best_d
-00002220: 6573 6372 6970 7469 6f6e 7320 3d20 4576  escriptions = Ev
-00002230: 616c 7561 7465 6444 6573 6372 6970 7469  aluatedDescripti
-00002240: 6f6e 5365 7428 6d61 785f 7369 7a65 3d6d  onSet(max_size=m
-00002250: 6178 5f72 6573 756c 7473 2c20 6f72 6465  ax_results, orde
-00002260: 7269 6e67 3d51 7561 6c69 7479 4f72 6465  ring=QualityOrde
-00002270: 7265 644e 6f64 6529 0a0a 2020 2020 2020  redNode)..      
-00002280: 2020 7365 6c66 2e62 6573 745f 6f6e 6c79    self.best_only
-00002290: 203d 2062 6573 745f 6f6e 6c79 0a20 2020   = best_only.   
-000022a0: 2020 2020 2073 656c 662e 6361 6c63 756c       self.calcul
-000022b0: 6174 655f 6d69 6e5f 6d61 7820 3d20 6361  ate_min_max = ca
-000022c0: 6c63 756c 6174 655f 6d69 6e5f 6d61 780a  lculate_min_max.
-000022d0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-000022e0: 785f 6865 203d 2030 0a20 2020 2020 2020  x_he = 0.       
-000022f0: 2073 656c 662e 6d69 6e5f 6865 203d 2031   self.min_he = 1
-00002300: 0a20 2020 2020 2020 2023 2054 4f44 4f3a  .        # TODO:
-00002310: 2043 443a 2054 6869 7320 636f 756c 6420   CD: This could 
-00002320: 6265 2064 6566 696e 6564 2069 6e20 4261  be defined in Ba
-00002330: 7365 436f 6e63 6570 744c 6561 726e 6572  seConceptLearner
-00002340: 2061 7320 6974 2069 7320 7573 6564 2069   as it is used i
-00002350: 6e20 616c 6c20 636c 6173 7365 7320 7468  n all classes th
-00002360: 6174 2069 6e68 6572 6974 7320 6672 6f6d  at inherits from
-00002370: 0a20 2020 2020 2020 2023 2054 4f44 4f3a  .        # TODO:
-00002380: 2043 443a 2042 6173 6543 6f6e 6365 7074   CD: BaseConcept
-00002390: 4c65 6172 6e65 720a 2020 2020 2020 2020  Learner.        
-000023a0: 7365 6c66 2e5f 6c65 6172 6e69 6e67 5f70  self._learning_p
-000023b0: 726f 626c 656d 203d 204e 6f6e 650a 2020  roblem = None.  
-000023c0: 2020 2020 2020 7365 6c66 2e5f 6d61 785f        self._max_
-000023d0: 7275 6e74 696d 6520 3d20 4e6f 6e65 0a0a  runtime = None..
-000023e0: 2020 2020 6465 6620 6e65 7874 5f6e 6f64      def next_nod
-000023f0: 655f 746f 5f65 7870 616e 6428 7365 6c66  e_to_expand(self
-00002400: 2c20 7374 6570 3a20 696e 7429 202d 3e20  , step: int) -> 
-00002410: 4f45 4e6f 6465 3a0a 2020 2020 2020 2020  OENode:.        
-00002420: 6966 206e 6f74 2073 656c 662e 6265 7374  if not self.best
-00002430: 5f6f 6e6c 793a 0a20 2020 2020 2020 2020  _only:.         
-00002440: 2020 2066 6f72 206e 6f64 6520 696e 2072     for node in r
-00002450: 6576 6572 7365 6428 7365 6c66 2e68 6575  eversed(self.heu
-00002460: 7269 7374 6963 5f71 7565 7565 293a 0a20  ristic_queue):. 
-00002470: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00002480: 6620 6e6f 6465 2e71 7561 6c69 7479 203c  f node.quality <
-00002490: 2031 2e30 3a0a 2020 2020 2020 2020 2020   1.0:.          
-000024a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000024b0: 206e 6f64 650a 2020 2020 2020 2020 2020   node.          
-000024c0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000024d0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-000024e0: 6c75 6545 7272 6f72 2822 4e6f 204e 6f64  lueError("No Nod
-000024f0: 6520 7769 7468 206c 6573 7365 7220 6163  e with lesser ac
-00002500: 6375 7261 6379 2066 6f75 6e64 2229 0a20  curacy found"). 
-00002510: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00002520: 2020 2020 2020 2020 2023 2066 726f 6d20           # from 
-00002530: 7265 696d 706c 656d 656e 7461 7469 6f6e  reimplementation
-00002540: 2c20 7069 636b 2077 6974 686f 7574 2071  , pick without q
-00002550: 7561 6c69 7479 2063 7269 7465 7269 6f6e  uality criterion
-00002560: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00002570: 7572 6e20 7365 6c66 2e68 6575 7269 7374  urn self.heurist
-00002580: 6963 5f71 7565 7565 5b2d 315d 0a0a 2020  ic_queue[-1]..  
-00002590: 2020 2020 2020 2320 4f72 6967 696e 616c        # Original
-000025a0: 2072 6569 6d70 6c65 6d65 6e74 6174 696f   reimplementatio
-000025b0: 6e20 6f66 2043 454c 4f45 3a20 536f 7274  n of CELOE: Sort
-000025c0: 2073 6561 7263 6820 7472 6565 2061 7420   search tree at 
-000025d0: 6561 6368 2073 7465 702e 2051 7569 7465  each step. Quite
-000025e0: 2069 6e65 6666 6963 6965 6e74 2e0a 2020   inefficient..  
-000025f0: 2020 2020 2020 2320 7365 6c66 2e73 6561        # self.sea
-00002600: 7263 685f 7472 6565 2e73 6f72 745f 7365  rch_tree.sort_se
-00002610: 6172 6368 5f74 7265 655f 6279 5f64 6563  arch_tree_by_dec
-00002620: 7265 6173 696e 675f 6f72 6465 7228 6b65  reasing_order(ke
-00002630: 793d 2768 6575 7269 7374 6963 2729 0a20  y='heuristic'). 
-00002640: 2020 2020 2020 2023 2069 6620 7365 6c66         # if self
-00002650: 2e76 6572 626f 7365 203e 2031 3a0a 2020  .verbose > 1:.  
-00002660: 2020 2020 2020 2320 2020 2020 7365 6c66        #     self
-00002670: 2e73 6561 7263 685f 7472 6565 2e73 686f  .search_tree.sho
-00002680: 775f 7365 6172 6368 5f74 7265 6528 7374  w_search_tree(st
-00002690: 6570 290a 2020 2020 2020 2020 2320 666f  ep).        # fo
-000026a0: 7220 6e20 696e 2073 656c 662e 7365 6172  r n in self.sear
-000026b0: 6368 5f74 7265 653a 0a20 2020 2020 2020  ch_tree:.       
-000026c0: 2023 2020 2020 2072 6574 7572 6e20 6e0a   #     return n.
-000026d0: 2020 2020 2020 2020 2320 7261 6973 6520          # raise 
-000026e0: 5661 6c75 6545 7272 6f72 2827 5365 6172  ValueError('Sear
-000026f0: 6368 2054 7265 6520 6361 6e20 6e6f 7420  ch Tree can not 
-00002700: 6265 2065 6d70 7479 2e27 290a 0a20 2020  be empty.')..   
-00002710: 2064 6566 2062 6573 745f 6879 706f 7468   def best_hypoth
-00002720: 6573 6573 2873 656c 662c 206e 3d31 3029  eses(self, n=10)
-00002730: 202d 3e20 556e 696f 6e5b 4f45 4e6f 6465   -> Union[OENode
-00002740: 2c20 4974 6572 6162 6c65 5b4f 454e 6f64  , Iterable[OENod
-00002750: 655d 5d3a 0a20 2020 2020 2020 2078 203d  e]]:.        x =
-00002760: 2069 736c 6963 6528 7365 6c66 2e62 6573   islice(self.bes
-00002770: 745f 6465 7363 7269 7074 696f 6e73 2c20  t_descriptions, 
-00002780: 6e29 0a20 2020 2020 2020 2069 6620 6e20  n).        if n 
-00002790: 3d3d 2031 3a0a 2020 2020 2020 2020 2020  == 1:.          
-000027a0: 2020 7265 7475 726e 206e 6578 7428 7829    return next(x)
-000027b0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-000027c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000027d0: 6e20 6c69 7374 2878 290a 0a20 2020 2064  n list(x)..    d
-000027e0: 6566 206d 616b 655f 6e6f 6465 2873 656c  ef make_node(sel
-000027f0: 662c 2063 3a20 4f57 4c43 6c61 7373 4578  f, c: OWLClassEx
-00002800: 7072 6573 7369 6f6e 2c20 7061 7265 6e74  pression, parent
-00002810: 5f6e 6f64 653a 204f 7074 696f 6e61 6c5b  _node: Optional[
-00002820: 4f45 4e6f 6465 5d20 3d20 4e6f 6e65 2c20  OENode] = None, 
-00002830: 6973 5f72 6f6f 743a 2062 6f6f 6c20 3d20  is_root: bool = 
-00002840: 4661 6c73 6529 202d 3e20 4f45 4e6f 6465  False) -> OENode
-00002850: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00002860: 2020 2020 2020 4372 6561 7465 2061 206e        Create a n
-00002870: 6f64 6520 666f 7220 4345 4c4f 452e 0a0a  ode for CELOE...
-00002880: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
-00002890: 2020 2020 2020 2020 2020 633a 2054 6865            c: The
-000028a0: 2063 6c61 7373 2065 7870 7265 7373 696f   class expressio
-000028b0: 6e20 6f66 2074 6869 7320 6e6f 6465 2e0a  n of this node..
-000028c0: 2020 2020 2020 2020 2020 2020 7061 7265              pare
-000028d0: 6e74 5f6e 6f64 653a 2050 6172 656e 7420  nt_node: Parent 
-000028e0: 6e6f 6465 2e0a 2020 2020 2020 2020 2020  node..          
-000028f0: 2020 6973 5f72 6f6f 743a 2049 7320 7468    is_root: Is th
-00002900: 6973 2074 6865 2072 6f6f 7420 6e6f 6465  is the root node
-00002910: 3f0a 0a20 2020 2020 2020 2052 6574 7572  ?..        Retur
-00002920: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
-00002930: 4f45 4e6f 6465 3a20 5468 6520 6e6f 6465  OENode: The node
-00002940: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-00002950: 2020 2020 2020 7220 3d20 4f45 4e6f 6465        r = OENode
-00002960: 2863 2c20 7365 6c66 2e6b 622e 636f 6e63  (c, self.kb.conc
-00002970: 6570 745f 6c65 6e28 6329 2c20 7061 7265  ept_len(c), pare
-00002980: 6e74 5f6e 6f64 653d 7061 7265 6e74 5f6e  nt_node=parent_n
-00002990: 6f64 652c 2069 735f 726f 6f74 3d69 735f  ode, is_root=is_
-000029a0: 726f 6f74 290a 2020 2020 2020 2020 7265  root).        re
-000029b0: 7475 726e 2072 0a0a 2020 2020 4063 6f6e  turn r..    @con
-000029c0: 7465 7874 6d61 6e61 6765 720a 2020 2020  textmanager.    
-000029d0: 6465 6620 7570 6461 7469 6e67 5f6e 6f64  def updating_nod
-000029e0: 6528 7365 6c66 2c20 6e6f 6465 3a20 4f45  e(self, node: OE
-000029f0: 4e6f 6465 293a 0a20 2020 2020 2020 2022  Node):.        "
-00002a00: 2222 0a20 2020 2020 2020 2052 656d 6f76  "".        Remov
-00002a10: 6573 2074 6865 206e 6f64 6520 6672 6f6d  es the node from
-00002a20: 2074 6865 2068 6575 7269 7374 6963 2073   the heuristic s
-00002a30: 6f72 7465 6420 7365 7420 616e 6420 696e  orted set and in
-00002a40: 7365 7274 7320 6974 2061 6761 696e 2e0a  serts it again..
-00002a50: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
-00002a60: 2020 2020 2020 2020 2020 204e 6f64 6520             Node 
-00002a70: 746f 2075 7064 6174 652e 0a0a 2020 2020  to update...    
-00002a80: 2020 2020 5969 656c 6473 3a0a 2020 2020      Yields:.    
-00002a90: 2020 2020 2020 2020 5468 6520 6e6f 6465          The node
-00002aa0: 2069 7473 656c 662e 0a20 2020 2020 2020   itself..       
-00002ab0: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
-00002ac0: 662e 6865 7572 6973 7469 635f 7175 6575  f.heuristic_queu
-00002ad0: 652e 6469 7363 6172 6428 6e6f 6465 290a  e.discard(node).
-00002ae0: 2020 2020 2020 2020 7969 656c 6420 6e6f          yield no
-00002af0: 6465 0a20 2020 2020 2020 2073 656c 662e  de.        self.
-00002b00: 6865 7572 6973 7469 635f 7175 6575 652e  heuristic_queue.
-00002b10: 6164 6428 6e6f 6465 290a 0a20 2020 2064  add(node)..    d
-00002b20: 6566 2064 6f77 6e77 6172 645f 7265 6669  ef downward_refi
-00002b30: 6e65 6d65 6e74 2873 656c 662c 206e 6f64  nement(self, nod
-00002b40: 653a 204f 454e 6f64 6529 202d 3e20 4974  e: OENode) -> It
-00002b50: 6572 6162 6c65 5b4f 454e 6f64 655d 3a0a  erable[OENode]:.
-00002b60: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
-00002b70: 7369 6e73 7461 6e63 6528 6e6f 6465 2c20  sinstance(node, 
-00002b80: 4f45 4e6f 6465 290a 0a20 2020 2020 2020  OENode)..       
-00002b90: 2077 6974 6820 7365 6c66 2e75 7064 6174   with self.updat
-00002ba0: 696e 675f 6e6f 6465 286e 6f64 6529 3a0a  ing_node(node):.
-00002bb0: 2020 2020 2020 2020 2020 2020 2320 544f              # TO
-00002bc0: 444f 3a20 4e4e 460a 2020 2020 2020 2020  DO: NNF.        
-00002bd0: 2020 2020 7265 6669 6e65 6d65 6e74 7320      refinements 
-00002be0: 3d20 536f 7274 6564 5365 7428 0a20 2020  = SortedSet(.   
-00002bf0: 2020 2020 2020 2020 2020 2020 206d 6170               map
-00002c00: 285f 636f 6e63 6570 745f 6f70 6572 616e  (_concept_operan
-00002c10: 645f 736f 7274 6572 2e73 6f72 742c 0a20  d_sorter.sort,. 
-00002c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002c30: 2020 2073 656c 662e 6f70 6572 6174 6f72     self.operator
-00002c40: 2e72 6566 696e 6528 0a20 2020 2020 2020  .refine(.       
-00002c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002c60: 206e 6f64 652e 636f 6e63 6570 742c 0a20   node.concept,. 
-00002c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002c80: 2020 2020 2020 206d 6178 5f6c 656e 6774         max_lengt
-00002c90: 683d 6e6f 6465 2e68 5f65 7870 2c0a 2020  h=node.h_exp,.  
+00002030: 2020 2020 2020 2020 2020 2069 7465 725f             iter_
+00002040: 626f 756e 643d 6974 6572 5f62 6f75 6e64  bound=iter_bound
+00002050: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00002060: 2020 2020 2020 2020 2020 206d 6178 5f6e             max_n
+00002070: 756d 5f6f 665f 636f 6e63 6570 7473 5f74  um_of_concepts_t
+00002080: 6573 7465 643d 6d61 785f 6e75 6d5f 6f66  ested=max_num_of
+00002090: 5f63 6f6e 6365 7074 735f 7465 7374 6564  _concepts_tested
+000020a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000020b0: 2020 2020 2020 2020 2020 206d 6178 5f72             max_r
+000020c0: 756e 7469 6d65 3d6d 6178 5f72 756e 7469  untime=max_runti
+000020d0: 6d65 290a 0a20 2020 2020 2020 2073 656c  me)..        sel
+000020e0: 662e 7365 6172 6368 5f74 7265 6520 3d20  f.search_tree = 
+000020f0: 6469 6374 2829 0a20 2020 2020 2020 2073  dict().        s
+00002100: 656c 662e 6865 7572 6973 7469 635f 7175  elf.heuristic_qu
+00002110: 6575 6520 3d20 536f 7274 6564 5365 7428  eue = SortedSet(
+00002120: 6b65 793d 4865 7572 6973 7469 634f 7264  key=HeuristicOrd
+00002130: 6572 6564 4e6f 6465 290a 2020 2020 2020  eredNode).      
+00002140: 2020 7365 6c66 2e5f 7365 656e 5f6e 6f72    self._seen_nor
+00002150: 6d5f 636f 6e63 6570 7473 203d 2073 6574  m_concepts = set
+00002160: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+00002170: 6265 7374 5f64 6573 6372 6970 7469 6f6e  best_description
+00002180: 7320 3d20 4576 616c 7561 7465 6444 6573  s = EvaluatedDes
+00002190: 6372 6970 7469 6f6e 5365 7428 6d61 785f  criptionSet(max_
+000021a0: 7369 7a65 3d6d 6178 5f72 6573 756c 7473  size=max_results
+000021b0: 2c20 6f72 6465 7269 6e67 3d51 7561 6c69  , ordering=Quali
+000021c0: 7479 4f72 6465 7265 644e 6f64 6529 0a0a  tyOrderedNode)..
+000021d0: 2020 2020 2020 2020 7365 6c66 2e62 6573          self.bes
+000021e0: 745f 6f6e 6c79 203d 2062 6573 745f 6f6e  t_only = best_on
+000021f0: 6c79 0a20 2020 2020 2020 2073 656c 662e  ly.        self.
+00002200: 6361 6c63 756c 6174 655f 6d69 6e5f 6d61  calculate_min_ma
+00002210: 7820 3d20 6361 6c63 756c 6174 655f 6d69  x = calculate_mi
+00002220: 6e5f 6d61 780a 0a20 2020 2020 2020 2073  n_max..        s
+00002230: 656c 662e 6d61 785f 6865 203d 2030 0a20  elf.max_he = 0. 
+00002240: 2020 2020 2020 2073 656c 662e 6d69 6e5f         self.min_
+00002250: 6865 203d 2031 0a20 2020 2020 2020 2023  he = 1.        #
+00002260: 2054 4f44 4f3a 2043 443a 2054 6869 7320   TODO: CD: This 
+00002270: 636f 756c 6420 6265 2064 6566 696e 6564  could be defined
+00002280: 2069 6e20 4261 7365 436f 6e63 6570 744c   in BaseConceptL
+00002290: 6561 726e 6572 2061 7320 6974 2069 7320  earner as it is 
+000022a0: 7573 6564 2069 6e20 616c 6c20 636c 6173  used in all clas
+000022b0: 7365 7320 7468 6174 2069 6e68 6572 6974  ses that inherit
+000022c0: 7320 6672 6f6d 0a20 2020 2020 2020 2023  s from.        #
+000022d0: 2054 4f44 4f3a 2043 443a 2042 6173 6543   TODO: CD: BaseC
+000022e0: 6f6e 6365 7074 4c65 6172 6e65 720a 2020  onceptLearner.  
+000022f0: 2020 2020 2020 7365 6c66 2e5f 6c65 6172        self._lear
+00002300: 6e69 6e67 5f70 726f 626c 656d 203d 204e  ning_problem = N
+00002310: 6f6e 650a 2020 2020 2020 2020 7365 6c66  one.        self
+00002320: 2e5f 6d61 785f 7275 6e74 696d 6520 3d20  ._max_runtime = 
+00002330: 4e6f 6e65 0a0a 2020 2020 6465 6620 6e65  None..    def ne
+00002340: 7874 5f6e 6f64 655f 746f 5f65 7870 616e  xt_node_to_expan
+00002350: 6428 7365 6c66 2c20 7374 6570 3a20 696e  d(self, step: in
+00002360: 7429 202d 3e20 4f45 4e6f 6465 3a0a 2020  t) -> OENode:.  
+00002370: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
+00002380: 662e 6265 7374 5f6f 6e6c 793a 0a20 2020  f.best_only:.   
+00002390: 2020 2020 2020 2020 2066 6f72 206e 6f64           for nod
+000023a0: 6520 696e 2072 6576 6572 7365 6428 7365  e in reversed(se
+000023b0: 6c66 2e68 6575 7269 7374 6963 5f71 7565  lf.heuristic_que
+000023c0: 7565 293a 0a20 2020 2020 2020 2020 2020  ue):.           
+000023d0: 2020 2020 2069 6620 6e6f 6465 2e71 7561       if node.qua
+000023e0: 6c69 7479 203c 2031 2e30 3a0a 2020 2020  lity < 1.0:.    
+000023f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002400: 7265 7475 726e 206e 6f64 650a 2020 2020  return node.    
+00002410: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00002420: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+00002430: 6973 6520 5661 6c75 6545 7272 6f72 2822  ise ValueError("
+00002440: 4e6f 204e 6f64 6520 7769 7468 206c 6573  No Node with les
+00002450: 7365 7220 6163 6375 7261 6379 2066 6f75  ser accuracy fou
+00002460: 6e64 2229 0a20 2020 2020 2020 2065 6c73  nd").        els
+00002470: 653a 0a20 2020 2020 2020 2020 2020 2023  e:.            #
+00002480: 2066 726f 6d20 7265 696d 706c 656d 656e   from reimplemen
+00002490: 7461 7469 6f6e 2c20 7069 636b 2077 6974  tation, pick wit
+000024a0: 686f 7574 2071 7561 6c69 7479 2063 7269  hout quality cri
+000024b0: 7465 7269 6f6e 0a20 2020 2020 2020 2020  terion.         
+000024c0: 2020 2072 6574 7572 6e20 7365 6c66 2e68     return self.h
+000024d0: 6575 7269 7374 6963 5f71 7565 7565 5b2d  euristic_queue[-
+000024e0: 315d 0a0a 2020 2020 2020 2020 2320 4f72  1]..        # Or
+000024f0: 6967 696e 616c 2072 6569 6d70 6c65 6d65  iginal reimpleme
+00002500: 6e74 6174 696f 6e20 6f66 2043 454c 4f45  ntation of CELOE
+00002510: 3a20 536f 7274 2073 6561 7263 6820 7472  : Sort search tr
+00002520: 6565 2061 7420 6561 6368 2073 7465 702e  ee at each step.
+00002530: 2051 7569 7465 2069 6e65 6666 6963 6965   Quite inefficie
+00002540: 6e74 2e0a 2020 2020 2020 2020 2320 7365  nt..        # se
+00002550: 6c66 2e73 6561 7263 685f 7472 6565 2e73  lf.search_tree.s
+00002560: 6f72 745f 7365 6172 6368 5f74 7265 655f  ort_search_tree_
+00002570: 6279 5f64 6563 7265 6173 696e 675f 6f72  by_decreasing_or
+00002580: 6465 7228 6b65 793d 2768 6575 7269 7374  der(key='heurist
+00002590: 6963 2729 0a20 2020 2020 2020 2023 2069  ic').        # i
+000025a0: 6620 7365 6c66 2e76 6572 626f 7365 203e  f self.verbose >
+000025b0: 2031 3a0a 2020 2020 2020 2020 2320 2020   1:.        #   
+000025c0: 2020 7365 6c66 2e73 6561 7263 685f 7472    self.search_tr
+000025d0: 6565 2e73 686f 775f 7365 6172 6368 5f74  ee.show_search_t
+000025e0: 7265 6528 7374 6570 290a 2020 2020 2020  ree(step).      
+000025f0: 2020 2320 666f 7220 6e20 696e 2073 656c    # for n in sel
+00002600: 662e 7365 6172 6368 5f74 7265 653a 0a20  f.search_tree:. 
+00002610: 2020 2020 2020 2023 2020 2020 2072 6574         #     ret
+00002620: 7572 6e20 6e0a 2020 2020 2020 2020 2320  urn n.        # 
+00002630: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+00002640: 2827 5365 6172 6368 2054 7265 6520 6361  ('Search Tree ca
+00002650: 6e20 6e6f 7420 6265 2065 6d70 7479 2e27  n not be empty.'
+00002660: 290a 0a20 2020 2064 6566 2062 6573 745f  )..    def best_
+00002670: 6879 706f 7468 6573 6573 2873 656c 662c  hypotheses(self,
+00002680: 206e 3a20 696e 7420 3d20 312c 2072 6574   n: int = 1, ret
+00002690: 7572 6e5f 6e6f 6465 3a20 626f 6f6c 203d  urn_node: bool =
+000026a0: 2046 616c 7365 2920 2d3e 2055 6e69 6f6e   False) -> Union
+000026b0: 5b55 6e69 6f6e 5b0a 2020 2020 2020 2020  [Union[.        
+000026c0: 4f57 4c43 6c61 7373 4578 7072 6573 7369  OWLClassExpressi
+000026d0: 6f6e 2c20 4974 6572 6162 6c65 5b4f 574c  on, Iterable[OWL
+000026e0: 436c 6173 7345 7870 7265 7373 696f 6e5d  ClassExpression]
+000026f0: 5d2c 2055 6e69 6f6e 5b4f 454e 6f64 652c  ], Union[OENode,
+00002700: 2049 7465 7261 626c 655b 4f45 4e6f 6465   Iterable[OENode
+00002710: 5d5d 5d3a 0a20 2020 2020 2020 2078 203d  ]]]:.        x =
+00002720: 2069 736c 6963 6528 7365 6c66 2e62 6573   islice(self.bes
+00002730: 745f 6465 7363 7269 7074 696f 6e73 2c20  t_descriptions, 
+00002740: 6e29 0a20 2020 2020 2020 2069 6620 6e20  n).        if n 
+00002750: 3d3d 2031 3a0a 2020 2020 2020 2020 2020  == 1:.          
+00002760: 2020 6966 2072 6574 7572 6e5f 6e6f 6465    if return_node
+00002770: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00002780: 2020 7265 7475 726e 206e 6578 7428 7829    return next(x)
+00002790: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+000027a0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000027b0: 2020 2072 6574 7572 6e20 6e65 7874 2878     return next(x
+000027c0: 292e 636f 6e63 6570 740a 2020 2020 2020  ).concept.      
+000027d0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000027e0: 2020 2020 6966 2072 6574 7572 6e5f 6e6f      if return_no
+000027f0: 6465 3a0a 2020 2020 2020 2020 2020 2020  de:.            
+00002800: 2020 2020 7265 7475 726e 205b 6920 666f      return [i fo
+00002810: 7220 6920 696e 2078 5d0a 2020 2020 2020  r i in x].      
+00002820: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00002830: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00002840: 726e 205b 692e 636f 6e63 6570 7420 666f  rn [i.concept fo
+00002850: 7220 6920 696e 2078 5d0a 0a20 2020 2064  r i in x]..    d
+00002860: 6566 206d 616b 655f 6e6f 6465 2873 656c  ef make_node(sel
+00002870: 662c 2063 3a20 4f57 4c43 6c61 7373 4578  f, c: OWLClassEx
+00002880: 7072 6573 7369 6f6e 2c20 7061 7265 6e74  pression, parent
+00002890: 5f6e 6f64 653a 204f 7074 696f 6e61 6c5b  _node: Optional[
+000028a0: 4f45 4e6f 6465 5d20 3d20 4e6f 6e65 2c20  OENode] = None, 
+000028b0: 6973 5f72 6f6f 743a 2062 6f6f 6c20 3d20  is_root: bool = 
+000028c0: 4661 6c73 6529 202d 3e20 4f45 4e6f 6465  False) -> OENode
+000028d0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+000028e0: 2020 2020 2020 4372 6561 7465 2061 206e        Create a n
+000028f0: 6f64 6520 666f 7220 4345 4c4f 452e 0a0a  ode for CELOE...
+00002900: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
+00002910: 2020 2020 2020 2020 2020 633a 2054 6865            c: The
+00002920: 2063 6c61 7373 2065 7870 7265 7373 696f   class expressio
+00002930: 6e20 6f66 2074 6869 7320 6e6f 6465 2e0a  n of this node..
+00002940: 2020 2020 2020 2020 2020 2020 7061 7265              pare
+00002950: 6e74 5f6e 6f64 653a 2050 6172 656e 7420  nt_node: Parent 
+00002960: 6e6f 6465 2e0a 2020 2020 2020 2020 2020  node..          
+00002970: 2020 6973 5f72 6f6f 743a 2049 7320 7468    is_root: Is th
+00002980: 6973 2074 6865 2072 6f6f 7420 6e6f 6465  is the root node
+00002990: 3f0a 0a20 2020 2020 2020 2052 6574 7572  ?..        Retur
+000029a0: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
+000029b0: 4f45 4e6f 6465 3a20 5468 6520 6e6f 6465  OENode: The node
+000029c0: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+000029d0: 2020 2020 2020 7220 3d20 4f45 4e6f 6465        r = OENode
+000029e0: 2863 2c20 7365 6c66 2e6b 622e 636f 6e63  (c, self.kb.conc
+000029f0: 6570 745f 6c65 6e28 6329 2c20 7061 7265  ept_len(c), pare
+00002a00: 6e74 5f6e 6f64 653d 7061 7265 6e74 5f6e  nt_node=parent_n
+00002a10: 6f64 652c 2069 735f 726f 6f74 3d69 735f  ode, is_root=is_
+00002a20: 726f 6f74 290a 2020 2020 2020 2020 7265  root).        re
+00002a30: 7475 726e 2072 0a0a 2020 2020 4063 6f6e  turn r..    @con
+00002a40: 7465 7874 6d61 6e61 6765 720a 2020 2020  textmanager.    
+00002a50: 6465 6620 7570 6461 7469 6e67 5f6e 6f64  def updating_nod
+00002a60: 6528 7365 6c66 2c20 6e6f 6465 3a20 4f45  e(self, node: OE
+00002a70: 4e6f 6465 293a 0a20 2020 2020 2020 2022  Node):.        "
+00002a80: 2222 0a20 2020 2020 2020 2052 656d 6f76  "".        Remov
+00002a90: 6573 2074 6865 206e 6f64 6520 6672 6f6d  es the node from
+00002aa0: 2074 6865 2068 6575 7269 7374 6963 2073   the heuristic s
+00002ab0: 6f72 7465 6420 7365 7420 616e 6420 696e  orted set and in
+00002ac0: 7365 7274 7320 6974 2061 6761 696e 2e0a  serts it again..
+00002ad0: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+00002ae0: 2020 2020 2020 2020 2020 204e 6f64 6520             Node 
+00002af0: 746f 2075 7064 6174 652e 0a0a 2020 2020  to update...    
+00002b00: 2020 2020 5969 656c 6473 3a0a 2020 2020      Yields:.    
+00002b10: 2020 2020 2020 2020 5468 6520 6e6f 6465          The node
+00002b20: 2069 7473 656c 662e 0a20 2020 2020 2020   itself..       
+00002b30: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
+00002b40: 662e 6865 7572 6973 7469 635f 7175 6575  f.heuristic_queu
+00002b50: 652e 6469 7363 6172 6428 6e6f 6465 290a  e.discard(node).
+00002b60: 2020 2020 2020 2020 7969 656c 6420 6e6f          yield no
+00002b70: 6465 0a20 2020 2020 2020 2073 656c 662e  de.        self.
+00002b80: 6865 7572 6973 7469 635f 7175 6575 652e  heuristic_queue.
+00002b90: 6164 6428 6e6f 6465 290a 0a20 2020 2064  add(node)..    d
+00002ba0: 6566 2064 6f77 6e77 6172 645f 7265 6669  ef downward_refi
+00002bb0: 6e65 6d65 6e74 2873 656c 662c 206e 6f64  nement(self, nod
+00002bc0: 653a 204f 454e 6f64 6529 202d 3e20 4974  e: OENode) -> It
+00002bd0: 6572 6162 6c65 5b4f 454e 6f64 655d 3a0a  erable[OENode]:.
+00002be0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+00002bf0: 7369 6e73 7461 6e63 6528 6e6f 6465 2c20  sinstance(node, 
+00002c00: 4f45 4e6f 6465 290a 0a20 2020 2020 2020  OENode)..       
+00002c10: 2077 6974 6820 7365 6c66 2e75 7064 6174   with self.updat
+00002c20: 696e 675f 6e6f 6465 286e 6f64 6529 3a0a  ing_node(node):.
+00002c30: 2020 2020 2020 2020 2020 2020 2320 544f              # TO
+00002c40: 444f 3a20 4e4e 460a 2020 2020 2020 2020  DO: NNF.        
+00002c50: 2020 2020 7265 6669 6e65 6d65 6e74 7320      refinements 
+00002c60: 3d20 536f 7274 6564 5365 7428 0a20 2020  = SortedSet(.   
+00002c70: 2020 2020 2020 2020 2020 2020 206d 6170               map
+00002c80: 285f 636f 6e63 6570 745f 6f70 6572 616e  (_concept_operan
+00002c90: 645f 736f 7274 6572 2e73 6f72 742c 0a20  d_sorter.sort,. 
 00002ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002cb0: 2020 2020 2020 6375 7272 656e 745f 646f        current_do
-00002cc0: 6d61 696e 3d73 656c 662e 7374 6172 745f  main=self.start_
-00002cd0: 636c 6173 7329 0a20 2020 2020 2020 2020  class).         
-00002ce0: 2020 2020 2020 2020 2020 2029 2020 2320             )  # 
-00002cf0: 6e6f 7161 3a20 4532 3033 0a20 2020 2020  noqa: E203.     
-00002d00: 2020 2020 2020 2020 2020 202c 0a20 2020             ,.   
-00002d10: 2020 2020 2020 2020 2020 2020 206b 6579               key
-00002d20: 3d4f 7264 6572 6564 4f57 4c4f 626a 6563  =OrderedOWLObjec
-00002d30: 7429 0a0a 2020 2020 2020 2020 2020 2020  t)..            
-00002d40: 6e6f 6465 2e69 6e63 7265 6d65 6e74 5f68  node.increment_h
-00002d50: 5f65 7870 2829 0a20 2020 2020 2020 2020  _exp().         
-00002d60: 2020 206e 6f64 652e 7265 6669 6e65 6d65     node.refineme
-00002d70: 6e74 5f63 6f75 6e74 203d 206c 656e 2872  nt_count = len(r
-00002d80: 6566 696e 656d 656e 7473 290a 2020 2020  efinements).    
-00002d90: 2020 2020 2020 2020 7365 6c66 2e68 6575          self.heu
-00002da0: 7269 7374 6963 5f66 756e 632e 6170 706c  ristic_func.appl
-00002db0: 7928 6e6f 6465 2c20 4e6f 6e65 2c20 7365  y(node, None, se
-00002dc0: 6c66 2e5f 6c65 6172 6e69 6e67 5f70 726f  lf._learning_pro
-00002dd0: 626c 656d 290a 0a20 2020 2020 2020 2064  blem)..        d
-00002de0: 6566 206d 616b 655f 6e6f 6465 5f77 6974  ef make_node_wit
-00002df0: 685f 7061 7265 6e74 2863 3a20 4f57 4c43  h_parent(c: OWLC
-00002e00: 6c61 7373 4578 7072 6573 7369 6f6e 293a  lassExpression):
-00002e10: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00002e20: 7572 6e20 7365 6c66 2e6d 616b 655f 6e6f  urn self.make_no
-00002e30: 6465 2863 2c20 7061 7265 6e74 5f6e 6f64  de(c, parent_nod
-00002e40: 653d 6e6f 6465 290a 0a20 2020 2020 2020  e=node)..       
-00002e50: 2072 6574 7572 6e20 6d61 7028 6d61 6b65   return map(make
-00002e60: 5f6e 6f64 655f 7769 7468 5f70 6172 656e  _node_with_paren
-00002e70: 742c 2072 6566 696e 656d 656e 7473 290a  t, refinements).
-00002e80: 0a20 2020 2064 6566 2066 6974 2873 656c  .    def fit(sel
-00002e90: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
-00002ea0: 6773 293a 0a20 2020 2020 2020 2022 2222  gs):.        """
-00002eb0: 0a20 2020 2020 2020 2046 696e 6420 6879  .        Find hy
-00002ec0: 706f 7468 6573 6573 2074 6861 7420 6578  potheses that ex
-00002ed0: 706c 6169 6e20 706f 7320 616e 6420 6e65  plain pos and ne
-00002ee0: 672e 0a20 2020 2020 2020 2022 2222 0a20  g..        """. 
-00002ef0: 2020 2020 2020 2073 656c 662e 636c 6561         self.clea
-00002f00: 6e28 290a 2020 2020 2020 2020 6d61 785f  n().        max_
-00002f10: 7275 6e74 696d 6520 3d20 6b77 6172 6773  runtime = kwargs
-00002f20: 2e70 6f70 2822 6d61 785f 7275 6e74 696d  .pop("max_runtim
-00002f30: 6522 2c20 4e6f 6e65 290a 2020 2020 2020  e", None).      
-00002f40: 2020 6c65 6172 6e69 6e67 5f70 726f 626c    learning_probl
-00002f50: 656d 203d 2073 656c 662e 636f 6e73 7472  em = self.constr
-00002f60: 7563 745f 6c65 6172 6e69 6e67 5f70 726f  uct_learning_pro
-00002f70: 626c 656d 2850 6f73 4e65 674c 5053 7461  blem(PosNegLPSta
-00002f80: 6e64 6172 642c 2061 7267 732c 206b 7761  ndard, args, kwa
-00002f90: 7267 7329 0a0a 2020 2020 2020 2020 6173  rgs)..        as
-00002fa0: 7365 7274 206e 6f74 2073 656c 662e 7365  sert not self.se
-00002fb0: 6172 6368 5f74 7265 650a 2020 2020 2020  arch_tree.      
-00002fc0: 2020 7365 6c66 2e5f 6c65 6172 6e69 6e67    self._learning
-00002fd0: 5f70 726f 626c 656d 203d 206c 6561 726e  _problem = learn
-00002fe0: 696e 675f 7072 6f62 6c65 6d2e 656e 636f  ing_problem.enco
-00002ff0: 6465 5f6b 6228 7365 6c66 2e6b 6229 0a0a  de_kb(self.kb)..
-00003000: 2020 2020 2020 2020 6966 206d 6178 5f72          if max_r
-00003010: 756e 7469 6d65 2069 7320 6e6f 7420 4e6f  untime is not No
-00003020: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00003030: 7365 6c66 2e5f 6d61 785f 7275 6e74 696d  self._max_runtim
-00003040: 6520 3d20 6d61 785f 7275 6e74 696d 650a  e = max_runtime.
-00003050: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00003060: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-00003070: 6d61 785f 7275 6e74 696d 6520 3d20 7365  max_runtime = se
-00003080: 6c66 2e6d 6178 5f72 756e 7469 6d65 0a0a  lf.max_runtime..
-00003090: 2020 2020 2020 2020 726f 6f74 203d 2073          root = s
-000030a0: 656c 662e 6d61 6b65 5f6e 6f64 6528 5f63  elf.make_node(_c
-000030b0: 6f6e 6365 7074 5f6f 7065 7261 6e64 5f73  oncept_operand_s
-000030c0: 6f72 7465 722e 736f 7274 2873 656c 662e  orter.sort(self.
-000030d0: 7374 6172 745f 636c 6173 7329 2c20 6973  start_class), is
-000030e0: 5f72 6f6f 743d 5472 7565 290a 2020 2020  _root=True).    
-000030f0: 2020 2020 7365 6c66 2e5f 6164 645f 6e6f      self._add_no
-00003100: 6465 2872 6f6f 742c 204e 6f6e 6529 0a20  de(root, None). 
-00003110: 2020 2020 2020 2061 7373 6572 7420 6c65         assert le
-00003120: 6e28 7365 6c66 2e68 6575 7269 7374 6963  n(self.heuristic
-00003130: 5f71 7565 7565 2920 3d3d 2031 0a20 2020  _queue) == 1.   
-00003140: 2020 2020 2023 2054 4f44 4f3a 4344 3a73       # TODO:CD:s
-00003150: 7567 6765 7374 2074 6f20 6164 6420 616e  uggest to add an
-00003160: 6f74 6865 7220 6173 7365 7274 2c65 2e67  other assert,e.g
-00003170: 2e20 6173 7365 7274 2023 2e20 6f66 2069  . assert #. of i
-00003180: 6e73 7461 6e63 6520 696e 2072 6f6f 7420  nstance in root 
-00003190: 3e20 310a 0a20 2020 2020 2020 2073 656c  > 1..        sel
-000031a0: 662e 7374 6172 745f 7469 6d65 203d 2074  f.start_time = t
-000031b0: 696d 652e 7469 6d65 2829 0a20 2020 2020  ime.time().     
-000031c0: 2020 2066 6f72 206a 2069 6e20 7261 6e67     for j in rang
-000031d0: 6528 312c 2073 656c 662e 6974 6572 5f62  e(1, self.iter_b
-000031e0: 6f75 6e64 293a 0a20 2020 2020 2020 2020  ound):.         
-000031f0: 2020 206d 6f73 745f 7072 6f6d 6973 696e     most_promisin
-00003200: 6720 3d20 7365 6c66 2e6e 6578 745f 6e6f  g = self.next_no
-00003210: 6465 5f74 6f5f 6578 7061 6e64 286a 290a  de_to_expand(j).
-00003220: 2020 2020 2020 2020 2020 2020 7472 6565              tree
-00003230: 5f70 6172 656e 7420 3d20 7365 6c66 2e74  _parent = self.t
-00003240: 7265 655f 6e6f 6465 286d 6f73 745f 7072  ree_node(most_pr
-00003250: 6f6d 6973 696e 6729 0a20 2020 2020 2020  omising).       
-00003260: 2020 2020 206d 696e 696d 756d 5f6c 656e       minimum_len
-00003270: 6774 6820 3d20 6d6f 7374 5f70 726f 6d69  gth = most_promi
-00003280: 7369 6e67 2e68 5f65 7870 0a20 2020 2020  sing.h_exp.     
-00003290: 2020 2020 2020 2069 6620 6c6f 6767 6572         if logger
-000032a0: 2e69 7345 6e61 626c 6564 466f 7228 6f70  .isEnabledFor(op
-000032b0: 6c6f 6767 696e 672e 5452 4143 4529 3a0a  logging.TRACE):.
-000032c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000032d0: 6c6f 6767 6572 2e64 6562 7567 2822 6e6f  logger.debug("no
-000032e0: 7720 7265 6669 6e69 6e67 2025 7322 2c20  w refining %s", 
-000032f0: 6d6f 7374 5f70 726f 6d69 7369 6e67 290a  most_promising).
-00003300: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00003310: 7265 6620 696e 2073 656c 662e 646f 776e  ref in self.down
-00003320: 7761 7264 5f72 6566 696e 656d 656e 7428  ward_refinement(
-00003330: 6d6f 7374 5f70 726f 6d69 7369 6e67 293a  most_promising):
-00003340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003350: 2023 2077 6520 6967 6e6f 7265 2061 6c6c   # we ignore all
-00003360: 2072 6566 696e 656d 656e 7473 2077 6974   refinements wit
-00003370: 6820 6c6f 7765 7220 6c65 6e67 7468 0a20  h lower length. 
-00003380: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00003390: 2028 7468 6973 2061 6c73 6f20 6176 6f69   (this also avoi
-000033a0: 6473 2064 7570 6c69 6361 7465 206e 6f64  ds duplicate nod
-000033b0: 6520 6368 696c 6472 656e 290a 2020 2020  e children).    
-000033c0: 2020 2020 2020 2020 2020 2020 2320 544f              # TO
-000033d0: 444f 3a20 6967 6e6f 7265 2074 6f6f 2068  DO: ignore too h
-000033e0: 6967 6820 6465 7074 680a 2020 2020 2020  igh depth.      
-000033f0: 2020 2020 2020 2020 2020 6966 2072 6566            if ref
-00003400: 2e6c 656e 203c 206d 696e 696d 756d 5f6c  .len < minimum_l
-00003410: 656e 6774 683a 0a20 2020 2020 2020 2020  ength:.         
-00003420: 2020 2020 2020 2020 2020 2023 2069 676e             # ign
-00003430: 6f72 696e 6720 7265 6669 6e65 6d65 6e74  oring refinement
-00003440: 2c20 6974 2064 6f65 7320 6e6f 7420 7361  , it does not sa
-00003450: 7469 7366 7920 6d69 6e69 6d75 6d5f 6c65  tisfy minimum_le
-00003460: 6e67 7468 2063 6f6e 6469 7469 6f6e 0a20  ngth condition. 
-00003470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003480: 2020 2063 6f6e 7469 6e75 650a 0a20 2020     continue..   
-00003490: 2020 2020 2020 2020 2020 2020 2023 206e               # n
-000034a0: 6f74 653a 2074 7265 655f 7061 7265 6e74  ote: tree_parent
-000034b0: 2068 6173 2074 6f20 6265 2065 7175 616c   has to be equal
-000034c0: 2074 6f20 6e6f 6465 5f74 7265 655f 7061   to node_tree_pa
-000034d0: 7265 6e74 2872 6566 2e70 6172 656e 745f  rent(ref.parent_
-000034e0: 6e6f 6465 2921 0a20 2020 2020 2020 2020  node)!.         
-000034f0: 2020 2020 2020 2061 6464 6564 203d 2073         added = s
-00003500: 656c 662e 5f61 6464 5f6e 6f64 6528 7265  elf._add_node(re
-00003510: 662c 2074 7265 655f 7061 7265 6e74 290a  f, tree_parent).
-00003520: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003530: 2067 6f61 6c5f 666f 756e 6420 3d20 6164   goal_found = ad
-00003540: 6465 6420 616e 6420 7265 662e 7175 616c  ded and ref.qual
-00003550: 6974 7920 3d3d 2031 2e30 0a0a 2020 2020  ity == 1.0..    
-00003560: 2020 2020 2020 2020 2020 2020 6966 2067              if g
-00003570: 6f61 6c5f 666f 756e 6420 616e 6420 7365  oal_found and se
-00003580: 6c66 2e74 6572 6d69 6e61 7465 5f6f 6e5f  lf.terminate_on_
-00003590: 676f 616c 3a0a 2020 2020 2020 2020 2020  goal:.          
-000035a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000035b0: 2073 656c 662e 7465 726d 696e 6174 6528   self.terminate(
-000035c0: 290a 0a20 2020 2020 2020 2020 2020 2069  )..            i
-000035d0: 6620 7365 6c66 2e63 616c 6375 6c61 7465  f self.calculate
-000035e0: 5f6d 696e 5f6d 6178 3a0a 2020 2020 2020  _min_max:.      
-000035f0: 2020 2020 2020 2020 2020 2320 5468 6973            # This
-00003600: 2069 7320 7075 7265 6c79 2061 2073 7461   is purely a sta
-00003610: 7469 7374 6963 616c 2066 756e 6374 696f  tistical functio
-00003620: 6e2c 2069 7420 646f 6573 206e 6f74 2069  n, it does not i
-00003630: 6e66 6c75 656e 6365 2043 454c 4f45 0a20  nfluence CELOE. 
-00003640: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00003650: 656c 662e 7570 6461 7465 5f6d 696e 5f6d  elf.update_min_m
-00003660: 6178 5f68 6f72 697a 5f65 7870 286d 6f73  ax_horiz_exp(mos
-00003670: 745f 7072 6f6d 6973 696e 6729 0a0a 2020  t_promising)..  
-00003680: 2020 2020 2020 2020 2020 6966 2074 696d            if tim
-00003690: 652e 7469 6d65 2829 202d 2073 656c 662e  e.time() - self.
-000036a0: 7374 6172 745f 7469 6d65 203e 2073 656c  start_time > sel
-000036b0: 662e 5f6d 6178 5f72 756e 7469 6d65 3a0a  f._max_runtime:.
-000036c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000036d0: 7265 7475 726e 2073 656c 662e 7465 726d  return self.term
-000036e0: 696e 6174 6528 290a 0a20 2020 2020 2020  inate()..       
-000036f0: 2020 2020 2069 6620 7365 6c66 2e6e 756d       if self.num
-00003700: 6265 725f 6f66 5f74 6573 7465 645f 636f  ber_of_tested_co
-00003710: 6e63 6570 7473 203e 3d20 7365 6c66 2e6d  ncepts >= self.m
-00003720: 6178 5f6e 756d 5f6f 665f 636f 6e63 6570  ax_num_of_concep
-00003730: 7473 5f74 6573 7465 643a 0a20 2020 2020  ts_tested:.     
-00003740: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00003750: 6e20 7365 6c66 2e74 6572 6d69 6e61 7465  n self.terminate
-00003760: 2829 0a0a 2020 2020 2020 2020 2020 2020  ()..            
-00003770: 6966 206c 6f67 6765 722e 6973 456e 6162  if logger.isEnab
-00003780: 6c65 6446 6f72 286f 706c 6f67 6769 6e67  ledFor(oplogging
-00003790: 2e54 5241 4345 2920 616e 6420 6a20 2520  .TRACE) and j % 
-000037a0: 3130 3020 3d3d 2030 3a0a 2020 2020 2020  100 == 0:.      
-000037b0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-000037c0: 6c6f 675f 6375 7272 656e 745f 6265 7374  log_current_best
-000037d0: 286a 290a 0a20 2020 2020 2020 2072 6574  (j)..        ret
-000037e0: 7572 6e20 7365 6c66 2e74 6572 6d69 6e61  urn self.termina
-000037f0: 7465 2829 0a0a 2020 2020 6173 796e 6320  te()..    async 
-00003800: 6465 6620 6669 745f 6173 796e 6328 7365  def fit_async(se
-00003810: 6c66 2c20 2a61 7267 732c 202a 2a6b 7761  lf, *args, **kwa
-00003820: 7267 7329 3a0a 2020 2020 2020 2020 2222  rgs):.        ""
-00003830: 220a 2020 2020 2020 2020 4173 796e 6320  ".        Async 
-00003840: 6d65 7468 6f64 206f 6620 6669 742e 0a20  method of fit.. 
-00003850: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00003860: 2020 2073 656c 662e 636c 6561 6e28 290a     self.clean().
-00003870: 2020 2020 2020 2020 6d61 785f 7275 6e74          max_runt
-00003880: 696d 6520 3d20 6b77 6172 6773 2e70 6f70  ime = kwargs.pop
-00003890: 2822 6d61 785f 7275 6e74 696d 6522 2c20  ("max_runtime", 
-000038a0: 4e6f 6e65 290a 2020 2020 2020 2020 6c65  None).        le
-000038b0: 6172 6e69 6e67 5f70 726f 626c 656d 203d  arning_problem =
-000038c0: 2073 656c 662e 636f 6e73 7472 7563 745f   self.construct_
-000038d0: 6c65 6172 6e69 6e67 5f70 726f 626c 656d  learning_problem
-000038e0: 2850 6f73 4e65 674c 5053 7461 6e64 6172  (PosNegLPStandar
-000038f0: 642c 2061 7267 732c 206b 7761 7267 7329  d, args, kwargs)
-00003900: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
-00003910: 206e 6f74 2073 656c 662e 7365 6172 6368   not self.search
-00003920: 5f74 7265 650a 2020 2020 2020 2020 7365  _tree.        se
-00003930: 6c66 2e5f 6c65 6172 6e69 6e67 5f70 726f  lf._learning_pro
-00003940: 626c 656d 203d 206c 6561 726e 696e 675f  blem = learning_
-00003950: 7072 6f62 6c65 6d2e 656e 636f 6465 5f6b  problem.encode_k
-00003960: 6228 7365 6c66 2e6b 6229 0a0a 2020 2020  b(self.kb)..    
-00003970: 2020 2020 6966 206d 6178 5f72 756e 7469      if max_runti
-00003980: 6d65 2069 7320 6e6f 7420 4e6f 6e65 3a0a  me is not None:.
-00003990: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000039a0: 2e5f 6d61 785f 7275 6e74 696d 6520 3d20  ._max_runtime = 
-000039b0: 6d61 785f 7275 6e74 696d 650a 2020 2020  max_runtime.    
-000039c0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000039d0: 2020 2020 2020 7365 6c66 2e5f 6d61 785f        self._max_
-000039e0: 7275 6e74 696d 6520 3d20 7365 6c66 2e6d  runtime = self.m
-000039f0: 6178 5f72 756e 7469 6d65 0a0a 2020 2020  ax_runtime..    
-00003a00: 2020 2020 726f 6f74 203d 2073 656c 662e      root = self.
-00003a10: 6d61 6b65 5f6e 6f64 6528 5f63 6f6e 6365  make_node(_conce
-00003a20: 7074 5f6f 7065 7261 6e64 5f73 6f72 7465  pt_operand_sorte
-00003a30: 722e 736f 7274 2873 656c 662e 7374 6172  r.sort(self.star
-00003a40: 745f 636c 6173 7329 2c20 6973 5f72 6f6f  t_class), is_roo
-00003a50: 743d 5472 7565 290a 2020 2020 2020 2020  t=True).        
-00003a60: 7365 6c66 2e5f 6164 645f 6e6f 6465 2872  self._add_node(r
-00003a70: 6f6f 742c 204e 6f6e 6529 0a20 2020 2020  oot, None).     
-00003a80: 2020 2061 7373 6572 7420 6c65 6e28 7365     assert len(se
-00003a90: 6c66 2e68 6575 7269 7374 6963 5f71 7565  lf.heuristic_que
-00003aa0: 7565 2920 3d3d 2031 0a20 2020 2020 2020  ue) == 1.       
-00003ab0: 2023 2054 4f44 4f3a 4344 3a73 7567 6765   # TODO:CD:sugge
-00003ac0: 7374 2074 6f20 6164 6420 616e 6f74 6865  st to add anothe
-00003ad0: 7220 6173 7365 7274 2c65 2e67 2e20 6173  r assert,e.g. as
-00003ae0: 7365 7274 2023 2e20 6f66 2069 6e73 7461  sert #. of insta
-00003af0: 6e63 6520 696e 2072 6f6f 7420 3e20 310a  nce in root > 1.
-00003b00: 0a20 2020 2020 2020 2073 656c 662e 7374  .        self.st
-00003b10: 6172 745f 7469 6d65 203d 2074 696d 652e  art_time = time.
-00003b20: 7469 6d65 2829 0a20 2020 2020 2020 2066  time().        f
-00003b30: 6f72 206a 2069 6e20 7261 6e67 6528 312c  or j in range(1,
-00003b40: 2073 656c 662e 6974 6572 5f62 6f75 6e64   self.iter_bound
-00003b50: 293a 0a20 2020 2020 2020 2020 2020 206d  ):.            m
-00003b60: 6f73 745f 7072 6f6d 6973 696e 6720 3d20  ost_promising = 
-00003b70: 7365 6c66 2e6e 6578 745f 6e6f 6465 5f74  self.next_node_t
-00003b80: 6f5f 6578 7061 6e64 286a 290a 2020 2020  o_expand(j).    
-00003b90: 2020 2020 2020 2020 7472 6565 5f70 6172          tree_par
-00003ba0: 656e 7420 3d20 7365 6c66 2e74 7265 655f  ent = self.tree_
-00003bb0: 6e6f 6465 286d 6f73 745f 7072 6f6d 6973  node(most_promis
-00003bc0: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
-00003bd0: 206d 696e 696d 756d 5f6c 656e 6774 6820   minimum_length 
-00003be0: 3d20 6d6f 7374 5f70 726f 6d69 7369 6e67  = most_promising
-00003bf0: 2e68 5f65 7870 0a20 2020 2020 2020 2020  .h_exp.         
-00003c00: 2020 2069 6620 6c6f 6767 6572 2e69 7345     if logger.isE
-00003c10: 6e61 626c 6564 466f 7228 6f70 6c6f 6767  nabledFor(oplogg
-00003c20: 696e 672e 5452 4143 4529 3a0a 2020 2020  ing.TRACE):.    
-00003c30: 2020 2020 2020 2020 2020 2020 6c6f 6767              logg
-00003c40: 6572 2e64 6562 7567 2822 6e6f 7720 7265  er.debug("now re
-00003c50: 6669 6e69 6e67 2025 7322 2c20 6d6f 7374  fining %s", most
-00003c60: 5f70 726f 6d69 7369 6e67 290a 2020 2020  _promising).    
-00003c70: 2020 2020 2020 2020 6576 616c 7561 7465          evaluate
-00003c80: 645f 7265 6673 203d 205b 5d0a 2020 2020  d_refs = [].    
-00003c90: 2020 2020 2020 2020 666f 7220 7265 6620          for ref 
-00003ca0: 696e 2073 656c 662e 646f 776e 7761 7264  in self.downward
-00003cb0: 5f72 6566 696e 656d 656e 7428 6d6f 7374  _refinement(most
-00003cc0: 5f70 726f 6d69 7369 6e67 293a 0a20 2020  _promising):.   
-00003cd0: 2020 2020 2020 2020 2020 2020 2023 2077               # w
-00003ce0: 6520 6967 6e6f 7265 2061 6c6c 2072 6566  e ignore all ref
-00003cf0: 696e 656d 656e 7473 2077 6974 6820 6c6f  inements with lo
-00003d00: 7765 7220 6c65 6e67 7468 0a20 2020 2020  wer length.     
-00003d10: 2020 2020 2020 2020 2020 2023 2028 7468             # (th
-00003d20: 6973 2061 6c73 6f20 6176 6f69 6473 2064  is also avoids d
-00003d30: 7570 6c69 6361 7465 206e 6f64 6520 6368  uplicate node ch
-00003d40: 696c 6472 656e 290a 2020 2020 2020 2020  ildren).        
-00003d50: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
-00003d60: 6967 6e6f 7265 2074 6f6f 2068 6967 6820  ignore too high 
-00003d70: 6465 7074 680a 2020 2020 2020 2020 2020  depth.          
-00003d80: 2020 2020 2020 6966 2072 6566 2e6c 656e        if ref.len
-00003d90: 203c 206d 696e 696d 756d 5f6c 656e 6774   < minimum_lengt
-00003da0: 683a 0a20 2020 2020 2020 2020 2020 2020  h:.             
-00003db0: 2020 2020 2020 2023 2069 676e 6f72 696e         # ignorin
-00003dc0: 6720 7265 6669 6e65 6d65 6e74 2c20 6974  g refinement, it
-00003dd0: 2064 6f65 7320 6e6f 7420 7361 7469 7366   does not satisf
-00003de0: 7920 6d69 6e69 6d75 6d5f 6c65 6e67 7468  y minimum_length
-00003df0: 2063 6f6e 6469 7469 6f6e 0a20 2020 2020   condition.     
-00003e00: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00003e10: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-00003e20: 2020 2020 2020 2020 6966 2072 6566 2e63          if ref.c
-00003e30: 6f6e 6365 7074 2069 6e20 7365 6c66 2e73  oncept in self.s
-00003e40: 6561 7263 685f 7472 6565 3a0a 2020 2020  earch_tree:.    
-00003e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003e60: 2320 6967 6e6f 7269 6e67 2072 6566 696e  # ignoring refin
-00003e70: 656d 656e 742c 2069 7420 6861 7320 6265  ement, it has be
-00003e80: 656e 2072 6566 696e 6564 2066 726f 6d20  en refined from 
-00003e90: 616e 6f74 6865 7220 7061 7265 6e74 0a20  another parent. 
-00003ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003eb0: 2020 2063 6f6e 7469 6e75 650a 0a20 2020     continue..   
-00003ec0: 2020 2020 2020 2020 2020 2020 2065 7661               eva
-00003ed0: 6c75 6174 6564 5f72 6566 732e 6170 7065  luated_refs.appe
-00003ee0: 6e64 2873 656c 662e 5f65 7661 6c5f 6e6f  nd(self._eval_no
-00003ef0: 6465 5f61 7379 6e63 2872 6566 2929 0a0a  de_async(ref))..
-00003f00: 2020 2020 2020 2020 2020 2020 696d 706f              impo
-00003f10: 7274 2061 7379 6e63 696f 0a20 2020 2020  rt asyncio.     
-00003f20: 2020 2020 2020 2066 6f72 2074 6173 6b20         for task 
-00003f30: 696e 2061 7379 6e63 696f 2e61 735f 636f  in asyncio.as_co
-00003f40: 6d70 6c65 7465 6428 6576 616c 7561 7465  mpleted(evaluate
-00003f50: 645f 7265 6673 293a 0a20 2020 2020 2020  d_refs):.       
-00003f60: 2020 2020 2020 2020 2072 6566 2c20 6576           ref, ev
-00003f70: 616c 5f20 3d20 6177 6169 7420 7461 736b  al_ = await task
-00003f80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003f90: 2023 2066 6f72 2074 6173 6b20 696e 2061   # for task in a
-00003fa0: 7761 6974 2061 7379 6e63 696f 2e67 6174  wait asyncio.gat
-00003fb0: 6865 7228 2a65 7661 6c75 6174 6564 5f72  her(*evaluated_r
-00003fc0: 6566 7329 3a0a 2020 2020 2020 2020 2020  efs):.          
-00003fd0: 2020 2020 2020 2320 2020 2020 7265 662c        #     ref,
-00003fe0: 2065 7661 6c5f 203d 2074 6173 6b0a 0a20   eval_ = task.. 
-00003ff0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00004000: 206e 6f74 653a 2074 7265 655f 7061 7265   note: tree_pare
-00004010: 6e74 2068 6173 2074 6f20 6265 2065 7175  nt has to be equ
-00004020: 616c 2074 6f20 6e6f 6465 5f74 7265 655f  al to node_tree_
-00004030: 7061 7265 6e74 2872 6566 2e70 6172 656e  parent(ref.paren
-00004040: 745f 6e6f 6465 2921 0a20 2020 2020 2020  t_node)!.       
-00004050: 2020 2020 2020 2020 2061 6464 6564 203d           added =
-00004060: 2073 656c 662e 5f61 6464 5f6e 6f64 655f   self._add_node_
-00004070: 6576 616c 6428 7265 662c 2065 7661 6c5f  evald(ref, eval_
-00004080: 2c20 7472 6565 5f70 6172 656e 7429 0a0a  , tree_parent)..
-00004090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000040a0: 676f 616c 5f66 6f75 6e64 203d 2061 6464  goal_found = add
-000040b0: 6564 2061 6e64 2072 6566 2e71 7561 6c69  ed and ref.quali
-000040c0: 7479 203d 3d20 312e 300a 0a20 2020 2020  ty == 1.0..     
-000040d0: 2020 2020 2020 2020 2020 2069 6620 676f             if go
-000040e0: 616c 5f66 6f75 6e64 2061 6e64 2073 656c  al_found and sel
-000040f0: 662e 7465 726d 696e 6174 655f 6f6e 5f67  f.terminate_on_g
-00004100: 6f61 6c3a 0a20 2020 2020 2020 2020 2020  oal:.           
-00004110: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00004120: 7365 6c66 2e74 6572 6d69 6e61 7465 2829  self.terminate()
-00004130: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00004140: 2073 656c 662e 6361 6c63 756c 6174 655f   self.calculate_
-00004150: 6d69 6e5f 6d61 783a 0a20 2020 2020 2020  min_max:.       
-00004160: 2020 2020 2020 2020 2023 2054 6869 7320           # This 
-00004170: 6973 2070 7572 656c 7920 6120 7374 6174  is purely a stat
-00004180: 6973 7469 6361 6c20 6675 6e63 7469 6f6e  istical function
-00004190: 2c20 6974 2064 6f65 7320 6e6f 7420 696e  , it does not in
-000041a0: 666c 7565 6e63 6520 4345 4c4f 450a 2020  fluence CELOE.  
-000041b0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000041c0: 6c66 2e75 7064 6174 655f 6d69 6e5f 6d61  lf.update_min_ma
-000041d0: 785f 686f 7269 7a5f 6578 7028 6d6f 7374  x_horiz_exp(most
-000041e0: 5f70 726f 6d69 7369 6e67 290a 0a20 2020  _promising)..   
-000041f0: 2020 2020 2020 2020 2069 6620 7469 6d65           if time
-00004200: 2e74 696d 6528 2920 2d20 7365 6c66 2e73  .time() - self.s
-00004210: 7461 7274 5f74 696d 6520 3e20 7365 6c66  tart_time > self
-00004220: 2e5f 6d61 785f 7275 6e74 696d 653a 0a20  ._max_runtime:. 
-00004230: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00004240: 6574 7572 6e20 7365 6c66 2e74 6572 6d69  eturn self.termi
-00004250: 6e61 7465 2829 0a0a 2020 2020 2020 2020  nate()..        
-00004260: 2020 2020 6966 2073 656c 662e 6e75 6d62      if self.numb
-00004270: 6572 5f6f 665f 7465 7374 6564 5f63 6f6e  er_of_tested_con
-00004280: 6365 7074 7320 3e3d 2073 656c 662e 6d61  cepts >= self.ma
-00004290: 785f 6e75 6d5f 6f66 5f63 6f6e 6365 7074  x_num_of_concept
-000042a0: 735f 7465 7374 6564 3a0a 2020 2020 2020  s_tested:.      
-000042b0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000042c0: 2073 656c 662e 7465 726d 696e 6174 6528   self.terminate(
-000042d0: 290a 0a20 2020 2020 2020 2020 2020 2069  )..            i
-000042e0: 6620 6c6f 6767 6572 2e69 7345 6e61 626c  f logger.isEnabl
-000042f0: 6564 466f 7228 6f70 6c6f 6767 696e 672e  edFor(oplogging.
-00004300: 5452 4143 4529 2061 6e64 206a 2025 2031  TRACE) and j % 1
-00004310: 3030 203d 3d20 303a 0a20 2020 2020 2020  00 == 0:.       
-00004320: 2020 2020 2020 2020 2073 656c 662e 5f6c           self._l
-00004330: 6f67 5f63 7572 7265 6e74 5f62 6573 7428  og_current_best(
-00004340: 6a29 0a0a 2020 2020 2020 2020 7265 7475  j)..        retu
-00004350: 726e 2073 656c 662e 7465 726d 696e 6174  rn self.terminat
-00004360: 6528 290a 0a20 2020 2064 6566 2065 6e63  e()..    def enc
-00004370: 6f64 6564 5f6c 6561 726e 696e 675f 7072  oded_learning_pr
-00004380: 6f62 6c65 6d28 7365 6c66 2920 2d3e 204f  oblem(self) -> O
-00004390: 7074 696f 6e61 6c5b 456e 636f 6465 6450  ptional[EncodedP
-000043a0: 6f73 4e65 674c 5053 7461 6e64 6172 644b  osNegLPStandardK
-000043b0: 696e 645d 3a0a 2020 2020 2020 2020 2222  ind]:.        ""
-000043c0: 2246 6574 6368 2074 6865 206d 6f73 7420  "Fetch the most 
-000043d0: 7265 6365 6e74 6c79 2075 7365 6420 6c65  recently used le
-000043e0: 6172 6e69 6e67 2070 726f 626c 656d 2066  arning problem f
-000043f0: 726f 6d20 7468 6520 6669 7420 6d65 7468  rom the fit meth
-00004400: 6f64 2e22 2222 0a20 2020 2020 2020 2072  od.""".        r
-00004410: 6574 7572 6e20 7365 6c66 2e5f 6c65 6172  eturn self._lear
-00004420: 6e69 6e67 5f70 726f 626c 656d 0a0a 2020  ning_problem..  
-00004430: 2020 6465 6620 7472 6565 5f6e 6f64 6528    def tree_node(
-00004440: 7365 6c66 2c20 6e6f 6465 3a20 4f45 4e6f  self, node: OENo
-00004450: 6465 2920 2d3e 2054 7265 654e 6f64 655b  de) -> TreeNode[
-00004460: 4f45 4e6f 6465 5d3a 0a20 2020 2020 2020  OENode]:.       
-00004470: 2022 2222 0a20 2020 2020 2020 2047 6574   """.        Get
-00004480: 2074 6865 2054 7265 654e 6f64 6520 6f66   the TreeNode of
-00004490: 2074 6865 2067 6976 656e 206e 6f64 652e   the given node.
-000044a0: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
-000044b0: 2020 2020 2020 2020 2020 2020 6e6f 6465              node
-000044c0: 3a20 5468 6520 6e6f 6465 2e0a 0a20 2020  : The node...   
-000044d0: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
-000044e0: 2020 2020 2020 2020 2020 5472 6565 4e6f            TreeNo
-000044f0: 6465 206f 6620 7468 6520 6769 7665 6e20  de of the given 
-00004500: 6e6f 6465 2e0a 2020 2020 2020 2020 2222  node..        ""
-00004510: 220a 2020 2020 2020 2020 7472 6565 5f70  ".        tree_p
-00004520: 6172 656e 7420 3d20 7365 6c66 2e73 6561  arent = self.sea
-00004530: 7263 685f 7472 6565 5b6e 6f64 652e 636f  rch_tree[node.co
-00004540: 6e63 6570 745d 0a20 2020 2020 2020 2072  ncept].        r
-00004550: 6574 7572 6e20 7472 6565 5f70 6172 656e  eturn tree_paren
-00004560: 740a 0a20 2020 2064 6566 205f 6164 645f  t..    def _add_
-00004570: 6e6f 6465 2873 656c 662c 2072 6566 3a20  node(self, ref: 
-00004580: 4f45 4e6f 6465 2c20 7472 6565 5f70 6172  OENode, tree_par
-00004590: 656e 743a 204f 7074 696f 6e61 6c5b 5472  ent: Optional[Tr
-000045a0: 6565 4e6f 6465 5b4f 454e 6f64 655d 5d29  eeNode[OENode]])
-000045b0: 3a0a 2020 2020 2020 2020 2320 544f 444f  :.        # TODO
-000045c0: 3a43 443a 2057 6879 2068 6176 6520 7468  :CD: Why have th
-000045d0: 6973 2063 6f6e 7374 7261 696e 7420 3f0a  is constraint ?.
-000045e0: 2020 2020 2020 2020 2320 2057 6520 7368          #  We sh
-000045f0: 6f75 6c64 206e 6f74 2069 676e 6f72 6520  ould not ignore 
-00004600: 6120 636f 6e63 6570 7420 6475 6520 746f  a concept due to
-00004610: 2074 6869 7320 636f 6e73 7472 6169 6e74   this constraint
-00004620: 2e0a 2020 2020 2020 2020 2320 2049 7420  ..        #  It 
-00004630: 6d69 6768 7420 6265 2074 6865 2063 6173  might be the cas
-00004640: 6520 7468 6174 206e 6577 2070 6174 6820  e that new path 
-00004650: 746f 2072 6566 2e63 6f6e 6365 7074 2069  to ref.concept i
-00004660: 7320 6120 6265 7474 6572 2070 6174 682e  s a better path.
-00004670: 2048 656e 6365 2c20 7765 2073 686f 756c   Hence, we shoul
-00004680: 6420 7570 6461 7465 2069 7473 2070 6172  d update its par
-00004690: 656e 740a 2020 2020 2020 2020 2320 2064  ent.        #  d
-000046a0: 6570 656e 6469 6e67 206f 6e20 7468 6520  epending on the 
-000046b0: 6e65 7720 6865 7572 6973 7469 6320 7661  new heuristic va
-000046c0: 6c75 652e 0a20 2020 2020 2020 2023 2020  lue..        #  
-000046d0: 536f 6c75 7469 6f6e 3a20 4966 2063 6f6e  Solution: If con
-000046e0: 6365 7074 2065 7869 7374 7320 7765 2073  cept exists we s
-000046f0: 686f 756c 6420 636f 6d70 6172 6520 6974  hould compare it
-00004700: 7320 6669 7273 7420 6865 7572 6973 7469  s first heuristi
-00004710: 6320 7661 6c75 6520 2077 6974 6820 7468  c value  with th
-00004720: 6520 6e65 7720 6f6e 650a 2020 2020 2020  e new one.      
-00004730: 2020 6966 2072 6566 2e63 6f6e 6365 7074    if ref.concept
-00004740: 2069 6e20 7365 6c66 2e73 6561 7263 685f   in self.search_
-00004750: 7472 6565 3a0a 2020 2020 2020 2020 2020  tree:.          
-00004760: 2020 2320 6967 6e6f 7269 6e67 2072 6566    # ignoring ref
-00004770: 696e 656d 656e 742c 2069 7420 6861 7320  inement, it has 
-00004780: 6265 656e 2072 6566 696e 6564 2066 726f  been refined fro
-00004790: 6d20 616e 6f74 6865 7220 7061 7265 6e74  m another parent
-000047a0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000047b0: 7572 6e20 4661 6c73 650a 0a20 2020 2020  urn False..     
-000047c0: 2020 206e 6f72 6d5f 636f 6e63 6570 7420     norm_concept 
-000047d0: 3d20 4f70 6572 616e 6453 6574 5472 616e  = OperandSetTran
-000047e0: 7366 6f72 6d28 292e 7369 6d70 6c69 6679  sform().simplify
-000047f0: 2872 6566 2e63 6f6e 6365 7074 290a 2020  (ref.concept).  
-00004800: 2020 2020 2020 6966 206e 6f72 6d5f 636f        if norm_co
-00004810: 6e63 6570 7420 696e 2073 656c 662e 5f73  ncept in self._s
-00004820: 6565 6e5f 6e6f 726d 5f63 6f6e 6365 7074  een_norm_concept
-00004830: 733a 0a20 2020 2020 2020 2020 2020 206e  s:.            n
-00004840: 6f72 6d5f 7365 656e 203d 2054 7275 650a  orm_seen = True.
-00004850: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00004860: 2020 2020 2020 2020 2020 6e6f 726d 5f73            norm_s
-00004870: 6565 6e20 3d20 4661 6c73 650a 2020 2020  een = False.    
-00004880: 2020 2020 2020 2020 7365 6c66 2e5f 7365          self._se
-00004890: 656e 5f6e 6f72 6d5f 636f 6e63 6570 7473  en_norm_concepts
-000048a0: 2e61 6464 286e 6f72 6d5f 636f 6e63 6570  .add(norm_concep
-000048b0: 7429 0a0a 2020 2020 2020 2020 7365 6c66  t)..        self
-000048c0: 2e73 6561 7263 685f 7472 6565 5b72 6566  .search_tree[ref
-000048d0: 2e63 6f6e 6365 7074 5d20 3d20 5472 6565  .concept] = Tree
-000048e0: 4e6f 6465 2872 6566 2c20 7472 6565 5f70  Node(ref, tree_p
-000048f0: 6172 656e 742c 2069 735f 726f 6f74 3d72  arent, is_root=r
-00004900: 6566 2e69 735f 726f 6f74 290a 2020 2020  ef.is_root).    
-00004910: 2020 2020 6520 3d20 7365 6c66 2e6b 622e      e = self.kb.
-00004920: 6576 616c 7561 7465 5f63 6f6e 6365 7074  evaluate_concept
-00004930: 2872 6566 2e63 6f6e 6365 7074 2c20 7365  (ref.concept, se
-00004940: 6c66 2e71 7561 6c69 7479 5f66 756e 632c  lf.quality_func,
-00004950: 2073 656c 662e 5f6c 6561 726e 696e 675f   self._learning_
-00004960: 7072 6f62 6c65 6d29 0a0a 2020 2020 2020  problem)..      
-00004970: 2020 7265 662e 7175 616c 6974 7920 3d20    ref.quality = 
-00004980: 652e 710a 2020 2020 2020 2020 7365 6c66  e.q.        self
-00004990: 2e5f 6e75 6d62 6572 5f6f 665f 7465 7374  ._number_of_test
-000049a0: 6564 5f63 6f6e 6365 7074 7320 2b3d 2031  ed_concepts += 1
-000049b0: 0a20 2020 2020 2020 2069 6620 7265 662e  .        if ref.
-000049c0: 7175 616c 6974 7920 3d3d 2030 3a20 2023  quality == 0:  #
-000049d0: 203e 2074 6f6f 2077 6561 6b0a 2020 2020   > too weak.    
-000049e0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-000049f0: 616c 7365 0a20 2020 2020 2020 2061 7373  alse.        ass
-00004a00: 6572 7420 3020 3c3d 2072 6566 2e71 7561  ert 0 <= ref.qua
-00004a10: 6c69 7479 203c 3d20 312e 300a 2020 2020  lity <= 1.0.    
-00004a20: 2020 2020 2320 544f 444f 3a20 6578 7072      # TODO: expr
-00004a30: 6573 7369 6f6e 2072 6577 7269 7469 6e67  ession rewriting
-00004a40: 0a20 2020 2020 2020 2073 656c 662e 6865  .        self.he
-00004a50: 7572 6973 7469 635f 6675 6e63 2e61 7070  uristic_func.app
-00004a60: 6c79 2872 6566 2c20 652e 696e 6473 2c20  ly(ref, e.inds, 
-00004a70: 7365 6c66 2e5f 6c65 6172 6e69 6e67 5f70  self._learning_p
-00004a80: 726f 626c 656d 290a 2020 2020 2020 2020  roblem).        
-00004a90: 6966 206e 6f74 206e 6f72 6d5f 7365 656e  if not norm_seen
-00004aa0: 2061 6e64 2073 656c 662e 6265 7374 5f64   and self.best_d
-00004ab0: 6573 6372 6970 7469 6f6e 732e 6d61 7962  escriptions.mayb
-00004ac0: 655f 6164 6428 7265 6629 3a0a 2020 2020  e_add(ref):.    
-00004ad0: 2020 2020 2020 2020 6966 206c 6f67 6765          if logge
-00004ae0: 722e 6973 456e 6162 6c65 6446 6f72 286c  r.isEnabledFor(l
-00004af0: 6f67 6769 6e67 2e44 4542 5547 293a 0a20  ogging.DEBUG):. 
-00004b00: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00004b10: 6f67 6765 722e 6465 6275 6728 2242 6574  ogger.debug("Bet
-00004b20: 7465 7220 6465 7363 7269 7074 696f 6e20  ter description 
-00004b30: 666f 756e 643a 2025 7322 2c20 7265 6629  found: %s", ref)
-00004b40: 0a20 2020 2020 2020 2073 656c 662e 6865  .        self.he
-00004b50: 7572 6973 7469 635f 7175 6575 652e 6164  uristic_queue.ad
-00004b60: 6428 7265 6629 0a20 2020 2020 2020 2023  d(ref).        #
-00004b70: 2054 4f44 4f3a 2069 6d70 6c65 6d65 6e74   TODO: implement
-00004b80: 206e 6f69 7365 0a20 2020 2020 2020 2072   noise.        r
-00004b90: 6574 7572 6e20 5472 7565 0a0a 2020 2020  eturn True..    
-00004ba0: 6173 796e 6320 6465 6620 5f65 7661 6c5f  async def _eval_
-00004bb0: 6e6f 6465 5f61 7379 6e63 2873 656c 662c  node_async(self,
-00004bc0: 2072 6566 3a20 4f45 4e6f 6465 293a 0a20   ref: OENode):. 
-00004bd0: 2020 2020 2020 2023 2054 4f44 4f3a 4344         # TODO:CD
-00004be0: 3a20 5768 7920 6861 7665 2074 6869 7320  : Why have this 
-00004bf0: 636f 6e73 7472 6169 6e74 203f 0a20 2020  constraint ?.   
-00004c00: 2020 2020 2023 2020 5765 2073 686f 756c       #  We shoul
-00004c10: 6420 6e6f 7420 6967 6e6f 7265 2061 2063  d not ignore a c
-00004c20: 6f6e 6365 7074 2064 7565 2074 6f20 7468  oncept due to th
-00004c30: 6973 2063 6f6e 7374 7261 696e 742e 0a20  is constraint.. 
-00004c40: 2020 2020 2020 2023 2020 4974 206d 6967         #  It mig
-00004c50: 6874 2062 6520 7468 6520 6361 7365 2074  ht be the case t
-00004c60: 6861 7420 6e65 7720 7061 7468 2074 6f20  hat new path to 
-00004c70: 7265 662e 636f 6e63 6570 7420 6973 2061  ref.concept is a
-00004c80: 2062 6574 7465 7220 7061 7468 2e20 4865   better path. He
-00004c90: 6e63 652c 2077 6520 7368 6f75 6c64 2075  nce, we should u
-00004ca0: 7064 6174 6520 6974 7320 7061 7265 6e74  pdate its parent
-00004cb0: 0a20 2020 2020 2020 2023 2020 6465 7065  .        #  depe
-00004cc0: 6e64 696e 6720 6f6e 2074 6865 206e 6577  nding on the new
-00004cd0: 2068 6575 7269 7374 6963 2076 616c 7565   heuristic value
-00004ce0: 2e0a 2020 2020 2020 2020 2320 2053 6f6c  ..        #  Sol
-00004cf0: 7574 696f 6e3a 2049 6620 636f 6e63 6570  ution: If concep
-00004d00: 7420 6578 6973 7473 2077 6520 7368 6f75  t exists we shou
-00004d10: 6c64 2063 6f6d 7061 7265 2069 7473 2066  ld compare its f
-00004d20: 6972 7374 2068 6575 7269 7374 6963 2076  irst heuristic v
-00004d30: 616c 7565 2020 7769 7468 2074 6865 206e  alue  with the n
-00004d40: 6577 206f 6e65 0a20 2020 2020 2020 2072  ew one.        r
-00004d50: 6573 203d 2061 7761 6974 2073 656c 662e  es = await self.
-00004d60: 6b62 2e65 7661 6c75 6174 655f 636f 6e63  kb.evaluate_conc
-00004d70: 6570 745f 6173 796e 6328 7265 662e 636f  ept_async(ref.co
-00004d80: 6e63 6570 742c 2073 656c 662e 7175 616c  ncept, self.qual
-00004d90: 6974 795f 6675 6e63 2c20 7365 6c66 2e5f  ity_func, self._
-00004da0: 6c65 6172 6e69 6e67 5f70 726f 626c 656d  learning_problem
-00004db0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00004dc0: 2072 6566 2c20 7265 730a 0a20 2020 2064   ref, res..    d
-00004dd0: 6566 205f 6164 645f 6e6f 6465 5f65 7661  ef _add_node_eva
-00004de0: 6c64 2873 656c 662c 2072 6566 3a20 4f45  ld(self, ref: OE
-00004df0: 4e6f 6465 2c20 6576 616c 5f3a 2045 7661  Node, eval_: Eva
-00004e00: 6c75 6174 6564 436f 6e63 6570 742c 2074  luatedConcept, t
-00004e10: 7265 655f 7061 7265 6e74 3a20 4f70 7469  ree_parent: Opti
-00004e20: 6f6e 616c 5b54 7265 654e 6f64 655b 4f45  onal[TreeNode[OE
-00004e30: 4e6f 6465 5d5d 293a 0a20 2020 2020 2020  Node]]):.       
-00004e40: 206e 6f72 6d5f 636f 6e63 6570 7420 3d20   norm_concept = 
-00004e50: 4f70 6572 616e 6453 6574 5472 616e 7366  OperandSetTransf
-00004e60: 6f72 6d28 292e 7369 6d70 6c69 6679 2872  orm().simplify(r
-00004e70: 6566 2e63 6f6e 6365 7074 290a 2020 2020  ef.concept).    
-00004e80: 2020 2020 6966 206e 6f72 6d5f 636f 6e63      if norm_conc
-00004e90: 6570 7420 696e 2073 656c 662e 5f73 6565  ept in self._see
-00004ea0: 6e5f 6e6f 726d 5f63 6f6e 6365 7074 733a  n_norm_concepts:
-00004eb0: 0a20 2020 2020 2020 2020 2020 206e 6f72  .            nor
-00004ec0: 6d5f 7365 656e 203d 2054 7275 650a 2020  m_seen = True.  
-00004ed0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00004ee0: 2020 2020 2020 2020 6e6f 726d 5f73 6565          norm_see
-00004ef0: 6e20 3d20 4661 6c73 650a 2020 2020 2020  n = False.      
-00004f00: 2020 2020 2020 7365 6c66 2e5f 7365 656e        self._seen
-00004f10: 5f6e 6f72 6d5f 636f 6e63 6570 7473 2e61  _norm_concepts.a
-00004f20: 6464 286e 6f72 6d5f 636f 6e63 6570 7429  dd(norm_concept)
-00004f30: 0a0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
-00004f40: 6561 7263 685f 7472 6565 5b72 6566 2e63  earch_tree[ref.c
-00004f50: 6f6e 6365 7074 5d20 3d20 5472 6565 4e6f  oncept] = TreeNo
-00004f60: 6465 2872 6566 2c20 7472 6565 5f70 6172  de(ref, tree_par
-00004f70: 656e 742c 2069 735f 726f 6f74 3d72 6566  ent, is_root=ref
-00004f80: 2e69 735f 726f 6f74 290a 0a20 2020 2020  .is_root)..     
-00004f90: 2020 2072 6566 2e71 7561 6c69 7479 203d     ref.quality =
-00004fa0: 2065 7661 6c5f 2e71 0a20 2020 2020 2020   eval_.q.       
-00004fb0: 2073 656c 662e 5f6e 756d 6265 725f 6f66   self._number_of
-00004fc0: 5f74 6573 7465 645f 636f 6e63 6570 7473  _tested_concepts
-00004fd0: 202b 3d20 310a 2020 2020 2020 2020 6966   += 1.        if
-00004fe0: 2072 6566 2e71 7561 6c69 7479 203d 3d20   ref.quality == 
-00004ff0: 303a 2020 2320 3e20 746f 6f20 7765 616b  0:  # > too weak
-00005000: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00005010: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
-00005020: 2020 6173 7365 7274 2030 203c 3d20 7265    assert 0 <= re
-00005030: 662e 7175 616c 6974 7920 3c3d 2031 2e30  f.quality <= 1.0
-00005040: 0a20 2020 2020 2020 2023 2054 4f44 4f3a  .        # TODO:
-00005050: 2065 7870 7265 7373 696f 6e20 7265 7772   expression rewr
-00005060: 6974 696e 670a 2020 2020 2020 2020 7365  iting.        se
-00005070: 6c66 2e68 6575 7269 7374 6963 5f66 756e  lf.heuristic_fun
-00005080: 632e 6170 706c 7928 7265 662c 2065 7661  c.apply(ref, eva
-00005090: 6c5f 2e69 6e64 732c 2073 656c 662e 5f6c  l_.inds, self._l
-000050a0: 6561 726e 696e 675f 7072 6f62 6c65 6d29  earning_problem)
-000050b0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-000050c0: 6e6f 726d 5f73 6565 6e20 616e 6420 7365  norm_seen and se
-000050d0: 6c66 2e62 6573 745f 6465 7363 7269 7074  lf.best_descript
-000050e0: 696f 6e73 2e6d 6179 6265 5f61 6464 2872  ions.maybe_add(r
-000050f0: 6566 293a 0a20 2020 2020 2020 2020 2020  ef):.           
-00005100: 2069 6620 6c6f 6767 6572 2e69 7345 6e61   if logger.isEna
-00005110: 626c 6564 466f 7228 6c6f 6767 696e 672e  bledFor(logging.
-00005120: 4445 4255 4729 3a0a 2020 2020 2020 2020  DEBUG):.        
-00005130: 2020 2020 2020 2020 6c6f 6767 6572 2e64          logger.d
-00005140: 6562 7567 2822 4265 7474 6572 2064 6573  ebug("Better des
-00005150: 6372 6970 7469 6f6e 2066 6f75 6e64 3a20  cription found: 
-00005160: 2573 222c 2072 6566 290a 2020 2020 2020  %s", ref).      
-00005170: 2020 7365 6c66 2e68 6575 7269 7374 6963    self.heuristic
-00005180: 5f71 7565 7565 2e61 6464 2872 6566 290a  _queue.add(ref).
-00005190: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
-000051a0: 696d 706c 656d 656e 7420 6e6f 6973 650a  implement noise.
-000051b0: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-000051c0: 7275 650a 0a20 2020 2064 6566 205f 6c6f  rue..    def _lo
-000051d0: 675f 6375 7272 656e 745f 6265 7374 2873  g_current_best(s
-000051e0: 656c 662c 2068 6561 6469 6e67 5f73 7465  elf, heading_ste
-000051f0: 702c 2074 6f70 5f6e 3a20 696e 7420 3d20  p, top_n: int = 
-00005200: 3130 2920 2d3e 204e 6f6e 653a 0a20 2020  10) -> None:.   
-00005210: 2020 2020 206c 6f67 6765 722e 6465 6275       logger.debu
-00005220: 6728 2723 2323 2323 2323 2320 2573 2073  g('######## %s s
-00005230: 7465 7020 4265 7374 2048 7970 6f74 6865  tep Best Hypothe
-00005240: 7365 7320 2323 2323 2323 2323 2323 2327  ses ###########'
-00005250: 2c20 6865 6164 696e 675f 7374 6570 290a  , heading_step).
-00005260: 0a20 2020 2020 2020 2070 7265 6469 6374  .        predict
-00005270: 696f 6e73 203d 206c 6973 7428 7365 6c66  ions = list(self
-00005280: 2e62 6573 745f 6879 706f 7468 6573 6573  .best_hypotheses
-00005290: 2874 6f70 5f6e 2929 0a20 2020 2020 2020  (top_n)).       
-000052a0: 2066 6f72 2069 7468 2c20 6e6f 6465 2069   for ith, node i
-000052b0: 6e20 656e 756d 6572 6174 6528 7072 6564  n enumerate(pred
-000052c0: 6963 7469 6f6e 7329 3a0a 2020 2020 2020  ictions):.      
-000052d0: 2020 2020 2020 6c6f 6767 6572 2e64 6562        logger.deb
-000052e0: 7567 2827 7b30 7d2d 5c74 7b31 7d5c 747b  ug('{0}-\t{1}\t{
-000052f0: 327d 3a7b 337d 5c74 4865 7572 6973 7469  2}:{3}\tHeuristi
-00005300: 633a 7b34 7d3a 272e 666f 726d 6174 280a  c:{4}:'.format(.
-00005310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005320: 6974 6820 2b20 312c 2044 4c53 796e 7461  ith + 1, DLSynta
-00005330: 784f 626a 6563 7452 656e 6465 7265 7228  xObjectRenderer(
-00005340: 292e 7265 6e64 6572 286e 6f64 652e 636f  ).render(node.co
-00005350: 6e63 6570 7429 2c0a 2020 2020 2020 2020  ncept),.        
-00005360: 2020 2020 2020 2020 7479 7065 2873 656c          type(sel
-00005370: 662e 7175 616c 6974 795f 6675 6e63 292e  f.quality_func).
-00005380: 6e61 6d65 2c20 6e6f 6465 2e71 7561 6c69  name, node.quali
-00005390: 7479 2c0a 2020 2020 2020 2020 2020 2020  ty,.            
-000053a0: 2020 2020 6e6f 6465 2e68 6575 7269 7374      node.heurist
-000053b0: 6963 2929 0a0a 2020 2020 6465 6620 7368  ic))..    def sh
-000053c0: 6f77 5f73 6561 7263 685f 7472 6565 2873  ow_search_tree(s
-000053d0: 656c 662c 2068 6561 6469 6e67 5f73 7465  elf, heading_ste
-000053e0: 703a 2073 7472 2c20 746f 705f 6e3a 2069  p: str, top_n: i
-000053f0: 6e74 203d 2031 3029 202d 3e20 4e6f 6e65  nt = 10) -> None
-00005400: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00005410: 2020 2020 2020 5368 6f77 2073 6561 7263        Show searc
-00005420: 6820 7472 6565 2e0a 2020 2020 2020 2020  h tree..        
-00005430: 2222 220a 2020 2020 2020 2020 7264 7220  """.        rdr 
-00005440: 3d20 444c 5379 6e74 6178 4f62 6a65 6374  = DLSyntaxObject
-00005450: 5265 6e64 6572 6572 2829 0a0a 2020 2020  Renderer()..    
-00005460: 2020 2020 7072 696e 7428 2723 2323 2323      print('#####
-00005470: 2323 2320 272c 2068 6561 6469 6e67 5f73  ### ', heading_s
-00005480: 7465 702c 2027 7374 6570 2053 6561 7263  tep, 'step Searc
-00005490: 6820 5472 6565 2023 2323 2323 2323 2323  h Tree #########
-000054a0: 2323 2729 0a0a 2020 2020 2020 2020 6465  ##')..        de
-000054b0: 6620 7472 6565 5f6e 6f64 655f 6173 5f6c  f tree_node_as_l
-000054c0: 656e 6774 685f 6f72 6465 7265 645f 636f  ength_ordered_co
-000054d0: 6e63 6570 7428 746e 3a20 5472 6565 4e6f  ncept(tn: TreeNo
-000054e0: 6465 5b4f 454e 6f64 655d 293a 0a20 2020  de[OENode]):.   
-000054f0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00005500: 4c65 6e67 7468 4f72 6465 7265 644e 6f64  LengthOrderedNod
-00005510: 6528 746e 2e6e 6f64 652c 2074 6e2e 6e6f  e(tn.node, tn.no
-00005520: 6465 2e6c 656e 290a 0a20 2020 2020 2020  de.len)..       
-00005530: 2064 6566 2070 7269 6e74 5f70 6172 7469   def print_parti
-00005540: 616c 5f74 7265 655f 7265 6375 7273 6976  al_tree_recursiv
-00005550: 6528 746e 3a20 5472 6565 4e6f 6465 5b4f  e(tn: TreeNode[O
-00005560: 454e 6f64 655d 2c20 6465 7074 683a 2069  ENode], depth: i
-00005570: 6e74 203d 2030 293a 0a20 2020 2020 2020  nt = 0):.       
-00005580: 2020 2020 2069 6620 746e 2e6e 6f64 652e       if tn.node.
-00005590: 6865 7572 6973 7469 6320 6973 206e 6f74  heuristic is not
-000055a0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-000055b0: 2020 2020 2020 2068 6575 725f 6964 7820         heur_idx 
-000055c0: 3d20 6c65 6e28 7365 6c66 2e68 6575 7269  = len(self.heuri
-000055d0: 7374 6963 5f71 7565 7565 2920 2d20 7365  stic_queue) - se
-000055e0: 6c66 2e68 6575 7269 7374 6963 5f71 7565  lf.heuristic_que
-000055f0: 7565 2e69 6e64 6578 2874 6e2e 6e6f 6465  ue.index(tn.node
-00005600: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-00005610: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00005620: 2020 2020 6865 7572 5f69 6478 203d 204e      heur_idx = N
-00005630: 6f6e 650a 0a20 2020 2020 2020 2020 2020  one..           
-00005640: 2069 6620 746e 2e6e 6f64 6520 696e 2073   if tn.node in s
-00005650: 656c 662e 6265 7374 5f64 6573 6372 6970  elf.best_descrip
-00005660: 7469 6f6e 733a 0a20 2020 2020 2020 2020  tions:.         
-00005670: 2020 2020 2020 2062 6573 745f 6964 7820         best_idx 
-00005680: 3d20 6c65 6e28 7365 6c66 2e62 6573 745f  = len(self.best_
-00005690: 6465 7363 7269 7074 696f 6e73 2e69 7465  descriptions.ite
-000056a0: 6d73 2920 2d20 7365 6c66 2e62 6573 745f  ms) - self.best_
-000056b0: 6465 7363 7269 7074 696f 6e73 2e69 7465  descriptions.ite
-000056c0: 6d73 2e69 6e64 6578 2874 6e2e 6e6f 6465  ms.index(tn.node
-000056d0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-000056e0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000056f0: 2020 2020 6265 7374 5f69 6478 203d 204e      best_idx = N
-00005700: 6f6e 650a 0a20 2020 2020 2020 2020 2020  one..           
-00005710: 2072 656e 6465 725f 7374 7220 3d20 7264   render_str = rd
-00005720: 722e 7265 6e64 6572 2874 6e2e 6e6f 6465  r.render(tn.node
-00005730: 2e63 6f6e 6365 7074 290a 0a20 2020 2020  .concept)..     
-00005740: 2020 2020 2020 2064 6570 7468 7320 3d20         depths = 
-00005750: 2260 2220 2a20 6465 7074 680a 0a20 2020  "`" * depth..   
-00005760: 2020 2020 2020 2020 2069 6620 6265 7374           if best
-00005770: 5f69 6478 2069 7320 6e6f 7420 4e6f 6e65  _idx is not None
-00005780: 206f 7220 6865 7572 5f69 6478 2069 7320   or heur_idx is 
-00005790: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000057a0: 2020 2020 2020 2020 2020 6966 2062 6573            if bes
-000057b0: 745f 6964 7820 6973 204e 6f6e 653a 0a20  t_idx is None:. 
-000057c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000057d0: 2020 2062 6573 745f 6964 7820 3d20 2222     best_idx = ""
-000057e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000057f0: 2069 6620 6865 7572 5f69 6478 2069 7320   if heur_idx is 
-00005800: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00005810: 2020 2020 2020 2020 2020 6865 7572 5f69            heur_i
-00005820: 6478 203d 2022 220a 0a20 2020 2020 2020  dx = ""..       
-00005830: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-00005840: 5b25 3373 5d20 5b25 3473 5d20 2573 2025  [%3s] [%4s] %s %
-00005850: 7320 5c74 2048 453a 2573 2051 3a25 6620  s \t HE:%s Q:%f 
-00005860: 4865 7572 3a25 7320 7c52 437c 3a25 7322  Heur:%s |RC|:%s"
-00005870: 2025 2028 6265 7374 5f69 6478 2c20 6865   % (best_idx, he
-00005880: 7572 5f69 6478 2c20 6465 7074 6873 2c20  ur_idx, depths, 
-00005890: 7265 6e64 6572 5f73 7472 2c0a 2020 2020  render_str,.    
-000058a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000058b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000058c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000058d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000058e0: 2020 2020 2020 2074 6e2e 6e6f 6465 2e68         tn.node.h
-000058f0: 5f65 7870 2c20 746e 2e6e 6f64 652e 7175  _exp, tn.node.qu
-00005900: 616c 6974 792c 0a20 2020 2020 2020 2020  ality,.         
-00005910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002cb0: 2020 2073 656c 662e 6f70 6572 6174 6f72     self.operator
+00002cc0: 2e72 6566 696e 6528 0a20 2020 2020 2020  .refine(.       
+00002cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ce0: 206e 6f64 652e 636f 6e63 6570 742c 0a20   node.concept,. 
+00002cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d00: 2020 2020 2020 206d 6178 5f6c 656e 6774         max_lengt
+00002d10: 683d 6e6f 6465 2e68 5f65 7870 2c0a 2020  h=node.h_exp,.  
+00002d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d30: 2020 2020 2020 6375 7272 656e 745f 646f        current_do
+00002d40: 6d61 696e 3d73 656c 662e 7374 6172 745f  main=self.start_
+00002d50: 636c 6173 7329 0a20 2020 2020 2020 2020  class).         
+00002d60: 2020 2020 2020 2020 2020 2029 2020 2320             )  # 
+00002d70: 6e6f 7161 3a20 4532 3033 0a20 2020 2020  noqa: E203.     
+00002d80: 2020 2020 2020 2020 2020 202c 0a20 2020             ,.   
+00002d90: 2020 2020 2020 2020 2020 2020 206b 6579               key
+00002da0: 3d4f 7264 6572 6564 4f57 4c4f 626a 6563  =OrderedOWLObjec
+00002db0: 7429 0a0a 2020 2020 2020 2020 2020 2020  t)..            
+00002dc0: 6e6f 6465 2e69 6e63 7265 6d65 6e74 5f68  node.increment_h
+00002dd0: 5f65 7870 2829 0a20 2020 2020 2020 2020  _exp().         
+00002de0: 2020 206e 6f64 652e 7265 6669 6e65 6d65     node.refineme
+00002df0: 6e74 5f63 6f75 6e74 203d 206c 656e 2872  nt_count = len(r
+00002e00: 6566 696e 656d 656e 7473 290a 2020 2020  efinements).    
+00002e10: 2020 2020 2020 2020 7365 6c66 2e68 6575          self.heu
+00002e20: 7269 7374 6963 5f66 756e 632e 6170 706c  ristic_func.appl
+00002e30: 7928 6e6f 6465 2c20 4e6f 6e65 2c20 7365  y(node, None, se
+00002e40: 6c66 2e5f 6c65 6172 6e69 6e67 5f70 726f  lf._learning_pro
+00002e50: 626c 656d 290a 0a20 2020 2020 2020 2064  blem)..        d
+00002e60: 6566 206d 616b 655f 6e6f 6465 5f77 6974  ef make_node_wit
+00002e70: 685f 7061 7265 6e74 2863 3a20 4f57 4c43  h_parent(c: OWLC
+00002e80: 6c61 7373 4578 7072 6573 7369 6f6e 293a  lassExpression):
+00002e90: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00002ea0: 7572 6e20 7365 6c66 2e6d 616b 655f 6e6f  urn self.make_no
+00002eb0: 6465 2863 2c20 7061 7265 6e74 5f6e 6f64  de(c, parent_nod
+00002ec0: 653d 6e6f 6465 290a 0a20 2020 2020 2020  e=node)..       
+00002ed0: 2072 6574 7572 6e20 6d61 7028 6d61 6b65   return map(make
+00002ee0: 5f6e 6f64 655f 7769 7468 5f70 6172 656e  _node_with_paren
+00002ef0: 742c 2072 6566 696e 656d 656e 7473 290a  t, refinements).
+00002f00: 0a20 2020 2064 6566 2066 6974 2873 656c  .    def fit(sel
+00002f10: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
+00002f20: 6773 293a 0a20 2020 2020 2020 2022 2222  gs):.        """
+00002f30: 0a20 2020 2020 2020 2046 696e 6420 6879  .        Find hy
+00002f40: 706f 7468 6573 6573 2074 6861 7420 6578  potheses that ex
+00002f50: 706c 6169 6e20 706f 7320 616e 6420 6e65  plain pos and ne
+00002f60: 672e 0a20 2020 2020 2020 2022 2222 0a20  g..        """. 
+00002f70: 2020 2020 2020 2073 656c 662e 636c 6561         self.clea
+00002f80: 6e28 290a 2020 2020 2020 2020 6d61 785f  n().        max_
+00002f90: 7275 6e74 696d 6520 3d20 6b77 6172 6773  runtime = kwargs
+00002fa0: 2e70 6f70 2822 6d61 785f 7275 6e74 696d  .pop("max_runtim
+00002fb0: 6522 2c20 4e6f 6e65 290a 2020 2020 2020  e", None).      
+00002fc0: 2020 6c65 6172 6e69 6e67 5f70 726f 626c    learning_probl
+00002fd0: 656d 203d 2073 656c 662e 636f 6e73 7472  em = self.constr
+00002fe0: 7563 745f 6c65 6172 6e69 6e67 5f70 726f  uct_learning_pro
+00002ff0: 626c 656d 2850 6f73 4e65 674c 5053 7461  blem(PosNegLPSta
+00003000: 6e64 6172 642c 2061 7267 732c 206b 7761  ndard, args, kwa
+00003010: 7267 7329 0a0a 2020 2020 2020 2020 6173  rgs)..        as
+00003020: 7365 7274 206e 6f74 2073 656c 662e 7365  sert not self.se
+00003030: 6172 6368 5f74 7265 650a 2020 2020 2020  arch_tree.      
+00003040: 2020 7365 6c66 2e5f 6c65 6172 6e69 6e67    self._learning
+00003050: 5f70 726f 626c 656d 203d 206c 6561 726e  _problem = learn
+00003060: 696e 675f 7072 6f62 6c65 6d2e 656e 636f  ing_problem.enco
+00003070: 6465 5f6b 6228 7365 6c66 2e6b 6229 0a0a  de_kb(self.kb)..
+00003080: 2020 2020 2020 2020 6966 206d 6178 5f72          if max_r
+00003090: 756e 7469 6d65 2069 7320 6e6f 7420 4e6f  untime is not No
+000030a0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+000030b0: 7365 6c66 2e5f 6d61 785f 7275 6e74 696d  self._max_runtim
+000030c0: 6520 3d20 6d61 785f 7275 6e74 696d 650a  e = max_runtime.
+000030d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000030e0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+000030f0: 6d61 785f 7275 6e74 696d 6520 3d20 7365  max_runtime = se
+00003100: 6c66 2e6d 6178 5f72 756e 7469 6d65 0a0a  lf.max_runtime..
+00003110: 2020 2020 2020 2020 726f 6f74 203d 2073          root = s
+00003120: 656c 662e 6d61 6b65 5f6e 6f64 6528 5f63  elf.make_node(_c
+00003130: 6f6e 6365 7074 5f6f 7065 7261 6e64 5f73  oncept_operand_s
+00003140: 6f72 7465 722e 736f 7274 2873 656c 662e  orter.sort(self.
+00003150: 7374 6172 745f 636c 6173 7329 2c20 6973  start_class), is
+00003160: 5f72 6f6f 743d 5472 7565 290a 2020 2020  _root=True).    
+00003170: 2020 2020 7365 6c66 2e5f 6164 645f 6e6f      self._add_no
+00003180: 6465 2872 6f6f 742c 204e 6f6e 6529 0a20  de(root, None). 
+00003190: 2020 2020 2020 2061 7373 6572 7420 6c65         assert le
+000031a0: 6e28 7365 6c66 2e68 6575 7269 7374 6963  n(self.heuristic
+000031b0: 5f71 7565 7565 2920 3d3d 2031 0a20 2020  _queue) == 1.   
+000031c0: 2020 2020 2023 2054 4f44 4f3a 4344 3a73       # TODO:CD:s
+000031d0: 7567 6765 7374 2074 6f20 6164 6420 616e  uggest to add an
+000031e0: 6f74 6865 7220 6173 7365 7274 2c65 2e67  other assert,e.g
+000031f0: 2e20 6173 7365 7274 2023 2e20 6f66 2069  . assert #. of i
+00003200: 6e73 7461 6e63 6520 696e 2072 6f6f 7420  nstance in root 
+00003210: 3e20 310a 0a20 2020 2020 2020 2073 656c  > 1..        sel
+00003220: 662e 7374 6172 745f 7469 6d65 203d 2074  f.start_time = t
+00003230: 696d 652e 7469 6d65 2829 0a20 2020 2020  ime.time().     
+00003240: 2020 2066 6f72 206a 2069 6e20 7261 6e67     for j in rang
+00003250: 6528 312c 2073 656c 662e 6974 6572 5f62  e(1, self.iter_b
+00003260: 6f75 6e64 293a 0a20 2020 2020 2020 2020  ound):.         
+00003270: 2020 206d 6f73 745f 7072 6f6d 6973 696e     most_promisin
+00003280: 6720 3d20 7365 6c66 2e6e 6578 745f 6e6f  g = self.next_no
+00003290: 6465 5f74 6f5f 6578 7061 6e64 286a 290a  de_to_expand(j).
+000032a0: 2020 2020 2020 2020 2020 2020 7472 6565              tree
+000032b0: 5f70 6172 656e 7420 3d20 7365 6c66 2e74  _parent = self.t
+000032c0: 7265 655f 6e6f 6465 286d 6f73 745f 7072  ree_node(most_pr
+000032d0: 6f6d 6973 696e 6729 0a20 2020 2020 2020  omising).       
+000032e0: 2020 2020 206d 696e 696d 756d 5f6c 656e       minimum_len
+000032f0: 6774 6820 3d20 6d6f 7374 5f70 726f 6d69  gth = most_promi
+00003300: 7369 6e67 2e68 5f65 7870 0a20 2020 2020  sing.h_exp.     
+00003310: 2020 2020 2020 2069 6620 6c6f 6767 6572         if logger
+00003320: 2e69 7345 6e61 626c 6564 466f 7228 6f70  .isEnabledFor(op
+00003330: 6c6f 6767 696e 672e 5452 4143 4529 3a0a  logging.TRACE):.
+00003340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003350: 6c6f 6767 6572 2e64 6562 7567 2822 6e6f  logger.debug("no
+00003360: 7720 7265 6669 6e69 6e67 2025 7322 2c20  w refining %s", 
+00003370: 6d6f 7374 5f70 726f 6d69 7369 6e67 290a  most_promising).
+00003380: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00003390: 7265 6620 696e 2073 656c 662e 646f 776e  ref in self.down
+000033a0: 7761 7264 5f72 6566 696e 656d 656e 7428  ward_refinement(
+000033b0: 6d6f 7374 5f70 726f 6d69 7369 6e67 293a  most_promising):
+000033c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000033d0: 2023 2077 6520 6967 6e6f 7265 2061 6c6c   # we ignore all
+000033e0: 2072 6566 696e 656d 656e 7473 2077 6974   refinements wit
+000033f0: 6820 6c6f 7765 7220 6c65 6e67 7468 0a20  h lower length. 
+00003400: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00003410: 2028 7468 6973 2061 6c73 6f20 6176 6f69   (this also avoi
+00003420: 6473 2064 7570 6c69 6361 7465 206e 6f64  ds duplicate nod
+00003430: 6520 6368 696c 6472 656e 290a 2020 2020  e children).    
+00003440: 2020 2020 2020 2020 2020 2020 2320 544f              # TO
+00003450: 444f 3a20 6967 6e6f 7265 2074 6f6f 2068  DO: ignore too h
+00003460: 6967 6820 6465 7074 680a 2020 2020 2020  igh depth.      
+00003470: 2020 2020 2020 2020 2020 6966 2072 6566            if ref
+00003480: 2e6c 656e 203c 206d 696e 696d 756d 5f6c  .len < minimum_l
+00003490: 656e 6774 683a 0a20 2020 2020 2020 2020  ength:.         
+000034a0: 2020 2020 2020 2020 2020 2023 2069 676e             # ign
+000034b0: 6f72 696e 6720 7265 6669 6e65 6d65 6e74  oring refinement
+000034c0: 2c20 6974 2064 6f65 7320 6e6f 7420 7361  , it does not sa
+000034d0: 7469 7366 7920 6d69 6e69 6d75 6d5f 6c65  tisfy minimum_le
+000034e0: 6e67 7468 2063 6f6e 6469 7469 6f6e 0a20  ngth condition. 
+000034f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003500: 2020 2063 6f6e 7469 6e75 650a 0a20 2020     continue..   
+00003510: 2020 2020 2020 2020 2020 2020 2023 206e               # n
+00003520: 6f74 653a 2074 7265 655f 7061 7265 6e74  ote: tree_parent
+00003530: 2068 6173 2074 6f20 6265 2065 7175 616c   has to be equal
+00003540: 2074 6f20 6e6f 6465 5f74 7265 655f 7061   to node_tree_pa
+00003550: 7265 6e74 2872 6566 2e70 6172 656e 745f  rent(ref.parent_
+00003560: 6e6f 6465 2921 0a20 2020 2020 2020 2020  node)!.         
+00003570: 2020 2020 2020 2061 6464 6564 203d 2073         added = s
+00003580: 656c 662e 5f61 6464 5f6e 6f64 6528 7265  elf._add_node(re
+00003590: 662c 2074 7265 655f 7061 7265 6e74 290a  f, tree_parent).
+000035a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000035b0: 2067 6f61 6c5f 666f 756e 6420 3d20 6164   goal_found = ad
+000035c0: 6465 6420 616e 6420 7265 662e 7175 616c  ded and ref.qual
+000035d0: 6974 7920 3d3d 2031 2e30 0a0a 2020 2020  ity == 1.0..    
+000035e0: 2020 2020 2020 2020 2020 2020 6966 2067              if g
+000035f0: 6f61 6c5f 666f 756e 6420 616e 6420 7365  oal_found and se
+00003600: 6c66 2e74 6572 6d69 6e61 7465 5f6f 6e5f  lf.terminate_on_
+00003610: 676f 616c 3a0a 2020 2020 2020 2020 2020  goal:.          
+00003620: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00003630: 2073 656c 662e 7465 726d 696e 6174 6528   self.terminate(
+00003640: 290a 0a20 2020 2020 2020 2020 2020 2069  )..            i
+00003650: 6620 7365 6c66 2e63 616c 6375 6c61 7465  f self.calculate
+00003660: 5f6d 696e 5f6d 6178 3a0a 2020 2020 2020  _min_max:.      
+00003670: 2020 2020 2020 2020 2020 2320 5468 6973            # This
+00003680: 2069 7320 7075 7265 6c79 2061 2073 7461   is purely a sta
+00003690: 7469 7374 6963 616c 2066 756e 6374 696f  tistical functio
+000036a0: 6e2c 2069 7420 646f 6573 206e 6f74 2069  n, it does not i
+000036b0: 6e66 6c75 656e 6365 2043 454c 4f45 0a20  nfluence CELOE. 
+000036c0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000036d0: 656c 662e 7570 6461 7465 5f6d 696e 5f6d  elf.update_min_m
+000036e0: 6178 5f68 6f72 697a 5f65 7870 286d 6f73  ax_horiz_exp(mos
+000036f0: 745f 7072 6f6d 6973 696e 6729 0a0a 2020  t_promising)..  
+00003700: 2020 2020 2020 2020 2020 6966 2074 696d            if tim
+00003710: 652e 7469 6d65 2829 202d 2073 656c 662e  e.time() - self.
+00003720: 7374 6172 745f 7469 6d65 203e 2073 656c  start_time > sel
+00003730: 662e 5f6d 6178 5f72 756e 7469 6d65 3a0a  f._max_runtime:.
+00003740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003750: 7265 7475 726e 2073 656c 662e 7465 726d  return self.term
+00003760: 696e 6174 6528 290a 0a20 2020 2020 2020  inate()..       
+00003770: 2020 2020 2069 6620 7365 6c66 2e6e 756d       if self.num
+00003780: 6265 725f 6f66 5f74 6573 7465 645f 636f  ber_of_tested_co
+00003790: 6e63 6570 7473 203e 3d20 7365 6c66 2e6d  ncepts >= self.m
+000037a0: 6178 5f6e 756d 5f6f 665f 636f 6e63 6570  ax_num_of_concep
+000037b0: 7473 5f74 6573 7465 643a 0a20 2020 2020  ts_tested:.     
+000037c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000037d0: 6e20 7365 6c66 2e74 6572 6d69 6e61 7465  n self.terminate
+000037e0: 2829 0a0a 2020 2020 2020 2020 2020 2020  ()..            
+000037f0: 6966 206c 6f67 6765 722e 6973 456e 6162  if logger.isEnab
+00003800: 6c65 6446 6f72 286f 706c 6f67 6769 6e67  ledFor(oplogging
+00003810: 2e54 5241 4345 2920 616e 6420 6a20 2520  .TRACE) and j % 
+00003820: 3130 3020 3d3d 2030 3a0a 2020 2020 2020  100 == 0:.      
+00003830: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+00003840: 6c6f 675f 6375 7272 656e 745f 6265 7374  log_current_best
+00003850: 286a 290a 0a20 2020 2020 2020 2072 6574  (j)..        ret
+00003860: 7572 6e20 7365 6c66 2e74 6572 6d69 6e61  urn self.termina
+00003870: 7465 2829 0a0a 2020 2020 6173 796e 6320  te()..    async 
+00003880: 6465 6620 6669 745f 6173 796e 6328 7365  def fit_async(se
+00003890: 6c66 2c20 2a61 7267 732c 202a 2a6b 7761  lf, *args, **kwa
+000038a0: 7267 7329 3a0a 2020 2020 2020 2020 2222  rgs):.        ""
+000038b0: 220a 2020 2020 2020 2020 4173 796e 6320  ".        Async 
+000038c0: 6d65 7468 6f64 206f 6620 6669 742e 0a20  method of fit.. 
+000038d0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000038e0: 2020 2073 656c 662e 636c 6561 6e28 290a     self.clean().
+000038f0: 2020 2020 2020 2020 6d61 785f 7275 6e74          max_runt
+00003900: 696d 6520 3d20 6b77 6172 6773 2e70 6f70  ime = kwargs.pop
+00003910: 2822 6d61 785f 7275 6e74 696d 6522 2c20  ("max_runtime", 
+00003920: 4e6f 6e65 290a 2020 2020 2020 2020 6c65  None).        le
+00003930: 6172 6e69 6e67 5f70 726f 626c 656d 203d  arning_problem =
+00003940: 2073 656c 662e 636f 6e73 7472 7563 745f   self.construct_
+00003950: 6c65 6172 6e69 6e67 5f70 726f 626c 656d  learning_problem
+00003960: 2850 6f73 4e65 674c 5053 7461 6e64 6172  (PosNegLPStandar
+00003970: 642c 2061 7267 732c 206b 7761 7267 7329  d, args, kwargs)
+00003980: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
+00003990: 206e 6f74 2073 656c 662e 7365 6172 6368   not self.search
+000039a0: 5f74 7265 650a 2020 2020 2020 2020 7365  _tree.        se
+000039b0: 6c66 2e5f 6c65 6172 6e69 6e67 5f70 726f  lf._learning_pro
+000039c0: 626c 656d 203d 206c 6561 726e 696e 675f  blem = learning_
+000039d0: 7072 6f62 6c65 6d2e 656e 636f 6465 5f6b  problem.encode_k
+000039e0: 6228 7365 6c66 2e6b 6229 0a0a 2020 2020  b(self.kb)..    
+000039f0: 2020 2020 6966 206d 6178 5f72 756e 7469      if max_runti
+00003a00: 6d65 2069 7320 6e6f 7420 4e6f 6e65 3a0a  me is not None:.
+00003a10: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00003a20: 2e5f 6d61 785f 7275 6e74 696d 6520 3d20  ._max_runtime = 
+00003a30: 6d61 785f 7275 6e74 696d 650a 2020 2020  max_runtime.    
+00003a40: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00003a50: 2020 2020 2020 7365 6c66 2e5f 6d61 785f        self._max_
+00003a60: 7275 6e74 696d 6520 3d20 7365 6c66 2e6d  runtime = self.m
+00003a70: 6178 5f72 756e 7469 6d65 0a0a 2020 2020  ax_runtime..    
+00003a80: 2020 2020 726f 6f74 203d 2073 656c 662e      root = self.
+00003a90: 6d61 6b65 5f6e 6f64 6528 5f63 6f6e 6365  make_node(_conce
+00003aa0: 7074 5f6f 7065 7261 6e64 5f73 6f72 7465  pt_operand_sorte
+00003ab0: 722e 736f 7274 2873 656c 662e 7374 6172  r.sort(self.star
+00003ac0: 745f 636c 6173 7329 2c20 6973 5f72 6f6f  t_class), is_roo
+00003ad0: 743d 5472 7565 290a 2020 2020 2020 2020  t=True).        
+00003ae0: 7365 6c66 2e5f 6164 645f 6e6f 6465 2872  self._add_node(r
+00003af0: 6f6f 742c 204e 6f6e 6529 0a20 2020 2020  oot, None).     
+00003b00: 2020 2061 7373 6572 7420 6c65 6e28 7365     assert len(se
+00003b10: 6c66 2e68 6575 7269 7374 6963 5f71 7565  lf.heuristic_que
+00003b20: 7565 2920 3d3d 2031 0a20 2020 2020 2020  ue) == 1.       
+00003b30: 2023 2054 4f44 4f3a 4344 3a73 7567 6765   # TODO:CD:sugge
+00003b40: 7374 2074 6f20 6164 6420 616e 6f74 6865  st to add anothe
+00003b50: 7220 6173 7365 7274 2c65 2e67 2e20 6173  r assert,e.g. as
+00003b60: 7365 7274 2023 2e20 6f66 2069 6e73 7461  sert #. of insta
+00003b70: 6e63 6520 696e 2072 6f6f 7420 3e20 310a  nce in root > 1.
+00003b80: 0a20 2020 2020 2020 2073 656c 662e 7374  .        self.st
+00003b90: 6172 745f 7469 6d65 203d 2074 696d 652e  art_time = time.
+00003ba0: 7469 6d65 2829 0a20 2020 2020 2020 2066  time().        f
+00003bb0: 6f72 206a 2069 6e20 7261 6e67 6528 312c  or j in range(1,
+00003bc0: 2073 656c 662e 6974 6572 5f62 6f75 6e64   self.iter_bound
+00003bd0: 293a 0a20 2020 2020 2020 2020 2020 206d  ):.            m
+00003be0: 6f73 745f 7072 6f6d 6973 696e 6720 3d20  ost_promising = 
+00003bf0: 7365 6c66 2e6e 6578 745f 6e6f 6465 5f74  self.next_node_t
+00003c00: 6f5f 6578 7061 6e64 286a 290a 2020 2020  o_expand(j).    
+00003c10: 2020 2020 2020 2020 7472 6565 5f70 6172          tree_par
+00003c20: 656e 7420 3d20 7365 6c66 2e74 7265 655f  ent = self.tree_
+00003c30: 6e6f 6465 286d 6f73 745f 7072 6f6d 6973  node(most_promis
+00003c40: 696e 6729 0a20 2020 2020 2020 2020 2020  ing).           
+00003c50: 206d 696e 696d 756d 5f6c 656e 6774 6820   minimum_length 
+00003c60: 3d20 6d6f 7374 5f70 726f 6d69 7369 6e67  = most_promising
+00003c70: 2e68 5f65 7870 0a20 2020 2020 2020 2020  .h_exp.         
+00003c80: 2020 2069 6620 6c6f 6767 6572 2e69 7345     if logger.isE
+00003c90: 6e61 626c 6564 466f 7228 6f70 6c6f 6767  nabledFor(oplogg
+00003ca0: 696e 672e 5452 4143 4529 3a0a 2020 2020  ing.TRACE):.    
+00003cb0: 2020 2020 2020 2020 2020 2020 6c6f 6767              logg
+00003cc0: 6572 2e64 6562 7567 2822 6e6f 7720 7265  er.debug("now re
+00003cd0: 6669 6e69 6e67 2025 7322 2c20 6d6f 7374  fining %s", most
+00003ce0: 5f70 726f 6d69 7369 6e67 290a 2020 2020  _promising).    
+00003cf0: 2020 2020 2020 2020 6576 616c 7561 7465          evaluate
+00003d00: 645f 7265 6673 203d 205b 5d0a 2020 2020  d_refs = [].    
+00003d10: 2020 2020 2020 2020 666f 7220 7265 6620          for ref 
+00003d20: 696e 2073 656c 662e 646f 776e 7761 7264  in self.downward
+00003d30: 5f72 6566 696e 656d 656e 7428 6d6f 7374  _refinement(most
+00003d40: 5f70 726f 6d69 7369 6e67 293a 0a20 2020  _promising):.   
+00003d50: 2020 2020 2020 2020 2020 2020 2023 2077               # w
+00003d60: 6520 6967 6e6f 7265 2061 6c6c 2072 6566  e ignore all ref
+00003d70: 696e 656d 656e 7473 2077 6974 6820 6c6f  inements with lo
+00003d80: 7765 7220 6c65 6e67 7468 0a20 2020 2020  wer length.     
+00003d90: 2020 2020 2020 2020 2020 2023 2028 7468             # (th
+00003da0: 6973 2061 6c73 6f20 6176 6f69 6473 2064  is also avoids d
+00003db0: 7570 6c69 6361 7465 206e 6f64 6520 6368  uplicate node ch
+00003dc0: 696c 6472 656e 290a 2020 2020 2020 2020  ildren).        
+00003dd0: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+00003de0: 6967 6e6f 7265 2074 6f6f 2068 6967 6820  ignore too high 
+00003df0: 6465 7074 680a 2020 2020 2020 2020 2020  depth.          
+00003e00: 2020 2020 2020 6966 2072 6566 2e6c 656e        if ref.len
+00003e10: 203c 206d 696e 696d 756d 5f6c 656e 6774   < minimum_lengt
+00003e20: 683a 0a20 2020 2020 2020 2020 2020 2020  h:.             
+00003e30: 2020 2020 2020 2023 2069 676e 6f72 696e         # ignorin
+00003e40: 6720 7265 6669 6e65 6d65 6e74 2c20 6974  g refinement, it
+00003e50: 2064 6f65 7320 6e6f 7420 7361 7469 7366   does not satisf
+00003e60: 7920 6d69 6e69 6d75 6d5f 6c65 6e67 7468  y minimum_length
+00003e70: 2063 6f6e 6469 7469 6f6e 0a20 2020 2020   condition.     
+00003e80: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00003e90: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+00003ea0: 2020 2020 2020 2020 6966 2072 6566 2e63          if ref.c
+00003eb0: 6f6e 6365 7074 2069 6e20 7365 6c66 2e73  oncept in self.s
+00003ec0: 6561 7263 685f 7472 6565 3a0a 2020 2020  earch_tree:.    
+00003ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003ee0: 2320 6967 6e6f 7269 6e67 2072 6566 696e  # ignoring refin
+00003ef0: 656d 656e 742c 2069 7420 6861 7320 6265  ement, it has be
+00003f00: 656e 2072 6566 696e 6564 2066 726f 6d20  en refined from 
+00003f10: 616e 6f74 6865 7220 7061 7265 6e74 0a20  another parent. 
+00003f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003f30: 2020 2063 6f6e 7469 6e75 650a 0a20 2020     continue..   
+00003f40: 2020 2020 2020 2020 2020 2020 2065 7661               eva
+00003f50: 6c75 6174 6564 5f72 6566 732e 6170 7065  luated_refs.appe
+00003f60: 6e64 2873 656c 662e 5f65 7661 6c5f 6e6f  nd(self._eval_no
+00003f70: 6465 5f61 7379 6e63 2872 6566 2929 0a0a  de_async(ref))..
+00003f80: 2020 2020 2020 2020 2020 2020 696d 706f              impo
+00003f90: 7274 2061 7379 6e63 696f 0a20 2020 2020  rt asyncio.     
+00003fa0: 2020 2020 2020 2066 6f72 2074 6173 6b20         for task 
+00003fb0: 696e 2061 7379 6e63 696f 2e61 735f 636f  in asyncio.as_co
+00003fc0: 6d70 6c65 7465 6428 6576 616c 7561 7465  mpleted(evaluate
+00003fd0: 645f 7265 6673 293a 0a20 2020 2020 2020  d_refs):.       
+00003fe0: 2020 2020 2020 2020 2072 6566 2c20 6576           ref, ev
+00003ff0: 616c 5f20 3d20 6177 6169 7420 7461 736b  al_ = await task
+00004000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004010: 2023 2066 6f72 2074 6173 6b20 696e 2061   # for task in a
+00004020: 7761 6974 2061 7379 6e63 696f 2e67 6174  wait asyncio.gat
+00004030: 6865 7228 2a65 7661 6c75 6174 6564 5f72  her(*evaluated_r
+00004040: 6566 7329 3a0a 2020 2020 2020 2020 2020  efs):.          
+00004050: 2020 2020 2020 2320 2020 2020 7265 662c        #     ref,
+00004060: 2065 7661 6c5f 203d 2074 6173 6b0a 0a20   eval_ = task.. 
+00004070: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00004080: 206e 6f74 653a 2074 7265 655f 7061 7265   note: tree_pare
+00004090: 6e74 2068 6173 2074 6f20 6265 2065 7175  nt has to be equ
+000040a0: 616c 2074 6f20 6e6f 6465 5f74 7265 655f  al to node_tree_
+000040b0: 7061 7265 6e74 2872 6566 2e70 6172 656e  parent(ref.paren
+000040c0: 745f 6e6f 6465 2921 0a20 2020 2020 2020  t_node)!.       
+000040d0: 2020 2020 2020 2020 2061 6464 6564 203d           added =
+000040e0: 2073 656c 662e 5f61 6464 5f6e 6f64 655f   self._add_node_
+000040f0: 6576 616c 6428 7265 662c 2065 7661 6c5f  evald(ref, eval_
+00004100: 2c20 7472 6565 5f70 6172 656e 7429 0a0a  , tree_parent)..
+00004110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004120: 676f 616c 5f66 6f75 6e64 203d 2061 6464  goal_found = add
+00004130: 6564 2061 6e64 2072 6566 2e71 7561 6c69  ed and ref.quali
+00004140: 7479 203d 3d20 312e 300a 0a20 2020 2020  ty == 1.0..     
+00004150: 2020 2020 2020 2020 2020 2069 6620 676f             if go
+00004160: 616c 5f66 6f75 6e64 2061 6e64 2073 656c  al_found and sel
+00004170: 662e 7465 726d 696e 6174 655f 6f6e 5f67  f.terminate_on_g
+00004180: 6f61 6c3a 0a20 2020 2020 2020 2020 2020  oal:.           
+00004190: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000041a0: 7365 6c66 2e74 6572 6d69 6e61 7465 2829  self.terminate()
+000041b0: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+000041c0: 2073 656c 662e 6361 6c63 756c 6174 655f   self.calculate_
+000041d0: 6d69 6e5f 6d61 783a 0a20 2020 2020 2020  min_max:.       
+000041e0: 2020 2020 2020 2020 2023 2054 6869 7320           # This 
+000041f0: 6973 2070 7572 656c 7920 6120 7374 6174  is purely a stat
+00004200: 6973 7469 6361 6c20 6675 6e63 7469 6f6e  istical function
+00004210: 2c20 6974 2064 6f65 7320 6e6f 7420 696e  , it does not in
+00004220: 666c 7565 6e63 6520 4345 4c4f 450a 2020  fluence CELOE.  
+00004230: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00004240: 6c66 2e75 7064 6174 655f 6d69 6e5f 6d61  lf.update_min_ma
+00004250: 785f 686f 7269 7a5f 6578 7028 6d6f 7374  x_horiz_exp(most
+00004260: 5f70 726f 6d69 7369 6e67 290a 0a20 2020  _promising)..   
+00004270: 2020 2020 2020 2020 2069 6620 7469 6d65           if time
+00004280: 2e74 696d 6528 2920 2d20 7365 6c66 2e73  .time() - self.s
+00004290: 7461 7274 5f74 696d 6520 3e20 7365 6c66  tart_time > self
+000042a0: 2e5f 6d61 785f 7275 6e74 696d 653a 0a20  ._max_runtime:. 
+000042b0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000042c0: 6574 7572 6e20 7365 6c66 2e74 6572 6d69  eturn self.termi
+000042d0: 6e61 7465 2829 0a0a 2020 2020 2020 2020  nate()..        
+000042e0: 2020 2020 6966 2073 656c 662e 6e75 6d62      if self.numb
+000042f0: 6572 5f6f 665f 7465 7374 6564 5f63 6f6e  er_of_tested_con
+00004300: 6365 7074 7320 3e3d 2073 656c 662e 6d61  cepts >= self.ma
+00004310: 785f 6e75 6d5f 6f66 5f63 6f6e 6365 7074  x_num_of_concept
+00004320: 735f 7465 7374 6564 3a0a 2020 2020 2020  s_tested:.      
+00004330: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00004340: 2073 656c 662e 7465 726d 696e 6174 6528   self.terminate(
+00004350: 290a 0a20 2020 2020 2020 2020 2020 2069  )..            i
+00004360: 6620 6c6f 6767 6572 2e69 7345 6e61 626c  f logger.isEnabl
+00004370: 6564 466f 7228 6f70 6c6f 6767 696e 672e  edFor(oplogging.
+00004380: 5452 4143 4529 2061 6e64 206a 2025 2031  TRACE) and j % 1
+00004390: 3030 203d 3d20 303a 0a20 2020 2020 2020  00 == 0:.       
+000043a0: 2020 2020 2020 2020 2073 656c 662e 5f6c           self._l
+000043b0: 6f67 5f63 7572 7265 6e74 5f62 6573 7428  og_current_best(
+000043c0: 6a29 0a0a 2020 2020 2020 2020 7265 7475  j)..        retu
+000043d0: 726e 2073 656c 662e 7465 726d 696e 6174  rn self.terminat
+000043e0: 6528 290a 0a20 2020 2064 6566 2065 6e63  e()..    def enc
+000043f0: 6f64 6564 5f6c 6561 726e 696e 675f 7072  oded_learning_pr
+00004400: 6f62 6c65 6d28 7365 6c66 2920 2d3e 204f  oblem(self) -> O
+00004410: 7074 696f 6e61 6c5b 456e 636f 6465 6450  ptional[EncodedP
+00004420: 6f73 4e65 674c 5053 7461 6e64 6172 644b  osNegLPStandardK
+00004430: 696e 645d 3a0a 2020 2020 2020 2020 2222  ind]:.        ""
+00004440: 2246 6574 6368 2074 6865 206d 6f73 7420  "Fetch the most 
+00004450: 7265 6365 6e74 6c79 2075 7365 6420 6c65  recently used le
+00004460: 6172 6e69 6e67 2070 726f 626c 656d 2066  arning problem f
+00004470: 726f 6d20 7468 6520 6669 7420 6d65 7468  rom the fit meth
+00004480: 6f64 2e22 2222 0a20 2020 2020 2020 2072  od.""".        r
+00004490: 6574 7572 6e20 7365 6c66 2e5f 6c65 6172  eturn self._lear
+000044a0: 6e69 6e67 5f70 726f 626c 656d 0a0a 2020  ning_problem..  
+000044b0: 2020 6465 6620 7472 6565 5f6e 6f64 6528    def tree_node(
+000044c0: 7365 6c66 2c20 6e6f 6465 3a20 4f45 4e6f  self, node: OENo
+000044d0: 6465 2920 2d3e 2054 7265 654e 6f64 655b  de) -> TreeNode[
+000044e0: 4f45 4e6f 6465 5d3a 0a20 2020 2020 2020  OENode]:.       
+000044f0: 2022 2222 0a20 2020 2020 2020 2047 6574   """.        Get
+00004500: 2074 6865 2054 7265 654e 6f64 6520 6f66   the TreeNode of
+00004510: 2074 6865 2067 6976 656e 206e 6f64 652e   the given node.
+00004520: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
+00004530: 2020 2020 2020 2020 2020 2020 6e6f 6465              node
+00004540: 3a20 5468 6520 6e6f 6465 2e0a 0a20 2020  : The node...   
+00004550: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
+00004560: 2020 2020 2020 2020 2020 5472 6565 4e6f            TreeNo
+00004570: 6465 206f 6620 7468 6520 6769 7665 6e20  de of the given 
+00004580: 6e6f 6465 2e0a 2020 2020 2020 2020 2222  node..        ""
+00004590: 220a 2020 2020 2020 2020 7472 6565 5f70  ".        tree_p
+000045a0: 6172 656e 7420 3d20 7365 6c66 2e73 6561  arent = self.sea
+000045b0: 7263 685f 7472 6565 5b6e 6f64 652e 636f  rch_tree[node.co
+000045c0: 6e63 6570 745d 0a20 2020 2020 2020 2072  ncept].        r
+000045d0: 6574 7572 6e20 7472 6565 5f70 6172 656e  eturn tree_paren
+000045e0: 740a 0a20 2020 2064 6566 205f 6164 645f  t..    def _add_
+000045f0: 6e6f 6465 2873 656c 662c 2072 6566 3a20  node(self, ref: 
+00004600: 4f45 4e6f 6465 2c20 7472 6565 5f70 6172  OENode, tree_par
+00004610: 656e 743a 204f 7074 696f 6e61 6c5b 5472  ent: Optional[Tr
+00004620: 6565 4e6f 6465 5b4f 454e 6f64 655d 5d29  eeNode[OENode]])
+00004630: 3a0a 2020 2020 2020 2020 2320 544f 444f  :.        # TODO
+00004640: 3a43 443a 2057 6879 2068 6176 6520 7468  :CD: Why have th
+00004650: 6973 2063 6f6e 7374 7261 696e 7420 3f0a  is constraint ?.
+00004660: 2020 2020 2020 2020 2320 2057 6520 7368          #  We sh
+00004670: 6f75 6c64 206e 6f74 2069 676e 6f72 6520  ould not ignore 
+00004680: 6120 636f 6e63 6570 7420 6475 6520 746f  a concept due to
+00004690: 2074 6869 7320 636f 6e73 7472 6169 6e74   this constraint
+000046a0: 2e0a 2020 2020 2020 2020 2320 2049 7420  ..        #  It 
+000046b0: 6d69 6768 7420 6265 2074 6865 2063 6173  might be the cas
+000046c0: 6520 7468 6174 206e 6577 2070 6174 6820  e that new path 
+000046d0: 746f 2072 6566 2e63 6f6e 6365 7074 2069  to ref.concept i
+000046e0: 7320 6120 6265 7474 6572 2070 6174 682e  s a better path.
+000046f0: 2048 656e 6365 2c20 7765 2073 686f 756c   Hence, we shoul
+00004700: 6420 7570 6461 7465 2069 7473 2070 6172  d update its par
+00004710: 656e 740a 2020 2020 2020 2020 2320 2064  ent.        #  d
+00004720: 6570 656e 6469 6e67 206f 6e20 7468 6520  epending on the 
+00004730: 6e65 7720 6865 7572 6973 7469 6320 7661  new heuristic va
+00004740: 6c75 652e 0a20 2020 2020 2020 2023 2020  lue..        #  
+00004750: 536f 6c75 7469 6f6e 3a20 4966 2063 6f6e  Solution: If con
+00004760: 6365 7074 2065 7869 7374 7320 7765 2073  cept exists we s
+00004770: 686f 756c 6420 636f 6d70 6172 6520 6974  hould compare it
+00004780: 7320 6669 7273 7420 6865 7572 6973 7469  s first heuristi
+00004790: 6320 7661 6c75 6520 2077 6974 6820 7468  c value  with th
+000047a0: 6520 6e65 7720 6f6e 650a 2020 2020 2020  e new one.      
+000047b0: 2020 6966 2072 6566 2e63 6f6e 6365 7074    if ref.concept
+000047c0: 2069 6e20 7365 6c66 2e73 6561 7263 685f   in self.search_
+000047d0: 7472 6565 3a0a 2020 2020 2020 2020 2020  tree:.          
+000047e0: 2020 2320 6967 6e6f 7269 6e67 2072 6566    # ignoring ref
+000047f0: 696e 656d 656e 742c 2069 7420 6861 7320  inement, it has 
+00004800: 6265 656e 2072 6566 696e 6564 2066 726f  been refined fro
+00004810: 6d20 616e 6f74 6865 7220 7061 7265 6e74  m another parent
+00004820: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00004830: 7572 6e20 4661 6c73 650a 0a20 2020 2020  urn False..     
+00004840: 2020 206e 6f72 6d5f 636f 6e63 6570 7420     norm_concept 
+00004850: 3d20 4f70 6572 616e 6453 6574 5472 616e  = OperandSetTran
+00004860: 7366 6f72 6d28 292e 7369 6d70 6c69 6679  sform().simplify
+00004870: 2872 6566 2e63 6f6e 6365 7074 290a 2020  (ref.concept).  
+00004880: 2020 2020 2020 6966 206e 6f72 6d5f 636f        if norm_co
+00004890: 6e63 6570 7420 696e 2073 656c 662e 5f73  ncept in self._s
+000048a0: 6565 6e5f 6e6f 726d 5f63 6f6e 6365 7074  een_norm_concept
+000048b0: 733a 0a20 2020 2020 2020 2020 2020 206e  s:.            n
+000048c0: 6f72 6d5f 7365 656e 203d 2054 7275 650a  orm_seen = True.
+000048d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000048e0: 2020 2020 2020 2020 2020 6e6f 726d 5f73            norm_s
+000048f0: 6565 6e20 3d20 4661 6c73 650a 2020 2020  een = False.    
+00004900: 2020 2020 2020 2020 7365 6c66 2e5f 7365          self._se
+00004910: 656e 5f6e 6f72 6d5f 636f 6e63 6570 7473  en_norm_concepts
+00004920: 2e61 6464 286e 6f72 6d5f 636f 6e63 6570  .add(norm_concep
+00004930: 7429 0a0a 2020 2020 2020 2020 7365 6c66  t)..        self
+00004940: 2e73 6561 7263 685f 7472 6565 5b72 6566  .search_tree[ref
+00004950: 2e63 6f6e 6365 7074 5d20 3d20 5472 6565  .concept] = Tree
+00004960: 4e6f 6465 2872 6566 2c20 7472 6565 5f70  Node(ref, tree_p
+00004970: 6172 656e 742c 2069 735f 726f 6f74 3d72  arent, is_root=r
+00004980: 6566 2e69 735f 726f 6f74 290a 2020 2020  ef.is_root).    
+00004990: 2020 2020 6520 3d20 7365 6c66 2e6b 622e      e = self.kb.
+000049a0: 6576 616c 7561 7465 5f63 6f6e 6365 7074  evaluate_concept
+000049b0: 2872 6566 2e63 6f6e 6365 7074 2c20 7365  (ref.concept, se
+000049c0: 6c66 2e71 7561 6c69 7479 5f66 756e 632c  lf.quality_func,
+000049d0: 2073 656c 662e 5f6c 6561 726e 696e 675f   self._learning_
+000049e0: 7072 6f62 6c65 6d29 0a0a 2020 2020 2020  problem)..      
+000049f0: 2020 7265 662e 7175 616c 6974 7920 3d20    ref.quality = 
+00004a00: 652e 710a 2020 2020 2020 2020 7365 6c66  e.q.        self
+00004a10: 2e5f 6e75 6d62 6572 5f6f 665f 7465 7374  ._number_of_test
+00004a20: 6564 5f63 6f6e 6365 7074 7320 2b3d 2031  ed_concepts += 1
+00004a30: 0a20 2020 2020 2020 2069 6620 7265 662e  .        if ref.
+00004a40: 7175 616c 6974 7920 3d3d 2030 3a20 2023  quality == 0:  #
+00004a50: 203e 2074 6f6f 2077 6561 6b0a 2020 2020   > too weak.    
+00004a60: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+00004a70: 616c 7365 0a20 2020 2020 2020 2061 7373  alse.        ass
+00004a80: 6572 7420 3020 3c3d 2072 6566 2e71 7561  ert 0 <= ref.qua
+00004a90: 6c69 7479 203c 3d20 312e 300a 2020 2020  lity <= 1.0.    
+00004aa0: 2020 2020 2320 544f 444f 3a20 6578 7072      # TODO: expr
+00004ab0: 6573 7369 6f6e 2072 6577 7269 7469 6e67  ession rewriting
+00004ac0: 0a20 2020 2020 2020 2073 656c 662e 6865  .        self.he
+00004ad0: 7572 6973 7469 635f 6675 6e63 2e61 7070  uristic_func.app
+00004ae0: 6c79 2872 6566 2c20 652e 696e 6473 2c20  ly(ref, e.inds, 
+00004af0: 7365 6c66 2e5f 6c65 6172 6e69 6e67 5f70  self._learning_p
+00004b00: 726f 626c 656d 290a 2020 2020 2020 2020  roblem).        
+00004b10: 6966 206e 6f74 206e 6f72 6d5f 7365 656e  if not norm_seen
+00004b20: 2061 6e64 2073 656c 662e 6265 7374 5f64   and self.best_d
+00004b30: 6573 6372 6970 7469 6f6e 732e 6d61 7962  escriptions.mayb
+00004b40: 655f 6164 6428 7265 6629 3a0a 2020 2020  e_add(ref):.    
+00004b50: 2020 2020 2020 2020 6966 206c 6f67 6765          if logge
+00004b60: 722e 6973 456e 6162 6c65 6446 6f72 286c  r.isEnabledFor(l
+00004b70: 6f67 6769 6e67 2e44 4542 5547 293a 0a20  ogging.DEBUG):. 
+00004b80: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00004b90: 6f67 6765 722e 6465 6275 6728 2242 6574  ogger.debug("Bet
+00004ba0: 7465 7220 6465 7363 7269 7074 696f 6e20  ter description 
+00004bb0: 666f 756e 643a 2025 7322 2c20 7265 6629  found: %s", ref)
+00004bc0: 0a20 2020 2020 2020 2073 656c 662e 6865  .        self.he
+00004bd0: 7572 6973 7469 635f 7175 6575 652e 6164  uristic_queue.ad
+00004be0: 6428 7265 6629 0a20 2020 2020 2020 2023  d(ref).        #
+00004bf0: 2054 4f44 4f3a 2069 6d70 6c65 6d65 6e74   TODO: implement
+00004c00: 206e 6f69 7365 0a20 2020 2020 2020 2072   noise.        r
+00004c10: 6574 7572 6e20 5472 7565 0a0a 2020 2020  eturn True..    
+00004c20: 6173 796e 6320 6465 6620 5f65 7661 6c5f  async def _eval_
+00004c30: 6e6f 6465 5f61 7379 6e63 2873 656c 662c  node_async(self,
+00004c40: 2072 6566 3a20 4f45 4e6f 6465 293a 0a20   ref: OENode):. 
+00004c50: 2020 2020 2020 2023 2054 4f44 4f3a 4344         # TODO:CD
+00004c60: 3a20 5768 7920 6861 7665 2074 6869 7320  : Why have this 
+00004c70: 636f 6e73 7472 6169 6e74 203f 0a20 2020  constraint ?.   
+00004c80: 2020 2020 2023 2020 5765 2073 686f 756c       #  We shoul
+00004c90: 6420 6e6f 7420 6967 6e6f 7265 2061 2063  d not ignore a c
+00004ca0: 6f6e 6365 7074 2064 7565 2074 6f20 7468  oncept due to th
+00004cb0: 6973 2063 6f6e 7374 7261 696e 742e 0a20  is constraint.. 
+00004cc0: 2020 2020 2020 2023 2020 4974 206d 6967         #  It mig
+00004cd0: 6874 2062 6520 7468 6520 6361 7365 2074  ht be the case t
+00004ce0: 6861 7420 6e65 7720 7061 7468 2074 6f20  hat new path to 
+00004cf0: 7265 662e 636f 6e63 6570 7420 6973 2061  ref.concept is a
+00004d00: 2062 6574 7465 7220 7061 7468 2e20 4865   better path. He
+00004d10: 6e63 652c 2077 6520 7368 6f75 6c64 2075  nce, we should u
+00004d20: 7064 6174 6520 6974 7320 7061 7265 6e74  pdate its parent
+00004d30: 0a20 2020 2020 2020 2023 2020 6465 7065  .        #  depe
+00004d40: 6e64 696e 6720 6f6e 2074 6865 206e 6577  nding on the new
+00004d50: 2068 6575 7269 7374 6963 2076 616c 7565   heuristic value
+00004d60: 2e0a 2020 2020 2020 2020 2320 2053 6f6c  ..        #  Sol
+00004d70: 7574 696f 6e3a 2049 6620 636f 6e63 6570  ution: If concep
+00004d80: 7420 6578 6973 7473 2077 6520 7368 6f75  t exists we shou
+00004d90: 6c64 2063 6f6d 7061 7265 2069 7473 2066  ld compare its f
+00004da0: 6972 7374 2068 6575 7269 7374 6963 2076  irst heuristic v
+00004db0: 616c 7565 2020 7769 7468 2074 6865 206e  alue  with the n
+00004dc0: 6577 206f 6e65 0a20 2020 2020 2020 2072  ew one.        r
+00004dd0: 6573 203d 2061 7761 6974 2073 656c 662e  es = await self.
+00004de0: 6b62 2e65 7661 6c75 6174 655f 636f 6e63  kb.evaluate_conc
+00004df0: 6570 745f 6173 796e 6328 7265 662e 636f  ept_async(ref.co
+00004e00: 6e63 6570 742c 2073 656c 662e 7175 616c  ncept, self.qual
+00004e10: 6974 795f 6675 6e63 2c20 7365 6c66 2e5f  ity_func, self._
+00004e20: 6c65 6172 6e69 6e67 5f70 726f 626c 656d  learning_problem
+00004e30: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00004e40: 2072 6566 2c20 7265 730a 0a20 2020 2064   ref, res..    d
+00004e50: 6566 205f 6164 645f 6e6f 6465 5f65 7661  ef _add_node_eva
+00004e60: 6c64 2873 656c 662c 2072 6566 3a20 4f45  ld(self, ref: OE
+00004e70: 4e6f 6465 2c20 6576 616c 5f3a 2045 7661  Node, eval_: Eva
+00004e80: 6c75 6174 6564 436f 6e63 6570 742c 2074  luatedConcept, t
+00004e90: 7265 655f 7061 7265 6e74 3a20 4f70 7469  ree_parent: Opti
+00004ea0: 6f6e 616c 5b54 7265 654e 6f64 655b 4f45  onal[TreeNode[OE
+00004eb0: 4e6f 6465 5d5d 293a 0a20 2020 2020 2020  Node]]):.       
+00004ec0: 206e 6f72 6d5f 636f 6e63 6570 7420 3d20   norm_concept = 
+00004ed0: 4f70 6572 616e 6453 6574 5472 616e 7366  OperandSetTransf
+00004ee0: 6f72 6d28 292e 7369 6d70 6c69 6679 2872  orm().simplify(r
+00004ef0: 6566 2e63 6f6e 6365 7074 290a 2020 2020  ef.concept).    
+00004f00: 2020 2020 6966 206e 6f72 6d5f 636f 6e63      if norm_conc
+00004f10: 6570 7420 696e 2073 656c 662e 5f73 6565  ept in self._see
+00004f20: 6e5f 6e6f 726d 5f63 6f6e 6365 7074 733a  n_norm_concepts:
+00004f30: 0a20 2020 2020 2020 2020 2020 206e 6f72  .            nor
+00004f40: 6d5f 7365 656e 203d 2054 7275 650a 2020  m_seen = True.  
+00004f50: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00004f60: 2020 2020 2020 2020 6e6f 726d 5f73 6565          norm_see
+00004f70: 6e20 3d20 4661 6c73 650a 2020 2020 2020  n = False.      
+00004f80: 2020 2020 2020 7365 6c66 2e5f 7365 656e        self._seen
+00004f90: 5f6e 6f72 6d5f 636f 6e63 6570 7473 2e61  _norm_concepts.a
+00004fa0: 6464 286e 6f72 6d5f 636f 6e63 6570 7429  dd(norm_concept)
+00004fb0: 0a0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+00004fc0: 6561 7263 685f 7472 6565 5b72 6566 2e63  earch_tree[ref.c
+00004fd0: 6f6e 6365 7074 5d20 3d20 5472 6565 4e6f  oncept] = TreeNo
+00004fe0: 6465 2872 6566 2c20 7472 6565 5f70 6172  de(ref, tree_par
+00004ff0: 656e 742c 2069 735f 726f 6f74 3d72 6566  ent, is_root=ref
+00005000: 2e69 735f 726f 6f74 290a 0a20 2020 2020  .is_root)..     
+00005010: 2020 2072 6566 2e71 7561 6c69 7479 203d     ref.quality =
+00005020: 2065 7661 6c5f 2e71 0a20 2020 2020 2020   eval_.q.       
+00005030: 2073 656c 662e 5f6e 756d 6265 725f 6f66   self._number_of
+00005040: 5f74 6573 7465 645f 636f 6e63 6570 7473  _tested_concepts
+00005050: 202b 3d20 310a 2020 2020 2020 2020 6966   += 1.        if
+00005060: 2072 6566 2e71 7561 6c69 7479 203d 3d20   ref.quality == 
+00005070: 303a 2020 2320 3e20 746f 6f20 7765 616b  0:  # > too weak
+00005080: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00005090: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+000050a0: 2020 6173 7365 7274 2030 203c 3d20 7265    assert 0 <= re
+000050b0: 662e 7175 616c 6974 7920 3c3d 2031 2e30  f.quality <= 1.0
+000050c0: 0a20 2020 2020 2020 2023 2054 4f44 4f3a  .        # TODO:
+000050d0: 2065 7870 7265 7373 696f 6e20 7265 7772   expression rewr
+000050e0: 6974 696e 670a 2020 2020 2020 2020 7365  iting.        se
+000050f0: 6c66 2e68 6575 7269 7374 6963 5f66 756e  lf.heuristic_fun
+00005100: 632e 6170 706c 7928 7265 662c 2065 7661  c.apply(ref, eva
+00005110: 6c5f 2e69 6e64 732c 2073 656c 662e 5f6c  l_.inds, self._l
+00005120: 6561 726e 696e 675f 7072 6f62 6c65 6d29  earning_problem)
+00005130: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00005140: 6e6f 726d 5f73 6565 6e20 616e 6420 7365  norm_seen and se
+00005150: 6c66 2e62 6573 745f 6465 7363 7269 7074  lf.best_descript
+00005160: 696f 6e73 2e6d 6179 6265 5f61 6464 2872  ions.maybe_add(r
+00005170: 6566 293a 0a20 2020 2020 2020 2020 2020  ef):.           
+00005180: 2069 6620 6c6f 6767 6572 2e69 7345 6e61   if logger.isEna
+00005190: 626c 6564 466f 7228 6c6f 6767 696e 672e  bledFor(logging.
+000051a0: 4445 4255 4729 3a0a 2020 2020 2020 2020  DEBUG):.        
+000051b0: 2020 2020 2020 2020 6c6f 6767 6572 2e64          logger.d
+000051c0: 6562 7567 2822 4265 7474 6572 2064 6573  ebug("Better des
+000051d0: 6372 6970 7469 6f6e 2066 6f75 6e64 3a20  cription found: 
+000051e0: 2573 222c 2072 6566 290a 2020 2020 2020  %s", ref).      
+000051f0: 2020 7365 6c66 2e68 6575 7269 7374 6963    self.heuristic
+00005200: 5f71 7565 7565 2e61 6464 2872 6566 290a  _queue.add(ref).
+00005210: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+00005220: 696d 706c 656d 656e 7420 6e6f 6973 650a  implement noise.
+00005230: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+00005240: 7275 650a 0a20 2020 2064 6566 205f 6c6f  rue..    def _lo
+00005250: 675f 6375 7272 656e 745f 6265 7374 2873  g_current_best(s
+00005260: 656c 662c 2068 6561 6469 6e67 5f73 7465  elf, heading_ste
+00005270: 702c 2074 6f70 5f6e 3a20 696e 7420 3d20  p, top_n: int = 
+00005280: 3130 2920 2d3e 204e 6f6e 653a 0a20 2020  10) -> None:.   
+00005290: 2020 2020 206c 6f67 6765 722e 6465 6275       logger.debu
+000052a0: 6728 2723 2323 2323 2323 2320 2573 2073  g('######## %s s
+000052b0: 7465 7020 4265 7374 2048 7970 6f74 6865  tep Best Hypothe
+000052c0: 7365 7320 2323 2323 2323 2323 2323 2327  ses ###########'
+000052d0: 2c20 6865 6164 696e 675f 7374 6570 290a  , heading_step).
+000052e0: 0a20 2020 2020 2020 2070 7265 6469 6374  .        predict
+000052f0: 696f 6e73 203d 206c 6973 7428 7365 6c66  ions = list(self
+00005300: 2e62 6573 745f 6879 706f 7468 6573 6573  .best_hypotheses
+00005310: 2874 6f70 5f6e 2c20 7265 7475 726e 5f6e  (top_n, return_n
+00005320: 6f64 653d 5472 7565 2929 0a20 2020 2020  ode=True)).     
+00005330: 2020 2066 6f72 2069 7468 2c20 6e6f 6465     for ith, node
+00005340: 2069 6e20 656e 756d 6572 6174 6528 7072   in enumerate(pr
+00005350: 6564 6963 7469 6f6e 7329 3a0a 2020 2020  edictions):.    
+00005360: 2020 2020 2020 2020 6c6f 6767 6572 2e64          logger.d
+00005370: 6562 7567 2827 7b30 7d2d 5c74 7b31 7d5c  ebug('{0}-\t{1}\
+00005380: 747b 327d 3a7b 337d 5c74 4865 7572 6973  t{2}:{3}\tHeuris
+00005390: 7469 633a 7b34 7d3a 272e 666f 726d 6174  tic:{4}:'.format
+000053a0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000053b0: 2020 6974 6820 2b20 312c 2044 4c53 796e    ith + 1, DLSyn
+000053c0: 7461 784f 626a 6563 7452 656e 6465 7265  taxObjectRendere
+000053d0: 7228 292e 7265 6e64 6572 286e 6f64 652e  r().render(node.
+000053e0: 636f 6e63 6570 7429 2c0a 2020 2020 2020  concept),.      
+000053f0: 2020 2020 2020 2020 2020 7479 7065 2873            type(s
+00005400: 656c 662e 7175 616c 6974 795f 6675 6e63  elf.quality_func
+00005410: 292e 6e61 6d65 2c20 6e6f 6465 2e71 7561  ).name, node.qua
+00005420: 6c69 7479 2c0a 2020 2020 2020 2020 2020  lity,.          
+00005430: 2020 2020 2020 6e6f 6465 2e68 6575 7269        node.heuri
+00005440: 7374 6963 2929 0a0a 2020 2020 6465 6620  stic))..    def 
+00005450: 7368 6f77 5f73 6561 7263 685f 7472 6565  show_search_tree
+00005460: 2873 656c 662c 2068 6561 6469 6e67 5f73  (self, heading_s
+00005470: 7465 703a 2073 7472 2c20 746f 705f 6e3a  tep: str, top_n:
+00005480: 2069 6e74 203d 2031 3029 202d 3e20 4e6f   int = 10) -> No
+00005490: 6e65 3a0a 2020 2020 2020 2020 2222 220a  ne:.        """.
+000054a0: 2020 2020 2020 2020 5368 6f77 2073 6561          Show sea
+000054b0: 7263 6820 7472 6565 2e0a 2020 2020 2020  rch tree..      
+000054c0: 2020 2222 220a 2020 2020 2020 2020 7264    """.        rd
+000054d0: 7220 3d20 444c 5379 6e74 6178 4f62 6a65  r = DLSyntaxObje
+000054e0: 6374 5265 6e64 6572 6572 2829 0a0a 2020  ctRenderer()..  
+000054f0: 2020 2020 2020 7072 696e 7428 2723 2323        print('###
+00005500: 2323 2323 2320 272c 2068 6561 6469 6e67  ##### ', heading
+00005510: 5f73 7465 702c 2027 7374 6570 2053 6561  _step, 'step Sea
+00005520: 7263 6820 5472 6565 2023 2323 2323 2323  rch Tree #######
+00005530: 2323 2323 2729 0a0a 2020 2020 2020 2020  ####')..        
+00005540: 6465 6620 7472 6565 5f6e 6f64 655f 6173  def tree_node_as
+00005550: 5f6c 656e 6774 685f 6f72 6465 7265 645f  _length_ordered_
+00005560: 636f 6e63 6570 7428 746e 3a20 5472 6565  concept(tn: Tree
+00005570: 4e6f 6465 5b4f 454e 6f64 655d 293a 0a20  Node[OENode]):. 
+00005580: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00005590: 6e20 4c65 6e67 7468 4f72 6465 7265 644e  n LengthOrderedN
+000055a0: 6f64 6528 746e 2e6e 6f64 652c 2074 6e2e  ode(tn.node, tn.
+000055b0: 6e6f 6465 2e6c 656e 290a 0a20 2020 2020  node.len)..     
+000055c0: 2020 2064 6566 2070 7269 6e74 5f70 6172     def print_par
+000055d0: 7469 616c 5f74 7265 655f 7265 6375 7273  tial_tree_recurs
+000055e0: 6976 6528 746e 3a20 5472 6565 4e6f 6465  ive(tn: TreeNode
+000055f0: 5b4f 454e 6f64 655d 2c20 6465 7074 683a  [OENode], depth:
+00005600: 2069 6e74 203d 2030 293a 0a20 2020 2020   int = 0):.     
+00005610: 2020 2020 2020 2069 6620 746e 2e6e 6f64         if tn.nod
+00005620: 652e 6865 7572 6973 7469 6320 6973 206e  e.heuristic is n
+00005630: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00005640: 2020 2020 2020 2020 2068 6575 725f 6964           heur_id
+00005650: 7820 3d20 6c65 6e28 7365 6c66 2e68 6575  x = len(self.heu
+00005660: 7269 7374 6963 5f71 7565 7565 2920 2d20  ristic_queue) - 
+00005670: 7365 6c66 2e68 6575 7269 7374 6963 5f71  self.heuristic_q
+00005680: 7565 7565 2e69 6e64 6578 2874 6e2e 6e6f  ueue.index(tn.no
+00005690: 6465 290a 2020 2020 2020 2020 2020 2020  de).            
+000056a0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000056b0: 2020 2020 2020 6865 7572 5f69 6478 203d        heur_idx =
+000056c0: 204e 6f6e 650a 0a20 2020 2020 2020 2020   None..         
+000056d0: 2020 2069 6620 746e 2e6e 6f64 6520 696e     if tn.node in
+000056e0: 2073 656c 662e 6265 7374 5f64 6573 6372   self.best_descr
+000056f0: 6970 7469 6f6e 733a 0a20 2020 2020 2020  iptions:.       
+00005700: 2020 2020 2020 2020 2062 6573 745f 6964           best_id
+00005710: 7820 3d20 6c65 6e28 7365 6c66 2e62 6573  x = len(self.bes
+00005720: 745f 6465 7363 7269 7074 696f 6e73 2e69  t_descriptions.i
+00005730: 7465 6d73 2920 2d20 7365 6c66 2e62 6573  tems) - self.bes
+00005740: 745f 6465 7363 7269 7074 696f 6e73 2e69  t_descriptions.i
+00005750: 7465 6d73 2e69 6e64 6578 2874 6e2e 6e6f  tems.index(tn.no
+00005760: 6465 290a 2020 2020 2020 2020 2020 2020  de).            
+00005770: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00005780: 2020 2020 2020 6265 7374 5f69 6478 203d        best_idx =
+00005790: 204e 6f6e 650a 0a20 2020 2020 2020 2020   None..         
+000057a0: 2020 2072 656e 6465 725f 7374 7220 3d20     render_str = 
+000057b0: 7264 722e 7265 6e64 6572 2874 6e2e 6e6f  rdr.render(tn.no
+000057c0: 6465 2e63 6f6e 6365 7074 290a 0a20 2020  de.concept)..   
+000057d0: 2020 2020 2020 2020 2064 6570 7468 7320           depths 
+000057e0: 3d20 2260 2220 2a20 6465 7074 680a 0a20  = "`" * depth.. 
+000057f0: 2020 2020 2020 2020 2020 2069 6620 6265             if be
+00005800: 7374 5f69 6478 2069 7320 6e6f 7420 4e6f  st_idx is not No
+00005810: 6e65 206f 7220 6865 7572 5f69 6478 2069  ne or heur_idx i
+00005820: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00005830: 2020 2020 2020 2020 2020 2020 6966 2062              if b
+00005840: 6573 745f 6964 7820 6973 204e 6f6e 653a  est_idx is None:
+00005850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005860: 2020 2020 2062 6573 745f 6964 7820 3d20       best_idx = 
+00005870: 2222 0a20 2020 2020 2020 2020 2020 2020  "".             
+00005880: 2020 2069 6620 6865 7572 5f69 6478 2069     if heur_idx i
+00005890: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+000058a0: 2020 2020 2020 2020 2020 2020 6865 7572              heur
+000058b0: 5f69 6478 203d 2022 220a 0a20 2020 2020  _idx = ""..     
+000058c0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+000058d0: 2822 5b25 3373 5d20 5b25 3473 5d20 2573  ("[%3s] [%4s] %s
+000058e0: 2025 7320 5c74 2048 453a 2573 2051 3a25   %s \t HE:%s Q:%
+000058f0: 6620 4865 7572 3a25 7320 7c52 437c 3a25  f Heur:%s |RC|:%
+00005900: 7322 2025 2028 6265 7374 5f69 6478 2c20  s" % (best_idx, 
+00005910: 6865 7572 5f69 6478 2c20 6465 7074 6873  heur_idx, depths
+00005920: 2c20 7265 6e64 6572 5f73 7472 2c0a 2020  , render_str,.  
 00005930: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00005940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005950: 2020 746e 2e6e 6f64 652e 6865 7572 6973    tn.node.heuris
-00005960: 7469 632c 2074 6e2e 6e6f 6465 2e72 6566  tic, tn.node.ref
-00005970: 696e 656d 656e 745f 636f 756e 7429 290a  inement_count)).
-00005980: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00005990: 2063 2069 6e20 736f 7274 6564 2874 6e2e   c in sorted(tn.
-000059a0: 6368 696c 6472 656e 2c20 6b65 793d 7472  children, key=tr
-000059b0: 6565 5f6e 6f64 655f 6173 5f6c 656e 6774  ee_node_as_lengt
-000059c0: 685f 6f72 6465 7265 645f 636f 6e63 6570  h_ordered_concep
-000059d0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-000059e0: 2020 2020 7072 696e 745f 7061 7274 6961      print_partia
-000059f0: 6c5f 7472 6565 5f72 6563 7572 7369 7665  l_tree_recursive
-00005a00: 2863 2c20 6465 7074 6820 2b20 3129 0a0a  (c, depth + 1)..
-00005a10: 2020 2020 2020 2020 7072 696e 745f 7061          print_pa
-00005a20: 7274 6961 6c5f 7472 6565 5f72 6563 7572  rtial_tree_recur
-00005a30: 7369 7665 2873 656c 662e 7365 6172 6368  sive(self.search
-00005a40: 5f74 7265 655b 7365 6c66 2e73 7461 7274  _tree[self.start
-00005a50: 5f63 6c61 7373 5d29 0a0a 2020 2020 2020  _class])..      
-00005a60: 2020 7072 696e 7428 2723 2323 2323 2323    print('#######
-00005a70: 2320 272c 2068 6561 6469 6e67 5f73 7465  # ', heading_ste
-00005a80: 702c 2027 7374 6570 2042 6573 7420 4879  p, 'step Best Hy
-00005a90: 706f 7468 6573 6573 2023 2323 2323 2323  potheses #######
-00005aa0: 2323 2323 2729 0a0a 2020 2020 2020 2020  ####')..        
-00005ab0: 7072 6564 6963 7469 6f6e 7320 3d20 6c69  predictions = li
-00005ac0: 7374 2873 656c 662e 6265 7374 5f68 7970  st(self.best_hyp
-00005ad0: 6f74 6865 7365 7328 746f 705f 6e29 290a  otheses(top_n)).
-00005ae0: 2020 2020 2020 2020 666f 7220 6974 682c          for ith,
-00005af0: 206e 6f64 6520 696e 2065 6e75 6d65 7261   node in enumera
-00005b00: 7465 2870 7265 6469 6374 696f 6e73 293a  te(predictions):
-00005b10: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00005b20: 6e74 2827 7b30 7d2d 5c74 7b31 7d5c 747b  nt('{0}-\t{1}\t{
-00005b30: 327d 3a7b 337d 5c74 4865 7572 6973 7469  2}:{3}\tHeuristi
-00005b40: 633a 7b34 7d3a 272e 666f 726d 6174 2869  c:{4}:'.format(i
-00005b50: 7468 202b 2031 2c20 7264 722e 7265 6e64  th + 1, rdr.rend
-00005b60: 6572 286e 6f64 652e 636f 6e63 6570 7429  er(node.concept)
-00005b70: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00005b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005bb0: 7479 7065 2873 656c 662e 7175 616c 6974  type(self.qualit
-00005bc0: 795f 6675 6e63 292e 6e61 6d65 2c20 6e6f  y_func).name, no
-00005bd0: 6465 2e71 7561 6c69 7479 2c0a 2020 2020  de.quality,.    
-00005be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005c10: 2020 2020 2020 2020 2020 6e6f 6465 2e68            node.h
-00005c20: 6575 7269 7374 6963 2929 0a20 2020 2020  euristic)).     
-00005c30: 2020 2070 7269 6e74 2827 2323 2323 2323     print('######
-00005c40: 2323 2053 6561 7263 6820 5472 6565 2023  ## Search Tree #
-00005c50: 2323 2323 2323 2323 2323 5c6e 2729 0a0a  ##########\n')..
-00005c60: 2020 2020 6465 6620 7570 6461 7465 5f6d      def update_m
-00005c70: 696e 5f6d 6178 5f68 6f72 697a 5f65 7870  in_max_horiz_exp
-00005c80: 2873 656c 662c 206e 6f64 653a 204f 454e  (self, node: OEN
-00005c90: 6f64 6529 3a0a 2020 2020 2020 2020 6865  ode):.        he
-00005ca0: 203d 206e 6f64 652e 685f 6578 700a 2020   = node.h_exp.  
-00005cb0: 2020 2020 2020 2320 7570 6461 7465 206d        # update m
-00005cc0: 6178 696d 756d 2076 616c 7565 0a20 2020  aximum value.   
-00005cd0: 2020 2020 2073 656c 662e 6d61 785f 6865       self.max_he
-00005ce0: 203d 206d 6178 2873 656c 662e 6d61 785f   = max(self.max_
-00005cf0: 6865 2c20 6865 290a 0a20 2020 2020 2020  he, he)..       
-00005d00: 2069 6620 7365 6c66 2e6d 696e 5f68 6520   if self.min_he 
-00005d10: 3d3d 2068 6520 2d20 313a 0a20 2020 2020  == he - 1:.     
-00005d20: 2020 2020 2020 2074 6872 6573 686f 6c64         threshold
-00005d30: 5f73 636f 7265 203d 206e 6f64 652e 6865  _score = node.he
-00005d40: 7572 6973 7469 6320 2b20 3120 2d20 6e6f  uristic + 1 - no
-00005d50: 6465 2e71 7561 6c69 7479 0a0a 2020 2020  de.quality..    
-00005d60: 2020 2020 2020 2020 666f 7220 6e20 696e          for n in
-00005d70: 2072 6576 6572 7365 6428 7365 6c66 2e68   reversed(self.h
-00005d80: 6575 7269 7374 6963 5f71 7565 7565 293a  euristic_queue):
-00005d90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005da0: 2069 6620 6e20 3d3d 206e 6f64 653a 0a20   if n == node:. 
-00005db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005dc0: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-00005dd0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00005de0: 2e68 5f65 7870 203d 3d20 7365 6c66 2e6d  .h_exp == self.m
-00005df0: 696e 5f68 653a 0a20 2020 2020 2020 2020  in_he:.         
-00005e00: 2020 2020 2020 2020 2020 2022 2222 2077             """ w
-00005e10: 6520 6361 6e20 7374 6f70 2069 6e73 7461  e can stop insta
-00005e20: 6e74 6c79 2077 6865 6e20 616e 6f74 6865  ntly when anothe
-00005e30: 7220 6e6f 6465 2077 6974 6820 6d69 6e2e  r node with min.
-00005e40: 2022 2222 0a20 2020 2020 2020 2020 2020   """.           
-00005e50: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
-00005e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005e70: 6966 206e 2e68 6575 7269 7374 6963 203c  if n.heuristic <
-00005e80: 2074 6872 6573 686f 6c64 5f73 636f 7265   threshold_score
-00005e90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00005ea0: 2020 2020 2020 2222 2220 7765 2063 616e        """ we can
-00005eb0: 2073 746f 7020 7472 6176 6572 7369 6e67   stop traversing
-00005ec0: 206e 6f64 6573 2077 6865 6e20 7468 6569   nodes when thei
-00005ed0: 7220 7363 6f72 6520 6973 2074 6f6f 206c  r score is too l
-00005ee0: 6f77 2e20 2222 220a 2020 2020 2020 2020  ow. """.        
-00005ef0: 2020 2020 2020 2020 2020 2020 6272 6561              brea
-00005f00: 6b0a 2020 2020 2020 2020 2020 2020 2320  k.            # 
-00005f10: 696e 632e 206d 696e 696d 756d 2073 696e  inc. minimum sin
-00005f20: 6365 2077 6520 666f 756e 6420 6e6f 206f  ce we found no o
-00005f30: 7468 6572 206e 6f64 6520 7768 6963 6820  ther node which 
-00005f40: 616c 736f 2068 6173 206d 696e 2e20 686f  also has min. ho
-00005f50: 7269 7a2e 2065 7870 2e0a 2020 2020 2020  riz. exp..      
-00005f60: 2020 2020 2020 7365 6c66 2e6d 696e 5f68        self.min_h
-00005f70: 6520 2b3d 2031 0a0a 2020 2020 2020 2020  e += 1..        
-00005f80: 2020 2020 6966 206c 6f67 6765 722e 6973      if logger.is
-00005f90: 456e 6162 6c65 6446 6f72 286f 706c 6f67  EnabledFor(oplog
-00005fa0: 6769 6e67 2e54 5241 4345 293a 0a20 2020  ging.TRACE):.   
-00005fb0: 2020 2020 2020 2020 2020 2020 206c 6f67               log
-00005fc0: 6765 722e 696e 666f 2822 6d69 6e69 6d75  ger.info("minimu
-00005fd0: 6d20 686f 7269 7a6f 6e74 616c 2065 7870  m horizontal exp
-00005fe0: 616e 7369 6f6e 2069 7320 6e6f 7720 2564  ansion is now %d
-00005ff0: 222c 2073 656c 662e 6d69 6e5f 6865 290a  ", self.min_he).
-00006000: 0a20 2020 2064 6566 2063 6c65 616e 2873  .    def clean(s
-00006010: 656c 6629 3a0a 2020 2020 2020 2020 7365  elf):.        se
-00006020: 6c66 2e68 6575 7269 7374 6963 5f71 7565  lf.heuristic_que
-00006030: 7565 2e63 6c65 6172 2829 0a20 2020 2020  ue.clear().     
-00006040: 2020 2073 656c 662e 6265 7374 5f64 6573     self.best_des
-00006050: 6372 6970 7469 6f6e 732e 636c 6561 6e28  criptions.clean(
-00006060: 290a 2020 2020 2020 2020 7365 6c66 2e73  ).        self.s
-00006070: 6561 7263 685f 7472 6565 2e63 6c65 6172  earch_tree.clear
-00006080: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-00006090: 5f73 6565 6e5f 6e6f 726d 5f63 6f6e 6365  _seen_norm_conce
-000060a0: 7074 732e 636c 6561 7228 290a 2020 2020  pts.clear().    
-000060b0: 2020 2020 7365 6c66 2e6d 6178 5f68 6520      self.max_he 
-000060c0: 3d20 300a 2020 2020 2020 2020 7365 6c66  = 0.        self
-000060d0: 2e6d 696e 5f68 6520 3d20 310a 2020 2020  .min_he = 1.    
-000060e0: 2020 2020 7365 6c66 2e5f 6c65 6172 6e69      self._learni
-000060f0: 6e67 5f70 726f 626c 656d 203d 204e 6f6e  ng_problem = Non
-00006100: 650a 2020 2020 2020 2020 7365 6c66 2e5f  e.        self._
-00006110: 6d61 785f 7275 6e74 696d 6520 3d20 4e6f  max_runtime = No
-00006120: 6e65 0a20 2020 2020 2020 2073 7570 6572  ne.        super
-00006130: 2829 2e63 6c65 616e 2829 0a0a 0a63 6c61  ().clean()...cla
-00006140: 7373 204f 4345 4c28 4345 4c4f 4529 3a0a  ss OCEL(CELOE):.
-00006150: 2020 2020 2222 2241 206c 696d 6974 6564      """A limited
-00006160: 2076 6572 7369 6f6e 206f 6620 4345 4c4f   version of CELO
-00006170: 452e 0a0a 2020 2020 4174 7472 6962 7574  E...    Attribut
-00006180: 6573 3a0a 2020 2020 2020 2020 6265 7374  es:.        best
-00006190: 5f64 6573 6372 6970 7469 6f6e 7320 2845  _descriptions (E
-000061a0: 7661 6c75 6174 6564 4465 7363 7269 7074  valuatedDescript
-000061b0: 696f 6e53 6574 5b4f 454e 6f64 652c 2051  ionSet[OENode, Q
-000061c0: 7561 6c69 7479 4f72 6465 7265 644e 6f64  ualityOrderedNod
-000061d0: 655d 293a 2042 6573 7420 6879 706f 7468  e]): Best hypoth
-000061e0: 6573 6573 206f 7264 6572 6564 2e0a 2020  eses ordered..  
-000061f0: 2020 2020 2020 6265 7374 5f6f 6e6c 7920        best_only 
-00006200: 2862 6f6f 6c29 3a20 4966 2046 616c 7365  (bool): If False
-00006210: 2070 6963 6b20 6f6e 6c79 206e 6f64 6573   pick only nodes
-00006220: 2077 6974 6820 7175 616c 6974 7920 3c20   with quality < 
-00006230: 312e 302c 2065 6c73 6520 7069 636b 2077  1.0, else pick w
-00006240: 6974 686f 7574 2071 7561 6c69 7479 2072  ithout quality r
-00006250: 6573 7472 6963 7469 6f6e 732e 0a20 2020  estrictions..   
-00006260: 2020 2020 2063 616c 6375 6c61 7465 5f6d       calculate_m
-00006270: 696e 5f6d 6178 2028 626f 6f6c 293a 2043  in_max (bool): C
-00006280: 616c 6375 6c61 7465 206d 696e 696d 756d  alculate minimum
-00006290: 2061 6e64 206d 6178 696d 756d 2068 6f72   and maximum hor
-000062a0: 697a 6f6e 7461 6c20 6578 7061 6e73 696f  izontal expansio
-000062b0: 6e3f 2053 7461 7469 7374 6963 616c 2070  n? Statistical p
-000062c0: 7572 706f 7365 206f 6e6c 792e 0a20 2020  urpose only..   
-000062d0: 2020 2020 2068 6575 7269 7374 6963 5f66       heuristic_f
-000062e0: 756e 6320 2841 6273 7472 6163 7448 6575  unc (AbstractHeu
-000062f0: 7269 7374 6963 293a 2046 756e 6374 696f  ristic): Functio
-00006300: 6e20 746f 2067 7569 6465 2074 6865 2073  n to guide the s
-00006310: 6561 7263 6820 6865 7572 6973 7469 632e  earch heuristic.
-00006320: 0a20 2020 2020 2020 2068 6575 7269 7374  .        heurist
-00006330: 6963 5f71 7565 7565 2028 536f 7274 6564  ic_queue (Sorted
-00006340: 5365 745b 4f45 4e6f 6465 5d29 3a20 4120  Set[OENode]): A 
-00006350: 736f 7274 6564 2073 6574 2074 6861 7420  sorted set that 
-00006360: 636f 6d70 6172 6573 2074 6865 206e 6f64  compares the nod
-00006370: 6573 2062 6173 6564 206f 6e20 4865 7572  es based on Heur
-00006380: 6973 7469 632e 0a20 2020 2020 2020 2069  istic..        i
-00006390: 7465 725f 626f 756e 6420 2869 6e74 293a  ter_bound (int):
-000063a0: 204c 696d 6974 2074 6f20 7374 6f70 2074   Limit to stop t
-000063b0: 6865 2061 6c67 6f72 6974 686d 2061 6674  he algorithm aft
-000063c0: 6572 206e 2072 6566 696e 656d 656e 7420  er n refinement 
-000063d0: 7374 6570 7320 6172 6520 646f 6e65 2e0a  steps are done..
-000063e0: 2020 2020 2020 2020 6b62 2028 4b6e 6f77          kb (Know
-000063f0: 6c65 6467 6542 6173 6529 3a20 5468 6520  ledgeBase): The 
-00006400: 6b6e 6f77 6c65 6467 6520 6261 7365 2074  knowledge base t
-00006410: 6861 7420 7468 6520 636f 6e63 6570 7420  hat the concept 
-00006420: 6c65 6172 6e65 7220 6973 2075 7369 6e67  learner is using
-00006430: 2e0a 2020 2020 2020 2020 6d61 785f 6368  ..        max_ch
-00006440: 696c 645f 6c65 6e67 7468 2028 696e 7429  ild_length (int)
-00006450: 3a20 4c69 6d69 7420 7468 6520 6c65 6e67  : Limit the leng
-00006460: 7468 206f 6620 636f 6e63 6570 7473 2067  th of concepts g
-00006470: 656e 6572 6174 6564 2062 7920 7468 6520  enerated by the 
-00006480: 7265 6669 6e65 6d65 6e74 206f 7065 7261  refinement opera
-00006490: 746f 722e 0a20 2020 2020 2020 206d 6178  tor..        max
-000064a0: 5f68 6520 2869 6e74 293a 204d 6178 696d  _he (int): Maxim
-000064b0: 616c 2076 616c 7565 206f 6620 686f 7269  al value of hori
-000064c0: 7a6f 6e74 616c 2065 7870 616e 7369 6f6e  zontal expansion
-000064d0: 2e0a 2020 2020 2020 2020 6d61 785f 6e75  ..        max_nu
-000064e0: 6d5f 6f66 5f63 6f6e 6365 7074 735f 7465  m_of_concepts_te
-000064f0: 7374 6564 2028 696e 7429 204c 696d 6974  sted (int) Limit
-00006500: 2074 6f20 7374 6f70 2074 6865 2061 6c67   to stop the alg
-00006510: 6f72 6974 686d 2061 6674 6572 206e 2063  orithm after n c
-00006520: 6f6e 6365 7074 7320 7465 7374 6564 2e0a  oncepts tested..
-00006530: 2020 2020 2020 2020 6d61 785f 7275 6e74          max_runt
-00006540: 696d 6520 2869 6e74 293a 204c 696d 6974  ime (int): Limit
-00006550: 2074 6f20 7374 6f70 2074 6865 2061 6c67   to stop the alg
-00006560: 6f72 6974 686d 2061 6674 6572 206e 2073  orithm after n s
-00006570: 6563 6f6e 6473 2e0a 2020 2020 2020 2020  econds..        
-00006580: 6d69 6e5f 6865 2028 696e 7429 3a20 4d69  min_he (int): Mi
-00006590: 6e69 6d61 6c20 7661 6c75 6520 6f66 2068  nimal value of h
-000065a0: 6f72 697a 6f6e 7461 6c20 6578 7061 6e73  orizontal expans
-000065b0: 696f 6e2e 0a20 2020 2020 2020 206e 616d  ion..        nam
-000065c0: 6520 2873 7472 293a 204e 616d 6520 6f66  e (str): Name of
-000065d0: 2074 6865 206d 6f64 656c 203d 2027 6f63   the model = 'oc
-000065e0: 656c 5f70 7974 686f 6e27 2e0a 2020 2020  el_python'..    
-000065f0: 2020 2020 5f6e 756d 6265 725f 6f66 5f74      _number_of_t
-00006600: 6573 7465 645f 636f 6e63 6570 7473 2028  ested_concepts (
-00006610: 696e 7429 3a20 5965 732c 2079 6f75 2067  int): Yes, you g
-00006620: 6f74 2069 742e 2054 6869 7320 7374 6f72  ot it. This stor
-00006630: 6573 2074 6865 206e 756d 6265 7220 6f66  es the number of
-00006640: 2074 6573 7465 6420 636f 6e63 6570 7473   tested concepts
-00006650: 2e0a 2020 2020 2020 2020 6f70 6572 6174  ..        operat
-00006660: 6f72 2028 4261 7365 5265 6669 6e65 6d65  or (BaseRefineme
-00006670: 6e74 293a 204f 7065 7261 746f 7220 7573  nt): Operator us
-00006680: 6564 2074 6f20 6765 6e65 7261 7465 2072  ed to generate r
-00006690: 6566 696e 656d 656e 7473 2e0a 2020 2020  efinements..    
-000066a0: 2020 2020 7175 616c 6974 795f 6675 6e63      quality_func
-000066b0: 2028 4162 7374 7261 6374 5363 6f72 6572   (AbstractScorer
-000066c0: 2920 5468 6520 7175 616c 6974 7920 6675  ) The quality fu
-000066d0: 6e63 7469 6f6e 2074 6f20 6265 2075 7365  nction to be use
-000066e0: 642e 0a20 2020 2020 2020 2072 6561 736f  d..        reaso
-000066f0: 6e65 7220 284f 574c 5265 6173 6f6e 6572  ner (OWLReasoner
-00006700: 293a 2054 6865 2072 6561 736f 6e65 7220  ): The reasoner 
-00006710: 7468 6174 2074 6869 7320 6d6f 6465 6c20  that this model 
-00006720: 6973 2075 7369 6e67 2e0a 2020 2020 2020  is using..      
-00006730: 2020 7365 6172 6368 5f74 7265 6520 2844    search_tree (D
-00006740: 6963 745b 4f57 4c43 6c61 7373 4578 7072  ict[OWLClassExpr
-00006750: 6573 7369 6f6e 2c20 5472 6565 4e6f 6465  ession, TreeNode
-00006760: 5b4f 454e 6f64 655d 5d29 3a20 4469 6374  [OENode]]): Dict
-00006770: 2074 6f20 7374 6f72 6520 7468 6520 5472   to store the Tr
-00006780: 6565 4e6f 6465 2066 6f72 2061 2063 6c61  eeNode for a cla
-00006790: 7373 2065 7870 7265 7373 696f 6e2e 0a20  ss expression.. 
-000067a0: 2020 2020 2020 2073 7461 7274 5f63 6c61         start_cla
-000067b0: 7373 2028 4f57 4c43 6c61 7373 4578 7072  ss (OWLClassExpr
-000067c0: 6573 7369 6f6e 293a 2054 6865 2073 7461  ession): The sta
-000067d0: 7274 696e 6720 636c 6173 7320 6578 7072  rting class expr
-000067e0: 6573 7369 6f6e 2066 6f72 2074 6865 2072  ession for the r
-000067f0: 6566 696e 656d 656e 7420 6f70 6572 6174  efinement operat
-00006800: 696f 6e2e 0a20 2020 2020 2020 2073 7461  ion..        sta
-00006810: 7274 5f74 696d 6520 2866 6c6f 6174 293a  rt_time (float):
-00006820: 2054 6865 2074 696d 6520 7768 656e 203a   The time when :
-00006830: 6d65 7468 3a60 6669 7460 2073 7461 7274  meth:`fit` start
-00006840: 7320 7468 6520 6578 6563 7574 696f 6e2e  s the execution.
-00006850: 2055 7365 6420 746f 2063 616c 6375 6c61   Used to calcula
-00006860: 7465 2074 6865 2074 6f74 616c 2074 696d  te the total tim
-00006870: 6520 3a6d 6574 683a 6066 6974 600a 2020  e :meth:`fit`.  
-00006880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006890: 2020 2020 2020 2020 2020 7461 6b65 7320            takes 
-000068a0: 746f 2065 7865 6375 7465 2e0a 2020 2020  to execute..    
-000068b0: 2020 2020 7465 726d 696e 6174 655f 6f6e      terminate_on
-000068c0: 5f67 6f61 6c20 2862 6f6f 6c29 3a20 5768  _goal (bool): Wh
-000068d0: 6574 6865 7220 746f 2073 746f 7020 7468  ether to stop th
-000068e0: 6520 616c 676f 7269 7468 6d20 6966 2061  e algorithm if a
-000068f0: 2070 6572 6665 6374 2073 6f6c 7574 696f   perfect solutio
-00006900: 6e20 6973 2066 6f75 6e64 2e0a 2020 2020  n is found..    
-00006910: 2222 220a 2020 2020 5f5f 736c 6f74 735f  """.    __slots_
-00006920: 5f20 3d20 2829 0a0a 2020 2020 6e61 6d65  _ = ()..    name
-00006930: 203d 2027 6f63 656c 5f70 7974 686f 6e27   = 'ocel_python'
-00006940: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
-00006950: 5f5f 2873 656c 662c 0a20 2020 2020 2020  __(self,.       
-00006960: 2020 2020 2020 2020 2020 6b6e 6f77 6c65            knowle
-00006970: 6467 655f 6261 7365 3a20 4b6e 6f77 6c65  dge_base: Knowle
-00006980: 6467 6542 6173 652c 0a20 2020 2020 2020  dgeBase,.       
-00006990: 2020 2020 2020 2020 2020 7265 6173 6f6e            reason
-000069a0: 6572 3a20 4f70 7469 6f6e 616c 5b4f 574c  er: Optional[OWL
-000069b0: 5265 6173 6f6e 6572 5d20 3d20 4e6f 6e65  Reasoner] = None
-000069c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000069d0: 2020 2072 6566 696e 656d 656e 745f 6f70     refinement_op
-000069e0: 6572 6174 6f72 3a20 4f70 7469 6f6e 616c  erator: Optional
-000069f0: 5b42 6173 6552 6566 696e 656d 656e 745b  [BaseRefinement[
-00006a00: 4f45 4e6f 6465 5d5d 203d 204e 6f6e 652c  OENode]] = None,
-00006a10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006a20: 2020 7175 616c 6974 795f 6675 6e63 3a20    quality_func: 
-00006a30: 4f70 7469 6f6e 616c 5b41 6273 7472 6163  Optional[Abstrac
-00006a40: 7453 636f 7265 725d 203d 204e 6f6e 652c  tScorer] = None,
-00006a50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006a60: 2020 6865 7572 6973 7469 635f 6675 6e63    heuristic_func
-00006a70: 3a20 4f70 7469 6f6e 616c 5b41 6273 7472  : Optional[Abstr
-00006a80: 6163 7448 6575 7269 7374 6963 5d20 3d20  actHeuristic] = 
-00006a90: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-00006aa0: 2020 2020 2020 2074 6572 6d69 6e61 7465         terminate
-00006ab0: 5f6f 6e5f 676f 616c 3a20 4f70 7469 6f6e  _on_goal: Option
-00006ac0: 616c 5b62 6f6f 6c5d 203d 204e 6f6e 652c  al[bool] = None,
-00006ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006ae0: 2020 6974 6572 5f62 6f75 6e64 3a20 4f70    iter_bound: Op
-00006af0: 7469 6f6e 616c 5b69 6e74 5d20 3d20 4e6f  tional[int] = No
-00006b00: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00006b10: 2020 2020 206d 6178 5f6e 756d 5f6f 665f       max_num_of_
-00006b20: 636f 6e63 6570 7473 5f74 6573 7465 643a  concepts_tested:
-00006b30: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-00006b40: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-00006b50: 2020 2020 2020 2020 6d61 785f 7275 6e74          max_runt
-00006b60: 696d 653a 204f 7074 696f 6e61 6c5b 696e  ime: Optional[in
-00006b70: 745d 203d 204e 6f6e 652c 0a20 2020 2020  t] = None,.     
-00006b80: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
-00006b90: 7265 7375 6c74 733a 2069 6e74 203d 2031  results: int = 1
-00006ba0: 302c 0a20 2020 2020 2020 2020 2020 2020  0,.             
-00006bb0: 2020 2020 6265 7374 5f6f 6e6c 793a 2062      best_only: b
-00006bc0: 6f6f 6c20 3d20 4661 6c73 652c 0a20 2020  ool = False,.   
-00006bd0: 2020 2020 2020 2020 2020 2020 2020 6361                ca
-00006be0: 6c63 756c 6174 655f 6d69 6e5f 6d61 783a  lculate_min_max:
-00006bf0: 2062 6f6f 6c20 3d20 5472 7565 293a 0a20   bool = True):. 
-00006c00: 2020 2020 2020 2022 2222 2043 7265 6174         """ Creat
-00006c10: 6520 6120 6e65 7720 696e 7374 616e 6365  e a new instance
-00006c20: 206f 6620 4f43 454c 2e0a 0a20 2020 2020   of OCEL...     
-00006c30: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-00006c40: 2020 2020 2062 6573 745f 6f6e 6c79 2028       best_only (
-00006c50: 626f 6f6c 293a 2049 6620 4661 6c73 6520  bool): If False 
-00006c60: 7069 636b 206f 6e6c 7920 6e6f 6465 7320  pick only nodes 
-00006c70: 7769 7468 2071 7561 6c69 7479 203c 2031  with quality < 1
-00006c80: 2e30 2c20 656c 7365 2070 6963 6b20 7769  .0, else pick wi
-00006c90: 7468 6f75 7420 7175 616c 6974 7920 7265  thout quality re
-00006ca0: 7374 7269 6374 696f 6e73 2e0a 2020 2020  strictions..    
-00006cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006cc0: 2020 2020 2020 2020 2020 2020 4465 6661              Defa
-00006cd0: 756c 7473 2074 6f20 4661 6c73 652e 0a20  ults to False.. 
-00006ce0: 2020 2020 2020 2020 2020 2063 616c 6375             calcu
-00006cf0: 6c61 7465 5f6d 696e 5f6d 6178 2028 626f  late_min_max (bo
-00006d00: 6f6c 293a 2043 616c 6375 6c61 7465 206d  ol): Calculate m
-00006d10: 696e 696d 756d 2061 6e64 206d 6178 696d  inimum and maxim
-00006d20: 756d 2068 6f72 697a 6f6e 7461 6c20 6578  um horizontal ex
-00006d30: 7061 6e73 696f 6e3f 2053 7461 7469 7374  pansion? Statist
-00006d40: 6963 616c 2070 7572 706f 7365 206f 6e6c  ical purpose onl
-00006d50: 792e 0a20 2020 2020 2020 2020 2020 2020  y..             
+00005950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005970: 2020 2020 2020 2020 2074 6e2e 6e6f 6465           tn.node
+00005980: 2e68 5f65 7870 2c20 746e 2e6e 6f64 652e  .h_exp, tn.node.
+00005990: 7175 616c 6974 792c 0a20 2020 2020 2020  quality,.       
+000059a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000059b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000059c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000059d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000059e0: 2020 2020 746e 2e6e 6f64 652e 6865 7572      tn.node.heur
+000059f0: 6973 7469 632c 2074 6e2e 6e6f 6465 2e72  istic, tn.node.r
+00005a00: 6566 696e 656d 656e 745f 636f 756e 7429  efinement_count)
+00005a10: 290a 0a20 2020 2020 2020 2020 2020 2066  )..            f
+00005a20: 6f72 2063 2069 6e20 736f 7274 6564 2874  or c in sorted(t
+00005a30: 6e2e 6368 696c 6472 656e 2c20 6b65 793d  n.children, key=
+00005a40: 7472 6565 5f6e 6f64 655f 6173 5f6c 656e  tree_node_as_len
+00005a50: 6774 685f 6f72 6465 7265 645f 636f 6e63  gth_ordered_conc
+00005a60: 6570 7429 3a0a 2020 2020 2020 2020 2020  ept):.          
+00005a70: 2020 2020 2020 7072 696e 745f 7061 7274        print_part
+00005a80: 6961 6c5f 7472 6565 5f72 6563 7572 7369  ial_tree_recursi
+00005a90: 7665 2863 2c20 6465 7074 6820 2b20 3129  ve(c, depth + 1)
+00005aa0: 0a0a 2020 2020 2020 2020 7072 696e 745f  ..        print_
+00005ab0: 7061 7274 6961 6c5f 7472 6565 5f72 6563  partial_tree_rec
+00005ac0: 7572 7369 7665 2873 656c 662e 7365 6172  ursive(self.sear
+00005ad0: 6368 5f74 7265 655b 7365 6c66 2e73 7461  ch_tree[self.sta
+00005ae0: 7274 5f63 6c61 7373 5d29 0a0a 2020 2020  rt_class])..    
+00005af0: 2020 2020 7072 696e 7428 2723 2323 2323      print('#####
+00005b00: 2323 2320 272c 2068 6561 6469 6e67 5f73  ### ', heading_s
+00005b10: 7465 702c 2027 7374 6570 2042 6573 7420  tep, 'step Best 
+00005b20: 4879 706f 7468 6573 6573 2023 2323 2323  Hypotheses #####
+00005b30: 2323 2323 2323 2729 0a0a 2020 2020 2020  ######')..      
+00005b40: 2020 7072 6564 6963 7469 6f6e 7320 3d20    predictions = 
+00005b50: 6c69 7374 2873 656c 662e 6265 7374 5f68  list(self.best_h
+00005b60: 7970 6f74 6865 7365 7328 746f 705f 6e2c  ypotheses(top_n,
+00005b70: 2072 6574 7572 6e5f 6e6f 6465 3d54 7275   return_node=Tru
+00005b80: 6529 290a 2020 2020 2020 2020 666f 7220  e)).        for 
+00005b90: 6974 682c 206e 6f64 6520 696e 2065 6e75  ith, node in enu
+00005ba0: 6d65 7261 7465 2870 7265 6469 6374 696f  merate(predictio
+00005bb0: 6e73 293a 0a20 2020 2020 2020 2020 2020  ns):.           
+00005bc0: 2070 7269 6e74 2827 7b30 7d2d 5c74 7b31   print('{0}-\t{1
+00005bd0: 7d5c 747b 327d 3a7b 337d 5c74 4865 7572  }\t{2}:{3}\tHeur
+00005be0: 6973 7469 633a 7b34 7d3a 272e 666f 726d  istic:{4}:'.form
+00005bf0: 6174 2869 7468 202b 2031 2c20 7264 722e  at(ith + 1, rdr.
+00005c00: 7265 6e64 6572 286e 6f64 652e 636f 6e63  render(node.conc
+00005c10: 6570 7429 2c0a 2020 2020 2020 2020 2020  ept),.          
+00005c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005c50: 2020 2020 7479 7065 2873 656c 662e 7175      type(self.qu
+00005c60: 616c 6974 795f 6675 6e63 292e 6e61 6d65  ality_func).name
+00005c70: 2c20 6e6f 6465 2e71 7561 6c69 7479 2c0a  , node.quality,.
+00005c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005cb0: 2020 2020 2020 2020 2020 2020 2020 6e6f                no
+00005cc0: 6465 2e68 6575 7269 7374 6963 2929 0a20  de.heuristic)). 
+00005cd0: 2020 2020 2020 2070 7269 6e74 2827 2323         print('##
+00005ce0: 2323 2323 2323 2053 6561 7263 6820 5472  ###### Search Tr
+00005cf0: 6565 2023 2323 2323 2323 2323 2323 5c6e  ee ###########\n
+00005d00: 2729 0a0a 2020 2020 6465 6620 7570 6461  ')..    def upda
+00005d10: 7465 5f6d 696e 5f6d 6178 5f68 6f72 697a  te_min_max_horiz
+00005d20: 5f65 7870 2873 656c 662c 206e 6f64 653a  _exp(self, node:
+00005d30: 204f 454e 6f64 6529 3a0a 2020 2020 2020   OENode):.      
+00005d40: 2020 6865 203d 206e 6f64 652e 685f 6578    he = node.h_ex
+00005d50: 700a 2020 2020 2020 2020 2320 7570 6461  p.        # upda
+00005d60: 7465 206d 6178 696d 756d 2076 616c 7565  te maximum value
+00005d70: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00005d80: 785f 6865 203d 206d 6178 2873 656c 662e  x_he = max(self.
+00005d90: 6d61 785f 6865 2c20 6865 290a 0a20 2020  max_he, he)..   
+00005da0: 2020 2020 2069 6620 7365 6c66 2e6d 696e       if self.min
+00005db0: 5f68 6520 3d3d 2068 6520 2d20 313a 0a20  _he == he - 1:. 
+00005dc0: 2020 2020 2020 2020 2020 2074 6872 6573             thres
+00005dd0: 686f 6c64 5f73 636f 7265 203d 206e 6f64  hold_score = nod
+00005de0: 652e 6865 7572 6973 7469 6320 2b20 3120  e.heuristic + 1 
+00005df0: 2d20 6e6f 6465 2e71 7561 6c69 7479 0a0a  - node.quality..
+00005e00: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00005e10: 6e20 696e 2072 6576 6572 7365 6428 7365  n in reversed(se
+00005e20: 6c66 2e68 6575 7269 7374 6963 5f71 7565  lf.heuristic_que
+00005e30: 7565 293a 0a20 2020 2020 2020 2020 2020  ue):.           
+00005e40: 2020 2020 2069 6620 6e20 3d3d 206e 6f64       if n == nod
+00005e50: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00005e60: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
+00005e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005e80: 6966 206e 2e68 5f65 7870 203d 3d20 7365  if n.h_exp == se
+00005e90: 6c66 2e6d 696e 5f68 653a 0a20 2020 2020  lf.min_he:.     
+00005ea0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00005eb0: 2222 2077 6520 6361 6e20 7374 6f70 2069  "" we can stop i
+00005ec0: 6e73 7461 6e74 6c79 2077 6865 6e20 616e  nstantly when an
+00005ed0: 6f74 6865 7220 6e6f 6465 2077 6974 6820  other node with 
+00005ee0: 6d69 6e2e 2022 2222 0a20 2020 2020 2020  min. """.       
+00005ef0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00005f00: 7572 6e0a 2020 2020 2020 2020 2020 2020  urn.            
+00005f10: 2020 2020 6966 206e 2e68 6575 7269 7374      if n.heurist
+00005f20: 6963 203c 2074 6872 6573 686f 6c64 5f73  ic < threshold_s
+00005f30: 636f 7265 3a0a 2020 2020 2020 2020 2020  core:.          
+00005f40: 2020 2020 2020 2020 2020 2222 2220 7765            """ we
+00005f50: 2063 616e 2073 746f 7020 7472 6176 6572   can stop traver
+00005f60: 7369 6e67 206e 6f64 6573 2077 6865 6e20  sing nodes when 
+00005f70: 7468 6569 7220 7363 6f72 6520 6973 2074  their score is t
+00005f80: 6f6f 206c 6f77 2e20 2222 220a 2020 2020  oo low. """.    
+00005f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005fa0: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
+00005fb0: 2020 2320 696e 632e 206d 696e 696d 756d    # inc. minimum
+00005fc0: 2073 696e 6365 2077 6520 666f 756e 6420   since we found 
+00005fd0: 6e6f 206f 7468 6572 206e 6f64 6520 7768  no other node wh
+00005fe0: 6963 6820 616c 736f 2068 6173 206d 696e  ich also has min
+00005ff0: 2e20 686f 7269 7a2e 2065 7870 2e0a 2020  . horiz. exp..  
+00006000: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
+00006010: 696e 5f68 6520 2b3d 2031 0a0a 2020 2020  in_he += 1..    
+00006020: 2020 2020 2020 2020 6966 206c 6f67 6765          if logge
+00006030: 722e 6973 456e 6162 6c65 6446 6f72 286f  r.isEnabledFor(o
+00006040: 706c 6f67 6769 6e67 2e54 5241 4345 293a  plogging.TRACE):
+00006050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006060: 206c 6f67 6765 722e 696e 666f 2822 6d69   logger.info("mi
+00006070: 6e69 6d75 6d20 686f 7269 7a6f 6e74 616c  nimum horizontal
+00006080: 2065 7870 616e 7369 6f6e 2069 7320 6e6f   expansion is no
+00006090: 7720 2564 222c 2073 656c 662e 6d69 6e5f  w %d", self.min_
+000060a0: 6865 290a 0a20 2020 2064 6566 2063 6c65  he)..    def cle
+000060b0: 616e 2873 656c 6629 3a0a 2020 2020 2020  an(self):.      
+000060c0: 2020 7365 6c66 2e68 6575 7269 7374 6963    self.heuristic
+000060d0: 5f71 7565 7565 2e63 6c65 6172 2829 0a20  _queue.clear(). 
+000060e0: 2020 2020 2020 2073 656c 662e 6265 7374         self.best
+000060f0: 5f64 6573 6372 6970 7469 6f6e 732e 636c  _descriptions.cl
+00006100: 6561 6e28 290a 2020 2020 2020 2020 7365  ean().        se
+00006110: 6c66 2e73 6561 7263 685f 7472 6565 2e63  lf.search_tree.c
+00006120: 6c65 6172 2829 0a20 2020 2020 2020 2073  lear().        s
+00006130: 656c 662e 5f73 6565 6e5f 6e6f 726d 5f63  elf._seen_norm_c
+00006140: 6f6e 6365 7074 732e 636c 6561 7228 290a  oncepts.clear().
+00006150: 2020 2020 2020 2020 7365 6c66 2e6d 6178          self.max
+00006160: 5f68 6520 3d20 300a 2020 2020 2020 2020  _he = 0.        
+00006170: 7365 6c66 2e6d 696e 5f68 6520 3d20 310a  self.min_he = 1.
+00006180: 2020 2020 2020 2020 7365 6c66 2e5f 6c65          self._le
+00006190: 6172 6e69 6e67 5f70 726f 626c 656d 203d  arning_problem =
+000061a0: 204e 6f6e 650a 2020 2020 2020 2020 7365   None.        se
+000061b0: 6c66 2e5f 6d61 785f 7275 6e74 696d 6520  lf._max_runtime 
+000061c0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
+000061d0: 7570 6572 2829 2e63 6c65 616e 2829 0a0a  uper().clean()..
+000061e0: 0a63 6c61 7373 204f 4345 4c28 4345 4c4f  .class OCEL(CELO
+000061f0: 4529 3a0a 2020 2020 2222 2241 206c 696d  E):.    """A lim
+00006200: 6974 6564 2076 6572 7369 6f6e 206f 6620  ited version of 
+00006210: 4345 4c4f 452e 0a0a 2020 2020 4174 7472  CELOE...    Attr
+00006220: 6962 7574 6573 3a0a 2020 2020 2020 2020  ibutes:.        
+00006230: 6265 7374 5f64 6573 6372 6970 7469 6f6e  best_description
+00006240: 7320 2845 7661 6c75 6174 6564 4465 7363  s (EvaluatedDesc
+00006250: 7269 7074 696f 6e53 6574 5b4f 454e 6f64  riptionSet[OENod
+00006260: 652c 2051 7561 6c69 7479 4f72 6465 7265  e, QualityOrdere
+00006270: 644e 6f64 655d 293a 2042 6573 7420 6879  dNode]): Best hy
+00006280: 706f 7468 6573 6573 206f 7264 6572 6564  potheses ordered
+00006290: 2e0a 2020 2020 2020 2020 6265 7374 5f6f  ..        best_o
+000062a0: 6e6c 7920 2862 6f6f 6c29 3a20 4966 2046  nly (bool): If F
+000062b0: 616c 7365 2070 6963 6b20 6f6e 6c79 206e  alse pick only n
+000062c0: 6f64 6573 2077 6974 6820 7175 616c 6974  odes with qualit
+000062d0: 7920 3c20 312e 302c 2065 6c73 6520 7069  y < 1.0, else pi
+000062e0: 636b 2077 6974 686f 7574 2071 7561 6c69  ck without quali
+000062f0: 7479 2072 6573 7472 6963 7469 6f6e 732e  ty restrictions.
+00006300: 0a20 2020 2020 2020 2063 616c 6375 6c61  .        calcula
+00006310: 7465 5f6d 696e 5f6d 6178 2028 626f 6f6c  te_min_max (bool
+00006320: 293a 2043 616c 6375 6c61 7465 206d 696e  ): Calculate min
+00006330: 696d 756d 2061 6e64 206d 6178 696d 756d  imum and maximum
+00006340: 2068 6f72 697a 6f6e 7461 6c20 6578 7061   horizontal expa
+00006350: 6e73 696f 6e3f 2053 7461 7469 7374 6963  nsion? Statistic
+00006360: 616c 2070 7572 706f 7365 206f 6e6c 792e  al purpose only.
+00006370: 0a20 2020 2020 2020 2068 6575 7269 7374  .        heurist
+00006380: 6963 5f66 756e 6320 2841 6273 7472 6163  ic_func (Abstrac
+00006390: 7448 6575 7269 7374 6963 293a 2046 756e  tHeuristic): Fun
+000063a0: 6374 696f 6e20 746f 2067 7569 6465 2074  ction to guide t
+000063b0: 6865 2073 6561 7263 6820 6865 7572 6973  he search heuris
+000063c0: 7469 632e 0a20 2020 2020 2020 2068 6575  tic..        heu
+000063d0: 7269 7374 6963 5f71 7565 7565 2028 536f  ristic_queue (So
+000063e0: 7274 6564 5365 745b 4f45 4e6f 6465 5d29  rtedSet[OENode])
+000063f0: 3a20 4120 736f 7274 6564 2073 6574 2074  : A sorted set t
+00006400: 6861 7420 636f 6d70 6172 6573 2074 6865  hat compares the
+00006410: 206e 6f64 6573 2062 6173 6564 206f 6e20   nodes based on 
+00006420: 4865 7572 6973 7469 632e 0a20 2020 2020  Heuristic..     
+00006430: 2020 2069 7465 725f 626f 756e 6420 2869     iter_bound (i
+00006440: 6e74 293a 204c 696d 6974 2074 6f20 7374  nt): Limit to st
+00006450: 6f70 2074 6865 2061 6c67 6f72 6974 686d  op the algorithm
+00006460: 2061 6674 6572 206e 2072 6566 696e 656d   after n refinem
+00006470: 656e 7420 7374 6570 7320 6172 6520 646f  ent steps are do
+00006480: 6e65 2e0a 2020 2020 2020 2020 6b62 2028  ne..        kb (
+00006490: 4b6e 6f77 6c65 6467 6542 6173 6529 3a20  KnowledgeBase): 
+000064a0: 5468 6520 6b6e 6f77 6c65 6467 6520 6261  The knowledge ba
+000064b0: 7365 2074 6861 7420 7468 6520 636f 6e63  se that the conc
+000064c0: 6570 7420 6c65 6172 6e65 7220 6973 2075  ept learner is u
+000064d0: 7369 6e67 2e0a 2020 2020 2020 2020 6d61  sing..        ma
+000064e0: 785f 6368 696c 645f 6c65 6e67 7468 2028  x_child_length (
+000064f0: 696e 7429 3a20 4c69 6d69 7420 7468 6520  int): Limit the 
+00006500: 6c65 6e67 7468 206f 6620 636f 6e63 6570  length of concep
+00006510: 7473 2067 656e 6572 6174 6564 2062 7920  ts generated by 
+00006520: 7468 6520 7265 6669 6e65 6d65 6e74 206f  the refinement o
+00006530: 7065 7261 746f 722e 0a20 2020 2020 2020  perator..       
+00006540: 206d 6178 5f68 6520 2869 6e74 293a 204d   max_he (int): M
+00006550: 6178 696d 616c 2076 616c 7565 206f 6620  aximal value of 
+00006560: 686f 7269 7a6f 6e74 616c 2065 7870 616e  horizontal expan
+00006570: 7369 6f6e 2e0a 2020 2020 2020 2020 6d61  sion..        ma
+00006580: 785f 6e75 6d5f 6f66 5f63 6f6e 6365 7074  x_num_of_concept
+00006590: 735f 7465 7374 6564 2028 696e 7429 204c  s_tested (int) L
+000065a0: 696d 6974 2074 6f20 7374 6f70 2074 6865  imit to stop the
+000065b0: 2061 6c67 6f72 6974 686d 2061 6674 6572   algorithm after
+000065c0: 206e 2063 6f6e 6365 7074 7320 7465 7374   n concepts test
+000065d0: 6564 2e0a 2020 2020 2020 2020 6d61 785f  ed..        max_
+000065e0: 7275 6e74 696d 6520 2869 6e74 293a 204c  runtime (int): L
+000065f0: 696d 6974 2074 6f20 7374 6f70 2074 6865  imit to stop the
+00006600: 2061 6c67 6f72 6974 686d 2061 6674 6572   algorithm after
+00006610: 206e 2073 6563 6f6e 6473 2e0a 2020 2020   n seconds..    
+00006620: 2020 2020 6d69 6e5f 6865 2028 696e 7429      min_he (int)
+00006630: 3a20 4d69 6e69 6d61 6c20 7661 6c75 6520  : Minimal value 
+00006640: 6f66 2068 6f72 697a 6f6e 7461 6c20 6578  of horizontal ex
+00006650: 7061 6e73 696f 6e2e 0a20 2020 2020 2020  pansion..       
+00006660: 206e 616d 6520 2873 7472 293a 204e 616d   name (str): Nam
+00006670: 6520 6f66 2074 6865 206d 6f64 656c 203d  e of the model =
+00006680: 2027 6f63 656c 5f70 7974 686f 6e27 2e0a   'ocel_python'..
+00006690: 2020 2020 2020 2020 5f6e 756d 6265 725f          _number_
+000066a0: 6f66 5f74 6573 7465 645f 636f 6e63 6570  of_tested_concep
+000066b0: 7473 2028 696e 7429 3a20 5965 732c 2079  ts (int): Yes, y
+000066c0: 6f75 2067 6f74 2069 742e 2054 6869 7320  ou got it. This 
+000066d0: 7374 6f72 6573 2074 6865 206e 756d 6265  stores the numbe
+000066e0: 7220 6f66 2074 6573 7465 6420 636f 6e63  r of tested conc
+000066f0: 6570 7473 2e0a 2020 2020 2020 2020 6f70  epts..        op
+00006700: 6572 6174 6f72 2028 4261 7365 5265 6669  erator (BaseRefi
+00006710: 6e65 6d65 6e74 293a 204f 7065 7261 746f  nement): Operato
+00006720: 7220 7573 6564 2074 6f20 6765 6e65 7261  r used to genera
+00006730: 7465 2072 6566 696e 656d 656e 7473 2e0a  te refinements..
+00006740: 2020 2020 2020 2020 7175 616c 6974 795f          quality_
+00006750: 6675 6e63 2028 4162 7374 7261 6374 5363  func (AbstractSc
+00006760: 6f72 6572 2920 5468 6520 7175 616c 6974  orer) The qualit
+00006770: 7920 6675 6e63 7469 6f6e 2074 6f20 6265  y function to be
+00006780: 2075 7365 642e 0a20 2020 2020 2020 2072   used..        r
+00006790: 6561 736f 6e65 7220 284f 574c 5265 6173  easoner (OWLReas
+000067a0: 6f6e 6572 293a 2054 6865 2072 6561 736f  oner): The reaso
+000067b0: 6e65 7220 7468 6174 2074 6869 7320 6d6f  ner that this mo
+000067c0: 6465 6c20 6973 2075 7369 6e67 2e0a 2020  del is using..  
+000067d0: 2020 2020 2020 7365 6172 6368 5f74 7265        search_tre
+000067e0: 6520 2844 6963 745b 4f57 4c43 6c61 7373  e (Dict[OWLClass
+000067f0: 4578 7072 6573 7369 6f6e 2c20 5472 6565  Expression, Tree
+00006800: 4e6f 6465 5b4f 454e 6f64 655d 5d29 3a20  Node[OENode]]): 
+00006810: 4469 6374 2074 6f20 7374 6f72 6520 7468  Dict to store th
+00006820: 6520 5472 6565 4e6f 6465 2066 6f72 2061  e TreeNode for a
+00006830: 2063 6c61 7373 2065 7870 7265 7373 696f   class expressio
+00006840: 6e2e 0a20 2020 2020 2020 2073 7461 7274  n..        start
+00006850: 5f63 6c61 7373 2028 4f57 4c43 6c61 7373  _class (OWLClass
+00006860: 4578 7072 6573 7369 6f6e 293a 2054 6865  Expression): The
+00006870: 2073 7461 7274 696e 6720 636c 6173 7320   starting class 
+00006880: 6578 7072 6573 7369 6f6e 2066 6f72 2074  expression for t
+00006890: 6865 2072 6566 696e 656d 656e 7420 6f70  he refinement op
+000068a0: 6572 6174 696f 6e2e 0a20 2020 2020 2020  eration..       
+000068b0: 2073 7461 7274 5f74 696d 6520 2866 6c6f   start_time (flo
+000068c0: 6174 293a 2054 6865 2074 696d 6520 7768  at): The time wh
+000068d0: 656e 203a 6d65 7468 3a60 6669 7460 2073  en :meth:`fit` s
+000068e0: 7461 7274 7320 7468 6520 6578 6563 7574  tarts the execut
+000068f0: 696f 6e2e 2055 7365 6420 746f 2063 616c  ion. Used to cal
+00006900: 6375 6c61 7465 2074 6865 2074 6f74 616c  culate the total
+00006910: 2074 696d 6520 3a6d 6574 683a 6066 6974   time :meth:`fit
+00006920: 600a 2020 2020 2020 2020 2020 2020 2020  `.              
+00006930: 2020 2020 2020 2020 2020 2020 2020 7461                ta
+00006940: 6b65 7320 746f 2065 7865 6375 7465 2e0a  kes to execute..
+00006950: 2020 2020 2020 2020 7465 726d 696e 6174          terminat
+00006960: 655f 6f6e 5f67 6f61 6c20 2862 6f6f 6c29  e_on_goal (bool)
+00006970: 3a20 5768 6574 6865 7220 746f 2073 746f  : Whether to sto
+00006980: 7020 7468 6520 616c 676f 7269 7468 6d20  p the algorithm 
+00006990: 6966 2061 2070 6572 6665 6374 2073 6f6c  if a perfect sol
+000069a0: 7574 696f 6e20 6973 2066 6f75 6e64 2e0a  ution is found..
+000069b0: 2020 2020 2222 220a 2020 2020 5f5f 736c      """.    __sl
+000069c0: 6f74 735f 5f20 3d20 2829 0a0a 2020 2020  ots__ = ()..    
+000069d0: 6e61 6d65 203d 2027 6f63 656c 5f70 7974  name = 'ocel_pyt
+000069e0: 686f 6e27 0a0a 2020 2020 6465 6620 5f5f  hon'..    def __
+000069f0: 696e 6974 5f5f 2873 656c 662c 0a20 2020  init__(self,.   
+00006a00: 2020 2020 2020 2020 2020 2020 2020 6b6e                kn
+00006a10: 6f77 6c65 6467 655f 6261 7365 3a20 4b6e  owledge_base: Kn
+00006a20: 6f77 6c65 6467 6542 6173 652c 0a20 2020  owledgeBase,.   
+00006a30: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00006a40: 6173 6f6e 6572 3a20 4f70 7469 6f6e 616c  asoner: Optional
+00006a50: 5b4f 574c 5265 6173 6f6e 6572 5d20 3d20  [OWLReasoner] = 
+00006a60: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+00006a70: 2020 2020 2020 2072 6566 696e 656d 656e         refinemen
+00006a80: 745f 6f70 6572 6174 6f72 3a20 4f70 7469  t_operator: Opti
+00006a90: 6f6e 616c 5b42 6173 6552 6566 696e 656d  onal[BaseRefinem
+00006aa0: 656e 745b 4f45 4e6f 6465 5d5d 203d 204e  ent[OENode]] = N
+00006ab0: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00006ac0: 2020 2020 2020 7175 616c 6974 795f 6675        quality_fu
+00006ad0: 6e63 3a20 4f70 7469 6f6e 616c 5b41 6273  nc: Optional[Abs
+00006ae0: 7472 6163 7453 636f 7265 725d 203d 204e  tractScorer] = N
+00006af0: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00006b00: 2020 2020 2020 6865 7572 6973 7469 635f        heuristic_
+00006b10: 6675 6e63 3a20 4f70 7469 6f6e 616c 5b41  func: Optional[A
+00006b20: 6273 7472 6163 7448 6575 7269 7374 6963  bstractHeuristic
+00006b30: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
+00006b40: 2020 2020 2020 2020 2020 2074 6572 6d69             termi
+00006b50: 6e61 7465 5f6f 6e5f 676f 616c 3a20 4f70  nate_on_goal: Op
+00006b60: 7469 6f6e 616c 5b62 6f6f 6c5d 203d 204e  tional[bool] = N
+00006b70: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00006b80: 2020 2020 2020 6974 6572 5f62 6f75 6e64        iter_bound
+00006b90: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+00006ba0: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
+00006bb0: 2020 2020 2020 2020 206d 6178 5f6e 756d           max_num
+00006bc0: 5f6f 665f 636f 6e63 6570 7473 5f74 6573  _of_concepts_tes
+00006bd0: 7465 643a 204f 7074 696f 6e61 6c5b 696e  ted: Optional[in
+00006be0: 745d 203d 204e 6f6e 652c 0a20 2020 2020  t] = None,.     
+00006bf0: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
+00006c00: 7275 6e74 696d 653a 204f 7074 696f 6e61  runtime: Optiona
+00006c10: 6c5b 696e 745d 203d 204e 6f6e 652c 0a20  l[int] = None,. 
+00006c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006c30: 6d61 785f 7265 7375 6c74 733a 2069 6e74  max_results: int
+00006c40: 203d 2031 302c 0a20 2020 2020 2020 2020   = 10,.         
+00006c50: 2020 2020 2020 2020 6265 7374 5f6f 6e6c          best_onl
+00006c60: 793a 2062 6f6f 6c20 3d20 4661 6c73 652c  y: bool = False,
+00006c70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006c80: 2020 6361 6c63 756c 6174 655f 6d69 6e5f    calculate_min_
+00006c90: 6d61 783a 2062 6f6f 6c20 3d20 5472 7565  max: bool = True
+00006ca0: 293a 0a20 2020 2020 2020 2022 2222 2043  ):.        """ C
+00006cb0: 7265 6174 6520 6120 6e65 7720 696e 7374  reate a new inst
+00006cc0: 616e 6365 206f 6620 4f43 454c 2e0a 0a20  ance of OCEL... 
+00006cd0: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
+00006ce0: 2020 2020 2020 2020 2062 6573 745f 6f6e           best_on
+00006cf0: 6c79 2028 626f 6f6c 293a 2049 6620 4661  ly (bool): If Fa
+00006d00: 6c73 6520 7069 636b 206f 6e6c 7920 6e6f  lse pick only no
+00006d10: 6465 7320 7769 7468 2071 7561 6c69 7479  des with quality
+00006d20: 203c 2031 2e30 2c20 656c 7365 2070 6963   < 1.0, else pic
+00006d30: 6b20 7769 7468 6f75 7420 7175 616c 6974  k without qualit
+00006d40: 7920 7265 7374 7269 6374 696f 6e73 2e0a  y restrictions..
+00006d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00006d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006d70: 2020 2020 2020 2020 2020 2044 6566 6175             Defau
-00006d80: 6c74 7320 746f 2054 7275 652e 0a20 2020  lts to True..   
-00006d90: 2020 2020 2020 2020 2072 6566 696e 656d           refinem
-00006da0: 656e 745f 6f70 6572 6174 6f72 2028 4261  ent_operator (Ba
-00006db0: 7365 5265 6669 6e65 6d65 6e74 5b4f 454e  seRefinement[OEN
-00006dc0: 6f64 655d 293a 204f 7065 7261 746f 7220  ode]): Operator 
-00006dd0: 7573 6564 2074 6f20 6765 6e65 7261 7465  used to generate
-00006de0: 2072 6566 696e 656d 656e 7473 2e0a 2020   refinements..  
-00006df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006d70: 4465 6661 756c 7473 2074 6f20 4661 6c73  Defaults to Fals
+00006d80: 652e 0a20 2020 2020 2020 2020 2020 2063  e..            c
+00006d90: 616c 6375 6c61 7465 5f6d 696e 5f6d 6178  alculate_min_max
+00006da0: 2028 626f 6f6c 293a 2043 616c 6375 6c61   (bool): Calcula
+00006db0: 7465 206d 696e 696d 756d 2061 6e64 206d  te minimum and m
+00006dc0: 6178 696d 756d 2068 6f72 697a 6f6e 7461  aximum horizonta
+00006dd0: 6c20 6578 7061 6e73 696f 6e3f 2053 7461  l expansion? Sta
+00006de0: 7469 7374 6963 616c 2070 7572 706f 7365  tistical purpose
+00006df0: 206f 6e6c 792e 0a20 2020 2020 2020 2020   only..         
 00006e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006e20: 2020 2020 2020 4465 6661 756c 7473 2074        Defaults t
-00006e30: 6f20 604d 6f64 6966 6965 6443 454c 4f45  o `ModifiedCELOE
-00006e40: 5265 6669 6e65 6d65 6e74 602e 0a20 2020  Refinement`..   
-00006e50: 2020 2020 2020 2020 2068 6575 7269 7374           heurist
-00006e60: 6963 5f66 756e 6320 2841 6273 7472 6163  ic_func (Abstrac
-00006e70: 7448 6575 7269 7374 6963 293a 2046 756e  tHeuristic): Fun
-00006e80: 6374 696f 6e20 746f 2067 7569 6465 2074  ction to guide t
-00006e90: 6865 2073 6561 7263 6820 6865 7572 6973  he search heuris
-00006ea0: 7469 632e 2044 6566 6175 6c74 7320 746f  tic. Defaults to
-00006eb0: 2060 4f43 454c 4865 7572 6973 7469 6360   `OCELHeuristic`
-00006ec0: 2e0a 2020 2020 2020 2020 2020 2020 6974  ..            it
-00006ed0: 6572 5f62 6f75 6e64 2028 696e 7429 3a20  er_bound (int): 
-00006ee0: 4c69 6d69 7420 746f 2073 746f 7020 7468  Limit to stop th
-00006ef0: 6520 616c 676f 7269 7468 6d20 6166 7465  e algorithm afte
-00006f00: 7220 6e20 7265 6669 6e65 6d65 6e74 2073  r n refinement s
-00006f10: 7465 7073 2061 7265 2064 6f6e 652e 2044  teps are done. D
-00006f20: 6566 6175 6c74 7320 746f 2031 3027 3030  efaults to 10'00
-00006f30: 302e 0a20 2020 2020 2020 2020 2020 206b  0..            k
-00006f40: 6e6f 776c 6564 6765 5f62 6173 6520 284b  nowledge_base (K
-00006f50: 6e6f 776c 6564 6765 4261 7365 293a 2054  nowledgeBase): T
-00006f60: 6865 206b 6e6f 776c 6564 6765 2062 6173  he knowledge bas
-00006f70: 6520 7468 6174 2074 6865 2063 6f6e 6365  e that the conce
-00006f80: 7074 206c 6561 726e 6572 2069 7320 7573  pt learner is us
-00006f90: 696e 672e 0a20 2020 2020 2020 2020 2020  ing..           
-00006fa0: 206d 6178 5f6e 756d 5f6f 665f 636f 6e63   max_num_of_conc
-00006fb0: 6570 7473 5f74 6573 7465 6420 2869 6e74  epts_tested (int
-00006fc0: 2920 4c69 6d69 7420 746f 2073 746f 7020  ) Limit to stop 
-00006fd0: 7468 6520 616c 676f 7269 7468 6d20 6166  the algorithm af
-00006fe0: 7465 7220 6e20 636f 6e63 6570 7473 2074  ter n concepts t
-00006ff0: 6573 7465 642e 2044 6566 6175 6c74 7320  ested. Defaults 
-00007000: 746f 2031 3027 3030 302e 0a20 2020 2020  to 10'000..     
-00007010: 2020 2020 2020 206d 6178 5f72 756e 7469         max_runti
-00007020: 6d65 2028 696e 7429 3a20 4c69 6d69 7420  me (int): Limit 
-00007030: 746f 2073 746f 7020 7468 6520 616c 676f  to stop the algo
-00007040: 7269 7468 6d20 6166 7465 7220 6e20 7365  rithm after n se
-00007050: 636f 6e64 732e 2044 6566 6175 6c74 7320  conds. Defaults 
-00007060: 746f 2035 2e0a 2020 2020 2020 2020 2020  to 5..          
-00007070: 2020 6d61 785f 7265 7375 6c74 7320 2869    max_results (i
-00007080: 6e74 293a 204d 6178 696d 756d 2068 7970  nt): Maximum hyp
-00007090: 6f74 6865 7369 7320 746f 2073 746f 7265  othesis to store
-000070a0: 2e20 4465 6661 756c 7473 2074 6f20 3130  . Defaults to 10
-000070b0: 2e0a 2020 2020 2020 2020 2020 2020 7175  ..            qu
-000070c0: 616c 6974 795f 6675 6e63 2028 4162 7374  ality_func (Abst
-000070d0: 7261 6374 5363 6f72 6572 2920 5468 6520  ractScorer) The 
-000070e0: 7175 616c 6974 7920 6675 6e63 7469 6f6e  quality function
-000070f0: 2074 6f20 6265 2075 7365 642e 2044 6566   to be used. Def
-00007100: 6175 6c74 7320 746f 2060 4631 602e 0a20  aults to `F1`.. 
-00007110: 2020 2020 2020 2020 2020 2072 6561 736f             reaso
-00007120: 6e65 7220 284f 574c 5265 6173 6f6e 6572  ner (OWLReasoner
-00007130: 293a 204f 7074 696f 6e61 6c6c 7920 7573  ): Optionally us
-00007140: 6520 6120 6469 6666 6572 656e 7420 7265  e a different re
-00007150: 6173 6f6e 6572 2e20 4966 2072 6561 736f  asoner. If reaso
-00007160: 6e65 723d 4e6f 6e65 2c20 7468 6520 7265  ner=None, the re
-00007170: 6173 6f6e 6572 206f 660a 2020 2020 2020  asoner of.      
-00007180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007190: 2020 2020 2020 2020 2020 2020 2020 7468                th
-000071a0: 6520 3a61 7474 723a 606b 6e6f 776c 6564  e :attr:`knowled
-000071b0: 6765 5f62 6173 6560 2069 7320 7573 6564  ge_base` is used
-000071c0: 2e0a 2020 2020 2020 2020 2020 2020 7465  ..            te
-000071d0: 726d 696e 6174 655f 6f6e 5f67 6f61 6c20  rminate_on_goal 
-000071e0: 2862 6f6f 6c29 3a20 5768 6574 6865 7220  (bool): Whether 
-000071f0: 746f 2073 746f 7020 7468 6520 616c 676f  to stop the algo
-00007200: 7269 7468 6d20 6966 2061 2070 6572 6665  rithm if a perfe
-00007210: 6374 2073 6f6c 7574 696f 6e20 6973 2066  ct solution is f
-00007220: 6f75 6e64 2e20 4465 6661 756c 7473 2074  ound. Defaults t
-00007230: 6f20 5472 7565 2e0a 0a0a 2020 2020 2020  o True....      
-00007240: 2020 2222 220a 0a20 2020 2020 2020 2069    """..        i
-00007250: 6620 6865 7572 6973 7469 635f 6675 6e63  f heuristic_func
-00007260: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00007270: 2020 2020 2020 6865 7572 6973 7469 635f        heuristic_
-00007280: 6675 6e63 203d 204f 4345 4c48 6575 7269  func = OCELHeuri
-00007290: 7374 6963 2829 0a0a 2020 2020 2020 2020  stic()..        
-000072a0: 7375 7065 7228 292e 5f5f 696e 6974 5f5f  super().__init__
-000072b0: 286b 6e6f 776c 6564 6765 5f62 6173 653d  (knowledge_base=
-000072c0: 6b6e 6f77 6c65 6467 655f 6261 7365 2c0a  knowledge_base,.
-000072d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000072e0: 2020 2020 2020 2020 2072 6561 736f 6e65           reasone
-000072f0: 723d 7265 6173 6f6e 6572 2c0a 2020 2020  r=reasoner,.    
-00007300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007310: 2020 2020 2072 6566 696e 656d 656e 745f       refinement_
-00007320: 6f70 6572 6174 6f72 3d72 6566 696e 656d  operator=refinem
-00007330: 656e 745f 6f70 6572 6174 6f72 2c0a 2020  ent_operator,.  
-00007340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007350: 2020 2020 2020 2071 7561 6c69 7479 5f66         quality_f
-00007360: 756e 633d 7175 616c 6974 795f 6675 6e63  unc=quality_func
-00007370: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00007380: 2020 2020 2020 2020 2020 2068 6575 7269             heuri
-00007390: 7374 6963 5f66 756e 633d 6865 7572 6973  stic_func=heuris
-000073a0: 7469 635f 6675 6e63 2c0a 2020 2020 2020  tic_func,.      
-000073b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000073c0: 2020 2074 6572 6d69 6e61 7465 5f6f 6e5f     terminate_on_
-000073d0: 676f 616c 3d74 6572 6d69 6e61 7465 5f6f  goal=terminate_o
-000073e0: 6e5f 676f 616c 2c0a 2020 2020 2020 2020  n_goal,.        
-000073f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007400: 2069 7465 725f 626f 756e 643d 6974 6572   iter_bound=iter
-00007410: 5f62 6f75 6e64 2c0a 2020 2020 2020 2020  _bound,.        
-00007420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007430: 206d 6178 5f6e 756d 5f6f 665f 636f 6e63   max_num_of_conc
-00007440: 6570 7473 5f74 6573 7465 643d 6d61 785f  epts_tested=max_
-00007450: 6e75 6d5f 6f66 5f63 6f6e 6365 7074 735f  num_of_concepts_
-00007460: 7465 7374 6564 2c0a 2020 2020 2020 2020  tested,.        
-00007470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007480: 206d 6178 5f72 756e 7469 6d65 3d6d 6178   max_runtime=max
-00007490: 5f72 756e 7469 6d65 2c0a 2020 2020 2020  _runtime,.      
-000074a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074b0: 2020 206d 6178 5f72 6573 756c 7473 3d6d     max_results=m
-000074c0: 6178 5f72 6573 756c 7473 2c0a 2020 2020  ax_results,.    
-000074d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074e0: 2020 2020 2062 6573 745f 6f6e 6c79 3d62       best_only=b
-000074f0: 6573 745f 6f6e 6c79 2c0a 2020 2020 2020  est_only,.      
-00007500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007510: 2020 2063 616c 6375 6c61 7465 5f6d 696e     calculate_min
-00007520: 5f6d 6178 3d63 616c 6375 6c61 7465 5f6d  _max=calculate_m
-00007530: 696e 5f6d 6178 290a 0a20 2020 2064 6566  in_max)..    def
-00007540: 206d 616b 655f 6e6f 6465 2873 656c 662c   make_node(self,
-00007550: 2063 3a20 4f57 4c43 6c61 7373 4578 7072   c: OWLClassExpr
-00007560: 6573 7369 6f6e 2c20 7061 7265 6e74 5f6e  ession, parent_n
-00007570: 6f64 653a 204f 7074 696f 6e61 6c5b 4f45  ode: Optional[OE
-00007580: 4e6f 6465 5d20 3d20 4e6f 6e65 2c20 6973  Node] = None, is
-00007590: 5f72 6f6f 743a 2062 6f6f 6c20 3d20 4661  _root: bool = Fa
-000075a0: 6c73 6529 202d 3e20 4f45 4e6f 6465 3a0a  lse) -> OENode:.
-000075b0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000075c0: 2020 2020 4372 6561 7465 2061 206e 6f64      Create a nod
-000075d0: 6520 666f 7220 4f43 454c 2e0a 0a20 2020  e for OCEL...   
-000075e0: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
-000075f0: 2020 2020 2020 2063 3a20 5468 6520 636c         c: The cl
-00007600: 6173 7320 6578 7072 6573 7369 6f6e 206f  ass expression o
-00007610: 6620 7468 6973 206e 6f64 652e 0a20 2020  f this node..   
-00007620: 2020 2020 2020 2020 2070 6172 656e 745f           parent_
-00007630: 6e6f 6465 3a20 5061 7265 6e74 206e 6f64  node: Parent nod
-00007640: 652e 0a20 2020 2020 2020 2020 2020 2069  e..            i
-00007650: 735f 726f 6f74 3a20 4973 2074 6869 7320  s_root: Is this 
-00007660: 7468 6520 726f 6f74 206e 6f64 653f 0a0a  the root node?..
-00007670: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
-00007680: 0a20 2020 2020 2020 2020 2020 204f 454e  .            OEN
-00007690: 6f64 653a 2054 6865 206e 6f64 652e 0a20  ode: The node.. 
-000076a0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-000076b0: 2020 2061 7373 6572 7420 7061 7265 6e74     assert parent
-000076c0: 5f6e 6f64 6520 6973 204e 6f6e 6520 6f72  _node is None or
-000076d0: 2069 7369 6e73 7461 6e63 6528 7061 7265   isinstance(pare
-000076e0: 6e74 5f6e 6f64 652c 204c 424c 4e6f 6465  nt_node, LBLNode
-000076f0: 290a 2020 2020 2020 2020 7220 3d20 4c42  ).        r = LB
-00007700: 4c4e 6f64 6528 632c 2073 656c 662e 6b62  LNode(c, self.kb
-00007710: 2e63 6f6e 6365 7074 5f6c 656e 2863 292c  .concept_len(c),
-00007720: 2073 656c 662e 6b62 2e69 6e64 6976 6964   self.kb.individ
-00007730: 7561 6c73 5f73 6574 2863 292c 2070 6172  uals_set(c), par
-00007740: 656e 745f 6e6f 6465 3d70 6172 656e 745f  ent_node=parent_
-00007750: 6e6f 6465 2c20 6973 5f72 6f6f 743d 6973  node, is_root=is
-00007760: 5f72 6f6f 7429 0a20 2020 2020 2020 2069  _root).        i
-00007770: 6620 7061 7265 6e74 5f6e 6f64 6520 6973  f parent_node is
-00007780: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00007790: 2020 2020 2020 2070 6172 656e 745f 6e6f         parent_no
-000077a0: 6465 2e61 6464 5f63 6869 6c64 2872 290a  de.add_child(r).
-000077b0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-000077c0: 0a0a 0a0a 0a63 6c61 7373 2045 766f 4c65  .....class EvoLe
-000077d0: 6172 6e65 7228 4261 7365 436f 6e63 6570  arner(BaseConcep
-000077e0: 744c 6561 726e 6572 5b45 766f 4c65 6172  tLearner[EvoLear
-000077f0: 6e65 724e 6f64 655d 293a 0a20 2020 2022  nerNode]):.    "
-00007800: 2222 416e 2065 766f 6c75 7469 6f6e 6172  ""An evolutionar
-00007810: 7920 6170 7072 6f61 6368 2074 6f20 6c65  y approach to le
-00007820: 6172 6e20 636f 6e63 6570 7473 2069 6e20  arn concepts in 
-00007830: 414c 4351 2844 292e 0a0a 2020 2020 4174  ALCQ(D)...    At
-00007840: 7472 6962 7574 6573 3a0a 2020 2020 2020  tributes:.      
-00007850: 2020 616c 676f 7269 7468 6d20 2841 6273    algorithm (Abs
-00007860: 7472 6163 7445 766f 6c75 7469 6f6e 6172  tractEvolutionar
-00007870: 7941 6c67 6f72 6974 686d 293a 2054 6865  yAlgorithm): The
-00007880: 2065 766f 6c75 7469 6f6e 6172 7920 616c   evolutionary al
-00007890: 676f 7269 7468 6d2e 0a20 2020 2020 2020  gorithm..       
-000078a0: 2063 6172 645f 6c69 6d69 7420 2869 6e74   card_limit (int
-000078b0: 293a 2054 6865 2075 7070 6572 2063 6172  ): The upper car
-000078c0: 6469 6e61 6c69 7479 206c 696d 6974 2069  dinality limit i
-000078d0: 6620 7573 696e 6720 6361 7264 696e 616c  f using cardinal
-000078e0: 6974 7920 7265 7374 7269 6374 696f 6e20  ity restriction 
-000078f0: 6f6e 206f 626a 6563 7420 7072 6f70 6572  on object proper
-00007900: 7469 6573 2e0a 2020 2020 2020 2020 6669  ties..        fi
-00007910: 746e 6573 735f 6675 6e63 2028 4162 7374  tness_func (Abst
-00007920: 7261 6374 4669 746e 6573 7329 3a20 4669  ractFitness): Fi
-00007930: 746e 6573 7320 6675 6e63 7469 6f6e 2e0a  tness function..
-00007940: 2020 2020 2020 2020 6865 6967 6874 5f6c          height_l
-00007950: 696d 6974 2028 696e 7429 3a20 5468 6520  imit (int): The 
-00007960: 6d61 7869 6d75 6d20 7661 6c75 6520 616c  maximum value al
-00007970: 6c6f 7765 6420 666f 7220 7468 6520 6865  lowed for the he
-00007980: 6967 6874 206f 6620 7468 6520 4372 6f73  ight of the Cros
-00007990: 736f 7665 7220 616e 6420 4d75 7461 7469  sover and Mutati
-000079a0: 6f6e 206f 7065 7261 7469 6f6e 732e 0a20  on operations.. 
-000079b0: 2020 2020 2020 2069 6e69 745f 6d65 7468         init_meth
-000079c0: 6f64 2028 4162 7374 7261 6374 4541 496e  od (AbstractEAIn
-000079d0: 6974 6961 6c69 7a61 7469 6f6e 293a 2054  itialization): T
-000079e0: 6865 2065 766f 6c75 7469 6f6e 6172 7920  he evolutionary 
-000079f0: 616c 676f 7269 7468 6d20 696e 6974 6961  algorithm initia
-00007a00: 6c69 7a61 7469 6f6e 206d 6574 686f 642e  lization method.
-00007a10: 0a20 2020 2020 2020 206b 6220 284b 6e6f  .        kb (Kno
-00007a20: 776c 6564 6765 4261 7365 293a 2054 6865  wledgeBase): The
-00007a30: 206b 6e6f 776c 6564 6765 2062 6173 6520   knowledge base 
-00007a40: 7468 6174 2074 6865 2063 6f6e 6365 7074  that the concept
-00007a50: 206c 6561 726e 6572 2069 7320 7573 696e   learner is usin
-00007a60: 672e 0a20 2020 2020 2020 206d 6178 5f6e  g..        max_n
-00007a70: 756d 5f6f 665f 636f 6e63 6570 7473 5f74  um_of_concepts_t
-00007a80: 6573 7465 6420 2869 6e74 293a 204c 696d  ested (int): Lim
-00007a90: 6974 2074 6f20 7374 6f70 2074 6865 2061  it to stop the a
-00007aa0: 6c67 6f72 6974 686d 2061 6674 6572 206e  lgorithm after n
-00007ab0: 2063 6f6e 6365 7074 7320 7465 7374 6564   concepts tested
-00007ac0: 2e0a 2020 2020 2020 2020 6d61 785f 7275  ..        max_ru
-00007ad0: 6e74 696d 6520 2869 6e74 293a 206d 6178  ntime (int): max
-00007ae0: 5f72 756e 7469 6d65 3a20 4c69 6d69 7420  _runtime: Limit 
-00007af0: 746f 2073 746f 7020 7468 6520 616c 676f  to stop the algo
-00007b00: 7269 7468 6d20 6166 7465 7220 6e20 7365  rithm after n se
-00007b10: 636f 6e64 732e 0a20 2020 2020 2020 206d  conds..        m
-00007b20: 7574 5f75 6e69 666f 726d 5f67 656e 2028  ut_uniform_gen (
-00007b30: 4162 7374 7261 6374 4541 496e 6974 6961  AbstractEAInitia
-00007b40: 6c69 7a61 7469 6f6e 293a 2054 6865 2069  lization): The i
-00007b50: 6e69 7469 616c 697a 6174 696f 6e20 6d65  nitialization me
-00007b60: 7468 6f64 2074 6f20 6372 6561 7465 2074  thod to create t
-00007b70: 6865 2074 7265 6520 666f 7220 6d75 7461  he tree for muta
-00007b80: 7469 6f6e 206f 7065 7261 7469 6f6e 2e0a  tion operation..
-00007b90: 2020 2020 2020 2020 6e61 6d65 2028 7374          name (st
-00007ba0: 7229 3a20 4e61 6d65 206f 6620 7468 6520  r): Name of the 
-00007bb0: 6d6f 6465 6c20 3d20 2765 766f 6c65 6172  model = 'evolear
-00007bc0: 6e65 7227 2e0a 2020 2020 2020 2020 6e75  ner'..        nu
-00007bd0: 6d5f 6765 6e65 7261 7469 6f6e 7320 2869  m_generations (i
-00007be0: 6e74 293a 204e 756d 6265 7220 6f66 2067  nt): Number of g
-00007bf0: 656e 6572 6174 696f 6e20 666f 7220 7468  eneration for th
-00007c00: 6520 6576 6f6c 7574 696f 6e61 7279 2061  e evolutionary a
-00007c10: 6c67 6f72 6974 686d 2e0a 2020 2020 2020  lgorithm..      
-00007c20: 2020 5f6e 756d 6265 725f 6f66 5f74 6573    _number_of_tes
-00007c30: 7465 645f 636f 6e63 6570 7473 2028 696e  ted_concepts (in
-00007c40: 7429 3a20 5965 732c 2079 6f75 2067 6f74  t): Yes, you got
-00007c50: 2069 742e 2054 6869 7320 7374 6f72 6573   it. This stores
-00007c60: 2074 6865 206e 756d 6265 7220 6f66 2074   the number of t
-00007c70: 6573 7465 6420 636f 6e63 6570 7473 2e0a  ested concepts..
-00007c80: 2020 2020 2020 2020 706f 7075 6c61 7469          populati
-00007c90: 6f6e 5f73 697a 6520 2869 6e74 293a 2050  on_size (int): P
-00007ca0: 6f70 756c 6174 696f 6e20 7369 7a65 2066  opulation size f
-00007cb0: 6f72 2074 6865 2065 766f 6c75 7469 6f6e  or the evolution
-00007cc0: 6172 7920 616c 676f 7269 7468 6d2e 0a20  ary algorithm.. 
-00007cd0: 2020 2020 2020 2070 7365 7420 2867 702e         pset (gp.
-00007ce0: 5072 696d 6974 6976 6553 6574 5479 7065  PrimitiveSetType
-00007cf0: 6429 3a20 436f 6e74 6169 6e73 2074 6865  d): Contains the
-00007d00: 2070 7269 6d69 7469 7665 7320 7468 6174   primitives that
-00007d10: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
-00007d20: 736f 6c76 6520 6120 5374 726f 6e67 6c79  solve a Strongly
-00007d30: 2054 7970 6564 2047 5020 7072 6f62 6c65   Typed GP proble
-00007d40: 6d2e 0a20 2020 2020 2020 2071 7561 6c69  m..        quali
-00007d50: 7479 5f66 756e 633a 2046 756e 6374 696f  ty_func: Functio
-00007d60: 6e20 746f 2065 7661 6c75 6174 6520 7468  n to evaluate th
-00007d70: 6520 7175 616c 6974 7920 6f66 2073 6f6c  e quality of sol
-00007d80: 7574 696f 6e20 636f 6e63 6570 7473 2e0a  ution concepts..
-00007d90: 2020 2020 2020 2020 7265 6173 6f6e 6572          reasoner
-00007da0: 2028 4f57 4c52 6561 736f 6e65 7229 3a20   (OWLReasoner): 
-00007db0: 5468 6520 7265 6173 6f6e 6572 2074 6861  The reasoner tha
-00007dc0: 7420 7468 6973 206d 6f64 656c 2069 7320  t this model is 
-00007dd0: 7573 696e 672e 0a20 2020 2020 2020 2073  using..        s
-00007de0: 7461 7274 5f74 696d 6520 2866 6c6f 6174  tart_time (float
-00007df0: 293a 2054 6865 2074 696d 6520 7768 656e  ): The time when
-00007e00: 203a 6d65 7468 3a60 6669 7460 2073 7461   :meth:`fit` sta
-00007e10: 7274 7320 7468 6520 6578 6563 7574 696f  rts the executio
-00007e20: 6e2e 2055 7365 6420 746f 2063 616c 6375  n. Used to calcu
-00007e30: 6c61 7465 2074 6865 2074 6f74 616c 2074  late the total t
-00007e40: 696d 6520 3a6d 6574 683a 6066 6974 600a  ime :meth:`fit`.
-00007e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007e60: 2020 2020 2020 2020 2020 2020 7461 6b65              take
-00007e70: 7320 746f 2065 7865 6375 7465 2e0a 2020  s to execute..  
-00007e80: 2020 2020 2020 7465 726d 696e 6174 655f        terminate_
-00007e90: 6f6e 5f67 6f61 6c20 2862 6f6f 6c29 3a20  on_goal (bool): 
-00007ea0: 5768 6574 6865 7220 746f 2073 746f 7020  Whether to stop 
-00007eb0: 7468 6520 616c 676f 7269 7468 6d20 6966  the algorithm if
-00007ec0: 2061 2070 6572 6665 6374 2073 6f6c 7574   a perfect solut
-00007ed0: 696f 6e20 6973 2066 6f75 6e64 2e0a 2020  ion is found..  
-00007ee0: 2020 2020 2020 746f 6f6c 626f 7820 2862        toolbox (b
-00007ef0: 6173 652e 546f 6f6c 626f 7829 3a20 4120  ase.Toolbox): A 
-00007f00: 746f 6f6c 626f 7820 666f 7220 6576 6f6c  toolbox for evol
-00007f10: 7574 696f 6e20 7468 6174 2063 6f6e 7461  ution that conta
-00007f20: 696e 7320 7468 6520 6576 6f6c 7574 696f  ins the evolutio
-00007f30: 6e61 7279 206f 7065 7261 746f 7273 2e0a  nary operators..
-00007f40: 2020 2020 2020 2020 746f 7572 6e61 6d65          tourname
-00007f50: 6e74 5f73 697a 6520 2869 6e74 293a 2054  nt_size (int): T
-00007f60: 6865 206e 756d 6265 7220 6f66 2065 766f  he number of evo
-00007f70: 6c75 7469 6f6e 6172 7920 696e 6469 7669  lutionary indivi
-00007f80: 6475 616c 7320 7061 7274 6963 6970 6174  duals participat
-00007f90: 696e 6720 696e 2065 6163 6820 746f 7572  ing in each tour
-00007fa0: 6e61 6d65 6e74 2e0a 2020 2020 2020 2020  nament..        
-00007fb0: 7573 655f 6361 7264 5f72 6573 7472 6963  use_card_restric
-00007fc0: 7469 6f6e 7320 2862 6f6f 6c29 3a20 5573  tions (bool): Us
-00007fd0: 6520 6361 7264 696e 616c 6974 7920 7265  e cardinality re
-00007fe0: 7374 7269 6374 696f 6e20 666f 7220 6f62  striction for ob
-00007ff0: 6a65 6374 2070 726f 7065 7274 6965 733f  ject properties?
-00008000: 0a20 2020 2020 2020 2075 7365 5f64 6174  .        use_dat
-00008010: 615f 7072 6f70 6572 7469 6573 2028 626f  a_properties (bo
-00008020: 6f6c 293a 2043 6f6e 7369 6465 7220 6461  ol): Consider da
-00008030: 7461 2070 726f 7065 7274 6965 733f 0a20  ta properties?. 
-00008040: 2020 2020 2020 2075 7365 5f69 6e76 6572         use_inver
-00008050: 7365 2028 626f 6f6c 293a 2043 6f6e 7369  se (bool): Consi
-00008060: 6465 7220 696e 7665 7273 6564 2063 6f6e  der inversed con
-00008070: 6365 7074 733f 0a20 2020 2020 2020 2076  cepts?.        v
-00008080: 616c 7565 5f73 706c 6974 7465 7220 2841  alue_splitter (A
-00008090: 6273 7472 6163 7456 616c 7565 5370 6c69  bstractValueSpli
-000080a0: 7474 6572 293a 2055 7365 6420 746f 2063  tter): Used to c
-000080b0: 616c 6375 6c61 7465 2074 6865 2073 706c  alculate the spl
-000080c0: 6974 7320 666f 7220 6461 7461 2070 726f  its for data pro
-000080d0: 7065 7274 6965 7320 7661 6c75 6573 2e0a  perties values..
-000080e0: 0a0a 0a20 2020 2022 2222 0a0a 2020 2020  ...    """..    
-000080f0: 5f5f 736c 6f74 735f 5f20 3d20 2766 6974  __slots__ = 'fit
-00008100: 6e65 7373 5f66 756e 6327 2c20 2769 6e69  ness_func', 'ini
-00008110: 745f 6d65 7468 6f64 272c 2027 616c 676f  t_method', 'algo
-00008120: 7269 7468 6d27 2c20 2776 616c 7565 5f73  rithm', 'value_s
-00008130: 706c 6974 7465 7227 2c20 2774 6f75 726e  plitter', 'tourn
-00008140: 616d 656e 745f 7369 7a65 272c 205c 0a20  ament_size', \. 
-00008150: 2020 2020 2020 2027 706f 7075 6c61 7469         'populati
-00008160: 6f6e 5f73 697a 6527 2c20 276e 756d 5f67  on_size', 'num_g
-00008170: 656e 6572 6174 696f 6e73 272c 2027 6865  enerations', 'he
-00008180: 6967 6874 5f6c 696d 6974 272c 2027 7573  ight_limit', 'us
-00008190: 655f 6461 7461 5f70 726f 7065 7274 6965  e_data_propertie
-000081a0: 7327 2c20 2770 7365 7427 2c20 2774 6f6f  s', 'pset', 'too
-000081b0: 6c62 6f78 272c 205c 0a20 2020 2020 2020  lbox', \.       
-000081c0: 2027 5f6c 6561 726e 696e 675f 7072 6f62   '_learning_prob
-000081d0: 6c65 6d27 2c20 275f 7265 7375 6c74 5f70  lem', '_result_p
-000081e0: 6f70 756c 6174 696f 6e27 2c20 276d 7574  opulation', 'mut
-000081f0: 5f75 6e69 666f 726d 5f67 656e 272c 2027  _uniform_gen', '
-00008200: 5f64 705f 746f 5f70 7269 6d5f 7479 7065  _dp_to_prim_type
-00008210: 272c 2027 5f64 705f 7370 6c69 7473 272c  ', '_dp_splits',
-00008220: 205c 0a20 2020 2020 2020 2027 5f73 706c   \.        '_spl
-00008230: 6974 5f70 726f 7065 7274 6965 7327 2c20  it_properties', 
-00008240: 275f 6361 6368 6527 2c20 2775 7365 5f63  '_cache', 'use_c
-00008250: 6172 645f 7265 7374 7269 6374 696f 6e73  ard_restrictions
-00008260: 272c 2027 6361 7264 5f6c 696d 6974 272c  ', 'card_limit',
-00008270: 2027 7573 655f 696e 7665 7273 6527 2c20   'use_inverse', 
-00008280: 2774 6f74 616c 5f66 6974 7327 0a0a 2020  'total_fits'..  
-00008290: 2020 6e61 6d65 203d 2027 6576 6f6c 6561    name = 'evolea
-000082a0: 726e 6572 270a 0a20 2020 206b 623a 204b  rner'..    kb: K
-000082b0: 6e6f 776c 6564 6765 4261 7365 0a20 2020  nowledgeBase.   
-000082c0: 2066 6974 6e65 7373 5f66 756e 633a 2041   fitness_func: A
-000082d0: 6273 7472 6163 7446 6974 6e65 7373 0a20  bstractFitness. 
-000082e0: 2020 2069 6e69 745f 6d65 7468 6f64 3a20     init_method: 
-000082f0: 4162 7374 7261 6374 4541 496e 6974 6961  AbstractEAInitia
-00008300: 6c69 7a61 7469 6f6e 0a20 2020 2061 6c67  lization.    alg
-00008310: 6f72 6974 686d 3a20 4162 7374 7261 6374  orithm: Abstract
-00008320: 4576 6f6c 7574 696f 6e61 7279 416c 676f  EvolutionaryAlgo
-00008330: 7269 7468 6d0a 2020 2020 6d75 745f 756e  rithm.    mut_un
-00008340: 6966 6f72 6d5f 6765 6e3a 2041 6273 7472  iform_gen: Abstr
-00008350: 6163 7445 4149 6e69 7469 616c 697a 6174  actEAInitializat
-00008360: 696f 6e0a 2020 2020 7661 6c75 655f 7370  ion.    value_sp
-00008370: 6c69 7474 6572 3a20 4162 7374 7261 6374  litter: Abstract
-00008380: 5661 6c75 6553 706c 6974 7465 720a 2020  ValueSplitter.  
-00008390: 2020 7573 655f 6461 7461 5f70 726f 7065    use_data_prope
-000083a0: 7274 6965 733a 2062 6f6f 6c0a 2020 2020  rties: bool.    
-000083b0: 7573 655f 6361 7264 5f72 6573 7472 6963  use_card_restric
-000083c0: 7469 6f6e 733a 2062 6f6f 6c0a 2020 2020  tions: bool.    
-000083d0: 7573 655f 696e 7665 7273 653a 2062 6f6f  use_inverse: boo
-000083e0: 6c0a 2020 2020 746f 7572 6e61 6d65 6e74  l.    tournament
-000083f0: 5f73 697a 653a 2069 6e74 0a20 2020 2063  _size: int.    c
-00008400: 6172 645f 6c69 6d69 743a 2069 6e74 0a20  ard_limit: int. 
-00008410: 2020 2070 6f70 756c 6174 696f 6e5f 7369     population_si
-00008420: 7a65 3a20 696e 740a 2020 2020 6e75 6d5f  ze: int.    num_
-00008430: 6765 6e65 7261 7469 6f6e 733a 2069 6e74  generations: int
-00008440: 0a20 2020 2068 6569 6768 745f 6c69 6d69  .    height_limi
-00008450: 743a 2069 6e74 0a0a 2020 2020 7073 6574  t: int..    pset
-00008460: 3a20 6770 2e50 7269 6d69 7469 7665 5365  : gp.PrimitiveSe
-00008470: 7454 7970 6564 0a20 2020 2074 6f6f 6c62  tTyped.    toolb
-00008480: 6f78 3a20 6261 7365 2e54 6f6f 6c62 6f78  ox: base.Toolbox
-00008490: 0a20 2020 205f 6c65 6172 6e69 6e67 5f70  .    _learning_p
-000084a0: 726f 626c 656d 3a20 456e 636f 6465 6450  roblem: EncodedP
-000084b0: 6f73 4e65 674c 5053 7461 6e64 6172 640a  osNegLPStandard.
-000084c0: 2020 2020 5f72 6573 756c 745f 706f 7075      _result_popu
-000084d0: 6c61 7469 6f6e 3a20 4f70 7469 6f6e 616c  lation: Optional
-000084e0: 5b4c 6973 745b 5472 6565 5d5d 0a20 2020  [List[Tree]].   
-000084f0: 205f 6470 5f74 6f5f 7072 696d 5f74 7970   _dp_to_prim_typ
-00008500: 653a 2044 6963 745b 4f57 4c44 6174 6150  e: Dict[OWLDataP
-00008510: 726f 7065 7274 792c 2041 6e79 5d0a 2020  roperty, Any].  
-00008520: 2020 5f64 705f 7370 6c69 7473 3a20 4469    _dp_splits: Di
-00008530: 6374 5b4f 574c 4461 7461 5072 6f70 6572  ct[OWLDataProper
-00008540: 7479 2c20 4c69 7374 5b4f 574c 4c69 7465  ty, List[OWLLite
-00008550: 7261 6c5d 5d0a 2020 2020 5f73 706c 6974  ral]].    _split
-00008560: 5f70 726f 7065 7274 6965 733a 204c 6973  _properties: Lis
-00008570: 745b 4f57 4c44 6174 6150 726f 7065 7274  t[OWLDataPropert
-00008580: 795d 0a20 2020 205f 6361 6368 653a 2044  y].    _cache: D
-00008590: 6963 745b 7374 722c 2054 7570 6c65 5b66  ict[str, Tuple[f
-000085a0: 6c6f 6174 2c20 666c 6f61 745d 5d0a 0a20  loat, float]].. 
-000085b0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-000085c0: 7365 6c66 2c0a 2020 2020 2020 2020 2020  self,.          
-000085d0: 2020 2020 2020 206b 6e6f 776c 6564 6765         knowledge
-000085e0: 5f62 6173 653a 204b 6e6f 776c 6564 6765  _base: Knowledge
-000085f0: 4261 7365 2c0a 2020 2020 2020 2020 2020  Base,.          
-00008600: 2020 2020 2020 2072 6561 736f 6e65 723a         reasoner:
-00008610: 204f 7074 696f 6e61 6c5b 4f57 4c52 6561   Optional[OWLRea
-00008620: 736f 6e65 725d 203d 204e 6f6e 652c 0a20  soner] = None,. 
-00008630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008640: 7175 616c 6974 795f 6675 6e63 3a20 4f70  quality_func: Op
-00008650: 7469 6f6e 616c 5b41 6273 7472 6163 7453  tional[AbstractS
-00008660: 636f 7265 725d 203d 204e 6f6e 652c 0a20  corer] = None,. 
-00008670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008680: 6669 746e 6573 735f 6675 6e63 3a20 4f70  fitness_func: Op
-00008690: 7469 6f6e 616c 5b41 6273 7472 6163 7446  tional[AbstractF
-000086a0: 6974 6e65 7373 5d20 3d20 4e6f 6e65 2c0a  itness] = None,.
-000086b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000086c0: 2069 6e69 745f 6d65 7468 6f64 3a20 4f70   init_method: Op
-000086d0: 7469 6f6e 616c 5b41 6273 7472 6163 7445  tional[AbstractE
-000086e0: 4149 6e69 7469 616c 697a 6174 696f 6e5d  AInitialization]
-000086f0: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
-00008700: 2020 2020 2020 2020 2020 616c 676f 7269            algori
-00008710: 7468 6d3a 204f 7074 696f 6e61 6c5b 4162  thm: Optional[Ab
-00008720: 7374 7261 6374 4576 6f6c 7574 696f 6e61  stractEvolutiona
-00008730: 7279 416c 676f 7269 7468 6d5d 203d 204e  ryAlgorithm] = N
-00008740: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-00008750: 2020 2020 2020 6d75 745f 756e 6966 6f72        mut_unifor
-00008760: 6d5f 6765 6e3a 204f 7074 696f 6e61 6c5b  m_gen: Optional[
-00008770: 4162 7374 7261 6374 4541 496e 6974 6961  AbstractEAInitia
-00008780: 6c69 7a61 7469 6f6e 5d20 3d20 4e6f 6e65  lization] = None
-00008790: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000087a0: 2020 2076 616c 7565 5f73 706c 6974 7465     value_splitte
-000087b0: 723a 204f 7074 696f 6e61 6c5b 4162 7374  r: Optional[Abst
-000087c0: 7261 6374 5661 6c75 6553 706c 6974 7465  ractValueSplitte
-000087d0: 725d 203d 204e 6f6e 652c 0a20 2020 2020  r] = None,.     
-000087e0: 2020 2020 2020 2020 2020 2020 7465 726d              term
-000087f0: 696e 6174 655f 6f6e 5f67 6f61 6c3a 204f  inate_on_goal: O
-00008800: 7074 696f 6e61 6c5b 626f 6f6c 5d20 3d20  ptional[bool] = 
-00008810: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-00008820: 2020 2020 2020 206d 6178 5f72 756e 7469         max_runti
-00008830: 6d65 3a20 4f70 7469 6f6e 616c 5b69 6e74  me: Optional[int
-00008840: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
-00008850: 2020 2020 2020 2020 2020 2075 7365 5f64             use_d
-00008860: 6174 615f 7072 6f70 6572 7469 6573 3a20  ata_properties: 
-00008870: 626f 6f6c 203d 2054 7275 652c 0a20 2020  bool = True,.   
-00008880: 2020 2020 2020 2020 2020 2020 2020 7573                us
-00008890: 655f 6361 7264 5f72 6573 7472 6963 7469  e_card_restricti
-000088a0: 6f6e 733a 2062 6f6f 6c20 3d20 5472 7565  ons: bool = True
-000088b0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000088c0: 2020 2075 7365 5f69 6e76 6572 7365 3a20     use_inverse: 
-000088d0: 626f 6f6c 203d 2046 616c 7365 2c0a 2020  bool = False,.  
-000088e0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-000088f0: 6f75 726e 616d 656e 745f 7369 7a65 3a20  ournament_size: 
-00008900: 696e 7420 3d20 372c 0a20 2020 2020 2020  int = 7,.       
-00008910: 2020 2020 2020 2020 2020 6361 7264 5f6c            card_l
-00008920: 696d 6974 3a20 696e 7420 3d20 3130 2c0a  imit: int = 10,.
-00008930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008940: 2070 6f70 756c 6174 696f 6e5f 7369 7a65   population_size
-00008950: 3a20 696e 7420 3d20 3830 302c 0a20 2020  : int = 800,.   
-00008960: 2020 2020 2020 2020 2020 2020 2020 6e75                nu
-00008970: 6d5f 6765 6e65 7261 7469 6f6e 733a 2069  m_generations: i
-00008980: 6e74 203d 2032 3030 2c0a 2020 2020 2020  nt = 200,.      
-00008990: 2020 2020 2020 2020 2020 2068 6569 6768             heigh
-000089a0: 745f 6c69 6d69 743a 2069 6e74 203d 2031  t_limit: int = 1
-000089b0: 3729 3a0a 2020 2020 2020 2020 2222 2220  7):.        """ 
-000089c0: 4372 6561 7465 2061 206e 6577 2069 6e73  Create a new ins
-000089d0: 7461 6e63 6520 6f66 2045 766f 4c65 6172  tance of EvoLear
-000089e0: 6e65 720a 0a20 2020 2020 2020 2041 7267  ner..        Arg
-000089f0: 733a 0a20 2020 2020 2020 2020 2020 2061  s:.            a
-00008a00: 6c67 6f72 6974 686d 2028 4162 7374 7261  lgorithm (Abstra
-00008a10: 6374 4576 6f6c 7574 696f 6e61 7279 416c  ctEvolutionaryAl
-00008a20: 676f 7269 7468 6d29 3a20 5468 6520 6576  gorithm): The ev
-00008a30: 6f6c 7574 696f 6e61 7279 2061 6c67 6f72  olutionary algor
-00008a40: 6974 686d 2e20 4465 6661 756c 7473 2074  ithm. Defaults t
-00008a50: 6f20 6045 4153 696d 706c 6560 2e0a 2020  o `EASimple`..  
-00008a60: 2020 2020 2020 2020 2020 6361 7264 5f6c            card_l
-00008a70: 696d 6974 2028 696e 7429 3a20 5468 6520  imit (int): The 
-00008a80: 7570 7065 7220 6361 7264 696e 616c 6974  upper cardinalit
-00008a90: 7920 6c69 6d69 7420 6966 2075 7369 6e67  y limit if using
-00008aa0: 2063 6172 6469 6e61 6c69 7479 2072 6573   cardinality res
-00008ab0: 7472 6963 7469 6f6e 2066 6f72 206f 626a  triction for obj
-00008ac0: 6563 7420 7072 6f70 6572 7469 6573 2e20  ect properties. 
-00008ad0: 4465 6661 756c 7473 2074 6f20 3130 2e0a  Defaults to 10..
-00008ae0: 2020 2020 2020 2020 2020 2020 6669 746e              fitn
-00008af0: 6573 735f 6675 6e63 2028 4162 7374 7261  ess_func (Abstra
-00008b00: 6374 4669 746e 6573 7329 3a20 4669 746e  ctFitness): Fitn
-00008b10: 6573 7320 6675 6e63 7469 6f6e 2e20 4465  ess function. De
-00008b20: 6661 756c 7473 2074 6f20 604c 696e 6561  faults to `Linea
-00008b30: 7250 7265 7373 7572 6546 6974 6e65 7373  rPressureFitness
-00008b40: 602e 0a20 2020 2020 2020 2020 2020 2068  `..            h
-00008b50: 6569 6768 745f 6c69 6d69 7420 2869 6e74  eight_limit (int
-00008b60: 293a 2054 6865 206d 6178 696d 756d 2076  ): The maximum v
-00008b70: 616c 7565 2061 6c6c 6f77 6564 2066 6f72  alue allowed for
-00008b80: 2074 6865 2068 6569 6768 7420 6f66 2074   the height of t
-00008b90: 6865 2043 726f 7373 6f76 6572 2061 6e64  he Crossover and
-00008ba0: 204d 7574 6174 696f 6e20 6f70 6572 6174   Mutation operat
-00008bb0: 696f 6e73 2e0a 2020 2020 2020 2020 2020  ions..          
-00008bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008bd0: 2020 2020 2020 4465 6661 756c 7473 2074        Defaults t
-00008be0: 6f20 3137 2e0a 2020 2020 2020 2020 2020  o 17..          
-00008bf0: 2020 696e 6974 5f6d 6574 686f 6420 2841    init_method (A
-00008c00: 6273 7472 6163 7445 4149 6e69 7469 616c  bstractEAInitial
-00008c10: 697a 6174 696f 6e29 3a20 5468 6520 6576  ization): The ev
-00008c20: 6f6c 7574 696f 6e61 7279 2061 6c67 6f72  olutionary algor
-00008c30: 6974 686d 2069 6e69 7469 616c 697a 6174  ithm initializat
-00008c40: 696f 6e20 6d65 7468 6f64 2e20 4465 6661  ion method. Defa
-00008c50: 756c 7473 0a20 2020 2020 2020 2020 2020  ults.           
+00006e10: 2020 2020 2020 2020 2020 2020 2020 2044                 D
+00006e20: 6566 6175 6c74 7320 746f 2054 7275 652e  efaults to True.
+00006e30: 0a20 2020 2020 2020 2020 2020 2072 6566  .            ref
+00006e40: 696e 656d 656e 745f 6f70 6572 6174 6f72  inement_operator
+00006e50: 2028 4261 7365 5265 6669 6e65 6d65 6e74   (BaseRefinement
+00006e60: 5b4f 454e 6f64 655d 293a 204f 7065 7261  [OENode]): Opera
+00006e70: 746f 7220 7573 6564 2074 6f20 6765 6e65  tor used to gene
+00006e80: 7261 7465 2072 6566 696e 656d 656e 7473  rate refinements
+00006e90: 2e0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00006ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006ec0: 2020 2020 2020 2020 2020 4465 6661 756c            Defaul
+00006ed0: 7473 2074 6f20 604d 6f64 6966 6965 6443  ts to `ModifiedC
+00006ee0: 454c 4f45 5265 6669 6e65 6d65 6e74 602e  ELOERefinement`.
+00006ef0: 0a20 2020 2020 2020 2020 2020 2068 6575  .            heu
+00006f00: 7269 7374 6963 5f66 756e 6320 2841 6273  ristic_func (Abs
+00006f10: 7472 6163 7448 6575 7269 7374 6963 293a  tractHeuristic):
+00006f20: 2046 756e 6374 696f 6e20 746f 2067 7569   Function to gui
+00006f30: 6465 2074 6865 2073 6561 7263 6820 6865  de the search he
+00006f40: 7572 6973 7469 632e 2044 6566 6175 6c74  uristic. Default
+00006f50: 7320 746f 2060 4f43 454c 4865 7572 6973  s to `OCELHeuris
+00006f60: 7469 6360 2e0a 2020 2020 2020 2020 2020  tic`..          
+00006f70: 2020 6974 6572 5f62 6f75 6e64 2028 696e    iter_bound (in
+00006f80: 7429 3a20 4c69 6d69 7420 746f 2073 746f  t): Limit to sto
+00006f90: 7020 7468 6520 616c 676f 7269 7468 6d20  p the algorithm 
+00006fa0: 6166 7465 7220 6e20 7265 6669 6e65 6d65  after n refineme
+00006fb0: 6e74 2073 7465 7073 2061 7265 2064 6f6e  nt steps are don
+00006fc0: 652e 2044 6566 6175 6c74 7320 746f 2031  e. Defaults to 1
+00006fd0: 3027 3030 302e 0a20 2020 2020 2020 2020  0'000..         
+00006fe0: 2020 206b 6e6f 776c 6564 6765 5f62 6173     knowledge_bas
+00006ff0: 6520 284b 6e6f 776c 6564 6765 4261 7365  e (KnowledgeBase
+00007000: 293a 2054 6865 206b 6e6f 776c 6564 6765  ): The knowledge
+00007010: 2062 6173 6520 7468 6174 2074 6865 2063   base that the c
+00007020: 6f6e 6365 7074 206c 6561 726e 6572 2069  oncept learner i
+00007030: 7320 7573 696e 672e 0a20 2020 2020 2020  s using..       
+00007040: 2020 2020 206d 6178 5f6e 756d 5f6f 665f       max_num_of_
+00007050: 636f 6e63 6570 7473 5f74 6573 7465 6420  concepts_tested 
+00007060: 2869 6e74 2920 4c69 6d69 7420 746f 2073  (int) Limit to s
+00007070: 746f 7020 7468 6520 616c 676f 7269 7468  top the algorith
+00007080: 6d20 6166 7465 7220 6e20 636f 6e63 6570  m after n concep
+00007090: 7473 2074 6573 7465 642e 2044 6566 6175  ts tested. Defau
+000070a0: 6c74 7320 746f 2031 3027 3030 302e 0a20  lts to 10'000.. 
+000070b0: 2020 2020 2020 2020 2020 206d 6178 5f72             max_r
+000070c0: 756e 7469 6d65 2028 696e 7429 3a20 4c69  untime (int): Li
+000070d0: 6d69 7420 746f 2073 746f 7020 7468 6520  mit to stop the 
+000070e0: 616c 676f 7269 7468 6d20 6166 7465 7220  algorithm after 
+000070f0: 6e20 7365 636f 6e64 732e 2044 6566 6175  n seconds. Defau
+00007100: 6c74 7320 746f 2035 2e0a 2020 2020 2020  lts to 5..      
+00007110: 2020 2020 2020 6d61 785f 7265 7375 6c74        max_result
+00007120: 7320 2869 6e74 293a 204d 6178 696d 756d  s (int): Maximum
+00007130: 2068 7970 6f74 6865 7369 7320 746f 2073   hypothesis to s
+00007140: 746f 7265 2e20 4465 6661 756c 7473 2074  tore. Defaults t
+00007150: 6f20 3130 2e0a 2020 2020 2020 2020 2020  o 10..          
+00007160: 2020 7175 616c 6974 795f 6675 6e63 2028    quality_func (
+00007170: 4162 7374 7261 6374 5363 6f72 6572 2920  AbstractScorer) 
+00007180: 5468 6520 7175 616c 6974 7920 6675 6e63  The quality func
+00007190: 7469 6f6e 2074 6f20 6265 2075 7365 642e  tion to be used.
+000071a0: 2044 6566 6175 6c74 7320 746f 2060 4631   Defaults to `F1
+000071b0: 602e 0a20 2020 2020 2020 2020 2020 2072  `..            r
+000071c0: 6561 736f 6e65 7220 284f 574c 5265 6173  easoner (OWLReas
+000071d0: 6f6e 6572 293a 204f 7074 696f 6e61 6c6c  oner): Optionall
+000071e0: 7920 7573 6520 6120 6469 6666 6572 656e  y use a differen
+000071f0: 7420 7265 6173 6f6e 6572 2e20 4966 2072  t reasoner. If r
+00007200: 6561 736f 6e65 723d 4e6f 6e65 2c20 7468  easoner=None, th
+00007210: 6520 7265 6173 6f6e 6572 206f 660a 2020  e reasoner of.  
+00007220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007240: 2020 7468 6520 3a61 7474 723a 606b 6e6f    the :attr:`kno
+00007250: 776c 6564 6765 5f62 6173 6560 2069 7320  wledge_base` is 
+00007260: 7573 6564 2e0a 2020 2020 2020 2020 2020  used..          
+00007270: 2020 7465 726d 696e 6174 655f 6f6e 5f67    terminate_on_g
+00007280: 6f61 6c20 2862 6f6f 6c29 3a20 5768 6574  oal (bool): Whet
+00007290: 6865 7220 746f 2073 746f 7020 7468 6520  her to stop the 
+000072a0: 616c 676f 7269 7468 6d20 6966 2061 2070  algorithm if a p
+000072b0: 6572 6665 6374 2073 6f6c 7574 696f 6e20  erfect solution 
+000072c0: 6973 2066 6f75 6e64 2e20 4465 6661 756c  is found. Defaul
+000072d0: 7473 2074 6f20 5472 7565 2e0a 0a0a 2020  ts to True....  
+000072e0: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
+000072f0: 2020 2069 6620 6865 7572 6973 7469 635f     if heuristic_
+00007300: 6675 6e63 2069 7320 4e6f 6e65 3a0a 2020  func is None:.  
+00007310: 2020 2020 2020 2020 2020 6865 7572 6973            heuris
+00007320: 7469 635f 6675 6e63 203d 204f 4345 4c48  tic_func = OCELH
+00007330: 6575 7269 7374 6963 2829 0a0a 2020 2020  euristic()..    
+00007340: 2020 2020 7375 7065 7228 292e 5f5f 696e      super().__in
+00007350: 6974 5f5f 286b 6e6f 776c 6564 6765 5f62  it__(knowledge_b
+00007360: 6173 653d 6b6e 6f77 6c65 6467 655f 6261  ase=knowledge_ba
+00007370: 7365 2c0a 2020 2020 2020 2020 2020 2020  se,.            
+00007380: 2020 2020 2020 2020 2020 2020 2072 6561               rea
+00007390: 736f 6e65 723d 7265 6173 6f6e 6572 2c0a  soner=reasoner,.
+000073a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000073b0: 2020 2020 2020 2020 2072 6566 696e 656d           refinem
+000073c0: 656e 745f 6f70 6572 6174 6f72 3d72 6566  ent_operator=ref
+000073d0: 696e 656d 656e 745f 6f70 6572 6174 6f72  inement_operator
+000073e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000073f0: 2020 2020 2020 2020 2020 2071 7561 6c69             quali
+00007400: 7479 5f66 756e 633d 7175 616c 6974 795f  ty_func=quality_
+00007410: 6675 6e63 2c0a 2020 2020 2020 2020 2020  func,.          
+00007420: 2020 2020 2020 2020 2020 2020 2020 2068                 h
+00007430: 6575 7269 7374 6963 5f66 756e 633d 6865  euristic_func=he
+00007440: 7572 6973 7469 635f 6675 6e63 2c0a 2020  uristic_func,.  
+00007450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007460: 2020 2020 2020 2074 6572 6d69 6e61 7465         terminate
+00007470: 5f6f 6e5f 676f 616c 3d74 6572 6d69 6e61  _on_goal=termina
+00007480: 7465 5f6f 6e5f 676f 616c 2c0a 2020 2020  te_on_goal,.    
+00007490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000074a0: 2020 2020 2069 7465 725f 626f 756e 643d       iter_bound=
+000074b0: 6974 6572 5f62 6f75 6e64 2c0a 2020 2020  iter_bound,.    
+000074c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000074d0: 2020 2020 206d 6178 5f6e 756d 5f6f 665f       max_num_of_
+000074e0: 636f 6e63 6570 7473 5f74 6573 7465 643d  concepts_tested=
+000074f0: 6d61 785f 6e75 6d5f 6f66 5f63 6f6e 6365  max_num_of_conce
+00007500: 7074 735f 7465 7374 6564 2c0a 2020 2020  pts_tested,.    
+00007510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007520: 2020 2020 206d 6178 5f72 756e 7469 6d65       max_runtime
+00007530: 3d6d 6178 5f72 756e 7469 6d65 2c0a 2020  =max_runtime,.  
+00007540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007550: 2020 2020 2020 206d 6178 5f72 6573 756c         max_resul
+00007560: 7473 3d6d 6178 5f72 6573 756c 7473 2c0a  ts=max_results,.
+00007570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007580: 2020 2020 2020 2020 2062 6573 745f 6f6e           best_on
+00007590: 6c79 3d62 6573 745f 6f6e 6c79 2c0a 2020  ly=best_only,.  
+000075a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000075b0: 2020 2020 2020 2063 616c 6375 6c61 7465         calculate
+000075c0: 5f6d 696e 5f6d 6178 3d63 616c 6375 6c61  _min_max=calcula
+000075d0: 7465 5f6d 696e 5f6d 6178 290a 0a20 2020  te_min_max)..   
+000075e0: 2064 6566 206d 616b 655f 6e6f 6465 2873   def make_node(s
+000075f0: 656c 662c 2063 3a20 4f57 4c43 6c61 7373  elf, c: OWLClass
+00007600: 4578 7072 6573 7369 6f6e 2c20 7061 7265  Expression, pare
+00007610: 6e74 5f6e 6f64 653a 204f 7074 696f 6e61  nt_node: Optiona
+00007620: 6c5b 4f45 4e6f 6465 5d20 3d20 4e6f 6e65  l[OENode] = None
+00007630: 2c20 6973 5f72 6f6f 743a 2062 6f6f 6c20  , is_root: bool 
+00007640: 3d20 4661 6c73 6529 202d 3e20 4f45 4e6f  = False) -> OENo
+00007650: 6465 3a0a 2020 2020 2020 2020 2222 220a  de:.        """.
+00007660: 2020 2020 2020 2020 4372 6561 7465 2061          Create a
+00007670: 206e 6f64 6520 666f 7220 4f43 454c 2e0a   node for OCEL..
+00007680: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+00007690: 2020 2020 2020 2020 2020 2063 3a20 5468             c: Th
+000076a0: 6520 636c 6173 7320 6578 7072 6573 7369  e class expressi
+000076b0: 6f6e 206f 6620 7468 6973 206e 6f64 652e  on of this node.
+000076c0: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
+000076d0: 656e 745f 6e6f 6465 3a20 5061 7265 6e74  ent_node: Parent
+000076e0: 206e 6f64 652e 0a20 2020 2020 2020 2020   node..         
+000076f0: 2020 2069 735f 726f 6f74 3a20 4973 2074     is_root: Is t
+00007700: 6869 7320 7468 6520 726f 6f74 206e 6f64  his the root nod
+00007710: 653f 0a0a 2020 2020 2020 2020 5265 7475  e?..        Retu
+00007720: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
+00007730: 204f 454e 6f64 653a 2054 6865 206e 6f64   OENode: The nod
+00007740: 652e 0a20 2020 2020 2020 2022 2222 0a20  e..        """. 
+00007750: 2020 2020 2020 2061 7373 6572 7420 7061         assert pa
+00007760: 7265 6e74 5f6e 6f64 6520 6973 204e 6f6e  rent_node is Non
+00007770: 6520 6f72 2069 7369 6e73 7461 6e63 6528  e or isinstance(
+00007780: 7061 7265 6e74 5f6e 6f64 652c 204c 424c  parent_node, LBL
+00007790: 4e6f 6465 290a 2020 2020 2020 2020 7220  Node).        r 
+000077a0: 3d20 4c42 4c4e 6f64 6528 632c 2073 656c  = LBLNode(c, sel
+000077b0: 662e 6b62 2e63 6f6e 6365 7074 5f6c 656e  f.kb.concept_len
+000077c0: 2863 292c 2073 656c 662e 6b62 2e69 6e64  (c), self.kb.ind
+000077d0: 6976 6964 7561 6c73 5f73 6574 2863 292c  ividuals_set(c),
+000077e0: 2070 6172 656e 745f 6e6f 6465 3d70 6172   parent_node=par
+000077f0: 656e 745f 6e6f 6465 2c20 6973 5f72 6f6f  ent_node, is_roo
+00007800: 743d 6973 5f72 6f6f 7429 0a20 2020 2020  t=is_root).     
+00007810: 2020 2069 6620 7061 7265 6e74 5f6e 6f64     if parent_nod
+00007820: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+00007830: 2020 2020 2020 2020 2020 2070 6172 656e             paren
+00007840: 745f 6e6f 6465 2e61 6464 5f63 6869 6c64  t_node.add_child
+00007850: 2872 290a 2020 2020 2020 2020 7265 7475  (r).        retu
+00007860: 726e 2072 0a0a 0a63 6c61 7373 2045 766f  rn r...class Evo
+00007870: 4c65 6172 6e65 7228 4261 7365 436f 6e63  Learner(BaseConc
+00007880: 6570 744c 6561 726e 6572 5b45 766f 4c65  eptLearner[EvoLe
+00007890: 6172 6e65 724e 6f64 655d 293a 0a20 2020  arnerNode]):.   
+000078a0: 2022 2222 416e 2065 766f 6c75 7469 6f6e   """An evolution
+000078b0: 6172 7920 6170 7072 6f61 6368 2074 6f20  ary approach to 
+000078c0: 6c65 6172 6e20 636f 6e63 6570 7473 2069  learn concepts i
+000078d0: 6e20 414c 4351 2844 292e 0a0a 2020 2020  n ALCQ(D)...    
+000078e0: 4174 7472 6962 7574 6573 3a0a 2020 2020  Attributes:.    
+000078f0: 2020 2020 616c 676f 7269 7468 6d20 2841      algorithm (A
+00007900: 6273 7472 6163 7445 766f 6c75 7469 6f6e  bstractEvolution
+00007910: 6172 7941 6c67 6f72 6974 686d 293a 2054  aryAlgorithm): T
+00007920: 6865 2065 766f 6c75 7469 6f6e 6172 7920  he evolutionary 
+00007930: 616c 676f 7269 7468 6d2e 0a20 2020 2020  algorithm..     
+00007940: 2020 2063 6172 645f 6c69 6d69 7420 2869     card_limit (i
+00007950: 6e74 293a 2054 6865 2075 7070 6572 2063  nt): The upper c
+00007960: 6172 6469 6e61 6c69 7479 206c 696d 6974  ardinality limit
+00007970: 2069 6620 7573 696e 6720 6361 7264 696e   if using cardin
+00007980: 616c 6974 7920 7265 7374 7269 6374 696f  ality restrictio
+00007990: 6e20 6f6e 206f 626a 6563 7420 7072 6f70  n on object prop
+000079a0: 6572 7469 6573 2e0a 2020 2020 2020 2020  erties..        
+000079b0: 6669 746e 6573 735f 6675 6e63 2028 4162  fitness_func (Ab
+000079c0: 7374 7261 6374 4669 746e 6573 7329 3a20  stractFitness): 
+000079d0: 4669 746e 6573 7320 6675 6e63 7469 6f6e  Fitness function
+000079e0: 2e0a 2020 2020 2020 2020 6865 6967 6874  ..        height
+000079f0: 5f6c 696d 6974 2028 696e 7429 3a20 5468  _limit (int): Th
+00007a00: 6520 6d61 7869 6d75 6d20 7661 6c75 6520  e maximum value 
+00007a10: 616c 6c6f 7765 6420 666f 7220 7468 6520  allowed for the 
+00007a20: 6865 6967 6874 206f 6620 7468 6520 4372  height of the Cr
+00007a30: 6f73 736f 7665 7220 616e 6420 4d75 7461  ossover and Muta
+00007a40: 7469 6f6e 206f 7065 7261 7469 6f6e 732e  tion operations.
+00007a50: 0a20 2020 2020 2020 2069 6e69 745f 6d65  .        init_me
+00007a60: 7468 6f64 2028 4162 7374 7261 6374 4541  thod (AbstractEA
+00007a70: 496e 6974 6961 6c69 7a61 7469 6f6e 293a  Initialization):
+00007a80: 2054 6865 2065 766f 6c75 7469 6f6e 6172   The evolutionar
+00007a90: 7920 616c 676f 7269 7468 6d20 696e 6974  y algorithm init
+00007aa0: 6961 6c69 7a61 7469 6f6e 206d 6574 686f  ialization metho
+00007ab0: 642e 0a20 2020 2020 2020 206b 6220 284b  d..        kb (K
+00007ac0: 6e6f 776c 6564 6765 4261 7365 293a 2054  nowledgeBase): T
+00007ad0: 6865 206b 6e6f 776c 6564 6765 2062 6173  he knowledge bas
+00007ae0: 6520 7468 6174 2074 6865 2063 6f6e 6365  e that the conce
+00007af0: 7074 206c 6561 726e 6572 2069 7320 7573  pt learner is us
+00007b00: 696e 672e 0a20 2020 2020 2020 206d 6178  ing..        max
+00007b10: 5f6e 756d 5f6f 665f 636f 6e63 6570 7473  _num_of_concepts
+00007b20: 5f74 6573 7465 6420 2869 6e74 293a 204c  _tested (int): L
+00007b30: 696d 6974 2074 6f20 7374 6f70 2074 6865  imit to stop the
+00007b40: 2061 6c67 6f72 6974 686d 2061 6674 6572   algorithm after
+00007b50: 206e 2063 6f6e 6365 7074 7320 7465 7374   n concepts test
+00007b60: 6564 2e0a 2020 2020 2020 2020 6d61 785f  ed..        max_
+00007b70: 7275 6e74 696d 6520 2869 6e74 293a 206d  runtime (int): m
+00007b80: 6178 5f72 756e 7469 6d65 3a20 4c69 6d69  ax_runtime: Limi
+00007b90: 7420 746f 2073 746f 7020 7468 6520 616c  t to stop the al
+00007ba0: 676f 7269 7468 6d20 6166 7465 7220 6e20  gorithm after n 
+00007bb0: 7365 636f 6e64 732e 0a20 2020 2020 2020  seconds..       
+00007bc0: 206d 7574 5f75 6e69 666f 726d 5f67 656e   mut_uniform_gen
+00007bd0: 2028 4162 7374 7261 6374 4541 496e 6974   (AbstractEAInit
+00007be0: 6961 6c69 7a61 7469 6f6e 293a 2054 6865  ialization): The
+00007bf0: 2069 6e69 7469 616c 697a 6174 696f 6e20   initialization 
+00007c00: 6d65 7468 6f64 2074 6f20 6372 6561 7465  method to create
+00007c10: 2074 6865 2074 7265 6520 666f 7220 6d75   the tree for mu
+00007c20: 7461 7469 6f6e 206f 7065 7261 7469 6f6e  tation operation
+00007c30: 2e0a 2020 2020 2020 2020 6e61 6d65 2028  ..        name (
+00007c40: 7374 7229 3a20 4e61 6d65 206f 6620 7468  str): Name of th
+00007c50: 6520 6d6f 6465 6c20 3d20 2765 766f 6c65  e model = 'evole
+00007c60: 6172 6e65 7227 2e0a 2020 2020 2020 2020  arner'..        
+00007c70: 6e75 6d5f 6765 6e65 7261 7469 6f6e 7320  num_generations 
+00007c80: 2869 6e74 293a 204e 756d 6265 7220 6f66  (int): Number of
+00007c90: 2067 656e 6572 6174 696f 6e20 666f 7220   generation for 
+00007ca0: 7468 6520 6576 6f6c 7574 696f 6e61 7279  the evolutionary
+00007cb0: 2061 6c67 6f72 6974 686d 2e0a 2020 2020   algorithm..    
+00007cc0: 2020 2020 5f6e 756d 6265 725f 6f66 5f74      _number_of_t
+00007cd0: 6573 7465 645f 636f 6e63 6570 7473 2028  ested_concepts (
+00007ce0: 696e 7429 3a20 5965 732c 2079 6f75 2067  int): Yes, you g
+00007cf0: 6f74 2069 742e 2054 6869 7320 7374 6f72  ot it. This stor
+00007d00: 6573 2074 6865 206e 756d 6265 7220 6f66  es the number of
+00007d10: 2074 6573 7465 6420 636f 6e63 6570 7473   tested concepts
+00007d20: 2e0a 2020 2020 2020 2020 706f 7075 6c61  ..        popula
+00007d30: 7469 6f6e 5f73 697a 6520 2869 6e74 293a  tion_size (int):
+00007d40: 2050 6f70 756c 6174 696f 6e20 7369 7a65   Population size
+00007d50: 2066 6f72 2074 6865 2065 766f 6c75 7469   for the evoluti
+00007d60: 6f6e 6172 7920 616c 676f 7269 7468 6d2e  onary algorithm.
+00007d70: 0a20 2020 2020 2020 2070 7365 7420 2867  .        pset (g
+00007d80: 702e 5072 696d 6974 6976 6553 6574 5479  p.PrimitiveSetTy
+00007d90: 7065 6429 3a20 436f 6e74 6169 6e73 2074  ped): Contains t
+00007da0: 6865 2070 7269 6d69 7469 7665 7320 7468  he primitives th
+00007db0: 6174 2063 616e 2062 6520 7573 6564 2074  at can be used t
+00007dc0: 6f20 736f 6c76 6520 6120 5374 726f 6e67  o solve a Strong
+00007dd0: 6c79 2054 7970 6564 2047 5020 7072 6f62  ly Typed GP prob
+00007de0: 6c65 6d2e 0a20 2020 2020 2020 2071 7561  lem..        qua
+00007df0: 6c69 7479 5f66 756e 633a 2046 756e 6374  lity_func: Funct
+00007e00: 696f 6e20 746f 2065 7661 6c75 6174 6520  ion to evaluate 
+00007e10: 7468 6520 7175 616c 6974 7920 6f66 2073  the quality of s
+00007e20: 6f6c 7574 696f 6e20 636f 6e63 6570 7473  olution concepts
+00007e30: 2e0a 2020 2020 2020 2020 7265 6173 6f6e  ..        reason
+00007e40: 6572 2028 4f57 4c52 6561 736f 6e65 7229  er (OWLReasoner)
+00007e50: 3a20 5468 6520 7265 6173 6f6e 6572 2074  : The reasoner t
+00007e60: 6861 7420 7468 6973 206d 6f64 656c 2069  hat this model i
+00007e70: 7320 7573 696e 672e 0a20 2020 2020 2020  s using..       
+00007e80: 2073 7461 7274 5f74 696d 6520 2866 6c6f   start_time (flo
+00007e90: 6174 293a 2054 6865 2074 696d 6520 7768  at): The time wh
+00007ea0: 656e 203a 6d65 7468 3a60 6669 7460 2073  en :meth:`fit` s
+00007eb0: 7461 7274 7320 7468 6520 6578 6563 7574  tarts the execut
+00007ec0: 696f 6e2e 2055 7365 6420 746f 2063 616c  ion. Used to cal
+00007ed0: 6375 6c61 7465 2074 6865 2074 6f74 616c  culate the total
+00007ee0: 2074 696d 6520 3a6d 6574 683a 6066 6974   time :meth:`fit
+00007ef0: 600a 2020 2020 2020 2020 2020 2020 2020  `.              
+00007f00: 2020 2020 2020 2020 2020 2020 2020 7461                ta
+00007f10: 6b65 7320 746f 2065 7865 6375 7465 2e0a  kes to execute..
+00007f20: 2020 2020 2020 2020 7465 726d 696e 6174          terminat
+00007f30: 655f 6f6e 5f67 6f61 6c20 2862 6f6f 6c29  e_on_goal (bool)
+00007f40: 3a20 5768 6574 6865 7220 746f 2073 746f  : Whether to sto
+00007f50: 7020 7468 6520 616c 676f 7269 7468 6d20  p the algorithm 
+00007f60: 6966 2061 2070 6572 6665 6374 2073 6f6c  if a perfect sol
+00007f70: 7574 696f 6e20 6973 2066 6f75 6e64 2e0a  ution is found..
+00007f80: 2020 2020 2020 2020 746f 6f6c 626f 7820          toolbox 
+00007f90: 2862 6173 652e 546f 6f6c 626f 7829 3a20  (base.Toolbox): 
+00007fa0: 4120 746f 6f6c 626f 7820 666f 7220 6576  A toolbox for ev
+00007fb0: 6f6c 7574 696f 6e20 7468 6174 2063 6f6e  olution that con
+00007fc0: 7461 696e 7320 7468 6520 6576 6f6c 7574  tains the evolut
+00007fd0: 696f 6e61 7279 206f 7065 7261 746f 7273  ionary operators
+00007fe0: 2e0a 2020 2020 2020 2020 746f 7572 6e61  ..        tourna
+00007ff0: 6d65 6e74 5f73 697a 6520 2869 6e74 293a  ment_size (int):
+00008000: 2054 6865 206e 756d 6265 7220 6f66 2065   The number of e
+00008010: 766f 6c75 7469 6f6e 6172 7920 696e 6469  volutionary indi
+00008020: 7669 6475 616c 7320 7061 7274 6963 6970  viduals particip
+00008030: 6174 696e 6720 696e 2065 6163 6820 746f  ating in each to
+00008040: 7572 6e61 6d65 6e74 2e0a 2020 2020 2020  urnament..      
+00008050: 2020 7573 655f 6361 7264 5f72 6573 7472    use_card_restr
+00008060: 6963 7469 6f6e 7320 2862 6f6f 6c29 3a20  ictions (bool): 
+00008070: 5573 6520 6361 7264 696e 616c 6974 7920  Use cardinality 
+00008080: 7265 7374 7269 6374 696f 6e20 666f 7220  restriction for 
+00008090: 6f62 6a65 6374 2070 726f 7065 7274 6965  object propertie
+000080a0: 733f 0a20 2020 2020 2020 2075 7365 5f64  s?.        use_d
+000080b0: 6174 615f 7072 6f70 6572 7469 6573 2028  ata_properties (
+000080c0: 626f 6f6c 293a 2043 6f6e 7369 6465 7220  bool): Consider 
+000080d0: 6461 7461 2070 726f 7065 7274 6965 733f  data properties?
+000080e0: 0a20 2020 2020 2020 2075 7365 5f69 6e76  .        use_inv
+000080f0: 6572 7365 2028 626f 6f6c 293a 2043 6f6e  erse (bool): Con
+00008100: 7369 6465 7220 696e 7665 7273 6564 2063  sider inversed c
+00008110: 6f6e 6365 7074 733f 0a20 2020 2020 2020  oncepts?.       
+00008120: 2076 616c 7565 5f73 706c 6974 7465 7220   value_splitter 
+00008130: 2841 6273 7472 6163 7456 616c 7565 5370  (AbstractValueSp
+00008140: 6c69 7474 6572 293a 2055 7365 6420 746f  litter): Used to
+00008150: 2063 616c 6375 6c61 7465 2074 6865 2073   calculate the s
+00008160: 706c 6974 7320 666f 7220 6461 7461 2070  plits for data p
+00008170: 726f 7065 7274 6965 7320 7661 6c75 6573  roperties values
+00008180: 2e0a 0a0a 0a20 2020 2022 2222 0a0a 2020  .....    """..  
+00008190: 2020 5f5f 736c 6f74 735f 5f20 3d20 2766    __slots__ = 'f
+000081a0: 6974 6e65 7373 5f66 756e 6327 2c20 2769  itness_func', 'i
+000081b0: 6e69 745f 6d65 7468 6f64 272c 2027 616c  nit_method', 'al
+000081c0: 676f 7269 7468 6d27 2c20 2776 616c 7565  gorithm', 'value
+000081d0: 5f73 706c 6974 7465 7227 2c20 2774 6f75  _splitter', 'tou
+000081e0: 726e 616d 656e 745f 7369 7a65 272c 205c  rnament_size', \
+000081f0: 0a20 2020 2020 2020 2027 706f 7075 6c61  .        'popula
+00008200: 7469 6f6e 5f73 697a 6527 2c20 276e 756d  tion_size', 'num
+00008210: 5f67 656e 6572 6174 696f 6e73 272c 2027  _generations', '
+00008220: 6865 6967 6874 5f6c 696d 6974 272c 2027  height_limit', '
+00008230: 7573 655f 6461 7461 5f70 726f 7065 7274  use_data_propert
+00008240: 6965 7327 2c20 2770 7365 7427 2c20 2774  ies', 'pset', 't
+00008250: 6f6f 6c62 6f78 272c 205c 0a20 2020 2020  oolbox', \.     
+00008260: 2020 2027 5f6c 6561 726e 696e 675f 7072     '_learning_pr
+00008270: 6f62 6c65 6d27 2c20 275f 7265 7375 6c74  oblem', '_result
+00008280: 5f70 6f70 756c 6174 696f 6e27 2c20 276d  _population', 'm
+00008290: 7574 5f75 6e69 666f 726d 5f67 656e 272c  ut_uniform_gen',
+000082a0: 2027 5f64 705f 746f 5f70 7269 6d5f 7479   '_dp_to_prim_ty
+000082b0: 7065 272c 2027 5f64 705f 7370 6c69 7473  pe', '_dp_splits
+000082c0: 272c 205c 0a20 2020 2020 2020 2027 5f73  ', \.        '_s
+000082d0: 706c 6974 5f70 726f 7065 7274 6965 7327  plit_properties'
+000082e0: 2c20 275f 6361 6368 6527 2c20 2775 7365  , '_cache', 'use
+000082f0: 5f63 6172 645f 7265 7374 7269 6374 696f  _card_restrictio
+00008300: 6e73 272c 2027 6361 7264 5f6c 696d 6974  ns', 'card_limit
+00008310: 272c 2027 7573 655f 696e 7665 7273 6527  ', 'use_inverse'
+00008320: 2c20 2774 6f74 616c 5f66 6974 7327 0a0a  , 'total_fits'..
+00008330: 2020 2020 6e61 6d65 203d 2027 6576 6f6c      name = 'evol
+00008340: 6561 726e 6572 270a 0a20 2020 206b 623a  earner'..    kb:
+00008350: 204b 6e6f 776c 6564 6765 4261 7365 0a20   KnowledgeBase. 
+00008360: 2020 2066 6974 6e65 7373 5f66 756e 633a     fitness_func:
+00008370: 2041 6273 7472 6163 7446 6974 6e65 7373   AbstractFitness
+00008380: 0a20 2020 2069 6e69 745f 6d65 7468 6f64  .    init_method
+00008390: 3a20 4162 7374 7261 6374 4541 496e 6974  : AbstractEAInit
+000083a0: 6961 6c69 7a61 7469 6f6e 0a20 2020 2061  ialization.    a
+000083b0: 6c67 6f72 6974 686d 3a20 4162 7374 7261  lgorithm: Abstra
+000083c0: 6374 4576 6f6c 7574 696f 6e61 7279 416c  ctEvolutionaryAl
+000083d0: 676f 7269 7468 6d0a 2020 2020 6d75 745f  gorithm.    mut_
+000083e0: 756e 6966 6f72 6d5f 6765 6e3a 2041 6273  uniform_gen: Abs
+000083f0: 7472 6163 7445 4149 6e69 7469 616c 697a  tractEAInitializ
+00008400: 6174 696f 6e0a 2020 2020 7661 6c75 655f  ation.    value_
+00008410: 7370 6c69 7474 6572 3a20 4162 7374 7261  splitter: Abstra
+00008420: 6374 5661 6c75 6553 706c 6974 7465 720a  ctValueSplitter.
+00008430: 2020 2020 7573 655f 6461 7461 5f70 726f      use_data_pro
+00008440: 7065 7274 6965 733a 2062 6f6f 6c0a 2020  perties: bool.  
+00008450: 2020 7573 655f 6361 7264 5f72 6573 7472    use_card_restr
+00008460: 6963 7469 6f6e 733a 2062 6f6f 6c0a 2020  ictions: bool.  
+00008470: 2020 7573 655f 696e 7665 7273 653a 2062    use_inverse: b
+00008480: 6f6f 6c0a 2020 2020 746f 7572 6e61 6d65  ool.    tourname
+00008490: 6e74 5f73 697a 653a 2069 6e74 0a20 2020  nt_size: int.   
+000084a0: 2063 6172 645f 6c69 6d69 743a 2069 6e74   card_limit: int
+000084b0: 0a20 2020 2070 6f70 756c 6174 696f 6e5f  .    population_
+000084c0: 7369 7a65 3a20 696e 740a 2020 2020 6e75  size: int.    nu
+000084d0: 6d5f 6765 6e65 7261 7469 6f6e 733a 2069  m_generations: i
+000084e0: 6e74 0a20 2020 2068 6569 6768 745f 6c69  nt.    height_li
+000084f0: 6d69 743a 2069 6e74 0a0a 2020 2020 7073  mit: int..    ps
+00008500: 6574 3a20 6770 2e50 7269 6d69 7469 7665  et: gp.Primitive
+00008510: 5365 7454 7970 6564 0a20 2020 2074 6f6f  SetTyped.    too
+00008520: 6c62 6f78 3a20 6261 7365 2e54 6f6f 6c62  lbox: base.Toolb
+00008530: 6f78 0a20 2020 205f 6c65 6172 6e69 6e67  ox.    _learning
+00008540: 5f70 726f 626c 656d 3a20 456e 636f 6465  _problem: Encode
+00008550: 6450 6f73 4e65 674c 5053 7461 6e64 6172  dPosNegLPStandar
+00008560: 640a 2020 2020 5f72 6573 756c 745f 706f  d.    _result_po
+00008570: 7075 6c61 7469 6f6e 3a20 4f70 7469 6f6e  pulation: Option
+00008580: 616c 5b4c 6973 745b 5472 6565 5d5d 0a20  al[List[Tree]]. 
+00008590: 2020 205f 6470 5f74 6f5f 7072 696d 5f74     _dp_to_prim_t
+000085a0: 7970 653a 2044 6963 745b 4f57 4c44 6174  ype: Dict[OWLDat
+000085b0: 6150 726f 7065 7274 792c 2041 6e79 5d0a  aProperty, Any].
+000085c0: 2020 2020 5f64 705f 7370 6c69 7473 3a20      _dp_splits: 
+000085d0: 4469 6374 5b4f 574c 4461 7461 5072 6f70  Dict[OWLDataProp
+000085e0: 6572 7479 2c20 4c69 7374 5b4f 574c 4c69  erty, List[OWLLi
+000085f0: 7465 7261 6c5d 5d0a 2020 2020 5f73 706c  teral]].    _spl
+00008600: 6974 5f70 726f 7065 7274 6965 733a 204c  it_properties: L
+00008610: 6973 745b 4f57 4c44 6174 6150 726f 7065  ist[OWLDataPrope
+00008620: 7274 795d 0a20 2020 205f 6361 6368 653a  rty].    _cache:
+00008630: 2044 6963 745b 7374 722c 2054 7570 6c65   Dict[str, Tuple
+00008640: 5b66 6c6f 6174 2c20 666c 6f61 745d 5d0a  [float, float]].
+00008650: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00008660: 5f28 7365 6c66 2c0a 2020 2020 2020 2020  _(self,.        
+00008670: 2020 2020 2020 2020 206b 6e6f 776c 6564           knowled
+00008680: 6765 5f62 6173 653a 204b 6e6f 776c 6564  ge_base: Knowled
+00008690: 6765 4261 7365 2c0a 2020 2020 2020 2020  geBase,.        
+000086a0: 2020 2020 2020 2020 2072 6561 736f 6e65           reasone
+000086b0: 723a 204f 7074 696f 6e61 6c5b 4f57 4c52  r: Optional[OWLR
+000086c0: 6561 736f 6e65 725d 203d 204e 6f6e 652c  easoner] = None,
+000086d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000086e0: 2020 7175 616c 6974 795f 6675 6e63 3a20    quality_func: 
+000086f0: 4f70 7469 6f6e 616c 5b41 6273 7472 6163  Optional[Abstrac
+00008700: 7453 636f 7265 725d 203d 204e 6f6e 652c  tScorer] = None,
+00008710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008720: 2020 6669 746e 6573 735f 6675 6e63 3a20    fitness_func: 
+00008730: 4f70 7469 6f6e 616c 5b41 6273 7472 6163  Optional[Abstrac
+00008740: 7446 6974 6e65 7373 5d20 3d20 4e6f 6e65  tFitness] = None
+00008750: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00008760: 2020 2069 6e69 745f 6d65 7468 6f64 3a20     init_method: 
+00008770: 4f70 7469 6f6e 616c 5b41 6273 7472 6163  Optional[Abstrac
+00008780: 7445 4149 6e69 7469 616c 697a 6174 696f  tEAInitializatio
+00008790: 6e5d 203d 204e 6f6e 652c 0a20 2020 2020  n] = None,.     
+000087a0: 2020 2020 2020 2020 2020 2020 616c 676f              algo
+000087b0: 7269 7468 6d3a 204f 7074 696f 6e61 6c5b  rithm: Optional[
+000087c0: 4162 7374 7261 6374 4576 6f6c 7574 696f  AbstractEvolutio
+000087d0: 6e61 7279 416c 676f 7269 7468 6d5d 203d  naryAlgorithm] =
+000087e0: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+000087f0: 2020 2020 2020 2020 6d75 745f 756e 6966          mut_unif
+00008800: 6f72 6d5f 6765 6e3a 204f 7074 696f 6e61  orm_gen: Optiona
+00008810: 6c5b 4162 7374 7261 6374 4541 496e 6974  l[AbstractEAInit
+00008820: 6961 6c69 7a61 7469 6f6e 5d20 3d20 4e6f  ialization] = No
+00008830: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
+00008840: 2020 2020 2076 616c 7565 5f73 706c 6974       value_split
+00008850: 7465 723a 204f 7074 696f 6e61 6c5b 4162  ter: Optional[Ab
+00008860: 7374 7261 6374 5661 6c75 6553 706c 6974  stractValueSplit
+00008870: 7465 725d 203d 204e 6f6e 652c 0a20 2020  ter] = None,.   
+00008880: 2020 2020 2020 2020 2020 2020 2020 7465                te
+00008890: 726d 696e 6174 655f 6f6e 5f67 6f61 6c3a  rminate_on_goal:
+000088a0: 204f 7074 696f 6e61 6c5b 626f 6f6c 5d20   Optional[bool] 
+000088b0: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
+000088c0: 2020 2020 2020 2020 206d 6178 5f72 756e           max_run
+000088d0: 7469 6d65 3a20 4f70 7469 6f6e 616c 5b69  time: Optional[i
+000088e0: 6e74 5d20 3d20 4e6f 6e65 2c0a 2020 2020  nt] = None,.    
+000088f0: 2020 2020 2020 2020 2020 2020 2075 7365               use
+00008900: 5f64 6174 615f 7072 6f70 6572 7469 6573  _data_properties
+00008910: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
+00008920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008930: 7573 655f 6361 7264 5f72 6573 7472 6963  use_card_restric
+00008940: 7469 6f6e 733a 2062 6f6f 6c20 3d20 5472  tions: bool = Tr
+00008950: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
+00008960: 2020 2020 2075 7365 5f69 6e76 6572 7365       use_inverse
+00008970: 3a20 626f 6f6c 203d 2046 616c 7365 2c0a  : bool = False,.
+00008980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008990: 2074 6f75 726e 616d 656e 745f 7369 7a65   tournament_size
+000089a0: 3a20 696e 7420 3d20 372c 0a20 2020 2020  : int = 7,.     
+000089b0: 2020 2020 2020 2020 2020 2020 6361 7264              card
+000089c0: 5f6c 696d 6974 3a20 696e 7420 3d20 3130  _limit: int = 10
+000089d0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000089e0: 2020 2070 6f70 756c 6174 696f 6e5f 7369     population_si
+000089f0: 7a65 3a20 696e 7420 3d20 3830 302c 0a20  ze: int = 800,. 
+00008a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008a10: 6e75 6d5f 6765 6e65 7261 7469 6f6e 733a  num_generations:
+00008a20: 2069 6e74 203d 2032 3030 2c0a 2020 2020   int = 200,.    
+00008a30: 2020 2020 2020 2020 2020 2020 2068 6569               hei
+00008a40: 6768 745f 6c69 6d69 743a 2069 6e74 203d  ght_limit: int =
+00008a50: 2031 3729 3a0a 2020 2020 2020 2020 2222   17):.        ""
+00008a60: 2220 4372 6561 7465 2061 206e 6577 2069  " Create a new i
+00008a70: 6e73 7461 6e63 6520 6f66 2045 766f 4c65  nstance of EvoLe
+00008a80: 6172 6e65 720a 0a20 2020 2020 2020 2041  arner..        A
+00008a90: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+00008aa0: 2061 6c67 6f72 6974 686d 2028 4162 7374   algorithm (Abst
+00008ab0: 7261 6374 4576 6f6c 7574 696f 6e61 7279  ractEvolutionary
+00008ac0: 416c 676f 7269 7468 6d29 3a20 5468 6520  Algorithm): The 
+00008ad0: 6576 6f6c 7574 696f 6e61 7279 2061 6c67  evolutionary alg
+00008ae0: 6f72 6974 686d 2e20 4465 6661 756c 7473  orithm. Defaults
+00008af0: 2074 6f20 6045 4153 696d 706c 6560 2e0a   to `EASimple`..
+00008b00: 2020 2020 2020 2020 2020 2020 6361 7264              card
+00008b10: 5f6c 696d 6974 2028 696e 7429 3a20 5468  _limit (int): Th
+00008b20: 6520 7570 7065 7220 6361 7264 696e 616c  e upper cardinal
+00008b30: 6974 7920 6c69 6d69 7420 6966 2075 7369  ity limit if usi
+00008b40: 6e67 2063 6172 6469 6e61 6c69 7479 2072  ng cardinality r
+00008b50: 6573 7472 6963 7469 6f6e 2066 6f72 206f  estriction for o
+00008b60: 626a 6563 7420 7072 6f70 6572 7469 6573  bject properties
+00008b70: 2e20 4465 6661 756c 7473 2074 6f20 3130  . Defaults to 10
+00008b80: 2e0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
+00008b90: 746e 6573 735f 6675 6e63 2028 4162 7374  tness_func (Abst
+00008ba0: 7261 6374 4669 746e 6573 7329 3a20 4669  ractFitness): Fi
+00008bb0: 746e 6573 7320 6675 6e63 7469 6f6e 2e20  tness function. 
+00008bc0: 4465 6661 756c 7473 2074 6f20 604c 696e  Defaults to `Lin
+00008bd0: 6561 7250 7265 7373 7572 6546 6974 6e65  earPressureFitne
+00008be0: 7373 602e 0a20 2020 2020 2020 2020 2020  ss`..           
+00008bf0: 2068 6569 6768 745f 6c69 6d69 7420 2869   height_limit (i
+00008c00: 6e74 293a 2054 6865 206d 6178 696d 756d  nt): The maximum
+00008c10: 2076 616c 7565 2061 6c6c 6f77 6564 2066   value allowed f
+00008c20: 6f72 2074 6865 2068 6569 6768 7420 6f66  or the height of
+00008c30: 2074 6865 2043 726f 7373 6f76 6572 2061   the Crossover a
+00008c40: 6e64 204d 7574 6174 696f 6e20 6f70 6572  nd Mutation oper
+00008c50: 6174 696f 6e73 2e0a 2020 2020 2020 2020  ations..        
 00008c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008c80: 2020 2020 2020 2020 2074 6f20 4541 5261           to EARa
-00008c90: 6e64 6f6d 5761 6c6b 496e 6974 6961 6c69  ndomWalkInitiali
-00008ca0: 7a61 7469 6f6e 2e0a 2020 2020 2020 2020  zation..        
-00008cb0: 2020 2020 6b6e 6f77 6c65 6467 655f 6261      knowledge_ba
-00008cc0: 7365 2028 4b6e 6f77 6c65 6467 6542 6173  se (KnowledgeBas
-00008cd0: 6529 3a20 5468 6520 6b6e 6f77 6c65 6467  e): The knowledg
-00008ce0: 6520 6261 7365 2074 6861 7420 7468 6520  e base that the 
-00008cf0: 636f 6e63 6570 7420 6c65 6172 6e65 7220  concept learner 
-00008d00: 6973 2075 7369 6e67 2e0a 2020 2020 2020  is using..      
-00008d10: 2020 2020 2020 6d61 785f 7275 6e74 696d        max_runtim
-00008d20: 6520 2869 6e74 293a 206d 6178 5f72 756e  e (int): max_run
-00008d30: 7469 6d65 3a20 4c69 6d69 7420 746f 2073  time: Limit to s
-00008d40: 746f 7020 7468 6520 616c 676f 7269 7468  top the algorith
-00008d50: 6d20 6166 7465 7220 6e20 7365 636f 6e64  m after n second
-00008d60: 732e 2044 6566 6175 6c74 7320 746f 2035  s. Defaults to 5
-00008d70: 2e0a 2020 2020 2020 2020 2020 2020 6d75  ..            mu
-00008d80: 745f 756e 6966 6f72 6d5f 6765 6e20 2841  t_uniform_gen (A
-00008d90: 6273 7472 6163 7445 4149 6e69 7469 616c  bstractEAInitial
-00008da0: 697a 6174 696f 6e29 3a20 5468 6520 696e  ization): The in
-00008db0: 6974 6961 6c69 7a61 7469 6f6e 206d 6574  itialization met
-00008dc0: 686f 6420 746f 2063 7265 6174 6520 7468  hod to create th
-00008dd0: 6520 7472 6565 2066 6f72 206d 7574 6174  e tree for mutat
-00008de0: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
-00008df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e10: 2020 2020 2020 2020 2020 2020 6f70 6572              oper
-00008e20: 6174 696f 6e2e 2044 6566 6175 6c74 7320  ation. Defaults 
-00008e30: 746f 0a20 2020 2020 2020 2020 2020 2020  to.             
-00008e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e60: 2020 2020 2020 2020 2020 2045 4152 616e             EARan
-00008e70: 646f 6d49 6e69 7469 616c 697a 6174 696f  domInitializatio
-00008e80: 6e28 6d69 6e5f 6865 6967 6874 3d31 2c20  n(min_height=1, 
-00008e90: 6d61 785f 6865 6967 6874 3d33 292e 0a20  max_height=3).. 
-00008ea0: 2020 2020 2020 2020 2020 206e 756d 5f67             num_g
-00008eb0: 656e 6572 6174 696f 6e73 2028 696e 7429  enerations (int)
-00008ec0: 3a20 4e75 6d62 6572 206f 6620 6765 6e65  : Number of gene
-00008ed0: 7261 7469 6f6e 2066 6f72 2074 6865 2065  ration for the e
-00008ee0: 766f 6c75 7469 6f6e 6172 7920 616c 676f  volutionary algo
-00008ef0: 7269 7468 6d2e 2044 6566 6175 6c74 7320  rithm. Defaults 
-00008f00: 746f 2032 3030 2e0a 2020 2020 2020 2020  to 200..        
-00008f10: 2020 2020 706f 7075 6c61 7469 6f6e 5f73      population_s
-00008f20: 697a 6520 2869 6e74 293a 2050 6f70 756c  ize (int): Popul
-00008f30: 6174 696f 6e20 7369 7a65 2066 6f72 2074  ation size for t
-00008f40: 6865 2065 766f 6c75 7469 6f6e 6172 7920  he evolutionary 
-00008f50: 616c 676f 7269 7468 6d2e 2044 6566 6175  algorithm. Defau
-00008f60: 6c74 7320 746f 2038 3030 2e0a 2020 2020  lts to 800..    
-00008f70: 2020 2020 2020 2020 7175 616c 6974 795f          quality_
-00008f80: 6675 6e63 3a20 4675 6e63 7469 6f6e 2074  func: Function t
-00008f90: 6f20 6576 616c 7561 7465 2074 6865 2071  o evaluate the q
-00008fa0: 7561 6c69 7479 206f 6620 736f 6c75 7469  uality of soluti
-00008fb0: 6f6e 2063 6f6e 6365 7074 732e 2044 6566  on concepts. Def
-00008fc0: 6175 6c74 7320 746f 2060 4163 6375 7261  aults to `Accura
-00008fd0: 6379 602e 0a20 2020 2020 2020 2020 2020  cy`..           
-00008fe0: 2072 6561 736f 6e65 7220 284f 574c 5265   reasoner (OWLRe
-00008ff0: 6173 6f6e 6572 293a 204f 7074 696f 6e61  asoner): Optiona
-00009000: 6c6c 7920 7573 6520 6120 6469 6666 6572  lly use a differ
-00009010: 656e 7420 7265 6173 6f6e 6572 2e20 4966  ent reasoner. If
-00009020: 2072 6561 736f 6e65 723d 4e6f 6e65 2c20   reasoner=None, 
-00009030: 7468 6520 7265 6173 6f6e 6572 206f 660a  the reasoner of.
-00009040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009060: 2020 2020 7468 6520 3a61 7474 723a 606b      the :attr:`k
-00009070: 6e6f 776c 6564 6765 5f62 6173 6560 2069  nowledge_base` i
-00009080: 7320 7573 6564 2e0a 2020 2020 2020 2020  s used..        
-00009090: 2020 2020 7465 726d 696e 6174 655f 6f6e      terminate_on
-000090a0: 5f67 6f61 6c20 2862 6f6f 6c29 3a20 5768  _goal (bool): Wh
-000090b0: 6574 6865 7220 746f 2073 746f 7020 7468  ether to stop th
-000090c0: 6520 616c 676f 7269 7468 6d20 6966 2061  e algorithm if a
-000090d0: 2070 6572 6665 6374 2073 6f6c 7574 696f   perfect solutio
-000090e0: 6e20 6973 2066 6f75 6e64 2e20 4465 6661  n is found. Defa
-000090f0: 756c 7473 2074 6f20 5472 7565 2e0a 2020  ults to True..  
-00009100: 2020 2020 2020 2020 2020 746f 7572 6e61            tourna
-00009110: 6d65 6e74 5f73 697a 6520 2869 6e74 293a  ment_size (int):
-00009120: 2054 6865 206e 756d 6265 7220 6f66 2065   The number of e
-00009130: 766f 6c75 7469 6f6e 6172 7920 696e 6469  volutionary indi
-00009140: 7669 6475 616c 7320 7061 7274 6963 6970  viduals particip
-00009150: 6174 696e 6720 696e 2065 6163 6820 746f  ating in each to
-00009160: 7572 6e61 6d65 6e74 2e0a 2020 2020 2020  urnament..      
-00009170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009180: 2020 2020 2020 2020 2020 2020 2020 4465                De
-00009190: 6661 756c 7473 2074 6f20 372e 0a20 2020  faults to 7..   
-000091a0: 2020 2020 2020 2020 2075 7365 5f63 6172           use_car
-000091b0: 645f 7265 7374 7269 6374 696f 6e73 2028  d_restrictions (
-000091c0: 626f 6f6c 293a 2055 7365 2063 6172 6469  bool): Use cardi
-000091d0: 6e61 6c69 7479 2072 6573 7472 6963 7469  nality restricti
-000091e0: 6f6e 2066 6f72 206f 626a 6563 7420 7072  on for object pr
-000091f0: 6f70 6572 7469 6573 3f20 4465 6661 756c  operties? Defaul
-00009200: 7420 746f 2054 7275 652e 0a20 2020 2020  t to True..     
-00009210: 2020 2020 2020 2075 7365 5f64 6174 615f         use_data_
-00009220: 7072 6f70 6572 7469 6573 2028 626f 6f6c  properties (bool
-00009230: 293a 2043 6f6e 7369 6465 7220 6461 7461  ): Consider data
-00009240: 2070 726f 7065 7274 6965 733f 2044 6566   properties? Def
-00009250: 6175 6c74 7320 746f 2054 7275 652e 0a20  aults to True.. 
-00009260: 2020 2020 2020 2020 2020 2075 7365 5f69             use_i
-00009270: 6e76 6572 7365 2028 626f 6f6c 293a 2043  nverse (bool): C
-00009280: 6f6e 7369 6465 7220 696e 7665 7273 6564  onsider inversed
-00009290: 2063 6f6e 6365 7074 733f 2044 6566 6175   concepts? Defau
-000092a0: 6c74 7320 746f 2046 616c 7365 2e0a 2020  lts to False..  
-000092b0: 2020 2020 2020 2020 2020 7661 6c75 655f            value_
-000092c0: 7370 6c69 7474 6572 2028 4162 7374 7261  splitter (Abstra
-000092d0: 6374 5661 6c75 6553 706c 6974 7465 7229  ctValueSplitter)
-000092e0: 3a20 5573 6564 2074 6f20 6361 6c63 756c  : Used to calcul
-000092f0: 6174 6520 7468 6520 7370 6c69 7473 2066  ate the splits f
-00009300: 6f72 2064 6174 6120 7072 6f70 6572 7469  or data properti
-00009310: 6573 2076 616c 7565 732e 2044 6566 6175  es values. Defau
-00009320: 6c74 7320 746f 0a20 2020 2020 2020 2020  lts to.         
-00009330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009350: 2020 2020 2020 2060 456e 7472 6f70 7956         `EntropyV
-00009360: 616c 7565 5370 6c69 7474 6572 602e 0a20  alueSplitter`.. 
-00009370: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
-00009380: 2020 2020 6966 2071 7561 6c69 7479 5f66      if quality_f
-00009390: 756e 6320 6973 204e 6f6e 653a 0a20 2020  unc is None:.   
-000093a0: 2020 2020 2020 2020 2071 7561 6c69 7479           quality
-000093b0: 5f66 756e 6320 3d20 4163 6375 7261 6379  _func = Accuracy
-000093c0: 2829 0a0a 2020 2020 2020 2020 7375 7065  ()..        supe
-000093d0: 7228 292e 5f5f 696e 6974 5f5f 286b 6e6f  r().__init__(kno
-000093e0: 776c 6564 6765 5f62 6173 653d 6b6e 6f77  wledge_base=know
-000093f0: 6c65 6467 655f 6261 7365 2c0a 2020 2020  ledge_base,.    
-00009400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009410: 2020 2020 2072 6561 736f 6e65 723d 7265       reasoner=re
-00009420: 6173 6f6e 6572 2c0a 2020 2020 2020 2020  asoner,.        
-00009430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009440: 2071 7561 6c69 7479 5f66 756e 633d 7175   quality_func=qu
-00009450: 616c 6974 795f 6675 6e63 2c0a 2020 2020  ality_func,.    
-00009460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009470: 2020 2020 2074 6572 6d69 6e61 7465 5f6f       terminate_o
-00009480: 6e5f 676f 616c 3d74 6572 6d69 6e61 7465  n_goal=terminate
-00009490: 5f6f 6e5f 676f 616c 2c0a 2020 2020 2020  _on_goal,.      
+00008c70: 2020 2020 2020 2020 4465 6661 756c 7473          Defaults
+00008c80: 2074 6f20 3137 2e0a 2020 2020 2020 2020   to 17..        
+00008c90: 2020 2020 696e 6974 5f6d 6574 686f 6420      init_method 
+00008ca0: 2841 6273 7472 6163 7445 4149 6e69 7469  (AbstractEAIniti
+00008cb0: 616c 697a 6174 696f 6e29 3a20 5468 6520  alization): The 
+00008cc0: 6576 6f6c 7574 696f 6e61 7279 2061 6c67  evolutionary alg
+00008cd0: 6f72 6974 686d 2069 6e69 7469 616c 697a  orithm initializ
+00008ce0: 6174 696f 6e20 6d65 7468 6f64 2e20 4465  ation method. De
+00008cf0: 6661 756c 7473 0a20 2020 2020 2020 2020  faults.         
+00008d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008d20: 2020 2020 2020 2020 2020 2074 6f20 4541             to EA
+00008d30: 5261 6e64 6f6d 5761 6c6b 496e 6974 6961  RandomWalkInitia
+00008d40: 6c69 7a61 7469 6f6e 2e0a 2020 2020 2020  lization..      
+00008d50: 2020 2020 2020 6b6e 6f77 6c65 6467 655f        knowledge_
+00008d60: 6261 7365 2028 4b6e 6f77 6c65 6467 6542  base (KnowledgeB
+00008d70: 6173 6529 3a20 5468 6520 6b6e 6f77 6c65  ase): The knowle
+00008d80: 6467 6520 6261 7365 2074 6861 7420 7468  dge base that th
+00008d90: 6520 636f 6e63 6570 7420 6c65 6172 6e65  e concept learne
+00008da0: 7220 6973 2075 7369 6e67 2e0a 2020 2020  r is using..    
+00008db0: 2020 2020 2020 2020 6d61 785f 7275 6e74          max_runt
+00008dc0: 696d 6520 2869 6e74 293a 206d 6178 5f72  ime (int): max_r
+00008dd0: 756e 7469 6d65 3a20 4c69 6d69 7420 746f  untime: Limit to
+00008de0: 2073 746f 7020 7468 6520 616c 676f 7269   stop the algori
+00008df0: 7468 6d20 6166 7465 7220 6e20 7365 636f  thm after n seco
+00008e00: 6e64 732e 2044 6566 6175 6c74 7320 746f  nds. Defaults to
+00008e10: 2035 2e0a 2020 2020 2020 2020 2020 2020   5..            
+00008e20: 6d75 745f 756e 6966 6f72 6d5f 6765 6e20  mut_uniform_gen 
+00008e30: 2841 6273 7472 6163 7445 4149 6e69 7469  (AbstractEAIniti
+00008e40: 616c 697a 6174 696f 6e29 3a20 5468 6520  alization): The 
+00008e50: 696e 6974 6961 6c69 7a61 7469 6f6e 206d  initialization m
+00008e60: 6574 686f 6420 746f 2063 7265 6174 6520  ethod to create 
+00008e70: 7468 6520 7472 6565 2066 6f72 206d 7574  the tree for mut
+00008e80: 6174 696f 6e0a 2020 2020 2020 2020 2020  ation.          
+00008e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008eb0: 2020 2020 2020 2020 2020 2020 2020 6f70                op
+00008ec0: 6572 6174 696f 6e2e 2044 6566 6175 6c74  eration. Default
+00008ed0: 7320 746f 0a20 2020 2020 2020 2020 2020  s to.           
+00008ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008f00: 2020 2020 2020 2020 2020 2020 2045 4152               EAR
+00008f10: 616e 646f 6d49 6e69 7469 616c 697a 6174  andomInitializat
+00008f20: 696f 6e28 6d69 6e5f 6865 6967 6874 3d31  ion(min_height=1
+00008f30: 2c20 6d61 785f 6865 6967 6874 3d33 292e  , max_height=3).
+00008f40: 0a20 2020 2020 2020 2020 2020 206e 756d  .            num
+00008f50: 5f67 656e 6572 6174 696f 6e73 2028 696e  _generations (in
+00008f60: 7429 3a20 4e75 6d62 6572 206f 6620 6765  t): Number of ge
+00008f70: 6e65 7261 7469 6f6e 2066 6f72 2074 6865  neration for the
+00008f80: 2065 766f 6c75 7469 6f6e 6172 7920 616c   evolutionary al
+00008f90: 676f 7269 7468 6d2e 2044 6566 6175 6c74  gorithm. Default
+00008fa0: 7320 746f 2032 3030 2e0a 2020 2020 2020  s to 200..      
+00008fb0: 2020 2020 2020 706f 7075 6c61 7469 6f6e        population
+00008fc0: 5f73 697a 6520 2869 6e74 293a 2050 6f70  _size (int): Pop
+00008fd0: 756c 6174 696f 6e20 7369 7a65 2066 6f72  ulation size for
+00008fe0: 2074 6865 2065 766f 6c75 7469 6f6e 6172   the evolutionar
+00008ff0: 7920 616c 676f 7269 7468 6d2e 2044 6566  y algorithm. Def
+00009000: 6175 6c74 7320 746f 2038 3030 2e0a 2020  aults to 800..  
+00009010: 2020 2020 2020 2020 2020 7175 616c 6974            qualit
+00009020: 795f 6675 6e63 3a20 4675 6e63 7469 6f6e  y_func: Function
+00009030: 2074 6f20 6576 616c 7561 7465 2074 6865   to evaluate the
+00009040: 2071 7561 6c69 7479 206f 6620 736f 6c75   quality of solu
+00009050: 7469 6f6e 2063 6f6e 6365 7074 732e 2044  tion concepts. D
+00009060: 6566 6175 6c74 7320 746f 2060 4163 6375  efaults to `Accu
+00009070: 7261 6379 602e 0a20 2020 2020 2020 2020  racy`..         
+00009080: 2020 2072 6561 736f 6e65 7220 284f 574c     reasoner (OWL
+00009090: 5265 6173 6f6e 6572 293a 204f 7074 696f  Reasoner): Optio
+000090a0: 6e61 6c6c 7920 7573 6520 6120 6469 6666  nally use a diff
+000090b0: 6572 656e 7420 7265 6173 6f6e 6572 2e20  erent reasoner. 
+000090c0: 4966 2072 6561 736f 6e65 723d 4e6f 6e65  If reasoner=None
+000090d0: 2c20 7468 6520 7265 6173 6f6e 6572 206f  , the reasoner o
+000090e0: 660a 2020 2020 2020 2020 2020 2020 2020  f.              
+000090f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009100: 2020 2020 2020 7468 6520 3a61 7474 723a        the :attr:
+00009110: 606b 6e6f 776c 6564 6765 5f62 6173 6560  `knowledge_base`
+00009120: 2069 7320 7573 6564 2e0a 2020 2020 2020   is used..      
+00009130: 2020 2020 2020 7465 726d 696e 6174 655f        terminate_
+00009140: 6f6e 5f67 6f61 6c20 2862 6f6f 6c29 3a20  on_goal (bool): 
+00009150: 5768 6574 6865 7220 746f 2073 746f 7020  Whether to stop 
+00009160: 7468 6520 616c 676f 7269 7468 6d20 6966  the algorithm if
+00009170: 2061 2070 6572 6665 6374 2073 6f6c 7574   a perfect solut
+00009180: 696f 6e20 6973 2066 6f75 6e64 2e20 4465  ion is found. De
+00009190: 6661 756c 7473 2074 6f20 5472 7565 2e0a  faults to True..
+000091a0: 2020 2020 2020 2020 2020 2020 746f 7572              tour
+000091b0: 6e61 6d65 6e74 5f73 697a 6520 2869 6e74  nament_size (int
+000091c0: 293a 2054 6865 206e 756d 6265 7220 6f66  ): The number of
+000091d0: 2065 766f 6c75 7469 6f6e 6172 7920 696e   evolutionary in
+000091e0: 6469 7669 6475 616c 7320 7061 7274 6963  dividuals partic
+000091f0: 6970 6174 696e 6720 696e 2065 6163 6820  ipating in each 
+00009200: 746f 7572 6e61 6d65 6e74 2e0a 2020 2020  tournament..    
+00009210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009230: 4465 6661 756c 7473 2074 6f20 372e 0a20  Defaults to 7.. 
+00009240: 2020 2020 2020 2020 2020 2075 7365 5f63             use_c
+00009250: 6172 645f 7265 7374 7269 6374 696f 6e73  ard_restrictions
+00009260: 2028 626f 6f6c 293a 2055 7365 2063 6172   (bool): Use car
+00009270: 6469 6e61 6c69 7479 2072 6573 7472 6963  dinality restric
+00009280: 7469 6f6e 2066 6f72 206f 626a 6563 7420  tion for object 
+00009290: 7072 6f70 6572 7469 6573 3f20 4465 6661  properties? Defa
+000092a0: 756c 7420 746f 2054 7275 652e 0a20 2020  ult to True..   
+000092b0: 2020 2020 2020 2020 2075 7365 5f64 6174           use_dat
+000092c0: 615f 7072 6f70 6572 7469 6573 2028 626f  a_properties (bo
+000092d0: 6f6c 293a 2043 6f6e 7369 6465 7220 6461  ol): Consider da
+000092e0: 7461 2070 726f 7065 7274 6965 733f 2044  ta properties? D
+000092f0: 6566 6175 6c74 7320 746f 2054 7275 652e  efaults to True.
+00009300: 0a20 2020 2020 2020 2020 2020 2075 7365  .            use
+00009310: 5f69 6e76 6572 7365 2028 626f 6f6c 293a  _inverse (bool):
+00009320: 2043 6f6e 7369 6465 7220 696e 7665 7273   Consider invers
+00009330: 6564 2063 6f6e 6365 7074 733f 2044 6566  ed concepts? Def
+00009340: 6175 6c74 7320 746f 2046 616c 7365 2e0a  aults to False..
+00009350: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+00009360: 655f 7370 6c69 7474 6572 2028 4162 7374  e_splitter (Abst
+00009370: 7261 6374 5661 6c75 6553 706c 6974 7465  ractValueSplitte
+00009380: 7229 3a20 5573 6564 2074 6f20 6361 6c63  r): Used to calc
+00009390: 756c 6174 6520 7468 6520 7370 6c69 7473  ulate the splits
+000093a0: 2066 6f72 2064 6174 6120 7072 6f70 6572   for data proper
+000093b0: 7469 6573 2076 616c 7565 732e 2044 6566  ties values. Def
+000093c0: 6175 6c74 7320 746f 0a20 2020 2020 2020  aults to.       
+000093d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000093e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000093f0: 2020 2020 2020 2020 2060 456e 7472 6f70           `Entrop
+00009400: 7956 616c 7565 5370 6c69 7474 6572 602e  yValueSplitter`.
+00009410: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+00009420: 2020 2020 2020 6966 2071 7561 6c69 7479        if quality
+00009430: 5f66 756e 6320 6973 204e 6f6e 653a 0a20  _func is None:. 
+00009440: 2020 2020 2020 2020 2020 2071 7561 6c69             quali
+00009450: 7479 5f66 756e 6320 3d20 4163 6375 7261  ty_func = Accura
+00009460: 6379 2829 0a0a 2020 2020 2020 2020 7375  cy()..        su
+00009470: 7065 7228 292e 5f5f 696e 6974 5f5f 286b  per().__init__(k
+00009480: 6e6f 776c 6564 6765 5f62 6173 653d 6b6e  nowledge_base=kn
+00009490: 6f77 6c65 6467 655f 6261 7365 2c0a 2020  owledge_base,.  
 000094a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000094b0: 2020 206d 6178 5f72 756e 7469 6d65 3d6d     max_runtime=m
-000094c0: 6178 5f72 756e 7469 6d65 290a 2020 2020  ax_runtime).    
-000094d0: 2020 2020 7365 6c66 2e72 6561 736f 6e65      self.reasone
-000094e0: 7220 3d20 7265 6173 6f6e 6572 0a20 2020  r = reasoner.   
-000094f0: 2020 2020 2073 656c 662e 6669 746e 6573       self.fitnes
-00009500: 735f 6675 6e63 203d 2066 6974 6e65 7373  s_func = fitness
-00009510: 5f66 756e 630a 2020 2020 2020 2020 7365  _func.        se
-00009520: 6c66 2e69 6e69 745f 6d65 7468 6f64 203d  lf.init_method =
-00009530: 2069 6e69 745f 6d65 7468 6f64 0a20 2020   init_method.   
-00009540: 2020 2020 2073 656c 662e 616c 676f 7269       self.algori
-00009550: 7468 6d20 3d20 616c 676f 7269 7468 6d0a  thm = algorithm.
-00009560: 2020 2020 2020 2020 7365 6c66 2e6d 7574          self.mut
-00009570: 5f75 6e69 666f 726d 5f67 656e 203d 206d  _uniform_gen = m
-00009580: 7574 5f75 6e69 666f 726d 5f67 656e 0a20  ut_uniform_gen. 
-00009590: 2020 2020 2020 2073 656c 662e 7661 6c75         self.valu
-000095a0: 655f 7370 6c69 7474 6572 203d 2076 616c  e_splitter = val
-000095b0: 7565 5f73 706c 6974 7465 720a 2020 2020  ue_splitter.    
-000095c0: 2020 2020 7365 6c66 2e75 7365 5f64 6174      self.use_dat
-000095d0: 615f 7072 6f70 6572 7469 6573 203d 2075  a_properties = u
-000095e0: 7365 5f64 6174 615f 7072 6f70 6572 7469  se_data_properti
-000095f0: 6573 0a20 2020 2020 2020 2073 656c 662e  es.        self.
-00009600: 7573 655f 6361 7264 5f72 6573 7472 6963  use_card_restric
-00009610: 7469 6f6e 7320 3d20 7573 655f 6361 7264  tions = use_card
-00009620: 5f72 6573 7472 6963 7469 6f6e 730a 2020  _restrictions.  
-00009630: 2020 2020 2020 7365 6c66 2e75 7365 5f69        self.use_i
-00009640: 6e76 6572 7365 203d 2075 7365 5f69 6e76  nverse = use_inv
-00009650: 6572 7365 0a20 2020 2020 2020 2073 656c  erse.        sel
-00009660: 662e 746f 7572 6e61 6d65 6e74 5f73 697a  f.tournament_siz
-00009670: 6520 3d20 746f 7572 6e61 6d65 6e74 5f73  e = tournament_s
-00009680: 697a 650a 2020 2020 2020 2020 7365 6c66  ize.        self
-00009690: 2e63 6172 645f 6c69 6d69 7420 3d20 6361  .card_limit = ca
-000096a0: 7264 5f6c 696d 6974 0a20 2020 2020 2020  rd_limit.       
-000096b0: 2073 656c 662e 706f 7075 6c61 7469 6f6e   self.population
-000096c0: 5f73 697a 6520 3d20 706f 7075 6c61 7469  _size = populati
-000096d0: 6f6e 5f73 697a 650a 2020 2020 2020 2020  on_size.        
-000096e0: 7365 6c66 2e6e 756d 5f67 656e 6572 6174  self.num_generat
-000096f0: 696f 6e73 203d 206e 756d 5f67 656e 6572  ions = num_gener
-00009700: 6174 696f 6e73 0a20 2020 2020 2020 2073  ations.        s
-00009710: 656c 662e 6865 6967 6874 5f6c 696d 6974  elf.height_limit
-00009720: 203d 2068 6569 6768 745f 6c69 6d69 740a   = height_limit.
-00009730: 2020 2020 2020 2020 7365 6c66 2e74 6f74          self.tot
-00009740: 616c 5f66 6974 7320 3d20 300a 2020 2020  al_fits = 0.    
-00009750: 2020 2020 7365 6c66 2e5f 5f73 6574 7570      self.__setup
-00009760: 2829 0a0a 2020 2020 6465 6620 5f5f 7365  ()..    def __se
-00009770: 7475 7028 7365 6c66 293a 0a20 2020 2020  tup(self):.     
-00009780: 2020 2073 656c 662e 636c 6561 6e28 7061     self.clean(pa
-00009790: 7274 6961 6c3d 5472 7565 290a 2020 2020  rtial=True).    
-000097a0: 2020 2020 7365 6c66 2e5f 6361 6368 6520      self._cache 
-000097b0: 3d20 6469 6374 2829 0a20 2020 2020 2020  = dict().       
-000097c0: 2069 6620 7365 6c66 2e66 6974 6e65 7373   if self.fitness
-000097d0: 5f66 756e 6320 6973 204e 6f6e 653a 0a20  _func is None:. 
-000097e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000097f0: 6669 746e 6573 735f 6675 6e63 203d 204c  fitness_func = L
-00009800: 696e 6561 7250 7265 7373 7572 6546 6974  inearPressureFit
-00009810: 6e65 7373 2829 0a0a 2020 2020 2020 2020  ness()..        
-00009820: 6966 2073 656c 662e 696e 6974 5f6d 6574  if self.init_met
-00009830: 686f 6420 6973 204e 6f6e 653a 0a20 2020  hod is None:.   
-00009840: 2020 2020 2020 2020 2073 656c 662e 696e           self.in
-00009850: 6974 5f6d 6574 686f 6420 3d20 4541 5261  it_method = EARa
-00009860: 6e64 6f6d 5761 6c6b 496e 6974 6961 6c69  ndomWalkInitiali
-00009870: 7a61 7469 6f6e 2829 0a0a 2020 2020 2020  zation()..      
-00009880: 2020 6966 2073 656c 662e 616c 676f 7269    if self.algori
-00009890: 7468 6d20 6973 204e 6f6e 653a 0a20 2020  thm is None:.   
-000098a0: 2020 2020 2020 2020 2073 656c 662e 616c           self.al
-000098b0: 676f 7269 7468 6d20 3d20 4541 5369 6d70  gorithm = EASimp
-000098c0: 6c65 2829 0a0a 2020 2020 2020 2020 6966  le()..        if
-000098d0: 2073 656c 662e 6d75 745f 756e 6966 6f72   self.mut_unifor
-000098e0: 6d5f 6765 6e20 6973 204e 6f6e 653a 0a20  m_gen is None:. 
-000098f0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00009900: 6d75 745f 756e 6966 6f72 6d5f 6765 6e20  mut_uniform_gen 
-00009910: 3d20 4541 5261 6e64 6f6d 496e 6974 6961  = EARandomInitia
-00009920: 6c69 7a61 7469 6f6e 286d 696e 5f68 6569  lization(min_hei
-00009930: 6768 743d 312c 206d 6178 5f68 6569 6768  ght=1, max_heigh
-00009940: 743d 3329 0a0a 2020 2020 2020 2020 6966  t=3)..        if
-00009950: 2073 656c 662e 7661 6c75 655f 7370 6c69   self.value_spli
-00009960: 7474 6572 2069 7320 4e6f 6e65 3a0a 2020  tter is None:.  
-00009970: 2020 2020 2020 2020 2020 7365 6c66 2e76            self.v
-00009980: 616c 7565 5f73 706c 6974 7465 7220 3d20  alue_splitter = 
-00009990: 456e 7472 6f70 7956 616c 7565 5370 6c69  EntropyValueSpli
-000099a0: 7474 6572 2829 0a0a 2020 2020 2020 2020  tter()..        
-000099b0: 7365 6c66 2e5f 7265 7375 6c74 5f70 6f70  self._result_pop
-000099c0: 756c 6174 696f 6e20 3d20 4e6f 6e65 0a20  ulation = None. 
-000099d0: 2020 2020 2020 2073 656c 662e 5f64 705f         self._dp_
-000099e0: 746f 5f70 7269 6d5f 7479 7065 203d 2064  to_prim_type = d
-000099f0: 6963 7428 290a 2020 2020 2020 2020 7365  ict().        se
-00009a00: 6c66 2e5f 6470 5f73 706c 6974 7320 3d20  lf._dp_splits = 
-00009a10: 6469 6374 2829 0a20 2020 2020 2020 2073  dict().        s
-00009a20: 656c 662e 5f73 706c 6974 5f70 726f 7065  elf._split_prope
-00009a30: 7274 6965 7320 3d20 5b5d 0a0a 2020 2020  rties = []..    
-00009a40: 2020 2020 7365 6c66 2e70 7365 7420 3d20      self.pset = 
-00009a50: 7365 6c66 2e5f 5f62 7569 6c64 5f70 7269  self.__build_pri
-00009a60: 6d69 7469 7665 5f73 6574 2829 0a20 2020  mitive_set().   
-00009a70: 2020 2020 2073 656c 662e 746f 6f6c 626f       self.toolbo
-00009a80: 7820 3d20 7365 6c66 2e5f 5f62 7569 6c64  x = self.__build
-00009a90: 5f74 6f6f 6c62 6f78 2829 0a0a 2020 2020  _toolbox()..    
-00009aa0: 6465 6620 5f5f 6275 696c 645f 7072 696d  def __build_prim
-00009ab0: 6974 6976 655f 7365 7428 7365 6c66 2920  itive_set(self) 
-00009ac0: 2d3e 2067 702e 5072 696d 6974 6976 6553  -> gp.PrimitiveS
-00009ad0: 6574 5479 7065 643a 0a20 2020 2020 2020  etTyped:.       
-00009ae0: 2066 6163 746f 7279 203d 2050 7269 6d69   factory = Primi
-00009af0: 7469 7665 4661 6374 6f72 7928 290a 2020  tiveFactory().  
-00009b00: 2020 2020 2020 756e 696f 6e20 3d20 6661        union = fa
-00009b10: 6374 6f72 792e 6372 6561 7465 5f75 6e69  ctory.create_uni
-00009b20: 6f6e 2829 0a20 2020 2020 2020 2069 6e74  on().        int
-00009b30: 6572 7365 6374 696f 6e20 3d20 6661 6374  ersection = fact
-00009b40: 6f72 792e 6372 6561 7465 5f69 6e74 6572  ory.create_inter
-00009b50: 7365 6374 696f 6e28 290a 0a20 2020 2020  section()..     
-00009b60: 2020 2070 7365 7420 3d20 6770 2e50 7269     pset = gp.Pri
-00009b70: 6d69 7469 7665 5365 7454 7970 6564 2822  mitiveSetTyped("
-00009b80: 636f 6e63 6570 745f 7472 6565 222c 205b  concept_tree", [
-00009b90: 5d2c 204f 574c 436c 6173 7345 7870 7265  ], OWLClassExpre
-00009ba0: 7373 696f 6e29 0a20 2020 2020 2020 2070  ssion).        p
-00009bb0: 7365 742e 6164 6450 7269 6d69 7469 7665  set.addPrimitive
-00009bc0: 2873 656c 662e 6b62 2e67 656e 6572 6174  (self.kb.generat
-00009bd0: 6f72 2e6e 6567 6174 696f 6e2c 205b 4f57  or.negation, [OW
-00009be0: 4c43 6c61 7373 4578 7072 6573 7369 6f6e  LClassExpression
-00009bf0: 5d2c 204f 574c 436c 6173 7345 7870 7265  ], OWLClassExpre
-00009c00: 7373 696f 6e2c 0a20 2020 2020 2020 2020  ssion,.         
-00009c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009c20: 206e 616d 653d 4f70 6572 6174 6f72 566f   name=OperatorVo
-00009c30: 6361 6275 6c61 7279 2e4e 4547 4154 494f  cabulary.NEGATIO
-00009c40: 4e29 0a20 2020 2020 2020 2070 7365 742e  N).        pset.
-00009c50: 6164 6450 7269 6d69 7469 7665 2875 6e69  addPrimitive(uni
-00009c60: 6f6e 2c20 5b4f 574c 436c 6173 7345 7870  on, [OWLClassExp
-00009c70: 7265 7373 696f 6e2c 204f 574c 436c 6173  ression, OWLClas
-00009c80: 7345 7870 7265 7373 696f 6e5d 2c20 4f57  sExpression], OW
-00009c90: 4c43 6c61 7373 4578 7072 6573 7369 6f6e  LClassExpression
-00009ca0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00009cb0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
-00009cc0: 3d4f 7065 7261 746f 7256 6f63 6162 756c  =OperatorVocabul
-00009cd0: 6172 792e 554e 494f 4e29 0a20 2020 2020  ary.UNION).     
-00009ce0: 2020 2070 7365 742e 6164 6450 7269 6d69     pset.addPrimi
-00009cf0: 7469 7665 2869 6e74 6572 7365 6374 696f  tive(intersectio
-00009d00: 6e2c 205b 4f57 4c43 6c61 7373 4578 7072  n, [OWLClassExpr
-00009d10: 6573 7369 6f6e 2c20 4f57 4c43 6c61 7373  ession, OWLClass
-00009d20: 4578 7072 6573 7369 6f6e 5d2c 204f 574c  Expression], OWL
-00009d30: 436c 6173 7345 7870 7265 7373 696f 6e2c  ClassExpression,
-00009d40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009d50: 2020 2020 2020 2020 2020 206e 616d 653d             name=
-00009d60: 4f70 6572 6174 6f72 566f 6361 6275 6c61  OperatorVocabula
-00009d70: 7279 2e49 4e54 4552 5345 4354 494f 4e29  ry.INTERSECTION)
-00009d80: 0a0a 2020 2020 2020 2020 666f 7220 6f70  ..        for op
-00009d90: 2069 6e20 7365 6c66 2e6b 622e 6765 745f   in self.kb.get_
-00009da0: 6f62 6a65 6374 5f70 726f 7065 7274 6965  object_propertie
-00009db0: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-00009dc0: 206e 616d 6520 3d20 6573 6361 7065 286f   name = escape(o
-00009dd0: 702e 6765 745f 6972 6928 292e 6765 745f  p.get_iri().get_
-00009de0: 7265 6d61 696e 6465 7228 2929 0a20 2020  remainder()).   
-00009df0: 2020 2020 2020 2020 2065 7869 7374 656e           existen
-00009e00: 7469 616c 2c20 756e 6976 6572 7361 6c20  tial, universal 
-00009e10: 3d20 6661 6374 6f72 792e 6372 6561 7465  = factory.create
-00009e20: 5f65 7869 7374 656e 7469 616c 5f75 6e69  _existential_uni
-00009e30: 7665 7273 616c 286f 7029 0a20 2020 2020  versal(op).     
-00009e40: 2020 2020 2020 2070 7365 742e 6164 6450         pset.addP
-00009e50: 7269 6d69 7469 7665 2865 7869 7374 656e  rimitive(existen
-00009e60: 7469 616c 2c20 5b4f 574c 436c 6173 7345  tial, [OWLClassE
-00009e70: 7870 7265 7373 696f 6e5d 2c20 4f57 4c43  xpression], OWLC
-00009e80: 6c61 7373 4578 7072 6573 7369 6f6e 2c0a  lassExpression,.
-00009e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ea0: 2020 2020 2020 2020 2020 2020 2020 6e61                na
-00009eb0: 6d65 3d4f 7065 7261 746f 7256 6f63 6162  me=OperatorVocab
-00009ec0: 756c 6172 792e 4558 4953 5445 4e54 4941  ulary.EXISTENTIA
-00009ed0: 4c20 2b20 6e61 6d65 290a 2020 2020 2020  L + name).      
-00009ee0: 2020 2020 2020 7073 6574 2e61 6464 5072        pset.addPr
-00009ef0: 696d 6974 6976 6528 756e 6976 6572 7361  imitive(universa
-00009f00: 6c2c 205b 4f57 4c43 6c61 7373 4578 7072  l, [OWLClassExpr
-00009f10: 6573 7369 6f6e 5d2c 204f 574c 436c 6173  ession], OWLClas
-00009f20: 7345 7870 7265 7373 696f 6e2c 0a20 2020  sExpression,.   
+000094b0: 2020 2020 2020 2072 6561 736f 6e65 723d         reasoner=
+000094c0: 7265 6173 6f6e 6572 2c0a 2020 2020 2020  reasoner,.      
+000094d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000094e0: 2020 2071 7561 6c69 7479 5f66 756e 633d     quality_func=
+000094f0: 7175 616c 6974 795f 6675 6e63 2c0a 2020  quality_func,.  
+00009500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009510: 2020 2020 2020 2074 6572 6d69 6e61 7465         terminate
+00009520: 5f6f 6e5f 676f 616c 3d74 6572 6d69 6e61  _on_goal=termina
+00009530: 7465 5f6f 6e5f 676f 616c 2c0a 2020 2020  te_on_goal,.    
+00009540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009550: 2020 2020 206d 6178 5f72 756e 7469 6d65       max_runtime
+00009560: 3d6d 6178 5f72 756e 7469 6d65 290a 2020  =max_runtime).  
+00009570: 2020 2020 2020 7365 6c66 2e72 6561 736f        self.reaso
+00009580: 6e65 7220 3d20 7265 6173 6f6e 6572 0a20  ner = reasoner. 
+00009590: 2020 2020 2020 2073 656c 662e 6669 746e         self.fitn
+000095a0: 6573 735f 6675 6e63 203d 2066 6974 6e65  ess_func = fitne
+000095b0: 7373 5f66 756e 630a 2020 2020 2020 2020  ss_func.        
+000095c0: 7365 6c66 2e69 6e69 745f 6d65 7468 6f64  self.init_method
+000095d0: 203d 2069 6e69 745f 6d65 7468 6f64 0a20   = init_method. 
+000095e0: 2020 2020 2020 2073 656c 662e 616c 676f         self.algo
+000095f0: 7269 7468 6d20 3d20 616c 676f 7269 7468  rithm = algorith
+00009600: 6d0a 2020 2020 2020 2020 7365 6c66 2e6d  m.        self.m
+00009610: 7574 5f75 6e69 666f 726d 5f67 656e 203d  ut_uniform_gen =
+00009620: 206d 7574 5f75 6e69 666f 726d 5f67 656e   mut_uniform_gen
+00009630: 0a20 2020 2020 2020 2073 656c 662e 7661  .        self.va
+00009640: 6c75 655f 7370 6c69 7474 6572 203d 2076  lue_splitter = v
+00009650: 616c 7565 5f73 706c 6974 7465 720a 2020  alue_splitter.  
+00009660: 2020 2020 2020 7365 6c66 2e75 7365 5f64        self.use_d
+00009670: 6174 615f 7072 6f70 6572 7469 6573 203d  ata_properties =
+00009680: 2075 7365 5f64 6174 615f 7072 6f70 6572   use_data_proper
+00009690: 7469 6573 0a20 2020 2020 2020 2073 656c  ties.        sel
+000096a0: 662e 7573 655f 6361 7264 5f72 6573 7472  f.use_card_restr
+000096b0: 6963 7469 6f6e 7320 3d20 7573 655f 6361  ictions = use_ca
+000096c0: 7264 5f72 6573 7472 6963 7469 6f6e 730a  rd_restrictions.
+000096d0: 2020 2020 2020 2020 7365 6c66 2e75 7365          self.use
+000096e0: 5f69 6e76 6572 7365 203d 2075 7365 5f69  _inverse = use_i
+000096f0: 6e76 6572 7365 0a20 2020 2020 2020 2073  nverse.        s
+00009700: 656c 662e 746f 7572 6e61 6d65 6e74 5f73  elf.tournament_s
+00009710: 697a 6520 3d20 746f 7572 6e61 6d65 6e74  ize = tournament
+00009720: 5f73 697a 650a 2020 2020 2020 2020 7365  _size.        se
+00009730: 6c66 2e63 6172 645f 6c69 6d69 7420 3d20  lf.card_limit = 
+00009740: 6361 7264 5f6c 696d 6974 0a20 2020 2020  card_limit.     
+00009750: 2020 2073 656c 662e 706f 7075 6c61 7469     self.populati
+00009760: 6f6e 5f73 697a 6520 3d20 706f 7075 6c61  on_size = popula
+00009770: 7469 6f6e 5f73 697a 650a 2020 2020 2020  tion_size.      
+00009780: 2020 7365 6c66 2e6e 756d 5f67 656e 6572    self.num_gener
+00009790: 6174 696f 6e73 203d 206e 756d 5f67 656e  ations = num_gen
+000097a0: 6572 6174 696f 6e73 0a20 2020 2020 2020  erations.       
+000097b0: 2073 656c 662e 6865 6967 6874 5f6c 696d   self.height_lim
+000097c0: 6974 203d 2068 6569 6768 745f 6c69 6d69  it = height_limi
+000097d0: 740a 2020 2020 2020 2020 7365 6c66 2e74  t.        self.t
+000097e0: 6f74 616c 5f66 6974 7320 3d20 300a 2020  otal_fits = 0.  
+000097f0: 2020 2020 2020 7365 6c66 2e5f 5f73 6574        self.__set
+00009800: 7570 2829 0a0a 2020 2020 6465 6620 5f5f  up()..    def __
+00009810: 7365 7475 7028 7365 6c66 293a 0a20 2020  setup(self):.   
+00009820: 2020 2020 2073 656c 662e 636c 6561 6e28       self.clean(
+00009830: 7061 7274 6961 6c3d 5472 7565 290a 2020  partial=True).  
+00009840: 2020 2020 2020 7365 6c66 2e5f 6361 6368        self._cach
+00009850: 6520 3d20 6469 6374 2829 0a20 2020 2020  e = dict().     
+00009860: 2020 2069 6620 7365 6c66 2e66 6974 6e65     if self.fitne
+00009870: 7373 5f66 756e 6320 6973 204e 6f6e 653a  ss_func is None:
+00009880: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00009890: 662e 6669 746e 6573 735f 6675 6e63 203d  f.fitness_func =
+000098a0: 204c 696e 6561 7250 7265 7373 7572 6546   LinearPressureF
+000098b0: 6974 6e65 7373 2829 0a0a 2020 2020 2020  itness()..      
+000098c0: 2020 6966 2073 656c 662e 696e 6974 5f6d    if self.init_m
+000098d0: 6574 686f 6420 6973 204e 6f6e 653a 0a20  ethod is None:. 
+000098e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000098f0: 696e 6974 5f6d 6574 686f 6420 3d20 4541  init_method = EA
+00009900: 5261 6e64 6f6d 5761 6c6b 496e 6974 6961  RandomWalkInitia
+00009910: 6c69 7a61 7469 6f6e 2829 0a0a 2020 2020  lization()..    
+00009920: 2020 2020 6966 2073 656c 662e 616c 676f      if self.algo
+00009930: 7269 7468 6d20 6973 204e 6f6e 653a 0a20  rithm is None:. 
+00009940: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00009950: 616c 676f 7269 7468 6d20 3d20 4541 5369  algorithm = EASi
+00009960: 6d70 6c65 2829 0a0a 2020 2020 2020 2020  mple()..        
+00009970: 6966 2073 656c 662e 6d75 745f 756e 6966  if self.mut_unif
+00009980: 6f72 6d5f 6765 6e20 6973 204e 6f6e 653a  orm_gen is None:
+00009990: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+000099a0: 662e 6d75 745f 756e 6966 6f72 6d5f 6765  f.mut_uniform_ge
+000099b0: 6e20 3d20 4541 5261 6e64 6f6d 496e 6974  n = EARandomInit
+000099c0: 6961 6c69 7a61 7469 6f6e 286d 696e 5f68  ialization(min_h
+000099d0: 6569 6768 743d 312c 206d 6178 5f68 6569  eight=1, max_hei
+000099e0: 6768 743d 3329 0a0a 2020 2020 2020 2020  ght=3)..        
+000099f0: 6966 2073 656c 662e 7661 6c75 655f 7370  if self.value_sp
+00009a00: 6c69 7474 6572 2069 7320 4e6f 6e65 3a0a  litter is None:.
+00009a10: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00009a20: 2e76 616c 7565 5f73 706c 6974 7465 7220  .value_splitter 
+00009a30: 3d20 456e 7472 6f70 7956 616c 7565 5370  = EntropyValueSp
+00009a40: 6c69 7474 6572 2829 0a0a 2020 2020 2020  litter()..      
+00009a50: 2020 7365 6c66 2e5f 7265 7375 6c74 5f70    self._result_p
+00009a60: 6f70 756c 6174 696f 6e20 3d20 4e6f 6e65  opulation = None
+00009a70: 0a20 2020 2020 2020 2073 656c 662e 5f64  .        self._d
+00009a80: 705f 746f 5f70 7269 6d5f 7479 7065 203d  p_to_prim_type =
+00009a90: 2064 6963 7428 290a 2020 2020 2020 2020   dict().        
+00009aa0: 7365 6c66 2e5f 6470 5f73 706c 6974 7320  self._dp_splits 
+00009ab0: 3d20 6469 6374 2829 0a20 2020 2020 2020  = dict().       
+00009ac0: 2073 656c 662e 5f73 706c 6974 5f70 726f   self._split_pro
+00009ad0: 7065 7274 6965 7320 3d20 5b5d 0a0a 2020  perties = []..  
+00009ae0: 2020 2020 2020 7365 6c66 2e70 7365 7420        self.pset 
+00009af0: 3d20 7365 6c66 2e5f 5f62 7569 6c64 5f70  = self.__build_p
+00009b00: 7269 6d69 7469 7665 5f73 6574 2829 0a20  rimitive_set(). 
+00009b10: 2020 2020 2020 2073 656c 662e 746f 6f6c         self.tool
+00009b20: 626f 7820 3d20 7365 6c66 2e5f 5f62 7569  box = self.__bui
+00009b30: 6c64 5f74 6f6f 6c62 6f78 2829 0a0a 2020  ld_toolbox()..  
+00009b40: 2020 6465 6620 5f5f 6275 696c 645f 7072    def __build_pr
+00009b50: 696d 6974 6976 655f 7365 7428 7365 6c66  imitive_set(self
+00009b60: 2920 2d3e 2067 702e 5072 696d 6974 6976  ) -> gp.Primitiv
+00009b70: 6553 6574 5479 7065 643a 0a20 2020 2020  eSetTyped:.     
+00009b80: 2020 2066 6163 746f 7279 203d 2050 7269     factory = Pri
+00009b90: 6d69 7469 7665 4661 6374 6f72 7928 290a  mitiveFactory().
+00009ba0: 2020 2020 2020 2020 756e 696f 6e20 3d20          union = 
+00009bb0: 6661 6374 6f72 792e 6372 6561 7465 5f75  factory.create_u
+00009bc0: 6e69 6f6e 2829 0a20 2020 2020 2020 2069  nion().        i
+00009bd0: 6e74 6572 7365 6374 696f 6e20 3d20 6661  ntersection = fa
+00009be0: 6374 6f72 792e 6372 6561 7465 5f69 6e74  ctory.create_int
+00009bf0: 6572 7365 6374 696f 6e28 290a 0a20 2020  ersection()..   
+00009c00: 2020 2020 2070 7365 7420 3d20 6770 2e50       pset = gp.P
+00009c10: 7269 6d69 7469 7665 5365 7454 7970 6564  rimitiveSetTyped
+00009c20: 2822 636f 6e63 6570 745f 7472 6565 222c  ("concept_tree",
+00009c30: 205b 5d2c 204f 574c 436c 6173 7345 7870   [], OWLClassExp
+00009c40: 7265 7373 696f 6e29 0a20 2020 2020 2020  ression).       
+00009c50: 2070 7365 742e 6164 6450 7269 6d69 7469   pset.addPrimiti
+00009c60: 7665 2873 656c 662e 6b62 2e67 656e 6572  ve(self.kb.gener
+00009c70: 6174 6f72 2e6e 6567 6174 696f 6e2c 205b  ator.negation, [
+00009c80: 4f57 4c43 6c61 7373 4578 7072 6573 7369  OWLClassExpressi
+00009c90: 6f6e 5d2c 204f 574c 436c 6173 7345 7870  on], OWLClassExp
+00009ca0: 7265 7373 696f 6e2c 0a20 2020 2020 2020  ression,.       
+00009cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009cc0: 2020 206e 616d 653d 4f70 6572 6174 6f72     name=Operator
+00009cd0: 566f 6361 6275 6c61 7279 2e4e 4547 4154  Vocabulary.NEGAT
+00009ce0: 494f 4e29 0a20 2020 2020 2020 2070 7365  ION).        pse
+00009cf0: 742e 6164 6450 7269 6d69 7469 7665 2875  t.addPrimitive(u
+00009d00: 6e69 6f6e 2c20 5b4f 574c 436c 6173 7345  nion, [OWLClassE
+00009d10: 7870 7265 7373 696f 6e2c 204f 574c 436c  xpression, OWLCl
+00009d20: 6173 7345 7870 7265 7373 696f 6e5d 2c20  assExpression], 
+00009d30: 4f57 4c43 6c61 7373 4578 7072 6573 7369  OWLClassExpressi
+00009d40: 6f6e 2c0a 2020 2020 2020 2020 2020 2020  on,.            
+00009d50: 2020 2020 2020 2020 2020 2020 2020 6e61                na
+00009d60: 6d65 3d4f 7065 7261 746f 7256 6f63 6162  me=OperatorVocab
+00009d70: 756c 6172 792e 554e 494f 4e29 0a20 2020  ulary.UNION).   
+00009d80: 2020 2020 2070 7365 742e 6164 6450 7269       pset.addPri
+00009d90: 6d69 7469 7665 2869 6e74 6572 7365 6374  mitive(intersect
+00009da0: 696f 6e2c 205b 4f57 4c43 6c61 7373 4578  ion, [OWLClassEx
+00009db0: 7072 6573 7369 6f6e 2c20 4f57 4c43 6c61  pression, OWLCla
+00009dc0: 7373 4578 7072 6573 7369 6f6e 5d2c 204f  ssExpression], O
+00009dd0: 574c 436c 6173 7345 7870 7265 7373 696f  WLClassExpressio
+00009de0: 6e2c 0a20 2020 2020 2020 2020 2020 2020  n,.             
+00009df0: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+00009e00: 653d 4f70 6572 6174 6f72 566f 6361 6275  e=OperatorVocabu
+00009e10: 6c61 7279 2e49 4e54 4552 5345 4354 494f  lary.INTERSECTIO
+00009e20: 4e29 0a0a 2020 2020 2020 2020 666f 7220  N)..        for 
+00009e30: 6f70 2069 6e20 7365 6c66 2e6b 622e 6765  op in self.kb.ge
+00009e40: 745f 6f62 6a65 6374 5f70 726f 7065 7274  t_object_propert
+00009e50: 6965 7328 293a 0a20 2020 2020 2020 2020  ies():.         
+00009e60: 2020 206e 616d 6520 3d20 6573 6361 7065     name = escape
+00009e70: 286f 702e 6972 692e 6765 745f 7265 6d61  (op.iri.get_rema
+00009e80: 696e 6465 7228 2929 0a20 2020 2020 2020  inder()).       
+00009e90: 2020 2020 2065 7869 7374 656e 7469 616c       existential
+00009ea0: 2c20 756e 6976 6572 7361 6c20 3d20 6661  , universal = fa
+00009eb0: 6374 6f72 792e 6372 6561 7465 5f65 7869  ctory.create_exi
+00009ec0: 7374 656e 7469 616c 5f75 6e69 7665 7273  stential_univers
+00009ed0: 616c 286f 7029 0a20 2020 2020 2020 2020  al(op).         
+00009ee0: 2020 2070 7365 742e 6164 6450 7269 6d69     pset.addPrimi
+00009ef0: 7469 7665 2865 7869 7374 656e 7469 616c  tive(existential
+00009f00: 2c20 5b4f 574c 436c 6173 7345 7870 7265  , [OWLClassExpre
+00009f10: 7373 696f 6e5d 2c20 4f57 4c43 6c61 7373  ssion], OWLClass
+00009f20: 4578 7072 6573 7369 6f6e 2c0a 2020 2020  Expression,.    
 00009f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f40: 2020 2020 2020 2020 2020 206e 616d 653d             name=
-00009f50: 4f70 6572 6174 6f72 566f 6361 6275 6c61  OperatorVocabula
-00009f60: 7279 2e55 4e49 5645 5253 414c 202b 206e  ry.UNIVERSAL + n
-00009f70: 616d 6529 0a0a 2020 2020 2020 2020 2020  ame)..          
-00009f80: 2020 6966 2073 656c 662e 7573 655f 696e    if self.use_in
-00009f90: 7665 7273 653a 0a20 2020 2020 2020 2020  verse:.         
-00009fa0: 2020 2020 2020 2065 7869 7374 656e 7469         existenti
-00009fb0: 616c 2c20 756e 6976 6572 7361 6c20 3d20  al, universal = 
-00009fc0: 6661 6374 6f72 792e 6372 6561 7465 5f65  factory.create_e
-00009fd0: 7869 7374 656e 7469 616c 5f75 6e69 7665  xistential_unive
-00009fe0: 7273 616c 286f 702e 6765 745f 696e 7665  rsal(op.get_inve
-00009ff0: 7273 655f 7072 6f70 6572 7479 2829 290a  rse_property()).
-0000a000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a010: 7073 6574 2e61 6464 5072 696d 6974 6976  pset.addPrimitiv
-0000a020: 6528 6578 6973 7465 6e74 6961 6c2c 205b  e(existential, [
-0000a030: 4f57 4c43 6c61 7373 4578 7072 6573 7369  OWLClassExpressi
-0000a040: 6f6e 5d2c 204f 574c 436c 6173 7345 7870  on], OWLClassExp
-0000a050: 7265 7373 696f 6e2c 0a20 2020 2020 2020  ression,.       
-0000a060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a070: 2020 2020 2020 2020 2020 206e 616d 653d             name=
-0000a080: 4f70 6572 6174 6f72 566f 6361 6275 6c61  OperatorVocabula
-0000a090: 7279 2e49 4e56 4552 5345 202b 204f 7065  ry.INVERSE + Ope
-0000a0a0: 7261 746f 7256 6f63 6162 756c 6172 792e  ratorVocabulary.
-0000a0b0: 4558 4953 5445 4e54 4941 4c20 2b20 6e61  EXISTENTIAL + na
-0000a0c0: 6d65 290a 2020 2020 2020 2020 2020 2020  me).            
-0000a0d0: 2020 2020 7073 6574 2e61 6464 5072 696d      pset.addPrim
-0000a0e0: 6974 6976 6528 756e 6976 6572 7361 6c2c  itive(universal,
-0000a0f0: 205b 4f57 4c43 6c61 7373 4578 7072 6573   [OWLClassExpres
-0000a100: 7369 6f6e 5d2c 204f 574c 436c 6173 7345  sion], OWLClassE
-0000a110: 7870 7265 7373 696f 6e2c 0a20 2020 2020  xpression,.     
-0000a120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a130: 2020 2020 2020 2020 2020 2020 206e 616d               nam
-0000a140: 653d 4f70 6572 6174 6f72 566f 6361 6275  e=OperatorVocabu
-0000a150: 6c61 7279 2e49 4e56 4552 5345 202b 204f  lary.INVERSE + O
-0000a160: 7065 7261 746f 7256 6f63 6162 756c 6172  peratorVocabular
-0000a170: 792e 554e 4956 4552 5341 4c20 2b20 6e61  y.UNIVERSAL + na
-0000a180: 6d65 290a 0a20 2020 2020 2020 2069 6620  me)..        if 
-0000a190: 7365 6c66 2e75 7365 5f64 6174 615f 7072  self.use_data_pr
-0000a1a0: 6f70 6572 7469 6573 3a0a 2020 2020 2020  operties:.      
-0000a1b0: 2020 2020 2020 636c 6173 7320 426f 6f6c        class Bool
-0000a1c0: 286f 626a 6563 7429 3a0a 2020 2020 2020  (object):.      
-0000a1d0: 2020 2020 2020 2020 2020 7061 7373 0a0a            pass..
-0000a1e0: 2020 2020 2020 2020 2020 2020 6661 6c73              fals
-0000a1f0: 655f 203d 204f 574c 4c69 7465 7261 6c28  e_ = OWLLiteral(
-0000a200: 4661 6c73 6529 0a20 2020 2020 2020 2020  False).         
-0000a210: 2020 2074 7275 655f 203d 204f 574c 4c69     true_ = OWLLi
-0000a220: 7465 7261 6c28 5472 7565 290a 2020 2020  teral(True).    
-0000a230: 2020 2020 2020 2020 7073 6574 2e61 6464          pset.add
-0000a240: 5465 726d 696e 616c 2866 616c 7365 5f2c  Terminal(false_,
-0000a250: 2042 6f6f 6c2c 206e 616d 653d 6f77 6c6c   Bool, name=owll
-0000a260: 6974 6572 616c 5f74 6f5f 7072 696d 6974  iteral_to_primit
-0000a270: 6976 655f 7374 7269 6e67 2866 616c 7365  ive_string(false
-0000a280: 5f29 290a 2020 2020 2020 2020 2020 2020  _)).            
-0000a290: 7073 6574 2e61 6464 5465 726d 696e 616c  pset.addTerminal
-0000a2a0: 2874 7275 655f 2c20 426f 6f6c 2c20 6e61  (true_, Bool, na
-0000a2b0: 6d65 3d6f 776c 6c69 7465 7261 6c5f 746f  me=owlliteral_to
-0000a2c0: 5f70 7269 6d69 7469 7665 5f73 7472 696e  _primitive_strin
-0000a2d0: 6728 7472 7565 5f29 290a 0a20 2020 2020  g(true_))..     
-0000a2e0: 2020 2020 2020 2066 6f72 2062 6f6f 6c5f         for bool_
-0000a2f0: 6470 2069 6e20 7365 6c66 2e6b 622e 6765  dp in self.kb.ge
-0000a300: 745f 626f 6f6c 6561 6e5f 6461 7461 5f70  t_boolean_data_p
-0000a310: 726f 7065 7274 6965 7328 293a 0a20 2020  roperties():.   
-0000a320: 2020 2020 2020 2020 2020 2020 206e 616d               nam
-0000a330: 6520 3d20 6573 6361 7065 2862 6f6f 6c5f  e = escape(bool_
-0000a340: 6470 2e67 6574 5f69 7269 2829 2e67 6574  dp.get_iri().get
-0000a350: 5f72 656d 6169 6e64 6572 2829 290a 2020  _remainder()).  
-0000a360: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000a370: 6c66 2e5f 6470 5f74 6f5f 7072 696d 5f74  lf._dp_to_prim_t
-0000a380: 7970 655b 626f 6f6c 5f64 705d 203d 2042  ype[bool_dp] = B
-0000a390: 6f6f 6c0a 0a20 2020 2020 2020 2020 2020  ool..           
-0000a3a0: 2020 2020 2064 6174 615f 6861 735f 7661       data_has_va
-0000a3b0: 6c75 6520 3d20 6661 6374 6f72 792e 6372  lue = factory.cr
-0000a3c0: 6561 7465 5f64 6174 615f 6861 735f 7661  eate_data_has_va
-0000a3d0: 6c75 6528 626f 6f6c 5f64 7029 0a20 2020  lue(bool_dp).   
-0000a3e0: 2020 2020 2020 2020 2020 2020 2070 7365               pse
-0000a3f0: 742e 6164 6450 7269 6d69 7469 7665 2864  t.addPrimitive(d
-0000a400: 6174 615f 6861 735f 7661 6c75 652c 205b  ata_has_value, [
-0000a410: 426f 6f6c 5d2c 204f 574c 436c 6173 7345  Bool], OWLClassE
-0000a420: 7870 7265 7373 696f 6e2c 0a20 2020 2020  xpression,.     
-0000a430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a440: 2020 2020 2020 2020 2020 2020 206e 616d               nam
-0000a450: 653d 4f70 6572 6174 6f72 566f 6361 6275  e=OperatorVocabu
-0000a460: 6c61 7279 2e44 4154 415f 4841 535f 5641  lary.DATA_HAS_VA
-0000a470: 4c55 4520 2b20 6e61 6d65 290a 0a20 2020  LUE + name)..   
-0000a480: 2020 2020 2020 2020 2066 6f72 2073 706c           for spl
-0000a490: 6974 5f64 7020 696e 2063 6861 696e 2873  it_dp in chain(s
-0000a4a0: 656c 662e 6b62 2e67 6574 5f74 696d 655f  elf.kb.get_time_
-0000a4b0: 6461 7461 5f70 726f 7065 7274 6965 7328  data_properties(
-0000a4c0: 292c 2073 656c 662e 6b62 2e67 6574 5f6e  ), self.kb.get_n
-0000a4d0: 756d 6572 6963 5f64 6174 615f 7072 6f70  umeric_data_prop
-0000a4e0: 6572 7469 6573 2829 293a 0a20 2020 2020  erties()):.     
-0000a4f0: 2020 2020 2020 2020 2020 206e 616d 6520             name 
-0000a500: 3d20 6573 6361 7065 2873 706c 6974 5f64  = escape(split_d
-0000a510: 702e 6765 745f 6972 6928 292e 6765 745f  p.get_iri().get_
-0000a520: 7265 6d61 696e 6465 7228 2929 0a20 2020  remainder()).   
-0000a530: 2020 2020 2020 2020 2020 2020 2074 7970               typ
-0000a540: 655f 203d 2074 7970 6528 6e61 6d65 2c20  e_ = type(name, 
-0000a550: 286f 626a 6563 742c 292c 207b 7d29 0a0a  (object,), {})..
-0000a560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a570: 7365 6c66 2e5f 6470 5f74 6f5f 7072 696d  self._dp_to_prim
-0000a580: 5f74 7970 655b 7370 6c69 745f 6470 5d20  _type[split_dp] 
-0000a590: 3d20 7479 7065 5f0a 2020 2020 2020 2020  = type_.        
-0000a5a0: 2020 2020 2020 2020 7365 6c66 2e5f 7370          self._sp
-0000a5b0: 6c69 745f 7072 6f70 6572 7469 6573 2e61  lit_properties.a
-0000a5c0: 7070 656e 6428 7370 6c69 745f 6470 290a  ppend(split_dp).
-0000a5d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a5e0: 206d 696e 5f69 6e63 2c20 6d61 785f 696e   min_inc, max_in
-0000a5f0: 632c 205f 2c20 5f20 3d20 6661 6374 6f72  c, _, _ = factor
-0000a600: 792e 6372 6561 7465 5f64 6174 615f 736f  y.create_data_so
-0000a610: 6d65 5f76 616c 7565 7328 7370 6c69 745f  me_values(split_
-0000a620: 6470 290a 2020 2020 2020 2020 2020 2020  dp).            
-0000a630: 2020 2020 7073 6574 2e61 6464 5072 696d      pset.addPrim
-0000a640: 6974 6976 6528 6d69 6e5f 696e 632c 205b  itive(min_inc, [
-0000a650: 7479 7065 5f5d 2c20 4f57 4c43 6c61 7373  type_], OWLClass
-0000a660: 4578 7072 6573 7369 6f6e 2c0a 2020 2020  Expression,.    
-0000a670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a680: 2020 2020 2020 2020 2020 2020 2020 6e61                na
-0000a690: 6d65 3d4f 7065 7261 746f 7256 6f63 6162  me=OperatorVocab
-0000a6a0: 756c 6172 792e 4441 5441 5f4d 494e 5f49  ulary.DATA_MIN_I
-0000a6b0: 4e43 4c55 5349 5645 202b 206e 616d 6529  NCLUSIVE + name)
-0000a6c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a6d0: 2070 7365 742e 6164 6450 7269 6d69 7469   pset.addPrimiti
-0000a6e0: 7665 286d 6178 5f69 6e63 2c20 5b74 7970  ve(max_inc, [typ
-0000a6f0: 655f 5d2c 204f 574c 436c 6173 7345 7870  e_], OWLClassExp
-0000a700: 7265 7373 696f 6e2c 0a20 2020 2020 2020  ression,.       
-0000a710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a720: 2020 2020 2020 2020 2020 206e 616d 653d             name=
-0000a730: 4f70 6572 6174 6f72 566f 6361 6275 6c61  OperatorVocabula
-0000a740: 7279 2e44 4154 415f 4d41 585f 494e 434c  ry.DATA_MAX_INCL
-0000a750: 5553 4956 4520 2b20 6e61 6d65 290a 2020  USIVE + name).  
-0000a760: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000a770: 7073 6574 2e61 6464 5072 696d 6974 6976  pset.addPrimitiv
-0000a780: 6528 6d69 6e5f 6578 632c 205b 7479 7065  e(min_exc, [type
-0000a790: 5f5d 2c20 4f57 4c43 6c61 7373 4578 7072  _], OWLClassExpr
-0000a7a0: 6573 7369 6f6e 2c0a 2020 2020 2020 2020  ession,.        
-0000a7b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000a7c0: 2020 2020 2020 2020 2020 206e 616d 653d             name=
-0000a7d0: 4f70 6572 6174 6f72 566f 6361 6275 6c61  OperatorVocabula
-0000a7e0: 7279 2e44 4154 415f 4d49 4e5f 4558 434c  ry.DATA_MIN_EXCL
-0000a7f0: 5553 4956 4520 2b20 6e61 6d65 290a 2020  USIVE + name).  
-0000a800: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000a810: 7073 6574 2e61 6464 5072 696d 6974 6976  pset.addPrimitiv
-0000a820: 6528 6d61 785f 6578 632c 205b 7479 7065  e(max_exc, [type
-0000a830: 5f5d 2c20 4f57 4c43 6c61 7373 4578 7072  _], OWLClassExpr
-0000a840: 6573 7369 6f6e 2c0a 2020 2020 2020 2020  ession,.        
-0000a850: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000a860: 2020 2020 2020 2020 2020 206e 616d 653d             name=
-0000a870: 4f70 6572 6174 6f72 566f 6361 6275 6c61  OperatorVocabula
-0000a880: 7279 2e44 4154 415f 4d41 585f 4558 434c  ry.DATA_MAX_EXCL
-0000a890: 5553 4956 4520 2b20 6e61 6d65 290a 0a20  USIVE + name).. 
-0000a8a0: 2020 2020 2020 2069 6620 7365 6c66 2e75         if self.u
-0000a8b0: 7365 5f63 6172 645f 7265 7374 7269 6374  se_card_restrict
-0000a8c0: 696f 6e73 3a0a 2020 2020 2020 2020 2020  ions:.          
-0000a8d0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-0000a8e0: 2831 2c20 7365 6c66 2e63 6172 645f 6c69  (1, self.card_li
-0000a8f0: 6d69 7420 2b20 3129 3a0a 2020 2020 2020  mit + 1):.      
-0000a900: 2020 2020 2020 2020 2020 7073 6574 2e61            pset.a
-0000a910: 6464 5465 726d 696e 616c 2869 2c20 696e  ddTerminal(i, in
-0000a920: 7429 0a20 2020 2020 2020 2020 2020 2066  t).            f
-0000a930: 6f72 206f 7020 696e 2073 656c 662e 6b62  or op in self.kb
-0000a940: 2e67 6574 5f6f 626a 6563 745f 7072 6f70  .get_object_prop
-0000a950: 6572 7469 6573 2829 3a0a 2020 2020 2020  erties():.      
-0000a960: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
-0000a970: 2065 7363 6170 6528 6f70 2e67 6574 5f69   escape(op.get_i
-0000a980: 7269 2829 2e67 6574 5f72 656d 6169 6e64  ri().get_remaind
-0000a990: 6572 2829 290a 2020 2020 2020 2020 2020  er()).          
-0000a9a0: 2020 2020 2020 6361 7264 5f6d 696e 2c20        card_min, 
-0000a9b0: 6361 7264 5f6d 6178 2c20 5f20 3d20 6661  card_max, _ = fa
-0000a9c0: 6374 6f72 792e 6372 6561 7465 5f63 6172  ctory.create_car
-0000a9d0: 645f 7265 7374 7269 6374 696f 6e73 286f  d_restrictions(o
-0000a9e0: 7029 0a20 2020 2020 2020 2020 2020 2020  p).             
-0000a9f0: 2020 2070 7365 742e 6164 6450 7269 6d69     pset.addPrimi
-0000aa00: 7469 7665 2863 6172 645f 6d69 6e2c 205b  tive(card_min, [
-0000aa10: 696e 742c 204f 574c 436c 6173 7345 7870  int, OWLClassExp
-0000aa20: 7265 7373 696f 6e5d 2c20 4f57 4c43 6c61  ression], OWLCla
-0000aa30: 7373 4578 7072 6573 7369 6f6e 2c0a 2020  ssExpression,.  
-0000aa40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa60: 6e61 6d65 3d4f 7065 7261 746f 7256 6f63  name=OperatorVoc
-0000aa70: 6162 756c 6172 792e 4341 5244 5f4d 494e  abulary.CARD_MIN
-0000aa80: 202b 206e 616d 6529 0a20 2020 2020 2020   + name).       
-0000aa90: 2020 2020 2020 2020 2070 7365 742e 6164           pset.ad
-0000aaa0: 6450 7269 6d69 7469 7665 2863 6172 645f  dPrimitive(card_
-0000aab0: 6d61 782c 205b 696e 742c 204f 574c 436c  max, [int, OWLCl
-0000aac0: 6173 7345 7870 7265 7373 696f 6e5d 2c20  assExpression], 
-0000aad0: 4f57 4c43 6c61 7373 4578 7072 6573 7369  OWLClassExpressi
-0000aae0: 6f6e 2c0a 2020 2020 2020 2020 2020 2020  on,.            
-0000aaf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab00: 2020 2020 2020 6e61 6d65 3d4f 7065 7261        name=Opera
-0000ab10: 746f 7256 6f63 6162 756c 6172 792e 4341  torVocabulary.CA
-0000ab20: 5244 5f4d 4158 202b 206e 616d 6529 0a20  RD_MAX + name). 
-0000ab30: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000ab40: 2070 7365 742e 6164 6450 7269 6d69 7469   pset.addPrimiti
-0000ab50: 7665 2863 6172 645f 6578 6163 742c 205b  ve(card_exact, [
-0000ab60: 696e 742c 204f 574c 436c 6173 7345 7870  int, OWLClassExp
-0000ab70: 7265 7373 696f 6e5d 2c20 4f57 4c43 6c61  ression], OWLCla
-0000ab80: 7373 4578 7072 6573 7369 6f6e 2c0a 2020  ssExpression,.  
-0000ab90: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000aba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000abb0: 206e 616d 653d 4f70 6572 6174 6f72 566f   name=OperatorVo
-0000abc0: 6361 6275 6c61 7279 2e43 4152 445f 4558  cabulary.CARD_EX
-0000abd0: 4143 5420 2b20 6e61 6d65 290a 0a20 2020  ACT + name)..   
-0000abe0: 2020 2020 2066 6f72 2063 6c61 7373 5f20       for class_ 
-0000abf0: 696e 2073 656c 662e 6b62 2e67 6574 5f63  in self.kb.get_c
-0000ac00: 6f6e 6365 7074 7328 293a 0a20 2020 2020  oncepts():.     
-0000ac10: 2020 2020 2020 2070 7365 742e 6164 6454         pset.addT
-0000ac20: 6572 6d69 6e61 6c28 636c 6173 735f 2c20  erminal(class_, 
-0000ac30: 4f57 4c43 6c61 7373 4578 7072 6573 7369  OWLClassExpressi
-0000ac40: 6f6e 2c20 6e61 6d65 3d65 7363 6170 6528  on, name=escape(
-0000ac50: 636c 6173 735f 2e67 6574 5f69 7269 2829  class_.get_iri()
-0000ac60: 2e67 6574 5f72 656d 6169 6e64 6572 2829  .get_remainder()
-0000ac70: 2929 0a0a 2020 2020 2020 2020 7073 6574  ))..        pset
-0000ac80: 2e61 6464 5465 726d 696e 616c 2873 656c  .addTerminal(sel
-0000ac90: 662e 6b62 2e67 656e 6572 6174 6f72 2e74  f.kb.generator.t
-0000aca0: 6869 6e67 2c20 4f57 4c43 6c61 7373 4578  hing, OWLClassEx
-0000acb0: 7072 6573 7369 6f6e 2c0a 2020 2020 2020  pression,.      
-0000acc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000acd0: 2020 206e 616d 653d 6573 6361 7065 2873     name=escape(s
-0000ace0: 656c 662e 6b62 2e67 656e 6572 6174 6f72  elf.kb.generator
-0000acf0: 2e74 6869 6e67 2e67 6574 5f69 7269 2829  .thing.get_iri()
-0000ad00: 2e67 6574 5f72 656d 6169 6e64 6572 2829  .get_remainder()
-0000ad10: 2929 0a20 2020 2020 2020 2070 7365 742e  )).        pset.
-0000ad20: 6164 6454 6572 6d69 6e61 6c28 7365 6c66  addTerminal(self
-0000ad30: 2e6b 622e 6765 6e65 7261 746f 722e 6e6f  .kb.generator.no
-0000ad40: 7468 696e 672c 204f 574c 436c 6173 7345  thing, OWLClassE
-0000ad50: 7870 7265 7373 696f 6e2c 0a20 2020 2020  xpression,.     
-0000ad60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad70: 2020 2020 6e61 6d65 3d65 7363 6170 6528      name=escape(
-0000ad80: 7365 6c66 2e6b 622e 6765 6e65 7261 746f  self.kb.generato
-0000ad90: 722e 6e6f 7468 696e 672e 6765 745f 6972  r.nothing.get_ir
-0000ada0: 6928 292e 6765 745f 7265 6d61 696e 6465  i().get_remainde
-0000adb0: 7228 2929 290a 2020 2020 2020 2020 7265  r())).        re
-0000adc0: 7475 726e 2070 7365 740a 0a20 2020 2064  turn pset..    d
-0000add0: 6566 205f 5f62 7569 6c64 5f74 6f6f 6c62  ef __build_toolb
-0000ade0: 6f78 2873 656c 6629 202d 3e20 6261 7365  ox(self) -> base
-0000adf0: 2e54 6f6f 6c62 6f78 3a0a 2020 2020 2020  .Toolbox:.      
-0000ae00: 2020 6372 6561 746f 722e 6372 6561 7465    creator.create
-0000ae10: 2822 4669 746e 6573 7322 2c20 6261 7365  ("Fitness", base
-0000ae20: 2e46 6974 6e65 7373 2c20 7765 6967 6874  .Fitness, weight
-0000ae30: 733d 2831 2e30 2c29 290a 2020 2020 2020  s=(1.0,)).      
-0000ae40: 2020 6372 6561 746f 722e 6372 6561 7465    creator.create
-0000ae50: 2822 5175 616c 6974 7922 2c20 6261 7365  ("Quality", base
-0000ae60: 2e46 6974 6e65 7373 2c20 7765 6967 6874  .Fitness, weight
-0000ae70: 733d 2831 2e30 2c29 290a 2020 2020 2020  s=(1.0,)).      
-0000ae80: 2020 6372 6561 746f 722e 6372 6561 7465    creator.create
-0000ae90: 2822 496e 6469 7669 6475 616c 222c 2067  ("Individual", g
-0000aea0: 702e 5072 696d 6974 6976 6554 7265 652c  p.PrimitiveTree,
-0000aeb0: 2066 6974 6e65 7373 3d63 7265 6174 6f72   fitness=creator
-0000aec0: 2e46 6974 6e65 7373 2c20 7175 616c 6974  .Fitness, qualit
-0000aed0: 793d 6372 6561 746f 722e 5175 616c 6974  y=creator.Qualit
-0000aee0: 7929 0a0a 2020 2020 2020 2020 746f 6f6c  y)..        tool
-0000aef0: 626f 7820 3d20 6261 7365 2e54 6f6f 6c62  box = base.Toolb
-0000af00: 6f78 2829 0a20 2020 2020 2020 2074 6f6f  ox().        too
-0000af10: 6c62 6f78 2e72 6567 6973 7465 7228 546f  lbox.register(To
-0000af20: 6f6c 626f 7856 6f63 6162 756c 6172 792e  olboxVocabulary.
-0000af30: 494e 4954 5f50 4f50 554c 4154 494f 4e2c  INIT_POPULATION,
-0000af40: 2073 656c 662e 696e 6974 5f6d 6574 686f   self.init_metho
-0000af50: 642e 6765 745f 706f 7075 6c61 7469 6f6e  d.get_population
-0000af60: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000af70: 2020 2020 2020 2020 2020 2063 7265 6174             creat
-0000af80: 6f72 2e49 6e64 6976 6964 7561 6c2c 2073  or.Individual, s
-0000af90: 656c 662e 7073 6574 290a 2020 2020 2020  elf.pset).      
-0000afa0: 2020 746f 6f6c 626f 782e 7265 6769 7374    toolbox.regist
-0000afb0: 6572 2854 6f6f 6c62 6f78 566f 6361 6275  er(ToolboxVocabu
-0000afc0: 6c61 7279 2e43 4f4d 5049 4c45 2c20 6770  lary.COMPILE, gp
-0000afd0: 2e63 6f6d 7069 6c65 2c20 7073 6574 3d73  .compile, pset=s
-0000afe0: 656c 662e 7073 6574 290a 0a20 2020 2020  elf.pset)..     
-0000aff0: 2020 2074 6f6f 6c62 6f78 2e72 6567 6973     toolbox.regis
-0000b000: 7465 7228 546f 6f6c 626f 7856 6f63 6162  ter(ToolboxVocab
-0000b010: 756c 6172 792e 4649 544e 4553 535f 4655  ulary.FITNESS_FU
-0000b020: 4e43 5449 4f4e 2c20 7365 6c66 2e5f 6669  NCTION, self._fi
-0000b030: 746e 6573 735f 6675 6e63 290a 2020 2020  tness_func).    
-0000b040: 2020 2020 746f 6f6c 626f 782e 7265 6769      toolbox.regi
-0000b050: 7374 6572 2854 6f6f 6c62 6f78 566f 6361  ster(ToolboxVoca
-0000b060: 6275 6c61 7279 2e53 454c 4543 5449 4f4e  bulary.SELECTION
-0000b070: 2c20 746f 6f6c 732e 7365 6c54 6f75 726e  , tools.selTourn
-0000b080: 616d 656e 742c 2074 6f75 726e 7369 7a65  ament, tournsize
-0000b090: 3d73 656c 662e 746f 7572 6e61 6d65 6e74  =self.tournament
-0000b0a0: 5f73 697a 6529 0a20 2020 2020 2020 2074  _size).        t
-0000b0b0: 6f6f 6c62 6f78 2e72 6567 6973 7465 7228  oolbox.register(
-0000b0c0: 546f 6f6c 626f 7856 6f63 6162 756c 6172  ToolboxVocabular
-0000b0d0: 792e 4352 4f53 534f 5645 522c 2067 702e  y.CROSSOVER, gp.
-0000b0e0: 6378 4f6e 6550 6f69 6e74 290a 2020 2020  cxOnePoint).    
-0000b0f0: 2020 2020 746f 6f6c 626f 782e 7265 6769      toolbox.regi
-0000b100: 7374 6572 2822 6372 6561 7465 5f74 7265  ster("create_tre
-0000b110: 655f 6d75 7422 2c20 7365 6c66 2e6d 7574  e_mut", self.mut
-0000b120: 5f75 6e69 666f 726d 5f67 656e 2e67 6574  _uniform_gen.get
-0000b130: 5f65 7870 7265 7373 696f 6e29 0a20 2020  _expression).   
-0000b140: 2020 2020 2074 6f6f 6c62 6f78 2e72 6567       toolbox.reg
-0000b150: 6973 7465 7228 546f 6f6c 626f 7856 6f63  ister(ToolboxVoc
-0000b160: 6162 756c 6172 792e 4d55 5441 5449 4f4e  abulary.MUTATION
-0000b170: 2c20 6770 2e6d 7574 556e 6966 6f72 6d2c  , gp.mutUniform,
-0000b180: 2065 7870 723d 746f 6f6c 626f 782e 6372   expr=toolbox.cr
-0000b190: 6561 7465 5f74 7265 655f 6d75 742c 2070  eate_tree_mut, p
-0000b1a0: 7365 743d 7365 6c66 2e70 7365 7429 0a0a  set=self.pset)..
-0000b1b0: 2020 2020 2020 2020 746f 6f6c 626f 782e          toolbox.
-0000b1c0: 6465 636f 7261 7465 2854 6f6f 6c62 6f78  decorate(Toolbox
-0000b1d0: 566f 6361 6275 6c61 7279 2e43 524f 5353  Vocabulary.CROSS
-0000b1e0: 4f56 4552 2c0a 2020 2020 2020 2020 2020  OVER,.          
-0000b1f0: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-0000b200: 702e 7374 6174 6963 4c69 6d69 7428 6b65  p.staticLimit(ke
-0000b210: 793d 6f70 6572 6174 6f72 2e61 7474 7267  y=operator.attrg
-0000b220: 6574 7465 7228 546f 6f6c 626f 7856 6f63  etter(ToolboxVoc
-0000b230: 6162 756c 6172 792e 4845 4947 4854 5f4b  abulary.HEIGHT_K
-0000b240: 4559 292c 0a20 2020 2020 2020 2020 2020  EY),.           
-0000b250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b260: 2020 2020 2020 2020 2020 2020 206d 6178               max
-0000b270: 5f76 616c 7565 3d73 656c 662e 6865 6967  _value=self.heig
-0000b280: 6874 5f6c 696d 6974 2929 0a20 2020 2020  ht_limit)).     
-0000b290: 2020 2074 6f6f 6c62 6f78 2e64 6563 6f72     toolbox.decor
-0000b2a0: 6174 6528 546f 6f6c 626f 7856 6f63 6162  ate(ToolboxVocab
-0000b2b0: 756c 6172 792e 4d55 5441 5449 4f4e 2c0a  ulary.MUTATION,.
+00009f40: 2020 2020 2020 2020 2020 6e61 6d65 3d4f            name=O
+00009f50: 7065 7261 746f 7256 6f63 6162 756c 6172  peratorVocabular
+00009f60: 792e 4558 4953 5445 4e54 4941 4c20 2b20  y.EXISTENTIAL + 
+00009f70: 6e61 6d65 290a 2020 2020 2020 2020 2020  name).          
+00009f80: 2020 7073 6574 2e61 6464 5072 696d 6974    pset.addPrimit
+00009f90: 6976 6528 756e 6976 6572 7361 6c2c 205b  ive(universal, [
+00009fa0: 4f57 4c43 6c61 7373 4578 7072 6573 7369  OWLClassExpressi
+00009fb0: 6f6e 5d2c 204f 574c 436c 6173 7345 7870  on], OWLClassExp
+00009fc0: 7265 7373 696f 6e2c 0a20 2020 2020 2020  ression,.       
+00009fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009fe0: 2020 2020 2020 206e 616d 653d 4f70 6572         name=Oper
+00009ff0: 6174 6f72 566f 6361 6275 6c61 7279 2e55  atorVocabulary.U
+0000a000: 4e49 5645 5253 414c 202b 206e 616d 6529  NIVERSAL + name)
+0000a010: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0000a020: 2073 656c 662e 7573 655f 696e 7665 7273   self.use_invers
+0000a030: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000a040: 2020 2065 7869 7374 656e 7469 616c 2c20     existential, 
+0000a050: 756e 6976 6572 7361 6c20 3d20 6661 6374  universal = fact
+0000a060: 6f72 792e 6372 6561 7465 5f65 7869 7374  ory.create_exist
+0000a070: 656e 7469 616c 5f75 6e69 7665 7273 616c  ential_universal
+0000a080: 286f 702e 6765 745f 696e 7665 7273 655f  (op.get_inverse_
+0000a090: 7072 6f70 6572 7479 2829 290a 2020 2020  property()).    
+0000a0a0: 2020 2020 2020 2020 2020 2020 7073 6574              pset
+0000a0b0: 2e61 6464 5072 696d 6974 6976 6528 6578  .addPrimitive(ex
+0000a0c0: 6973 7465 6e74 6961 6c2c 205b 4f57 4c43  istential, [OWLC
+0000a0d0: 6c61 7373 4578 7072 6573 7369 6f6e 5d2c  lassExpression],
+0000a0e0: 204f 574c 436c 6173 7345 7870 7265 7373   OWLClassExpress
+0000a0f0: 696f 6e2c 0a20 2020 2020 2020 2020 2020  ion,.           
+0000a100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a110: 2020 2020 2020 206e 616d 653d 4f70 6572         name=Oper
+0000a120: 6174 6f72 566f 6361 6275 6c61 7279 2e49  atorVocabulary.I
+0000a130: 4e56 4552 5345 202b 204f 7065 7261 746f  NVERSE + Operato
+0000a140: 7256 6f63 6162 756c 6172 792e 4558 4953  rVocabulary.EXIS
+0000a150: 5445 4e54 4941 4c20 2b20 6e61 6d65 290a  TENTIAL + name).
+0000a160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a170: 7073 6574 2e61 6464 5072 696d 6974 6976  pset.addPrimitiv
+0000a180: 6528 756e 6976 6572 7361 6c2c 205b 4f57  e(universal, [OW
+0000a190: 4c43 6c61 7373 4578 7072 6573 7369 6f6e  LClassExpression
+0000a1a0: 5d2c 204f 574c 436c 6173 7345 7870 7265  ], OWLClassExpre
+0000a1b0: 7373 696f 6e2c 0a20 2020 2020 2020 2020  ssion,.         
+0000a1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a1d0: 2020 2020 2020 2020 206e 616d 653d 4f70           name=Op
+0000a1e0: 6572 6174 6f72 566f 6361 6275 6c61 7279  eratorVocabulary
+0000a1f0: 2e49 4e56 4552 5345 202b 204f 7065 7261  .INVERSE + Opera
+0000a200: 746f 7256 6f63 6162 756c 6172 792e 554e  torVocabulary.UN
+0000a210: 4956 4552 5341 4c20 2b20 6e61 6d65 290a  IVERSAL + name).
+0000a220: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+0000a230: 2e75 7365 5f64 6174 615f 7072 6f70 6572  .use_data_proper
+0000a240: 7469 6573 3a0a 2020 2020 2020 2020 2020  ties:.          
+0000a250: 2020 636c 6173 7320 426f 6f6c 286f 626a    class Bool(obj
+0000a260: 6563 7429 3a0a 2020 2020 2020 2020 2020  ect):.          
+0000a270: 2020 2020 2020 7061 7373 0a0a 2020 2020        pass..    
+0000a280: 2020 2020 2020 2020 6661 6c73 655f 203d          false_ =
+0000a290: 204f 574c 4c69 7465 7261 6c28 4661 6c73   OWLLiteral(Fals
+0000a2a0: 6529 0a20 2020 2020 2020 2020 2020 2074  e).            t
+0000a2b0: 7275 655f 203d 204f 574c 4c69 7465 7261  rue_ = OWLLitera
+0000a2c0: 6c28 5472 7565 290a 2020 2020 2020 2020  l(True).        
+0000a2d0: 2020 2020 7073 6574 2e61 6464 5465 726d      pset.addTerm
+0000a2e0: 696e 616c 2866 616c 7365 5f2c 2042 6f6f  inal(false_, Boo
+0000a2f0: 6c2c 206e 616d 653d 6f77 6c6c 6974 6572  l, name=owlliter
+0000a300: 616c 5f74 6f5f 7072 696d 6974 6976 655f  al_to_primitive_
+0000a310: 7374 7269 6e67 2866 616c 7365 5f29 290a  string(false_)).
+0000a320: 2020 2020 2020 2020 2020 2020 7073 6574              pset
+0000a330: 2e61 6464 5465 726d 696e 616c 2874 7275  .addTerminal(tru
+0000a340: 655f 2c20 426f 6f6c 2c20 6e61 6d65 3d6f  e_, Bool, name=o
+0000a350: 776c 6c69 7465 7261 6c5f 746f 5f70 7269  wlliteral_to_pri
+0000a360: 6d69 7469 7665 5f73 7472 696e 6728 7472  mitive_string(tr
+0000a370: 7565 5f29 290a 0a20 2020 2020 2020 2020  ue_))..         
+0000a380: 2020 2066 6f72 2062 6f6f 6c5f 6470 2069     for bool_dp i
+0000a390: 6e20 7365 6c66 2e6b 622e 6765 745f 626f  n self.kb.get_bo
+0000a3a0: 6f6c 6561 6e5f 6461 7461 5f70 726f 7065  olean_data_prope
+0000a3b0: 7274 6965 7328 293a 0a20 2020 2020 2020  rties():.       
+0000a3c0: 2020 2020 2020 2020 206e 616d 6520 3d20           name = 
+0000a3d0: 6573 6361 7065 2862 6f6f 6c5f 6470 2e69  escape(bool_dp.i
+0000a3e0: 7269 2e67 6574 5f72 656d 6169 6e64 6572  ri.get_remainder
+0000a3f0: 2829 290a 2020 2020 2020 2020 2020 2020  ()).            
+0000a400: 2020 2020 7365 6c66 2e5f 6470 5f74 6f5f      self._dp_to_
+0000a410: 7072 696d 5f74 7970 655b 626f 6f6c 5f64  prim_type[bool_d
+0000a420: 705d 203d 2042 6f6f 6c0a 0a20 2020 2020  p] = Bool..     
+0000a430: 2020 2020 2020 2020 2020 2064 6174 615f             data_
+0000a440: 6861 735f 7661 6c75 6520 3d20 6661 6374  has_value = fact
+0000a450: 6f72 792e 6372 6561 7465 5f64 6174 615f  ory.create_data_
+0000a460: 6861 735f 7661 6c75 6528 626f 6f6c 5f64  has_value(bool_d
+0000a470: 7029 0a20 2020 2020 2020 2020 2020 2020  p).             
+0000a480: 2020 2070 7365 742e 6164 6450 7269 6d69     pset.addPrimi
+0000a490: 7469 7665 2864 6174 615f 6861 735f 7661  tive(data_has_va
+0000a4a0: 6c75 652c 205b 426f 6f6c 5d2c 204f 574c  lue, [Bool], OWL
+0000a4b0: 436c 6173 7345 7870 7265 7373 696f 6e2c  ClassExpression,
+0000a4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a4e0: 2020 206e 616d 653d 4f70 6572 6174 6f72     name=Operator
+0000a4f0: 566f 6361 6275 6c61 7279 2e44 4154 415f  Vocabulary.DATA_
+0000a500: 4841 535f 5641 4c55 4520 2b20 6e61 6d65  HAS_VALUE + name
+0000a510: 290a 0a20 2020 2020 2020 2020 2020 2066  )..            f
+0000a520: 6f72 2073 706c 6974 5f64 7020 696e 2063  or split_dp in c
+0000a530: 6861 696e 2873 656c 662e 6b62 2e67 6574  hain(self.kb.get
+0000a540: 5f74 696d 655f 6461 7461 5f70 726f 7065  _time_data_prope
+0000a550: 7274 6965 7328 292c 2073 656c 662e 6b62  rties(), self.kb
+0000a560: 2e67 6574 5f6e 756d 6572 6963 5f64 6174  .get_numeric_dat
+0000a570: 615f 7072 6f70 6572 7469 6573 2829 293a  a_properties()):
+0000a580: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a590: 206e 616d 6520 3d20 6573 6361 7065 2873   name = escape(s
+0000a5a0: 706c 6974 5f64 702e 6972 692e 6765 745f  plit_dp.iri.get_
+0000a5b0: 7265 6d61 696e 6465 7228 2929 0a20 2020  remainder()).   
+0000a5c0: 2020 2020 2020 2020 2020 2020 2074 7970               typ
+0000a5d0: 655f 203d 2074 7970 6528 6e61 6d65 2c20  e_ = type(name, 
+0000a5e0: 286f 626a 6563 742c 292c 207b 7d29 0a0a  (object,), {})..
+0000a5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a600: 7365 6c66 2e5f 6470 5f74 6f5f 7072 696d  self._dp_to_prim
+0000a610: 5f74 7970 655b 7370 6c69 745f 6470 5d20  _type[split_dp] 
+0000a620: 3d20 7479 7065 5f0a 2020 2020 2020 2020  = type_.        
+0000a630: 2020 2020 2020 2020 7365 6c66 2e5f 7370          self._sp
+0000a640: 6c69 745f 7072 6f70 6572 7469 6573 2e61  lit_properties.a
+0000a650: 7070 656e 6428 7370 6c69 745f 6470 290a  ppend(split_dp).
+0000a660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a670: 206d 696e 5f69 6e63 2c20 6d61 785f 696e   min_inc, max_in
+0000a680: 632c 205f 2c20 5f20 3d20 6661 6374 6f72  c, _, _ = factor
+0000a690: 792e 6372 6561 7465 5f64 6174 615f 736f  y.create_data_so
+0000a6a0: 6d65 5f76 616c 7565 7328 7370 6c69 745f  me_values(split_
+0000a6b0: 6470 290a 2020 2020 2020 2020 2020 2020  dp).            
+0000a6c0: 2020 2020 7073 6574 2e61 6464 5072 696d      pset.addPrim
+0000a6d0: 6974 6976 6528 6d69 6e5f 696e 632c 205b  itive(min_inc, [
+0000a6e0: 7479 7065 5f5d 2c20 4f57 4c43 6c61 7373  type_], OWLClass
+0000a6f0: 4578 7072 6573 7369 6f6e 2c0a 2020 2020  Expression,.    
+0000a700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a710: 2020 2020 2020 2020 2020 2020 2020 6e61                na
+0000a720: 6d65 3d4f 7065 7261 746f 7256 6f63 6162  me=OperatorVocab
+0000a730: 756c 6172 792e 4441 5441 5f4d 494e 5f49  ulary.DATA_MIN_I
+0000a740: 4e43 4c55 5349 5645 202b 206e 616d 6529  NCLUSIVE + name)
+0000a750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a760: 2070 7365 742e 6164 6450 7269 6d69 7469   pset.addPrimiti
+0000a770: 7665 286d 6178 5f69 6e63 2c20 5b74 7970  ve(max_inc, [typ
+0000a780: 655f 5d2c 204f 574c 436c 6173 7345 7870  e_], OWLClassExp
+0000a790: 7265 7373 696f 6e2c 0a20 2020 2020 2020  ression,.       
+0000a7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a7b0: 2020 2020 2020 2020 2020 206e 616d 653d             name=
+0000a7c0: 4f70 6572 6174 6f72 566f 6361 6275 6c61  OperatorVocabula
+0000a7d0: 7279 2e44 4154 415f 4d41 585f 494e 434c  ry.DATA_MAX_INCL
+0000a7e0: 5553 4956 4520 2b20 6e61 6d65 290a 2020  USIVE + name).  
+0000a7f0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000a800: 7073 6574 2e61 6464 5072 696d 6974 6976  pset.addPrimitiv
+0000a810: 6528 6d69 6e5f 6578 632c 205b 7479 7065  e(min_exc, [type
+0000a820: 5f5d 2c20 4f57 4c43 6c61 7373 4578 7072  _], OWLClassExpr
+0000a830: 6573 7369 6f6e 2c0a 2020 2020 2020 2020  ession,.        
+0000a840: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000a850: 2020 2020 2020 2020 2020 206e 616d 653d             name=
+0000a860: 4f70 6572 6174 6f72 566f 6361 6275 6c61  OperatorVocabula
+0000a870: 7279 2e44 4154 415f 4d49 4e5f 4558 434c  ry.DATA_MIN_EXCL
+0000a880: 5553 4956 4520 2b20 6e61 6d65 290a 2020  USIVE + name).  
+0000a890: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000a8a0: 7073 6574 2e61 6464 5072 696d 6974 6976  pset.addPrimitiv
+0000a8b0: 6528 6d61 785f 6578 632c 205b 7479 7065  e(max_exc, [type
+0000a8c0: 5f5d 2c20 4f57 4c43 6c61 7373 4578 7072  _], OWLClassExpr
+0000a8d0: 6573 7369 6f6e 2c0a 2020 2020 2020 2020  ession,.        
+0000a8e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000a8f0: 2020 2020 2020 2020 2020 206e 616d 653d             name=
+0000a900: 4f70 6572 6174 6f72 566f 6361 6275 6c61  OperatorVocabula
+0000a910: 7279 2e44 4154 415f 4d41 585f 4558 434c  ry.DATA_MAX_EXCL
+0000a920: 5553 4956 4520 2b20 6e61 6d65 290a 0a20  USIVE + name).. 
+0000a930: 2020 2020 2020 2069 6620 7365 6c66 2e75         if self.u
+0000a940: 7365 5f63 6172 645f 7265 7374 7269 6374  se_card_restrict
+0000a950: 696f 6e73 3a0a 2020 2020 2020 2020 2020  ions:.          
+0000a960: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+0000a970: 2831 2c20 7365 6c66 2e63 6172 645f 6c69  (1, self.card_li
+0000a980: 6d69 7420 2b20 3129 3a0a 2020 2020 2020  mit + 1):.      
+0000a990: 2020 2020 2020 2020 2020 7073 6574 2e61            pset.a
+0000a9a0: 6464 5465 726d 696e 616c 2869 2c20 696e  ddTerminal(i, in
+0000a9b0: 7429 0a20 2020 2020 2020 2020 2020 2066  t).            f
+0000a9c0: 6f72 206f 7020 696e 2073 656c 662e 6b62  or op in self.kb
+0000a9d0: 2e67 6574 5f6f 626a 6563 745f 7072 6f70  .get_object_prop
+0000a9e0: 6572 7469 6573 2829 3a0a 2020 2020 2020  erties():.      
+0000a9f0: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
+0000aa00: 2065 7363 6170 6528 6f70 2e69 7269 2e67   escape(op.iri.g
+0000aa10: 6574 5f72 656d 6169 6e64 6572 2829 290a  et_remainder()).
+0000aa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aa30: 6361 7264 5f6d 696e 2c20 6361 7264 5f6d  card_min, card_m
+0000aa40: 6178 2c20 5f20 3d20 6661 6374 6f72 792e  ax, _ = factory.
+0000aa50: 6372 6561 7465 5f63 6172 645f 7265 7374  create_card_rest
+0000aa60: 7269 6374 696f 6e73 286f 7029 0a20 2020  rictions(op).   
+0000aa70: 2020 2020 2020 2020 2020 2020 2070 7365               pse
+0000aa80: 742e 6164 6450 7269 6d69 7469 7665 2863  t.addPrimitive(c
+0000aa90: 6172 645f 6d69 6e2c 205b 696e 742c 204f  ard_min, [int, O
+0000aaa0: 574c 436c 6173 7345 7870 7265 7373 696f  WLClassExpressio
+0000aab0: 6e5d 2c20 4f57 4c43 6c61 7373 4578 7072  n], OWLClassExpr
+0000aac0: 6573 7369 6f6e 2c0a 2020 2020 2020 2020  ession,.        
+0000aad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aae0: 2020 2020 2020 2020 2020 6e61 6d65 3d4f            name=O
+0000aaf0: 7065 7261 746f 7256 6f63 6162 756c 6172  peratorVocabular
+0000ab00: 792e 4341 5244 5f4d 494e 202b 206e 616d  y.CARD_MIN + nam
+0000ab10: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+0000ab20: 2020 2070 7365 742e 6164 6450 7269 6d69     pset.addPrimi
+0000ab30: 7469 7665 2863 6172 645f 6d61 782c 205b  tive(card_max, [
+0000ab40: 696e 742c 204f 574c 436c 6173 7345 7870  int, OWLClassExp
+0000ab50: 7265 7373 696f 6e5d 2c20 4f57 4c43 6c61  ression], OWLCla
+0000ab60: 7373 4578 7072 6573 7369 6f6e 2c0a 2020  ssExpression,.  
+0000ab70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab90: 6e61 6d65 3d4f 7065 7261 746f 7256 6f63  name=OperatorVoc
+0000aba0: 6162 756c 6172 792e 4341 5244 5f4d 4158  abulary.CARD_MAX
+0000abb0: 202b 206e 616d 6529 0a20 2020 2020 2020   + name).       
+0000abc0: 2020 2020 2020 2020 2023 2070 7365 742e           # pset.
+0000abd0: 6164 6450 7269 6d69 7469 7665 2863 6172  addPrimitive(car
+0000abe0: 645f 6578 6163 742c 205b 696e 742c 204f  d_exact, [int, O
+0000abf0: 574c 436c 6173 7345 7870 7265 7373 696f  WLClassExpressio
+0000ac00: 6e5d 2c20 4f57 4c43 6c61 7373 4578 7072  n], OWLClassExpr
+0000ac10: 6573 7369 6f6e 2c0a 2020 2020 2020 2020  ession,.        
+0000ac20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000ac30: 2020 2020 2020 2020 2020 206e 616d 653d             name=
+0000ac40: 4f70 6572 6174 6f72 566f 6361 6275 6c61  OperatorVocabula
+0000ac50: 7279 2e43 4152 445f 4558 4143 5420 2b20  ry.CARD_EXACT + 
+0000ac60: 6e61 6d65 290a 0a20 2020 2020 2020 2066  name)..        f
+0000ac70: 6f72 2063 6c61 7373 5f20 696e 2073 656c  or class_ in sel
+0000ac80: 662e 6b62 2e67 6574 5f63 6f6e 6365 7074  f.kb.get_concept
+0000ac90: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
+0000aca0: 2070 7365 742e 6164 6454 6572 6d69 6e61   pset.addTermina
+0000acb0: 6c28 636c 6173 735f 2c20 4f57 4c43 6c61  l(class_, OWLCla
+0000acc0: 7373 4578 7072 6573 7369 6f6e 2c20 6e61  ssExpression, na
+0000acd0: 6d65 3d65 7363 6170 6528 636c 6173 735f  me=escape(class_
+0000ace0: 2e69 7269 2e67 6574 5f72 656d 6169 6e64  .iri.get_remaind
+0000acf0: 6572 2829 2929 0a0a 2020 2020 2020 2020  er()))..        
+0000ad00: 7073 6574 2e61 6464 5465 726d 696e 616c  pset.addTerminal
+0000ad10: 2873 656c 662e 6b62 2e67 656e 6572 6174  (self.kb.generat
+0000ad20: 6f72 2e74 6869 6e67 2c20 4f57 4c43 6c61  or.thing, OWLCla
+0000ad30: 7373 4578 7072 6573 7369 6f6e 2c0a 2020  ssExpression,.  
+0000ad40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad50: 2020 2020 2020 206e 616d 653d 6573 6361         name=esca
+0000ad60: 7065 2873 656c 662e 6b62 2e67 656e 6572  pe(self.kb.gener
+0000ad70: 6174 6f72 2e74 6869 6e67 2e69 7269 2e67  ator.thing.iri.g
+0000ad80: 6574 5f72 656d 6169 6e64 6572 2829 2929  et_remainder()))
+0000ad90: 0a20 2020 2020 2020 2070 7365 742e 6164  .        pset.ad
+0000ada0: 6454 6572 6d69 6e61 6c28 7365 6c66 2e6b  dTerminal(self.k
+0000adb0: 622e 6765 6e65 7261 746f 722e 6e6f 7468  b.generator.noth
+0000adc0: 696e 672c 204f 574c 436c 6173 7345 7870  ing, OWLClassExp
+0000add0: 7265 7373 696f 6e2c 0a20 2020 2020 2020  ression,.       
+0000ade0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000adf0: 2020 6e61 6d65 3d65 7363 6170 6528 7365    name=escape(se
+0000ae00: 6c66 2e6b 622e 6765 6e65 7261 746f 722e  lf.kb.generator.
+0000ae10: 6e6f 7468 696e 672e 6972 692e 6765 745f  nothing.iri.get_
+0000ae20: 7265 6d61 696e 6465 7228 2929 290a 2020  remainder())).  
+0000ae30: 2020 2020 2020 7265 7475 726e 2070 7365        return pse
+0000ae40: 740a 0a20 2020 2064 6566 205f 5f62 7569  t..    def __bui
+0000ae50: 6c64 5f74 6f6f 6c62 6f78 2873 656c 6629  ld_toolbox(self)
+0000ae60: 202d 3e20 6261 7365 2e54 6f6f 6c62 6f78   -> base.Toolbox
+0000ae70: 3a0a 2020 2020 2020 2020 6372 6561 746f  :.        creato
+0000ae80: 722e 6372 6561 7465 2822 4669 746e 6573  r.create("Fitnes
+0000ae90: 7322 2c20 6261 7365 2e46 6974 6e65 7373  s", base.Fitness
+0000aea0: 2c20 7765 6967 6874 733d 2831 2e30 2c29  , weights=(1.0,)
+0000aeb0: 290a 2020 2020 2020 2020 6372 6561 746f  ).        creato
+0000aec0: 722e 6372 6561 7465 2822 5175 616c 6974  r.create("Qualit
+0000aed0: 7922 2c20 6261 7365 2e46 6974 6e65 7373  y", base.Fitness
+0000aee0: 2c20 7765 6967 6874 733d 2831 2e30 2c29  , weights=(1.0,)
+0000aef0: 290a 2020 2020 2020 2020 6372 6561 746f  ).        creato
+0000af00: 722e 6372 6561 7465 2822 496e 6469 7669  r.create("Indivi
+0000af10: 6475 616c 222c 2067 702e 5072 696d 6974  dual", gp.Primit
+0000af20: 6976 6554 7265 652c 2066 6974 6e65 7373  iveTree, fitness
+0000af30: 3d63 7265 6174 6f72 2e46 6974 6e65 7373  =creator.Fitness
+0000af40: 2c20 7175 616c 6974 793d 6372 6561 746f  , quality=creato
+0000af50: 722e 5175 616c 6974 7929 0a0a 2020 2020  r.Quality)..    
+0000af60: 2020 2020 746f 6f6c 626f 7820 3d20 6261      toolbox = ba
+0000af70: 7365 2e54 6f6f 6c62 6f78 2829 0a20 2020  se.Toolbox().   
+0000af80: 2020 2020 2074 6f6f 6c62 6f78 2e72 6567       toolbox.reg
+0000af90: 6973 7465 7228 546f 6f6c 626f 7856 6f63  ister(ToolboxVoc
+0000afa0: 6162 756c 6172 792e 494e 4954 5f50 4f50  abulary.INIT_POP
+0000afb0: 554c 4154 494f 4e2c 2073 656c 662e 696e  ULATION, self.in
+0000afc0: 6974 5f6d 6574 686f 642e 6765 745f 706f  it_method.get_po
+0000afd0: 7075 6c61 7469 6f6e 2c0a 2020 2020 2020  pulation,.      
+0000afe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aff0: 2020 2063 7265 6174 6f72 2e49 6e64 6976     creator.Indiv
+0000b000: 6964 7561 6c2c 2073 656c 662e 7073 6574  idual, self.pset
+0000b010: 290a 2020 2020 2020 2020 746f 6f6c 626f  ).        toolbo
+0000b020: 782e 7265 6769 7374 6572 2854 6f6f 6c62  x.register(Toolb
+0000b030: 6f78 566f 6361 6275 6c61 7279 2e43 4f4d  oxVocabulary.COM
+0000b040: 5049 4c45 2c20 6770 2e63 6f6d 7069 6c65  PILE, gp.compile
+0000b050: 2c20 7073 6574 3d73 656c 662e 7073 6574  , pset=self.pset
+0000b060: 290a 0a20 2020 2020 2020 2074 6f6f 6c62  )..        toolb
+0000b070: 6f78 2e72 6567 6973 7465 7228 546f 6f6c  ox.register(Tool
+0000b080: 626f 7856 6f63 6162 756c 6172 792e 4649  boxVocabulary.FI
+0000b090: 544e 4553 535f 4655 4e43 5449 4f4e 2c20  TNESS_FUNCTION, 
+0000b0a0: 7365 6c66 2e5f 6669 746e 6573 735f 6675  self._fitness_fu
+0000b0b0: 6e63 290a 2020 2020 2020 2020 746f 6f6c  nc).        tool
+0000b0c0: 626f 782e 7265 6769 7374 6572 2854 6f6f  box.register(Too
+0000b0d0: 6c62 6f78 566f 6361 6275 6c61 7279 2e53  lboxVocabulary.S
+0000b0e0: 454c 4543 5449 4f4e 2c20 746f 6f6c 732e  ELECTION, tools.
+0000b0f0: 7365 6c54 6f75 726e 616d 656e 742c 2074  selTournament, t
+0000b100: 6f75 726e 7369 7a65 3d73 656c 662e 746f  ournsize=self.to
+0000b110: 7572 6e61 6d65 6e74 5f73 697a 6529 0a20  urnament_size). 
+0000b120: 2020 2020 2020 2074 6f6f 6c62 6f78 2e72         toolbox.r
+0000b130: 6567 6973 7465 7228 546f 6f6c 626f 7856  egister(ToolboxV
+0000b140: 6f63 6162 756c 6172 792e 4352 4f53 534f  ocabulary.CROSSO
+0000b150: 5645 522c 2067 702e 6378 4f6e 6550 6f69  VER, gp.cxOnePoi
+0000b160: 6e74 290a 2020 2020 2020 2020 746f 6f6c  nt).        tool
+0000b170: 626f 782e 7265 6769 7374 6572 2822 6372  box.register("cr
+0000b180: 6561 7465 5f74 7265 655f 6d75 7422 2c20  eate_tree_mut", 
+0000b190: 7365 6c66 2e6d 7574 5f75 6e69 666f 726d  self.mut_uniform
+0000b1a0: 5f67 656e 2e67 6574 5f65 7870 7265 7373  _gen.get_express
+0000b1b0: 696f 6e29 0a20 2020 2020 2020 2074 6f6f  ion).        too
+0000b1c0: 6c62 6f78 2e72 6567 6973 7465 7228 546f  lbox.register(To
+0000b1d0: 6f6c 626f 7856 6f63 6162 756c 6172 792e  olboxVocabulary.
+0000b1e0: 4d55 5441 5449 4f4e 2c20 6770 2e6d 7574  MUTATION, gp.mut
+0000b1f0: 556e 6966 6f72 6d2c 2065 7870 723d 746f  Uniform, expr=to
+0000b200: 6f6c 626f 782e 6372 6561 7465 5f74 7265  olbox.create_tre
+0000b210: 655f 6d75 742c 2070 7365 743d 7365 6c66  e_mut, pset=self
+0000b220: 2e70 7365 7429 0a0a 2020 2020 2020 2020  .pset)..        
+0000b230: 746f 6f6c 626f 782e 6465 636f 7261 7465  toolbox.decorate
+0000b240: 2854 6f6f 6c62 6f78 566f 6361 6275 6c61  (ToolboxVocabula
+0000b250: 7279 2e43 524f 5353 4f56 4552 2c0a 2020  ry.CROSSOVER,.  
+0000b260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b270: 2020 2020 2020 2067 702e 7374 6174 6963         gp.static
+0000b280: 4c69 6d69 7428 6b65 793d 6f70 6572 6174  Limit(key=operat
+0000b290: 6f72 2e61 7474 7267 6574 7465 7228 546f  or.attrgetter(To
+0000b2a0: 6f6c 626f 7856 6f63 6162 756c 6172 792e  olboxVocabulary.
+0000b2b0: 4845 4947 4854 5f4b 4559 292c 0a20 2020  HEIGHT_KEY),.   
 0000b2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b2d0: 2020 2020 2020 2020 2067 702e 7374 6174           gp.stat
-0000b2e0: 6963 4c69 6d69 7428 6b65 793d 6f70 6572  icLimit(key=oper
-0000b2f0: 6174 6f72 2e61 7474 7267 6574 7465 7228  ator.attrgetter(
-0000b300: 546f 6f6c 626f 7856 6f63 6162 756c 6172  ToolboxVocabular
-0000b310: 792e 4845 4947 4854 5f4b 4559 292c 0a20  y.HEIGHT_KEY),. 
-0000b320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b340: 2020 2020 2020 206d 6178 5f76 616c 7565         max_value
-0000b350: 3d73 656c 662e 6865 6967 6874 5f6c 696d  =self.height_lim
-0000b360: 6974 2929 0a0a 2020 2020 2020 2020 746f  it))..        to
-0000b370: 6f6c 626f 782e 7265 6769 7374 6572 2822  olbox.register("
-0000b380: 6765 745f 746f 705f 6879 706f 7468 6573  get_top_hypothes
-0000b390: 6573 222c 2073 656c 662e 5f67 6574 5f74  es", self._get_t
-0000b3a0: 6f70 5f68 7970 6f74 6865 7365 7329 0a20  op_hypotheses). 
-0000b3b0: 2020 2020 2020 2074 6f6f 6c62 6f78 2e72         toolbox.r
-0000b3c0: 6567 6973 7465 7228 2274 6572 6d69 6e61  egister("termina
-0000b3d0: 7465 5f6f 6e5f 676f 616c 222c 206c 616d  te_on_goal", lam
-0000b3e0: 6264 613a 2073 656c 662e 7465 726d 696e  bda: self.termin
-0000b3f0: 6174 655f 6f6e 5f67 6f61 6c29 0a20 2020  ate_on_goal).   
-0000b400: 2020 2020 2074 6f6f 6c62 6f78 2e72 6567       toolbox.reg
-0000b410: 6973 7465 7228 226d 6178 5f72 756e 7469  ister("max_runti
-0000b420: 6d65 222c 206c 616d 6264 613a 2073 656c  me", lambda: sel
-0000b430: 662e 6d61 785f 7275 6e74 696d 6529 0a20  f.max_runtime). 
-0000b440: 2020 2020 2020 2074 6f6f 6c62 6f78 2e72         toolbox.r
-0000b450: 6567 6973 7465 7228 2270 7365 7422 2c20  egister("pset", 
-0000b460: 6c61 6d62 6461 3a20 7365 6c66 2e70 7365  lambda: self.pse
-0000b470: 7429 0a0a 2020 2020 2020 2020 7265 7475  t)..        retu
-0000b480: 726e 2074 6f6f 6c62 6f78 0a0a 2020 2020  rn toolbox..    
-0000b490: 6465 6620 5f5f 7365 745f 7370 6c69 7474  def __set_splitt
-0000b4a0: 696e 675f 7661 6c75 6573 2873 656c 6629  ing_values(self)
-0000b4b0: 3a0a 2020 2020 2020 2020 666f 7220 7020  :.        for p 
-0000b4c0: 696e 2073 656c 662e 5f64 705f 7370 6c69  in self._dp_spli
-0000b4d0: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-0000b4e0: 6966 206c 656e 2873 656c 662e 5f64 705f  if len(self._dp_
-0000b4f0: 7370 6c69 7473 5b70 5d29 203d 3d20 303a  splits[p]) == 0:
-0000b500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b510: 2069 6620 7020 696e 2073 656c 662e 6b62   if p in self.kb
-0000b520: 2e67 6574 5f6e 756d 6572 6963 5f64 6174  .get_numeric_dat
-0000b530: 615f 7072 6f70 6572 7469 6573 2829 3a0a  a_properties():.
-0000b540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b550: 2020 2020 7365 6c66 2e5f 6470 5f73 706c      self._dp_spl
-0000b560: 6974 735b 705d 2e61 7070 656e 6428 4f57  its[p].append(OW
-0000b570: 4c4c 6974 6572 616c 2830 2929 0a20 2020  LLiteral(0)).   
-0000b580: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0000b590: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0000b5a0: 2020 2020 2020 2070 6173 7320 2023 2054         pass  # T
-0000b5b0: 4f44 4f3a 0a0a 2020 2020 2020 2020 2020  ODO:..          
-0000b5c0: 2020 2320 5265 6d6f 7665 2074 6572 6d69    # Remove termi
-0000b5d0: 6e61 6c20 666f 7220 6d75 6c74 6970 6c65  nal for multiple
-0000b5e0: 2066 6974 732c 2075 6e66 6f72 7475 6e61   fits, unfortuna
-0000b5f0: 7465 6c79 2074 6865 7265 2065 7869 7374  tely there exist
-0000b600: 7320 6e6f 2062 6574 7465 7220 7761 7920  s no better way 
-0000b610: 696e 2044 4541 500a 2020 2020 2020 2020  in DEAP.        
-0000b620: 2020 2020 2320 5468 6973 2072 656d 6f76      # This remov
-0000b630: 616c 2069 7320 7072 6f62 6162 6c79 206e  al is probably n
-0000b640: 6f74 206e 6565 6465 642c 2074 6865 2069  ot needed, the i
-0000b650: 6d70 6f72 7461 6e74 206f 6e65 2069 7320  mportant one is 
-0000b660: 7265 6d6f 7661 6c20 6672 6f6d 2074 6865  removal from the
-0000b670: 2063 6f6e 7465 7874 2062 656c 6f77 0a20   context below. 
-0000b680: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000b690: 7073 6574 2e74 6572 6d69 6e61 6c73 2e70  pset.terminals.p
-0000b6a0: 6f70 2873 656c 662e 5f64 705f 746f 5f70  op(self._dp_to_p
-0000b6b0: 7269 6d5f 7479 7065 5b70 5d2c 204e 6f6e  rim_type[p], Non
-0000b6c0: 6529 0a20 2020 2020 2020 2020 2020 2066  e).            f
-0000b6d0: 6f72 2073 706c 6974 2069 6e20 7365 6c66  or split in self
-0000b6e0: 2e5f 6470 5f73 706c 6974 735b 705d 3a0a  ._dp_splits[p]:.
-0000b6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b700: 7465 726d 696e 616c 5f6e 616d 6520 3d20  terminal_name = 
-0000b710: 6f77 6c6c 6974 6572 616c 5f74 6f5f 7072  owlliteral_to_pr
-0000b720: 696d 6974 6976 655f 7374 7269 6e67 2873  imitive_string(s
-0000b730: 706c 6974 2c20 7029 0a20 2020 2020 2020  plit, p).       
-0000b740: 2020 2020 2020 2020 2023 2052 656d 6f76           # Remov
-0000b750: 6520 7465 726d 696e 616c 2066 6f72 206d  e terminal for m
-0000b760: 756c 7469 706c 6520 6669 7473 2c20 756e  ultiple fits, un
-0000b770: 666f 7274 756e 6174 656c 7920 7468 6572  fortunately ther
-0000b780: 6520 6578 6973 7473 206e 6f20 6265 7474  e exists no bett
-0000b790: 6572 2077 6179 2069 6e20 4445 4150 0a20  er way in DEAP. 
-0000b7a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000b7b0: 656c 662e 7073 6574 2e63 6f6e 7465 7874  elf.pset.context
-0000b7c0: 2e70 6f70 2874 6572 6d69 6e61 6c5f 6e61  .pop(terminal_na
-0000b7d0: 6d65 2c20 4e6f 6e65 290a 2020 2020 2020  me, None).      
-0000b7e0: 2020 2020 2020 2020 2020 7365 6c66 2e70            self.p
-0000b7f0: 7365 742e 6164 6454 6572 6d69 6e61 6c28  set.addTerminal(
-0000b800: 7370 6c69 742c 2073 656c 662e 5f64 705f  split, self._dp_
-0000b810: 746f 5f70 7269 6d5f 7479 7065 5b70 5d2c  to_prim_type[p],
-0000b820: 206e 616d 653d 7465 726d 696e 616c 5f6e   name=terminal_n
-0000b830: 616d 6529 0a0a 2020 2020 6465 6620 7265  ame)..    def re
-0000b840: 6769 7374 6572 5f6f 7028 7365 6c66 2c20  gister_op(self, 
-0000b850: 616c 6961 733a 2073 7472 2c20 6675 6e63  alias: str, func
-0000b860: 7469 6f6e 3a20 4361 6c6c 6162 6c65 2c20  tion: Callable, 
-0000b870: 2a61 7267 732c 202a 2a6b 6172 6773 293a  *args, **kargs):
-0000b880: 0a20 2020 2020 2020 2022 2222 5265 6769  .        """Regi
-0000b890: 7374 6572 2061 202a 6675 6e63 7469 6f6e  ster a *function
-0000b8a0: 2a20 696e 2074 6865 2074 6f6f 6c62 6f78  * in the toolbox
-0000b8b0: 2075 6e64 6572 2074 6865 206e 616d 6520   under the name 
-0000b8c0: 2a61 6c69 6173 2a2e 0a20 2020 2020 2020  *alias*..       
-0000b8d0: 2059 6f75 206d 6179 2070 726f 7669 6465   You may provide
-0000b8e0: 2064 6566 6175 6c74 2061 7267 756d 656e   default argumen
-0000b8f0: 7473 2074 6861 7420 7769 6c6c 2062 6520  ts that will be 
-0000b900: 7061 7373 6564 2061 7574 6f6d 6174 6963  passed automatic
-0000b910: 616c 6c79 2077 6865 6e0a 2020 2020 2020  ally when.      
-0000b920: 2020 6361 6c6c 696e 6720 7468 6520 7265    calling the re
-0000b930: 6769 7374 6572 6564 2066 756e 6374 696f  gistered functio
-0000b940: 6e2e 2046 6978 6564 2061 7267 756d 656e  n. Fixed argumen
-0000b950: 7473 2063 616e 2074 6865 6e20 6265 206f  ts can then be o
-0000b960: 7665 7272 6964 656e 0a20 2020 2020 2020  verriden.       
-0000b970: 2061 7420 6675 6e63 7469 6f6e 2063 616c   at function cal
-0000b980: 6c20 7469 6d65 2e0a 0a20 2020 2020 2020  l time...       
-0000b990: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
-0000b9a0: 2020 2061 6c69 6173 3a20 5468 6520 6e61     alias: The na
-0000b9b0: 6d65 2074 6865 206f 7065 7261 746f 7220  me the operator 
-0000b9c0: 7769 6c6c 2074 616b 6520 696e 2074 6865  will take in the
-0000b9d0: 2074 6f6f 6c62 6f78 2e20 4966 2074 6865   toolbox. If the
-0000b9e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b9f0: 2020 2020 2061 6c69 6173 2061 6c72 6561       alias alrea
-0000ba00: 6479 2065 7869 7374 2069 7420 7769 6c6c  dy exist it will
-0000ba10: 206f 7665 7277 7269 7465 2074 6865 206f   overwrite the o
-0000ba20: 7065 7261 746f 720a 2020 2020 2020 2020  perator.        
-0000ba30: 2020 2020 2020 2020 2020 2020 616c 7265              alre
-0000ba40: 6164 7920 7072 6573 656e 742e 0a20 2020  ady present..   
-0000ba50: 2020 2020 2020 2020 2066 756e 6374 696f           functio
-0000ba60: 6e3a 2054 6865 2066 756e 6374 696f 6e20  n: The function 
-0000ba70: 746f 2077 6869 6368 2072 6566 6572 2074  to which refer t
-0000ba80: 6865 2061 6c69 6173 2e0a 2020 2020 2020  he alias..      
-0000ba90: 2020 2020 2020 6172 6773 3a20 4f6e 6520        args: One 
-0000baa0: 6f72 206d 6f72 6520 6172 6775 6d65 6e74  or more argument
-0000bab0: 2028 616e 6420 6b65 7977 6f72 6420 6172   (and keyword ar
-0000bac0: 6775 6d65 6e74 2920 746f 2070 6173 730a  gument) to pass.
-0000bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bae0: 2020 2020 2061 7574 6f6d 6174 6963 616c       automatical
-0000baf0: 6c79 2074 6f20 7468 6520 7265 6769 7374  ly to the regist
-0000bb00: 6572 6564 2066 756e 6374 696f 6e20 7768  ered function wh
-0000bb10: 656e 2063 616c 6c65 642c 0a20 2020 2020  en called,.     
-0000bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb30: 6f70 7469 6f6e 616c 2e0a 2020 2020 2020  optional..      
-0000bb40: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
-0000bb50: 6c66 2e74 6f6f 6c62 6f78 2e72 6567 6973  lf.toolbox.regis
-0000bb60: 7465 7228 616c 6961 732c 2066 756e 6374  ter(alias, funct
-0000bb70: 696f 6e2c 202a 6172 6773 2c20 2a2a 6b61  ion, *args, **ka
-0000bb80: 7267 7329 0a20 2020 2020 2020 2069 6620  rgs).        if 
-0000bb90: 616c 6961 7320 3d3d 2054 6f6f 6c62 6f78  alias == Toolbox
-0000bba0: 566f 6361 6275 6c61 7279 2e43 524f 5353  Vocabulary.CROSS
-0000bbb0: 4f56 4552 206f 7220 616c 6961 7320 3d3d  OVER or alias ==
-0000bbc0: 2054 6f6f 6c62 6f78 566f 6361 6275 6c61   ToolboxVocabula
-0000bbd0: 7279 2e4d 5554 4154 494f 4e3a 0a20 2020  ry.MUTATION:.   
-0000bbe0: 2020 2020 2020 2020 2073 656c 662e 746f           self.to
-0000bbf0: 6f6c 626f 782e 6465 636f 7261 7465 2861  olbox.decorate(a
-0000bc00: 6c69 6173 2c20 6770 2e73 7461 7469 634c  lias, gp.staticL
-0000bc10: 696d 6974 286b 6579 3d6f 7065 7261 746f  imit(key=operato
-0000bc20: 722e 6174 7472 6765 7474 6572 2854 6f6f  r.attrgetter(Too
-0000bc30: 6c62 6f78 566f 6361 6275 6c61 7279 2e48  lboxVocabulary.H
-0000bc40: 4549 4748 545f 4b45 5929 2c0a 2020 2020  EIGHT_KEY),.    
-0000bc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc80: 2020 2020 6d61 785f 7661 6c75 653d 7365      max_value=se
-0000bc90: 6c66 2e68 6569 6768 745f 6c69 6d69 7429  lf.height_limit)
-0000bca0: 290a 0a20 2020 2064 6566 2066 6974 2873  )..    def fit(s
-0000bcb0: 656c 662c 202a 6172 6773 2c20 2a2a 6b77  elf, *args, **kw
-0000bcc0: 6172 6773 2920 2d3e 2027 4576 6f4c 6561  args) -> 'EvoLea
-0000bcd0: 726e 6572 273a 0a20 2020 2020 2020 2022  rner':.        "
-0000bce0: 2222 0a20 2020 2020 2020 2046 696e 6420  "".        Find 
-0000bcf0: 6879 706f 7468 6573 6573 2074 6861 7420  hypotheses that 
-0000bd00: 6578 706c 6169 6e20 706f 7320 616e 6420  explain pos and 
-0000bd10: 6e65 672e 0a20 2020 2020 2020 2022 2222  neg..        """
-0000bd20: 0a20 2020 2020 2020 2023 2044 6f6e 2774  .        # Don't
-0000bd30: 2072 6573 6574 2065 7665 7279 7468 696e   reset everythin
-0000bd40: 6720 6966 2074 6865 2075 7365 7220 6973  g if the user is
-0000bd50: 206a 7573 7420 7573 696e 6720 7468 6973   just using this
-0000bd60: 206d 6f64 656c 2066 6f72 2031 206c 6561   model for 1 lea
-0000bd70: 726e 696e 6720 7072 6f62 6c65 6d2c 2073  rning problem, s
-0000bd80: 696e 6365 2068 6520 6d61 7920 7573 6520  ince he may use 
-0000bd90: 7468 650a 2020 2020 2020 2020 2320 7265  the.        # re
-0000bda0: 6769 7374 6572 5f6f 7020 6d65 7468 6f64  gister_op method
-0000bdb0: 2c20 656c 7365 2d77 6973 6520 7765 206e  , else-wise we n
-0000bdc0: 6565 6420 746f 2060 636c 6561 6e60 2062  eed to `clean` b
-0000bdd0: 6566 6f72 6520 6669 7474 696e 6720 746f  efore fitting to
-0000bde0: 2067 6574 2061 2066 7265 7368 2066 6974   get a fresh fit
-0000bdf0: 2e0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
-0000be00: 662e 746f 7461 6c5f 6669 7473 203e 2030  f.total_fits > 0
-0000be10: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-0000be20: 6c66 2e63 6c65 616e 2829 0a20 2020 2020  lf.clean().     
-0000be30: 2020 2073 656c 662e 746f 7461 6c5f 6669     self.total_fi
-0000be40: 7473 202b 3d20 310a 2020 2020 2020 2020  ts += 1.        
-0000be50: 6c65 6172 6e69 6e67 5f70 726f 626c 656d  learning_problem
-0000be60: 203d 2073 656c 662e 636f 6e73 7472 7563   = self.construc
-0000be70: 745f 6c65 6172 6e69 6e67 5f70 726f 626c  t_learning_probl
-0000be80: 656d 2850 6f73 4e65 674c 5053 7461 6e64  em(PosNegLPStand
-0000be90: 6172 642c 2061 7267 732c 206b 7761 7267  ard, args, kwarg
-0000bea0: 7329 0a20 2020 2020 2020 2073 656c 662e  s).        self.
-0000beb0: 5f6c 6561 726e 696e 675f 7072 6f62 6c65  _learning_proble
-0000bec0: 6d20 3d20 6c65 6172 6e69 6e67 5f70 726f  m = learning_pro
-0000bed0: 626c 656d 2e65 6e63 6f64 655f 6b62 2873  blem.encode_kb(s
-0000bee0: 656c 662e 6b62 290a 0a20 2020 2020 2020  elf.kb)..       
-0000bef0: 2076 6572 626f 7365 203d 206b 7761 7267   verbose = kwarg
-0000bf00: 732e 706f 7028 2276 6572 626f 7365 222c  s.pop("verbose",
-0000bf10: 2030 290a 0a20 2020 2020 2020 2070 6f70   0)..        pop
-0000bf20: 756c 6174 696f 6e20 3d20 7365 6c66 2e5f  ulation = self._
-0000bf30: 696e 6974 6961 6c69 7a65 286c 6561 726e  initialize(learn
-0000bf40: 696e 675f 7072 6f62 6c65 6d2e 706f 732c  ing_problem.pos,
-0000bf50: 206c 6561 726e 696e 675f 7072 6f62 6c65   learning_proble
-0000bf60: 6d2e 6e65 6729 0a20 2020 2020 2020 2073  m.neg).        s
-0000bf70: 656c 662e 7374 6172 745f 7469 6d65 203d  elf.start_time =
-0000bf80: 2074 696d 652e 7469 6d65 2829 0a20 2020   time.time().   
-0000bf90: 2020 2020 2073 656c 662e 5f67 6f61 6c5f       self._goal_
-0000bfa0: 666f 756e 642c 2073 656c 662e 5f72 6573  found, self._res
-0000bfb0: 756c 745f 706f 7075 6c61 7469 6f6e 203d  ult_population =
-0000bfc0: 2073 656c 662e 616c 676f 7269 7468 6d2e   self.algorithm.
-0000bfd0: 6576 6f6c 7665 2873 656c 662e 746f 6f6c  evolve(self.tool
-0000bfe0: 626f 782c 0a20 2020 2020 2020 2020 2020  box,.           
-0000bff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c020: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000c030: 6f70 756c 6174 696f 6e2c 0a20 2020 2020  opulation,.     
-0000c040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b2e0: 2020 2020 206d 6178 5f76 616c 7565 3d73       max_value=s
+0000b2f0: 656c 662e 6865 6967 6874 5f6c 696d 6974  elf.height_limit
+0000b300: 2929 0a20 2020 2020 2020 2074 6f6f 6c62  )).        toolb
+0000b310: 6f78 2e64 6563 6f72 6174 6528 546f 6f6c  ox.decorate(Tool
+0000b320: 626f 7856 6f63 6162 756c 6172 792e 4d55  boxVocabulary.MU
+0000b330: 5441 5449 4f4e 2c0a 2020 2020 2020 2020  TATION,.        
+0000b340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b350: 2067 702e 7374 6174 6963 4c69 6d69 7428   gp.staticLimit(
+0000b360: 6b65 793d 6f70 6572 6174 6f72 2e61 7474  key=operator.att
+0000b370: 7267 6574 7465 7228 546f 6f6c 626f 7856  rgetter(ToolboxV
+0000b380: 6f63 6162 756c 6172 792e 4845 4947 4854  ocabulary.HEIGHT
+0000b390: 5f4b 4559 292c 0a20 2020 2020 2020 2020  _KEY),.         
+0000b3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b3b0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0000b3c0: 6178 5f76 616c 7565 3d73 656c 662e 6865  ax_value=self.he
+0000b3d0: 6967 6874 5f6c 696d 6974 2929 0a0a 2020  ight_limit))..  
+0000b3e0: 2020 2020 2020 746f 6f6c 626f 782e 7265        toolbox.re
+0000b3f0: 6769 7374 6572 2822 6765 745f 746f 705f  gister("get_top_
+0000b400: 6879 706f 7468 6573 6573 222c 2073 656c  hypotheses", sel
+0000b410: 662e 5f67 6574 5f74 6f70 5f68 7970 6f74  f._get_top_hypot
+0000b420: 6865 7365 7329 0a20 2020 2020 2020 2074  heses).        t
+0000b430: 6f6f 6c62 6f78 2e72 6567 6973 7465 7228  oolbox.register(
+0000b440: 2274 6572 6d69 6e61 7465 5f6f 6e5f 676f  "terminate_on_go
+0000b450: 616c 222c 206c 616d 6264 613a 2073 656c  al", lambda: sel
+0000b460: 662e 7465 726d 696e 6174 655f 6f6e 5f67  f.terminate_on_g
+0000b470: 6f61 6c29 0a20 2020 2020 2020 2074 6f6f  oal).        too
+0000b480: 6c62 6f78 2e72 6567 6973 7465 7228 226d  lbox.register("m
+0000b490: 6178 5f72 756e 7469 6d65 222c 206c 616d  ax_runtime", lam
+0000b4a0: 6264 613a 2073 656c 662e 6d61 785f 7275  bda: self.max_ru
+0000b4b0: 6e74 696d 6529 0a20 2020 2020 2020 2074  ntime).        t
+0000b4c0: 6f6f 6c62 6f78 2e72 6567 6973 7465 7228  oolbox.register(
+0000b4d0: 2270 7365 7422 2c20 6c61 6d62 6461 3a20  "pset", lambda: 
+0000b4e0: 7365 6c66 2e70 7365 7429 0a0a 2020 2020  self.pset)..    
+0000b4f0: 2020 2020 7265 7475 726e 2074 6f6f 6c62      return toolb
+0000b500: 6f78 0a0a 2020 2020 6465 6620 5f5f 7365  ox..    def __se
+0000b510: 745f 7370 6c69 7474 696e 675f 7661 6c75  t_splitting_valu
+0000b520: 6573 2873 656c 6629 3a0a 2020 2020 2020  es(self):.      
+0000b530: 2020 666f 7220 7020 696e 2073 656c 662e    for p in self.
+0000b540: 5f64 705f 7370 6c69 7473 3a0a 2020 2020  _dp_splits:.    
+0000b550: 2020 2020 2020 2020 6966 206c 656e 2873          if len(s
+0000b560: 656c 662e 5f64 705f 7370 6c69 7473 5b70  elf._dp_splits[p
+0000b570: 5d29 203d 3d20 303a 0a20 2020 2020 2020  ]) == 0:.       
+0000b580: 2020 2020 2020 2020 2069 6620 7020 696e           if p in
+0000b590: 2073 656c 662e 6b62 2e67 6574 5f6e 756d   self.kb.get_num
+0000b5a0: 6572 6963 5f64 6174 615f 7072 6f70 6572  eric_data_proper
+0000b5b0: 7469 6573 2829 3a0a 2020 2020 2020 2020  ties():.        
+0000b5c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000b5d0: 2e5f 6470 5f73 706c 6974 735b 705d 2e61  ._dp_splits[p].a
+0000b5e0: 7070 656e 6428 4f57 4c4c 6974 6572 616c  ppend(OWLLiteral
+0000b5f0: 2830 2929 0a20 2020 2020 2020 2020 2020  (0)).           
+0000b600: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0000b610: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000b620: 6173 7320 2023 2054 4f44 4f3a 0a0a 2020  ass  # TODO:..  
+0000b630: 2020 2020 2020 2020 2020 2320 5265 6d6f            # Remo
+0000b640: 7665 2074 6572 6d69 6e61 6c20 666f 7220  ve terminal for 
+0000b650: 6d75 6c74 6970 6c65 2066 6974 732c 2075  multiple fits, u
+0000b660: 6e66 6f72 7475 6e61 7465 6c79 2074 6865  nfortunately the
+0000b670: 7265 2065 7869 7374 7320 6e6f 2062 6574  re exists no bet
+0000b680: 7465 7220 7761 7920 696e 2044 4541 500a  ter way in DEAP.
+0000b690: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
+0000b6a0: 6973 2072 656d 6f76 616c 2069 7320 7072  is removal is pr
+0000b6b0: 6f62 6162 6c79 206e 6f74 206e 6565 6465  obably not neede
+0000b6c0: 642c 2074 6865 2069 6d70 6f72 7461 6e74  d, the important
+0000b6d0: 206f 6e65 2069 7320 7265 6d6f 7661 6c20   one is removal 
+0000b6e0: 6672 6f6d 2074 6865 2063 6f6e 7465 7874  from the context
+0000b6f0: 2062 656c 6f77 0a20 2020 2020 2020 2020   below.         
+0000b700: 2020 2073 656c 662e 7073 6574 2e74 6572     self.pset.ter
+0000b710: 6d69 6e61 6c73 2e70 6f70 2873 656c 662e  minals.pop(self.
+0000b720: 5f64 705f 746f 5f70 7269 6d5f 7479 7065  _dp_to_prim_type
+0000b730: 5b70 5d2c 204e 6f6e 6529 0a20 2020 2020  [p], None).     
+0000b740: 2020 2020 2020 2066 6f72 2073 706c 6974         for split
+0000b750: 2069 6e20 7365 6c66 2e5f 6470 5f73 706c   in self._dp_spl
+0000b760: 6974 735b 705d 3a0a 2020 2020 2020 2020  its[p]:.        
+0000b770: 2020 2020 2020 2020 7465 726d 696e 616c          terminal
+0000b780: 5f6e 616d 6520 3d20 6f77 6c6c 6974 6572  _name = owlliter
+0000b790: 616c 5f74 6f5f 7072 696d 6974 6976 655f  al_to_primitive_
+0000b7a0: 7374 7269 6e67 2873 706c 6974 2c20 7029  string(split, p)
+0000b7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b7c0: 2023 2052 656d 6f76 6520 7465 726d 696e   # Remove termin
+0000b7d0: 616c 2066 6f72 206d 756c 7469 706c 6520  al for multiple 
+0000b7e0: 6669 7473 2c20 756e 666f 7274 756e 6174  fits, unfortunat
+0000b7f0: 656c 7920 7468 6572 6520 6578 6973 7473  ely there exists
+0000b800: 206e 6f20 6265 7474 6572 2077 6179 2069   no better way i
+0000b810: 6e20 4445 4150 0a20 2020 2020 2020 2020  n DEAP.         
+0000b820: 2020 2020 2020 2073 656c 662e 7073 6574         self.pset
+0000b830: 2e63 6f6e 7465 7874 2e70 6f70 2874 6572  .context.pop(ter
+0000b840: 6d69 6e61 6c5f 6e61 6d65 2c20 4e6f 6e65  minal_name, None
+0000b850: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000b860: 2020 7365 6c66 2e70 7365 742e 6164 6454    self.pset.addT
+0000b870: 6572 6d69 6e61 6c28 7370 6c69 742c 2073  erminal(split, s
+0000b880: 656c 662e 5f64 705f 746f 5f70 7269 6d5f  elf._dp_to_prim_
+0000b890: 7479 7065 5b70 5d2c 206e 616d 653d 7465  type[p], name=te
+0000b8a0: 726d 696e 616c 5f6e 616d 6529 0a0a 2020  rminal_name)..  
+0000b8b0: 2020 6465 6620 7265 6769 7374 6572 5f6f    def register_o
+0000b8c0: 7028 7365 6c66 2c20 616c 6961 733a 2073  p(self, alias: s
+0000b8d0: 7472 2c20 6675 6e63 7469 6f6e 3a20 4361  tr, function: Ca
+0000b8e0: 6c6c 6162 6c65 2c20 2a61 7267 732c 202a  llable, *args, *
+0000b8f0: 2a6b 6172 6773 293a 0a20 2020 2020 2020  *kargs):.       
+0000b900: 2022 2222 5265 6769 7374 6572 2061 202a   """Register a *
+0000b910: 6675 6e63 7469 6f6e 2a20 696e 2074 6865  function* in the
+0000b920: 2074 6f6f 6c62 6f78 2075 6e64 6572 2074   toolbox under t
+0000b930: 6865 206e 616d 6520 2a61 6c69 6173 2a2e  he name *alias*.
+0000b940: 0a20 2020 2020 2020 2059 6f75 206d 6179  .        You may
+0000b950: 2070 726f 7669 6465 2064 6566 6175 6c74   provide default
+0000b960: 2061 7267 756d 656e 7473 2074 6861 7420   arguments that 
+0000b970: 7769 6c6c 2062 6520 7061 7373 6564 2061  will be passed a
+0000b980: 7574 6f6d 6174 6963 616c 6c79 2077 6865  utomatically whe
+0000b990: 6e0a 2020 2020 2020 2020 6361 6c6c 696e  n.        callin
+0000b9a0: 6720 7468 6520 7265 6769 7374 6572 6564  g the registered
+0000b9b0: 2066 756e 6374 696f 6e2e 2046 6978 6564   function. Fixed
+0000b9c0: 2061 7267 756d 656e 7473 2063 616e 2074   arguments can t
+0000b9d0: 6865 6e20 6265 206f 7665 7272 6964 656e  hen be overriden
+0000b9e0: 0a20 2020 2020 2020 2061 7420 6675 6e63  .        at func
+0000b9f0: 7469 6f6e 2063 616c 6c20 7469 6d65 2e0a  tion call time..
+0000ba00: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+0000ba10: 2020 2020 2020 2020 2020 2061 6c69 6173             alias
+0000ba20: 3a20 5468 6520 6e61 6d65 2074 6865 206f  : The name the o
+0000ba30: 7065 7261 746f 7220 7769 6c6c 2074 616b  perator will tak
+0000ba40: 6520 696e 2074 6865 2074 6f6f 6c62 6f78  e in the toolbox
+0000ba50: 2e20 4966 2074 6865 0a20 2020 2020 2020  . If the.       
+0000ba60: 2020 2020 2020 2020 2020 2020 2061 6c69               ali
+0000ba70: 6173 2061 6c72 6561 6479 2065 7869 7374  as already exist
+0000ba80: 2069 7420 7769 6c6c 206f 7665 7277 7269   it will overwri
+0000ba90: 7465 2074 6865 206f 7065 7261 746f 720a  te the operator.
+0000baa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bab0: 2020 2020 616c 7265 6164 7920 7072 6573      already pres
+0000bac0: 656e 742e 0a20 2020 2020 2020 2020 2020  ent..           
+0000bad0: 2066 756e 6374 696f 6e3a 2054 6865 2066   function: The f
+0000bae0: 756e 6374 696f 6e20 746f 2077 6869 6368  unction to which
+0000baf0: 2072 6566 6572 2074 6865 2061 6c69 6173   refer the alias
+0000bb00: 2e0a 2020 2020 2020 2020 2020 2020 6172  ..            ar
+0000bb10: 6773 3a20 4f6e 6520 6f72 206d 6f72 6520  gs: One or more 
+0000bb20: 6172 6775 6d65 6e74 2028 616e 6420 6b65  argument (and ke
+0000bb30: 7977 6f72 6420 6172 6775 6d65 6e74 2920  yword argument) 
+0000bb40: 746f 2070 6173 730a 2020 2020 2020 2020  to pass.        
+0000bb50: 2020 2020 2020 2020 2020 2020 2061 7574               aut
+0000bb60: 6f6d 6174 6963 616c 6c79 2074 6f20 7468  omatically to th
+0000bb70: 6520 7265 6769 7374 6572 6564 2066 756e  e registered fun
+0000bb80: 6374 696f 6e20 7768 656e 2063 616c 6c65  ction when calle
+0000bb90: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
+0000bba0: 2020 2020 2020 2020 6f70 7469 6f6e 616c          optional
+0000bbb0: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+0000bbc0: 2020 2020 2020 7365 6c66 2e74 6f6f 6c62        self.toolb
+0000bbd0: 6f78 2e72 6567 6973 7465 7228 616c 6961  ox.register(alia
+0000bbe0: 732c 2066 756e 6374 696f 6e2c 202a 6172  s, function, *ar
+0000bbf0: 6773 2c20 2a2a 6b61 7267 7329 0a20 2020  gs, **kargs).   
+0000bc00: 2020 2020 2069 6620 616c 6961 7320 3d3d       if alias ==
+0000bc10: 2054 6f6f 6c62 6f78 566f 6361 6275 6c61   ToolboxVocabula
+0000bc20: 7279 2e43 524f 5353 4f56 4552 206f 7220  ry.CROSSOVER or 
+0000bc30: 616c 6961 7320 3d3d 2054 6f6f 6c62 6f78  alias == Toolbox
+0000bc40: 566f 6361 6275 6c61 7279 2e4d 5554 4154  Vocabulary.MUTAT
+0000bc50: 494f 4e3a 0a20 2020 2020 2020 2020 2020  ION:.           
+0000bc60: 2073 656c 662e 746f 6f6c 626f 782e 6465   self.toolbox.de
+0000bc70: 636f 7261 7465 2861 6c69 6173 2c20 6770  corate(alias, gp
+0000bc80: 2e73 7461 7469 634c 696d 6974 286b 6579  .staticLimit(key
+0000bc90: 3d6f 7065 7261 746f 722e 6174 7472 6765  =operator.attrge
+0000bca0: 7474 6572 2854 6f6f 6c62 6f78 566f 6361  tter(ToolboxVoca
+0000bcb0: 6275 6c61 7279 2e48 4549 4748 545f 4b45  bulary.HEIGHT_KE
+0000bcc0: 5929 2c0a 2020 2020 2020 2020 2020 2020  Y),.            
+0000bcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bcf0: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
+0000bd00: 7661 6c75 653d 7365 6c66 2e68 6569 6768  value=self.heigh
+0000bd10: 745f 6c69 6d69 7429 290a 0a20 2020 2064  t_limit))..    d
+0000bd20: 6566 2066 6974 2873 656c 662c 202a 6172  ef fit(self, *ar
+0000bd30: 6773 2c20 2a2a 6b77 6172 6773 2920 2d3e  gs, **kwargs) ->
+0000bd40: 2027 4576 6f4c 6561 726e 6572 273a 0a20   'EvoLearner':. 
+0000bd50: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0000bd60: 2020 2046 696e 6420 6879 706f 7468 6573     Find hypothes
+0000bd70: 6573 2074 6861 7420 6578 706c 6169 6e20  es that explain 
+0000bd80: 706f 7320 616e 6420 6e65 672e 0a20 2020  pos and neg..   
+0000bd90: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000bda0: 2023 2044 6f6e 2774 2072 6573 6574 2065   # Don't reset e
+0000bdb0: 7665 7279 7468 696e 6720 6966 2074 6865  verything if the
+0000bdc0: 2075 7365 7220 6973 206a 7573 7420 7573   user is just us
+0000bdd0: 696e 6720 7468 6973 206d 6f64 656c 2066  ing this model f
+0000bde0: 6f72 2031 206c 6561 726e 696e 6720 7072  or 1 learning pr
+0000bdf0: 6f62 6c65 6d2c 2073 696e 6365 2068 6520  oblem, since he 
+0000be00: 6d61 7920 7573 6520 7468 650a 2020 2020  may use the.    
+0000be10: 2020 2020 2320 7265 6769 7374 6572 5f6f      # register_o
+0000be20: 7020 6d65 7468 6f64 2c20 656c 7365 2d77  p method, else-w
+0000be30: 6973 6520 7765 206e 6565 6420 746f 2060  ise we need to `
+0000be40: 636c 6561 6e60 2062 6566 6f72 6520 6669  clean` before fi
+0000be50: 7474 696e 6720 746f 2067 6574 2061 2066  tting to get a f
+0000be60: 7265 7368 2066 6974 2e0a 2020 2020 2020  resh fit..      
+0000be70: 2020 6966 2073 656c 662e 746f 7461 6c5f    if self.total_
+0000be80: 6669 7473 203e 2030 3a0a 2020 2020 2020  fits > 0:.      
+0000be90: 2020 2020 2020 7365 6c66 2e63 6c65 616e        self.clean
+0000bea0: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+0000beb0: 746f 7461 6c5f 6669 7473 202b 3d20 310a  total_fits += 1.
+0000bec0: 2020 2020 2020 2020 6c65 6172 6e69 6e67          learning
+0000bed0: 5f70 726f 626c 656d 203d 2073 656c 662e  _problem = self.
+0000bee0: 636f 6e73 7472 7563 745f 6c65 6172 6e69  construct_learni
+0000bef0: 6e67 5f70 726f 626c 656d 2850 6f73 4e65  ng_problem(PosNe
+0000bf00: 674c 5053 7461 6e64 6172 642c 2061 7267  gLPStandard, arg
+0000bf10: 732c 206b 7761 7267 7329 0a20 2020 2020  s, kwargs).     
+0000bf20: 2020 2073 656c 662e 5f6c 6561 726e 696e     self._learnin
+0000bf30: 675f 7072 6f62 6c65 6d20 3d20 6c65 6172  g_problem = lear
+0000bf40: 6e69 6e67 5f70 726f 626c 656d 2e65 6e63  ning_problem.enc
+0000bf50: 6f64 655f 6b62 2873 656c 662e 6b62 290a  ode_kb(self.kb).
+0000bf60: 0a20 2020 2020 2020 2076 6572 626f 7365  .        verbose
+0000bf70: 203d 206b 7761 7267 732e 706f 7028 2276   = kwargs.pop("v
+0000bf80: 6572 626f 7365 222c 2030 290a 0a20 2020  erbose", 0)..   
+0000bf90: 2020 2020 2070 6f70 756c 6174 696f 6e20       population 
+0000bfa0: 3d20 7365 6c66 2e5f 696e 6974 6961 6c69  = self._initiali
+0000bfb0: 7a65 286c 6561 726e 696e 675f 7072 6f62  ze(learning_prob
+0000bfc0: 6c65 6d2e 706f 732c 206c 6561 726e 696e  lem.pos, learnin
+0000bfd0: 675f 7072 6f62 6c65 6d2e 6e65 6729 0a20  g_problem.neg). 
+0000bfe0: 2020 2020 2020 2073 656c 662e 7374 6172         self.star
+0000bff0: 745f 7469 6d65 203d 2074 696d 652e 7469  t_time = time.ti
+0000c000: 6d65 2829 0a20 2020 2020 2020 2073 656c  me().        sel
+0000c010: 662e 5f67 6f61 6c5f 666f 756e 642c 2073  f._goal_found, s
+0000c020: 656c 662e 5f72 6573 756c 745f 706f 7075  elf._result_popu
+0000c030: 6c61 7469 6f6e 203d 2073 656c 662e 616c  lation = self.al
+0000c040: 676f 7269 7468 6d2e 6576 6f6c 7665 2873  gorithm.evolve(s
+0000c050: 656c 662e 746f 6f6c 626f 782c 0a20 2020  elf.toolbox,.   
 0000c060: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c080: 2020 2020 2073 656c 662e 6e75 6d5f 6765       self.num_ge
-0000c090: 6e65 7261 7469 6f6e 732c 0a20 2020 2020  nerations,.     
-0000c0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c0a0: 2020 2020 2020 2070 6f70 756c 6174 696f         populatio
+0000c0b0: 6e2c 0a20 2020 2020 2020 2020 2020 2020  n,.             
 0000c0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c0e0: 2020 2020 2073 656c 662e 7374 6172 745f       self.start_
-0000c0f0: 7469 6d65 2c0a 2020 2020 2020 2020 2020  time,.          
-0000c100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c0f0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000c100: 662e 6e75 6d5f 6765 6e65 7261 7469 6f6e  f.num_generation
+0000c110: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
 0000c120: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c140: 7665 7262 6f73 653d 7665 7262 6f73 6529  verbose=verbose)
-0000c150: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000c160: 7365 6c66 2e74 6572 6d69 6e61 7465 2829  self.terminate()
-0000c170: 0a0a 2020 2020 6465 6620 5f69 6e69 7469  ..    def _initi
-0000c180: 616c 697a 6528 7365 6c66 2c20 706f 733a  alize(self, pos:
-0000c190: 2046 726f 7a65 6e53 6574 5b4f 574c 4e61   FrozenSet[OWLNa
-0000c1a0: 6d65 6449 6e64 6976 6964 7561 6c5d 2c20  medIndividual], 
-0000c1b0: 6e65 673a 2046 726f 7a65 6e53 6574 5b4f  neg: FrozenSet[O
-0000c1c0: 574c 4e61 6d65 6449 6e64 6976 6964 7561  WLNamedIndividua
-0000c1d0: 6c5d 2920 2d3e 204c 6973 745b 5472 6565  l]) -> List[Tree
-0000c1e0: 5d3a 0a20 2020 2020 2020 2072 6561 736f  ]:.        reaso
-0000c1f0: 6e65 7220 3d20 7365 6c66 2e6b 622e 7265  ner = self.kb.re
-0000c200: 6173 6f6e 6572 2069 6620 7365 6c66 2e72  asoner if self.r
-0000c210: 6561 736f 6e65 7220 6973 204e 6f6e 6520  easoner is None 
-0000c220: 656c 7365 2073 656c 662e 7265 6173 6f6e  else self.reason
-0000c230: 6572 0a20 2020 2020 2020 2069 6620 7365  er.        if se
-0000c240: 6c66 2e75 7365 5f64 6174 615f 7072 6f70  lf.use_data_prop
-0000c250: 6572 7469 6573 3a0a 2020 2020 2020 2020  erties:.        
-0000c260: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0000c270: 6528 7365 6c66 2e76 616c 7565 5f73 706c  e(self.value_spl
-0000c280: 6974 7465 722c 2042 696e 6e69 6e67 5661  itter, BinningVa
-0000c290: 6c75 6553 706c 6974 7465 7229 3a0a 2020  lueSplitter):.  
-0000c2a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000c2b0: 6c66 2e5f 6470 5f73 706c 6974 7320 3d20  lf._dp_splits = 
-0000c2c0: 7365 6c66 2e76 616c 7565 5f73 706c 6974  self.value_split
-0000c2d0: 7465 722e 636f 6d70 7574 655f 7370 6c69  ter.compute_spli
-0000c2e0: 7473 5f70 726f 7065 7274 6965 7328 7265  ts_properties(re
-0000c2f0: 6173 6f6e 6572 2c0a 2020 2020 2020 2020  asoner,.        
-0000c300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c340: 2020 2020 2020 2020 7365 6c66 2e5f 7370          self._sp
-0000c350: 6c69 745f 7072 6f70 6572 7469 6573 290a  lit_properties).
-0000c360: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0000c370: 2069 7369 6e73 7461 6e63 6528 7365 6c66   isinstance(self
-0000c380: 2e76 616c 7565 5f73 706c 6974 7465 722c  .value_splitter,
-0000c390: 2045 6e74 726f 7079 5661 6c75 6553 706c   EntropyValueSpl
-0000c3a0: 6974 7465 7229 3a0a 2020 2020 2020 2020  itter):.        
-0000c3b0: 2020 2020 2020 2020 656e 7472 6f70 795f          entropy_
-0000c3c0: 7370 6c69 7473 203d 2073 656c 662e 7661  splits = self.va
-0000c3d0: 6c75 655f 7370 6c69 7474 6572 2e63 6f6d  lue_splitter.com
-0000c3e0: 7075 7465 5f73 706c 6974 735f 7072 6f70  pute_splits_prop
-0000c3f0: 6572 7469 6573 2872 6561 736f 6e65 722c  erties(reasoner,
-0000c400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c150: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000c160: 662e 7374 6172 745f 7469 6d65 2c0a 2020  f.start_time,.  
+0000c170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c1b0: 2020 2020 2020 2020 7665 7262 6f73 653d          verbose=
+0000c1c0: 7665 7262 6f73 6529 0a20 2020 2020 2020  verbose).       
+0000c1d0: 2072 6574 7572 6e20 7365 6c66 2e74 6572   return self.ter
+0000c1e0: 6d69 6e61 7465 2829 0a0a 2020 2020 6465  minate()..    de
+0000c1f0: 6620 5f69 6e69 7469 616c 697a 6528 7365  f _initialize(se
+0000c200: 6c66 2c20 706f 733a 2046 726f 7a65 6e53  lf, pos: FrozenS
+0000c210: 6574 5b4f 574c 4e61 6d65 6449 6e64 6976  et[OWLNamedIndiv
+0000c220: 6964 7561 6c5d 2c20 6e65 673a 2046 726f  idual], neg: Fro
+0000c230: 7a65 6e53 6574 5b4f 574c 4e61 6d65 6449  zenSet[OWLNamedI
+0000c240: 6e64 6976 6964 7561 6c5d 2920 2d3e 204c  ndividual]) -> L
+0000c250: 6973 745b 5472 6565 5d3a 0a20 2020 2020  ist[Tree]:.     
+0000c260: 2020 2072 6561 736f 6e65 7220 3d20 7365     reasoner = se
+0000c270: 6c66 2e6b 622e 7265 6173 6f6e 6572 2069  lf.kb.reasoner i
+0000c280: 6620 7365 6c66 2e72 6561 736f 6e65 7220  f self.reasoner 
+0000c290: 6973 204e 6f6e 6520 656c 7365 2073 656c  is None else sel
+0000c2a0: 662e 7265 6173 6f6e 6572 0a20 2020 2020  f.reasoner.     
+0000c2b0: 2020 2069 6620 7365 6c66 2e75 7365 5f64     if self.use_d
+0000c2c0: 6174 615f 7072 6f70 6572 7469 6573 3a0a  ata_properties:.
+0000c2d0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0000c2e0: 7369 6e73 7461 6e63 6528 7365 6c66 2e76  sinstance(self.v
+0000c2f0: 616c 7565 5f73 706c 6974 7465 722c 2042  alue_splitter, B
+0000c300: 696e 6e69 6e67 5661 6c75 6553 706c 6974  inningValueSplit
+0000c310: 7465 7229 3a0a 2020 2020 2020 2020 2020  ter):.          
+0000c320: 2020 2020 2020 7365 6c66 2e5f 6470 5f73        self._dp_s
+0000c330: 706c 6974 7320 3d20 7365 6c66 2e76 616c  plits = self.val
+0000c340: 7565 5f73 706c 6974 7465 722e 636f 6d70  ue_splitter.comp
+0000c350: 7574 655f 7370 6c69 7473 5f70 726f 7065  ute_splits_prope
+0000c360: 7274 6965 7328 7265 6173 6f6e 6572 2c0a  rties(reasoner,.
+0000c370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c3c0: 7365 6c66 2e5f 7370 6c69 745f 7072 6f70  self._split_prop
+0000c3d0: 6572 7469 6573 290a 2020 2020 2020 2020  erties).        
+0000c3e0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+0000c3f0: 6e63 6528 7365 6c66 2e76 616c 7565 5f73  nce(self.value_s
+0000c400: 706c 6974 7465 722c 2045 6e74 726f 7079  plitter, Entropy
+0000c410: 5661 6c75 6553 706c 6974 7465 7229 3a0a  ValueSplitter):.
 0000c420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c450: 7365 6c66 2e5f 7370 6c69 745f 7072 6f70  self._split_prop
-0000c460: 6572 7469 6573 2c0a 2020 2020 2020 2020  erties,.        
-0000c470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c430: 656e 7472 6f70 795f 7370 6c69 7473 203d  entropy_splits =
+0000c440: 2073 656c 662e 7661 6c75 655f 7370 6c69   self.value_spli
+0000c450: 7474 6572 2e63 6f6d 7075 7465 5f73 706c  tter.compute_spl
+0000c460: 6974 735f 7072 6f70 6572 7469 6573 2872  its_properties(r
+0000c470: 6561 736f 6e65 722c 0a20 2020 2020 2020  easoner,.       
 0000c480: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c490: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c4b0: 2020 2020 2020 2070 6f73 2c20 6e65 6729         pos, neg)
-0000c4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c4d0: 206e 6f5f 7370 6c69 7473 203d 205b 7072   no_splits = [pr
-0000c4e0: 6f70 2066 6f72 2070 726f 7020 696e 2065  op for prop in e
-0000c4f0: 6e74 726f 7079 5f73 706c 6974 7320 6966  ntropy_splits if
-0000c500: 206c 656e 2865 6e74 726f 7079 5f73 706c   len(entropy_spl
-0000c510: 6974 735b 7072 6f70 5d29 203d 3d20 305d  its[prop]) == 0]
-0000c520: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c530: 2074 656d 705f 7370 6c69 7474 6572 203d   temp_splitter =
-0000c540: 2042 696e 6e69 6e67 5661 6c75 6553 706c   BinningValueSpl
-0000c550: 6974 7465 7228 6d61 785f 6e72 5f73 706c  itter(max_nr_spl
-0000c560: 6974 733d 3130 290a 2020 2020 2020 2020  its=10).        
-0000c570: 2020 2020 2020 2020 6269 6e6e 696e 675f          binning_
-0000c580: 7370 6c69 7473 203d 2074 656d 705f 7370  splits = temp_sp
-0000c590: 6c69 7474 6572 2e63 6f6d 7075 7465 5f73  litter.compute_s
-0000c5a0: 706c 6974 735f 7072 6f70 6572 7469 6573  plits_properties
-0000c5b0: 2872 6561 736f 6e65 722c 206e 6f5f 7370  (reasoner, no_sp
-0000c5c0: 6c69 7473 290a 2020 2020 2020 2020 2020  lits).          
-0000c5d0: 2020 2020 2020 7365 6c66 2e5f 6470 5f73        self._dp_s
-0000c5e0: 706c 6974 7320 3d20 7b2a 2a65 6e74 726f  plits = {**entro
-0000c5f0: 7079 5f73 706c 6974 732c 202a 2a62 696e  py_splits, **bin
-0000c600: 6e69 6e67 5f73 706c 6974 737d 0a20 2020  ning_splits}.   
-0000c610: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0000c620: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0000c630: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
-0000c640: 7365 6c66 2e76 616c 7565 5f73 706c 6974  self.value_split
-0000c650: 7465 7229 0a20 2020 2020 2020 2020 2020  ter).           
-0000c660: 2073 656c 662e 5f5f 7365 745f 7370 6c69   self.__set_spli
-0000c670: 7474 696e 675f 7661 6c75 6573 2829 0a0a  tting_values()..
-0000c680: 2020 2020 2020 2020 706f 7075 6c61 7469          populati
-0000c690: 6f6e 203d 204e 6f6e 650a 2020 2020 2020  on = None.      
-0000c6a0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0000c6b0: 7365 6c66 2e69 6e69 745f 6d65 7468 6f64  self.init_method
-0000c6c0: 2c20 4541 5261 6e64 6f6d 5761 6c6b 496e  , EARandomWalkIn
-0000c6d0: 6974 6961 6c69 7a61 7469 6f6e 293a 0a20  itialization):. 
-0000c6e0: 2020 2020 2020 2020 2020 2070 6f70 756c             popul
-0000c6f0: 6174 696f 6e20 3d20 7365 6c66 2e74 6f6f  ation = self.too
-0000c700: 6c62 6f78 2e70 6f70 756c 6174 696f 6e28  lbox.population(
-0000c710: 706f 7075 6c61 7469 6f6e 5f73 697a 653d  population_size=
-0000c720: 7365 6c66 2e70 6f70 756c 6174 696f 6e5f  self.population_
-0000c730: 7369 7a65 2c20 706f 733d 6c69 7374 2870  size, pos=list(p
-0000c740: 6f73 292c 0a20 2020 2020 2020 2020 2020  os),.           
-0000c750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c770: 2020 2020 2020 6b62 3d73 656c 662e 6b62        kb=self.kb
-0000c780: 2c20 6470 5f74 6f5f 7072 696d 5f74 7970  , dp_to_prim_typ
-0000c790: 653d 7365 6c66 2e5f 6470 5f74 6f5f 7072  e=self._dp_to_pr
-0000c7a0: 696d 5f74 7970 652c 0a20 2020 2020 2020  im_type,.       
-0000c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c4c0: 2020 2020 2020 2020 7365 6c66 2e5f 7370          self._sp
+0000c4d0: 6c69 745f 7072 6f70 6572 7469 6573 2c0a  lit_properties,.
+0000c4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c520: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000c530: 6f73 2c20 6e65 6729 0a20 2020 2020 2020  os, neg).       
+0000c540: 2020 2020 2020 2020 206e 6f5f 7370 6c69           no_spli
+0000c550: 7473 203d 205b 7072 6f70 2066 6f72 2070  ts = [prop for p
+0000c560: 726f 7020 696e 2065 6e74 726f 7079 5f73  rop in entropy_s
+0000c570: 706c 6974 7320 6966 206c 656e 2865 6e74  plits if len(ent
+0000c580: 726f 7079 5f73 706c 6974 735b 7072 6f70  ropy_splits[prop
+0000c590: 5d29 203d 3d20 305d 0a20 2020 2020 2020  ]) == 0].       
+0000c5a0: 2020 2020 2020 2020 2074 656d 705f 7370           temp_sp
+0000c5b0: 6c69 7474 6572 203d 2042 696e 6e69 6e67  litter = Binning
+0000c5c0: 5661 6c75 6553 706c 6974 7465 7228 6d61  ValueSplitter(ma
+0000c5d0: 785f 6e72 5f73 706c 6974 733d 3130 290a  x_nr_splits=10).
+0000c5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c5f0: 6269 6e6e 696e 675f 7370 6c69 7473 203d  binning_splits =
+0000c600: 2074 656d 705f 7370 6c69 7474 6572 2e63   temp_splitter.c
+0000c610: 6f6d 7075 7465 5f73 706c 6974 735f 7072  ompute_splits_pr
+0000c620: 6f70 6572 7469 6573 2872 6561 736f 6e65  operties(reasone
+0000c630: 722c 206e 6f5f 7370 6c69 7473 290a 2020  r, no_splits).  
+0000c640: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000c650: 6c66 2e5f 6470 5f73 706c 6974 7320 3d20  lf._dp_splits = 
+0000c660: 7b2a 2a65 6e74 726f 7079 5f73 706c 6974  {**entropy_split
+0000c670: 732c 202a 2a62 696e 6e69 6e67 5f73 706c  s, **binning_spl
+0000c680: 6974 737d 0a20 2020 2020 2020 2020 2020  its}.           
+0000c690: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000c6a0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+0000c6b0: 7565 4572 726f 7228 7365 6c66 2e76 616c  ueError(self.val
+0000c6c0: 7565 5f73 706c 6974 7465 7229 0a20 2020  ue_splitter).   
+0000c6d0: 2020 2020 2020 2020 2073 656c 662e 5f5f           self.__
+0000c6e0: 7365 745f 7370 6c69 7474 696e 675f 7661  set_splitting_va
+0000c6f0: 6c75 6573 2829 0a0a 2020 2020 2020 2020  lues()..        
+0000c700: 706f 7075 6c61 7469 6f6e 203d 204e 6f6e  population = Non
+0000c710: 650a 2020 2020 2020 2020 6966 2069 7369  e.        if isi
+0000c720: 6e73 7461 6e63 6528 7365 6c66 2e69 6e69  nstance(self.ini
+0000c730: 745f 6d65 7468 6f64 2c20 4541 5261 6e64  t_method, EARand
+0000c740: 6f6d 5761 6c6b 496e 6974 6961 6c69 7a61  omWalkInitializa
+0000c750: 7469 6f6e 293a 0a20 2020 2020 2020 2020  tion):.         
+0000c760: 2020 2070 6f70 756c 6174 696f 6e20 3d20     population = 
+0000c770: 7365 6c66 2e74 6f6f 6c62 6f78 2e70 6f70  self.toolbox.pop
+0000c780: 756c 6174 696f 6e28 706f 7075 6c61 7469  ulation(populati
+0000c790: 6f6e 5f73 697a 653d 7365 6c66 2e70 6f70  on_size=self.pop
+0000c7a0: 756c 6174 696f 6e5f 7369 7a65 2c20 706f  ulation_size, po
+0000c7b0: 733d 6c69 7374 2870 6f73 292c 0a20 2020  s=list(pos),.   
 0000c7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c7d0: 2020 2020 2020 2020 2020 6470 5f73 706c            dp_spl
-0000c7e0: 6974 733d 7365 6c66 2e5f 6470 5f73 706c  its=self._dp_spl
-0000c7f0: 6974 7329 0a20 2020 2020 2020 2065 6c73  its).        els
-0000c800: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
-0000c810: 6f70 756c 6174 696f 6e20 3d20 7365 6c66  opulation = self
-0000c820: 2e74 6f6f 6c62 6f78 2e70 6f70 756c 6174  .toolbox.populat
-0000c830: 696f 6e28 706f 7075 6c61 7469 6f6e 5f73  ion(population_s
-0000c840: 697a 653d 7365 6c66 2e70 6f70 756c 6174  ize=self.populat
-0000c850: 696f 6e5f 7369 7a65 290a 2020 2020 2020  ion_size).      
-0000c860: 2020 7265 7475 726e 2070 6f70 756c 6174    return populat
-0000c870: 696f 6e0a 0a20 2020 2064 6566 2062 6573  ion..    def bes
-0000c880: 745f 6879 706f 7468 6573 6573 2873 656c  t_hypotheses(sel
-0000c890: 662c 206e 3a20 696e 7420 3d20 352c 206b  f, n: int = 5, k
-0000c8a0: 6579 3a20 7374 7220 3d20 2766 6974 6e65  ey: str = 'fitne
-0000c8b0: 7373 2729 202d 3e20 556e 696f 6e5b 4576  ss') -> Union[Ev
-0000c8c0: 6f4c 6561 726e 6572 4e6f 6465 2c20 4974  oLearnerNode, It
-0000c8d0: 6572 6162 6c65 5b45 766f 4c65 6172 6e65  erable[EvoLearne
-0000c8e0: 724e 6f64 655d 5d3a 0a20 2020 2020 2020  rNode]]:.       
-0000c8f0: 2061 7373 6572 7420 7365 6c66 2e5f 7265   assert self._re
-0000c900: 7375 6c74 5f70 6f70 756c 6174 696f 6e20  sult_population 
-0000c910: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
-0000c920: 2020 2020 6173 7365 7274 206c 656e 2873      assert len(s
-0000c930: 656c 662e 5f72 6573 756c 745f 706f 7075  elf._result_popu
-0000c940: 6c61 7469 6f6e 2920 3e20 300a 2020 2020  lation) > 0.    
-0000c950: 2020 2020 6966 206e 203e 2031 3a0a 2020      if n > 1:.  
-0000c960: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000c970: 205b 6920 666f 7220 6920 696e 2073 656c   [i for i in sel
-0000c980: 662e 5f67 6574 5f74 6f70 5f68 7970 6f74  f._get_top_hypot
-0000c990: 6865 7365 7328 7365 6c66 2e5f 7265 7375  heses(self._resu
-0000c9a0: 6c74 5f70 6f70 756c 6174 696f 6e2c 206e  lt_population, n
-0000c9b0: 2c20 6b65 7929 5d0a 2020 2020 2020 2020  , key)].        
-0000c9c0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000c9d0: 2020 7265 7475 726e 206e 6578 7428 7365    return next(se
-0000c9e0: 6c66 2e5f 6765 745f 746f 705f 6879 706f  lf._get_top_hypo
-0000c9f0: 7468 6573 6573 2873 656c 662e 5f72 6573  theses(self._res
-0000ca00: 756c 745f 706f 7075 6c61 7469 6f6e 2c20  ult_population, 
-0000ca10: 6e2c 206b 6579 2929 0a0a 2020 2020 6465  n, key))..    de
-0000ca20: 6620 5f67 6574 5f74 6f70 5f68 7970 6f74  f _get_top_hypot
-0000ca30: 6865 7365 7328 7365 6c66 2c20 706f 7075  heses(self, popu
-0000ca40: 6c61 7469 6f6e 3a20 4c69 7374 5b54 7265  lation: List[Tre
-0000ca50: 655d 2c20 6e3a 2069 6e74 203d 2035 2c20  e], n: int = 5, 
-0000ca60: 6b65 793a 2073 7472 203d 2027 6669 746e  key: str = 'fitn
-0000ca70: 6573 7327 2920 5c0a 2020 2020 2020 2020  ess') \.        
-0000ca80: 2020 2020 2d3e 2049 7465 7261 626c 655b      -> Iterable[
-0000ca90: 4576 6f4c 6561 726e 6572 4e6f 6465 5d3a  EvoLearnerNode]:
-0000caa0: 0a20 2020 2020 2020 2062 6573 745f 696e  .        best_in
-0000cab0: 6473 203d 2074 6f6f 6c73 2e73 656c 4265  ds = tools.selBe
-0000cac0: 7374 2870 6f70 756c 6174 696f 6e2c 206b  st(population, k
-0000cad0: 3d6e 202a 2031 302c 2066 6974 5f61 7474  =n * 10, fit_att
-0000cae0: 723d 6b65 7929 0a20 2020 2020 2020 2062  r=key).        b
-0000caf0: 6573 745f 696e 6473 5f64 6973 7469 6e63  est_inds_distinc
-0000cb00: 7420 3d20 5b5d 0a20 2020 2020 2020 2066  t = [].        f
-0000cb10: 6f72 2069 6e64 2069 6e20 6265 7374 5f69  or ind in best_i
-0000cb20: 6e64 733a 0a20 2020 2020 2020 2020 2020  nds:.           
-0000cb30: 2069 6620 696e 6420 6e6f 7420 696e 2062   if ind not in b
-0000cb40: 6573 745f 696e 6473 5f64 6973 7469 6e63  est_inds_distinc
-0000cb50: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-0000cb60: 2020 2062 6573 745f 696e 6473 5f64 6973     best_inds_dis
-0000cb70: 7469 6e63 742e 6170 7065 6e64 2869 6e64  tinct.append(ind
-0000cb80: 290a 2020 2020 2020 2020 6265 7374 5f63  ).        best_c
-0000cb90: 6f6e 6365 7074 7320 3d20 5b67 702e 636f  oncepts = [gp.co
-0000cba0: 6d70 696c 6528 696e 642c 2073 656c 662e  mpile(ind, self.
-0000cbb0: 7073 6574 2920 666f 7220 696e 6420 696e  pset) for ind in
-0000cbc0: 2062 6573 745f 696e 6473 5f64 6973 7469   best_inds_disti
-0000cbd0: 6e63 745b 3a6e 5d5d 0a0a 2020 2020 2020  nct[:n]]..      
-0000cbe0: 2020 666f 7220 636f 6e2c 2069 6e64 2069    for con, ind i
-0000cbf0: 6e20 7a69 7028 6265 7374 5f63 6f6e 6365  n zip(best_conce
-0000cc00: 7074 732c 2062 6573 745f 696e 6473 293a  pts, best_inds):
-0000cc10: 0a20 2020 2020 2020 2020 2020 2069 6e64  .            ind
-0000cc20: 6976 6964 7561 6c73 5f63 6f75 6e74 203d  ividuals_count =
-0000cc30: 206c 656e 2873 656c 662e 6b62 2e69 6e64   len(self.kb.ind
-0000cc40: 6976 6964 7561 6c73 5f73 6574 2863 6f6e  ividuals_set(con
-0000cc50: 2929 0a20 2020 2020 2020 2020 2020 2079  )).            y
-0000cc60: 6965 6c64 2045 766f 4c65 6172 6e65 724e  ield EvoLearnerN
-0000cc70: 6f64 6528 636f 6e2c 2073 656c 662e 6b62  ode(con, self.kb
-0000cc80: 2e63 6f6e 6365 7074 5f6c 656e 2863 6f6e  .concept_len(con
-0000cc90: 292c 2069 6e64 6976 6964 7561 6c73 5f63  ), individuals_c
-0000cca0: 6f75 6e74 2c20 696e 642e 7175 616c 6974  ount, ind.qualit
-0000ccb0: 792e 7661 6c75 6573 5b30 5d2c 0a20 2020  y.values[0],.   
-0000ccc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ccd0: 2020 2020 2020 2020 2020 2020 2020 6c65                le
-0000cce0: 6e28 696e 6429 2c20 696e 642e 6865 6967  n(ind), ind.heig
-0000ccf0: 6874 290a 0a20 2020 2064 6566 205f 6669  ht)..    def _fi
-0000cd00: 746e 6573 735f 6675 6e63 2873 656c 662c  tness_func(self,
-0000cd10: 2069 6e64 6976 6964 7561 6c3a 2054 7265   individual: Tre
-0000cd20: 6529 3a0a 2020 2020 2020 2020 696e 645f  e):.        ind_
-0000cd30: 7374 7220 3d20 696e 645f 746f 5f73 7472  str = ind_to_str
-0000cd40: 696e 6728 696e 6469 7669 6475 616c 290a  ing(individual).
-0000cd50: 2020 2020 2020 2020 2320 6578 7065 7269          # experi
-0000cd60: 6d65 6e74 616c 0a20 2020 2020 2020 2069  mental.        i
-0000cd70: 6620 696e 645f 7374 7220 696e 2073 656c  f ind_str in sel
-0000cd80: 662e 5f63 6163 6865 3a0a 2020 2020 2020  f._cache:.      
-0000cd90: 2020 2020 2020 696e 6469 7669 6475 616c        individual
-0000cda0: 2e71 7561 6c69 7479 2e76 616c 7565 7320  .quality.values 
-0000cdb0: 3d20 2873 656c 662e 5f63 6163 6865 5b69  = (self._cache[i
-0000cdc0: 6e64 5f73 7472 5d5b 305d 2c29 0a20 2020  nd_str][0],).   
-0000cdd0: 2020 2020 2020 2020 2069 6e64 6976 6964           individ
-0000cde0: 7561 6c2e 6669 746e 6573 732e 7661 6c75  ual.fitness.valu
-0000cdf0: 6573 203d 2028 7365 6c66 2e5f 6361 6368  es = (self._cach
-0000ce00: 655b 696e 645f 7374 725d 5b31 5d2c 290a  e[ind_str][1],).
-0000ce10: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0000ce20: 2020 2020 2020 2020 2020 636f 6e63 6570            concep
-0000ce30: 7420 3d20 6770 2e63 6f6d 7069 6c65 2869  t = gp.compile(i
-0000ce40: 6e64 6976 6964 7561 6c2c 2073 656c 662e  ndividual, self.
-0000ce50: 7073 6574 290a 2020 2020 2020 2020 2020  pset).          
-0000ce60: 2020 6520 3d20 7365 6c66 2e6b 622e 6576    e = self.kb.ev
-0000ce70: 616c 7561 7465 5f63 6f6e 6365 7074 2863  aluate_concept(c
-0000ce80: 6f6e 6365 7074 2c20 7365 6c66 2e71 7561  oncept, self.qua
-0000ce90: 6c69 7479 5f66 756e 632c 2073 656c 662e  lity_func, self.
-0000cea0: 5f6c 6561 726e 696e 675f 7072 6f62 6c65  _learning_proble
-0000ceb0: 6d29 0a20 2020 2020 2020 2020 2020 2069  m).            i
-0000cec0: 6e64 6976 6964 7561 6c2e 7175 616c 6974  ndividual.qualit
-0000ced0: 792e 7661 6c75 6573 203d 2028 652e 712c  y.values = (e.q,
-0000cee0: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
-0000cef0: 6c66 2e66 6974 6e65 7373 5f66 756e 632e  lf.fitness_func.
-0000cf00: 6170 706c 7928 696e 6469 7669 6475 616c  apply(individual
-0000cf10: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
-0000cf20: 6c66 2e5f 6361 6368 655b 696e 645f 7374  lf._cache[ind_st
-0000cf30: 725d 203d 2028 652e 712c 2069 6e64 6976  r] = (e.q, indiv
-0000cf40: 6964 7561 6c2e 6669 746e 6573 732e 7661  idual.fitness.va
-0000cf50: 6c75 6573 5b30 5d29 0a20 2020 2020 2020  lues[0]).       
-0000cf60: 2020 2020 2073 656c 662e 5f6e 756d 6265       self._numbe
-0000cf70: 725f 6f66 5f74 6573 7465 645f 636f 6e63  r_of_tested_conc
-0000cf80: 6570 7473 202b 3d20 310a 0a20 2020 2064  epts += 1..    d
-0000cf90: 6566 2063 6c65 616e 2873 656c 662c 2070  ef clean(self, p
-0000cfa0: 6172 7469 616c 3a20 626f 6f6c 203d 2046  artial: bool = F
-0000cfb0: 616c 7365 293a 0a20 2020 2020 2020 2023  alse):.        #
-0000cfc0: 2052 6573 6574 7320 636c 6173 7365 7320   Resets classes 
-0000cfd0: 6966 2074 6865 7920 616c 7265 6164 7920  if they already 
-0000cfe0: 6578 6973 742c 206e 616d 6573 206d 7573  exist, names mus
-0000cff0: 7420 6d61 7463 6820 7468 6520 6f6e 6573  t match the ones
-0000d000: 2074 6861 7420 7765 7265 2063 7265 6174   that were creat
-0000d010: 6564 2069 6e20 7468 6520 746f 6f6c 626f  ed in the toolbo
-0000d020: 780a 2020 2020 2020 2020 7472 793a 0a20  x.        try:. 
-0000d030: 2020 2020 2020 2020 2020 2064 656c 2063             del c
-0000d040: 7265 6174 6f72 2e46 6974 6e65 7373 0a20  reator.Fitness. 
-0000d050: 2020 2020 2020 2020 2020 2064 656c 2063             del c
-0000d060: 7265 6174 6f72 2e49 6e64 6976 6964 7561  reator.Individua
-0000d070: 6c0a 2020 2020 2020 2020 2020 2020 6465  l.            de
-0000d080: 6c20 6372 6561 746f 722e 5175 616c 6974  l creator.Qualit
-0000d090: 790a 2020 2020 2020 2020 6578 6365 7074  y.        except
-0000d0a0: 2041 7474 7269 6275 7465 4572 726f 723a   AttributeError:
-0000d0b0: 0a20 2020 2020 2020 2020 2020 2070 6173  .            pas
-0000d0c0: 730a 2020 2020 2020 2020 7375 7065 7228  s.        super(
-0000d0d0: 292e 636c 6561 6e28 290a 2020 2020 2020  ).clean().      
-0000d0e0: 2020 6966 206e 6f74 2070 6172 7469 616c    if not partial
-0000d0f0: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-0000d100: 5265 7365 7420 6576 6572 7974 6869 6e67  Reset everything
-0000d110: 2069 6620 6669 7474 696e 6720 6d6f 7265   if fitting more
-0000d120: 2074 6861 6e20 6f6e 6520 6c70 2e20 5465   than one lp. Te
-0000d130: 7374 7320 6861 7665 2073 686f 776e 2074  sts have shown t
-0000d140: 6861 7420 7468 6973 2069 7320 6e65 6365  hat this is nece
-0000d150: 7373 6172 7920 746f 2067 6574 2074 6865  ssary to get the
-0000d160: 0a20 2020 2020 2020 2020 2020 2023 2062  .            # b
-0000d170: 6573 7420 7065 7266 6f72 6d61 6e63 6520  est performance 
-0000d180: 6f66 2045 766f 4c65 6172 6e65 722e 0a20  of EvoLearner.. 
-0000d190: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000d1a0: 5f72 6573 756c 745f 706f 7075 6c61 7469  _result_populati
-0000d1b0: 6f6e 203d 204e 6f6e 650a 2020 2020 2020  on = None.      
-0000d1c0: 2020 2020 2020 7365 6c66 2e5f 6361 6368        self._cach
-0000d1d0: 652e 636c 6561 7228 290a 2020 2020 2020  e.clear().      
-0000d1e0: 2020 2020 2020 7365 6c66 2e66 6974 6e65        self.fitne
-0000d1f0: 7373 5f66 756e 6320 3d20 4c69 6e65 6172  ss_func = Linear
-0000d200: 5072 6573 7375 7265 4669 746e 6573 7328  PressureFitness(
-0000d210: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
-0000d220: 6c66 2e69 6e69 745f 6d65 7468 6f64 203d  lf.init_method =
-0000d230: 2045 4152 616e 646f 6d57 616c 6b49 6e69   EARandomWalkIni
-0000d240: 7469 616c 697a 6174 696f 6e28 290a 2020  tialization().  
-0000d250: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-0000d260: 6c67 6f72 6974 686d 203d 2045 4153 696d  lgorithm = EASim
-0000d270: 706c 6528 290a 2020 2020 2020 2020 2020  ple().          
-0000d280: 2020 7365 6c66 2e6d 7574 5f75 6e69 666f    self.mut_unifo
-0000d290: 726d 5f67 656e 203d 2045 4152 616e 646f  rm_gen = EARando
-0000d2a0: 6d49 6e69 7469 616c 697a 6174 696f 6e28  mInitialization(
-0000d2b0: 6d69 6e5f 6865 6967 6874 3d31 2c20 6d61  min_height=1, ma
-0000d2c0: 785f 6865 6967 6874 3d33 290a 2020 2020  x_height=3).    
-0000d2d0: 2020 2020 2020 2020 7365 6c66 2e76 616c          self.val
-0000d2e0: 7565 5f73 706c 6974 7465 7220 3d20 456e  ue_splitter = En
-0000d2f0: 7472 6f70 7956 616c 7565 5370 6c69 7474  tropyValueSplitt
-0000d300: 6572 2829 0a20 2020 2020 2020 2020 2020  er().           
-0000d310: 2073 656c 662e 5f64 705f 746f 5f70 7269   self._dp_to_pri
-0000d320: 6d5f 7479 7065 203d 2064 6963 7428 290a  m_type = dict().
-0000d330: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000d340: 2e5f 6470 5f73 706c 6974 7320 3d20 6469  ._dp_splits = di
-0000d350: 6374 2829 0a20 2020 2020 2020 2020 2020  ct().           
-0000d360: 2073 656c 662e 5f73 706c 6974 5f70 726f   self._split_pro
-0000d370: 7065 7274 6965 7320 3d20 5b5d 0a20 2020  perties = [].   
-0000d380: 2020 2020 2020 2020 2073 656c 662e 7073           self.ps
-0000d390: 6574 203d 2073 656c 662e 5f5f 6275 696c  et = self.__buil
-0000d3a0: 645f 7072 696d 6974 6976 655f 7365 7428  d_primitive_set(
-0000d3b0: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
-0000d3c0: 6c66 2e74 6f6f 6c62 6f78 203d 2073 656c  lf.toolbox = sel
-0000d3d0: 662e 5f5f 6275 696c 645f 746f 6f6c 626f  f.__build_toolbo
-0000d3e0: 7828 290a 2020 2020 2020 2020 0a20 2020  x().        .   
-0000d3f0: 2020 2020 200a 636c 6173 7320 434c 4950       .class CLIP
-0000d400: 2843 454c 4f45 293a 0a20 2020 2022 2222  (CELOE):.    """
-0000d410: 436f 6e63 6570 7420 4c65 6172 6e65 7220  Concept Learner 
-0000d420: 7769 7468 2049 6e74 6567 7261 7465 6420  with Integrated 
-0000d430: 4c65 6e67 7468 2050 7265 6469 6374 696f  Length Predictio
-0000d440: 6e2e 0a20 2020 2054 6869 7320 616c 676f  n..    This algo
-0000d450: 7269 7468 6d20 6578 7465 6e64 7320 7468  rithm extends th
-0000d460: 6520 4345 4c4f 4520 616c 676f 7269 7468  e CELOE algorith
-0000d470: 6d20 6279 2075 7369 6e67 2063 6f6e 6365  m by using conce
-0000d480: 7074 206c 656e 6774 6820 7072 6564 6963  pt length predic
-0000d490: 746f 7273 2061 6e64 2061 2064 6966 6665  tors and a diffe
-0000d4a0: 7265 6e74 2072 6566 696e 656d 656e 7420  rent refinement 
-0000d4b0: 6f70 6572 6174 6f72 2c20 692e 652e 2c20  operator, i.e., 
-0000d4c0: 4578 7072 6573 7352 6566 696e 656d 656e  ExpressRefinemen
-0000d4d0: 740a 0a20 2020 2041 7474 7269 6275 7465  t..    Attribute
-0000d4e0: 733a 0a20 2020 2020 2020 2062 6573 745f  s:.        best_
-0000d4f0: 6465 7363 7269 7074 696f 6e73 2028 4576  descriptions (Ev
-0000d500: 616c 7561 7465 6444 6573 6372 6970 7469  aluatedDescripti
-0000d510: 6f6e 5365 745b 4f45 4e6f 6465 2c20 5175  onSet[OENode, Qu
-0000d520: 616c 6974 794f 7264 6572 6564 4e6f 6465  alityOrderedNode
-0000d530: 5d29 3a20 4265 7374 2068 7970 6f74 6865  ]): Best hypothe
-0000d540: 7365 7320 6f72 6465 7265 642e 0a20 2020  ses ordered..   
-0000d550: 2020 2020 2062 6573 745f 6f6e 6c79 2028       best_only (
-0000d560: 626f 6f6c 293a 2049 6620 4661 6c73 6520  bool): If False 
-0000d570: 7069 636b 206f 6e6c 7920 6e6f 6465 7320  pick only nodes 
-0000d580: 7769 7468 2071 7561 6c69 7479 203c 2031  with quality < 1
-0000d590: 2e30 2c20 656c 7365 2070 6963 6b20 7769  .0, else pick wi
-0000d5a0: 7468 6f75 7420 7175 616c 6974 7920 7265  thout quality re
-0000d5b0: 7374 7269 6374 696f 6e73 2e0a 2020 2020  strictions..    
-0000d5c0: 2020 2020 6361 6c63 756c 6174 655f 6d69      calculate_mi
-0000d5d0: 6e5f 6d61 7820 2862 6f6f 6c29 3a20 4361  n_max (bool): Ca
-0000d5e0: 6c63 756c 6174 6520 6d69 6e69 6d75 6d20  lculate minimum 
-0000d5f0: 616e 6420 6d61 7869 6d75 6d20 686f 7269  and maximum hori
-0000d600: 7a6f 6e74 616c 2065 7870 616e 7369 6f6e  zontal expansion
-0000d610: 3f20 5374 6174 6973 7469 6361 6c20 7075  ? Statistical pu
-0000d620: 7270 6f73 6520 6f6e 6c79 2e0a 2020 2020  rpose only..    
-0000d630: 2020 2020 6865 7572 6973 7469 635f 6675      heuristic_fu
-0000d640: 6e63 2028 4162 7374 7261 6374 4865 7572  nc (AbstractHeur
-0000d650: 6973 7469 6329 3a20 4675 6e63 7469 6f6e  istic): Function
-0000d660: 2074 6f20 6775 6964 6520 7468 6520 7365   to guide the se
-0000d670: 6172 6368 2068 6575 7269 7374 6963 2e0a  arch heuristic..
-0000d680: 2020 2020 2020 2020 6865 7572 6973 7469          heuristi
-0000d690: 635f 7175 6575 6520 2853 6f72 7465 6453  c_queue (SortedS
-0000d6a0: 6574 5b4f 454e 6f64 655d 293a 2041 2073  et[OENode]): A s
-0000d6b0: 6f72 7465 6420 7365 7420 7468 6174 2063  orted set that c
-0000d6c0: 6f6d 7061 7265 7320 7468 6520 6e6f 6465  ompares the node
-0000d6d0: 7320 6261 7365 6420 6f6e 2048 6575 7269  s based on Heuri
-0000d6e0: 7374 6963 2e0a 2020 2020 2020 2020 6974  stic..        it
-0000d6f0: 6572 5f62 6f75 6e64 2028 696e 7429 3a20  er_bound (int): 
-0000d700: 4c69 6d69 7420 746f 2073 746f 7020 7468  Limit to stop th
-0000d710: 6520 616c 676f 7269 7468 6d20 6166 7465  e algorithm afte
-0000d720: 7220 6e20 7265 6669 6e65 6d65 6e74 2073  r n refinement s
-0000d730: 7465 7073 2061 7265 2064 6f6e 652e 0a20  teps are done.. 
-0000d740: 2020 2020 2020 206b 6220 284b 6e6f 776c         kb (Knowl
-0000d750: 6564 6765 4261 7365 293a 2054 6865 206b  edgeBase): The k
-0000d760: 6e6f 776c 6564 6765 2062 6173 6520 7468  nowledge base th
-0000d770: 6174 2074 6865 2063 6f6e 6365 7074 206c  at the concept l
-0000d780: 6561 726e 6572 2069 7320 7573 696e 672e  earner is using.
-0000d790: 0a20 2020 2020 2020 206d 6178 5f63 6869  .        max_chi
-0000d7a0: 6c64 5f6c 656e 6774 6820 2869 6e74 293a  ld_length (int):
-0000d7b0: 204c 696d 6974 2074 6865 206c 656e 6774   Limit the lengt
-0000d7c0: 6820 6f66 2063 6f6e 6365 7074 7320 6765  h of concepts ge
-0000d7d0: 6e65 7261 7465 6420 6279 2074 6865 2072  nerated by the r
-0000d7e0: 6566 696e 656d 656e 7420 6f70 6572 6174  efinement operat
-0000d7f0: 6f72 2e0a 2020 2020 2020 2020 6d61 785f  or..        max_
-0000d800: 6865 2028 696e 7429 3a20 4d61 7869 6d61  he (int): Maxima
-0000d810: 6c20 7661 6c75 6520 6f66 2068 6f72 697a  l value of horiz
-0000d820: 6f6e 7461 6c20 6578 7061 6e73 696f 6e2e  ontal expansion.
-0000d830: 0a20 2020 2020 2020 206d 6178 5f6e 756d  .        max_num
-0000d840: 5f6f 665f 636f 6e63 6570 7473 5f74 6573  _of_concepts_tes
-0000d850: 7465 6420 2869 6e74 2920 4c69 6d69 7420  ted (int) Limit 
-0000d860: 746f 2073 746f 7020 7468 6520 616c 676f  to stop the algo
-0000d870: 7269 7468 6d20 6166 7465 7220 6e20 636f  rithm after n co
-0000d880: 6e63 6570 7473 2074 6573 7465 642e 0a20  ncepts tested.. 
-0000d890: 2020 2020 2020 206d 6178 5f72 756e 7469         max_runti
-0000d8a0: 6d65 2028 696e 7429 3a20 4c69 6d69 7420  me (int): Limit 
-0000d8b0: 746f 2073 746f 7020 7468 6520 616c 676f  to stop the algo
-0000d8c0: 7269 7468 6d20 6166 7465 7220 6e20 7365  rithm after n se
-0000d8d0: 636f 6e64 732e 0a20 2020 2020 2020 206d  conds..        m
-0000d8e0: 696e 5f68 6520 2869 6e74 293a 204d 696e  in_he (int): Min
-0000d8f0: 696d 616c 2076 616c 7565 206f 6620 686f  imal value of ho
-0000d900: 7269 7a6f 6e74 616c 2065 7870 616e 7369  rizontal expansi
-0000d910: 6f6e 2e0a 2020 2020 2020 2020 6e61 6d65  on..        name
-0000d920: 2028 7374 7229 3a20 4e61 6d65 206f 6620   (str): Name of 
-0000d930: 7468 6520 6d6f 6465 6c20 3d20 2763 656c  the model = 'cel
-0000d940: 6f65 5f70 7974 686f 6e27 2e0a 2020 2020  oe_python'..    
-0000d950: 2020 2020 5f6e 756d 6265 725f 6f66 5f74      _number_of_t
-0000d960: 6573 7465 645f 636f 6e63 6570 7473 2028  ested_concepts (
-0000d970: 696e 7429 3a20 5965 732c 2079 6f75 2067  int): Yes, you g
-0000d980: 6f74 2069 742e 2054 6869 7320 7374 6f72  ot it. This stor
-0000d990: 6573 2074 6865 206e 756d 6265 7220 6f66  es the number of
-0000d9a0: 2074 6573 7465 6420 636f 6e63 6570 7473   tested concepts
-0000d9b0: 2e0a 2020 2020 2020 2020 6f70 6572 6174  ..        operat
-0000d9c0: 6f72 2028 4261 7365 5265 6669 6e65 6d65  or (BaseRefineme
-0000d9d0: 6e74 293a 204f 7065 7261 746f 7220 7573  nt): Operator us
-0000d9e0: 6564 2074 6f20 6765 6e65 7261 7465 2072  ed to generate r
-0000d9f0: 6566 696e 656d 656e 7473 2e0a 2020 2020  efinements..    
-0000da00: 2020 2020 7175 616c 6974 795f 6675 6e63      quality_func
-0000da10: 2028 4162 7374 7261 6374 5363 6f72 6572   (AbstractScorer
-0000da20: 2920 5468 6520 7175 616c 6974 7920 6675  ) The quality fu
-0000da30: 6e63 7469 6f6e 2074 6f20 6265 2075 7365  nction to be use
-0000da40: 642e 0a20 2020 2020 2020 2072 6561 736f  d..        reaso
-0000da50: 6e65 7220 284f 574c 5265 6173 6f6e 6572  ner (OWLReasoner
-0000da60: 293a 2054 6865 2072 6561 736f 6e65 7220  ): The reasoner 
-0000da70: 7468 6174 2074 6869 7320 6d6f 6465 6c20  that this model 
-0000da80: 6973 2075 7369 6e67 2e0a 2020 2020 2020  is using..      
-0000da90: 2020 7365 6172 6368 5f74 7265 6520 2844    search_tree (D
-0000daa0: 6963 745b 4f57 4c43 6c61 7373 4578 7072  ict[OWLClassExpr
-0000dab0: 6573 7369 6f6e 2c20 5472 6565 4e6f 6465  ession, TreeNode
-0000dac0: 5b4f 454e 6f64 655d 5d29 3a20 4469 6374  [OENode]]): Dict
-0000dad0: 2074 6f20 7374 6f72 6520 7468 6520 5472   to store the Tr
-0000dae0: 6565 4e6f 6465 2066 6f72 2061 2063 6c61  eeNode for a cla
-0000daf0: 7373 2065 7870 7265 7373 696f 6e2e 0a20  ss expression.. 
-0000db00: 2020 2020 2020 2073 7461 7274 5f63 6c61         start_cla
-0000db10: 7373 2028 4f57 4c43 6c61 7373 4578 7072  ss (OWLClassExpr
-0000db20: 6573 7369 6f6e 293a 2054 6865 2073 7461  ession): The sta
-0000db30: 7274 696e 6720 636c 6173 7320 6578 7072  rting class expr
-0000db40: 6573 7369 6f6e 2066 6f72 2074 6865 2072  ession for the r
-0000db50: 6566 696e 656d 656e 7420 6f70 6572 6174  efinement operat
-0000db60: 696f 6e2e 0a20 2020 2020 2020 2073 7461  ion..        sta
-0000db70: 7274 5f74 696d 6520 2866 6c6f 6174 293a  rt_time (float):
-0000db80: 2054 6865 2074 696d 6520 7768 656e 203a   The time when :
-0000db90: 6d65 7468 3a60 6669 7460 2073 7461 7274  meth:`fit` start
-0000dba0: 7320 7468 6520 6578 6563 7574 696f 6e2e  s the execution.
-0000dbb0: 2055 7365 6420 746f 2063 616c 6375 6c61   Used to calcula
-0000dbc0: 7465 2074 6865 2074 6f74 616c 2074 696d  te the total tim
-0000dbd0: 6520 3a6d 6574 683a 6066 6974 600a 2020  e :meth:`fit`.  
-0000dbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dbf0: 2020 2020 2020 2020 2020 7461 6b65 7320            takes 
-0000dc00: 746f 2065 7865 6375 7465 2e0a 2020 2020  to execute..    
-0000dc10: 2020 2020 7465 726d 696e 6174 655f 6f6e      terminate_on
-0000dc20: 5f67 6f61 6c20 2862 6f6f 6c29 3a20 5768  _goal (bool): Wh
-0000dc30: 6574 6865 7220 746f 2073 746f 7020 7468  ether to stop th
-0000dc40: 6520 616c 676f 7269 7468 6d20 6966 2061  e algorithm if a
-0000dc50: 2070 6572 6665 6374 2073 6f6c 7574 696f   perfect solutio
-0000dc60: 6e20 6973 2066 6f75 6e64 2e0a 0a20 2020  n is found...   
-0000dc70: 2022 2222 0a20 2020 205f 5f73 6c6f 7473   """.    __slots
-0000dc80: 5f5f 203d 2027 6265 7374 5f64 6573 6372  __ = 'best_descr
-0000dc90: 6970 7469 6f6e 7327 2c20 276d 6178 5f68  iptions', 'max_h
-0000dca0: 6527 2c20 276d 696e 5f68 6527 2c20 2762  e', 'min_he', 'b
-0000dcb0: 6573 745f 6f6e 6c79 272c 2027 6361 6c63  est_only', 'calc
-0000dcc0: 756c 6174 655f 6d69 6e5f 6d61 7827 2c20  ulate_min_max', 
-0000dcd0: 2768 6575 7269 7374 6963 5f71 7565 7565  'heuristic_queue
-0000dce0: 272c 205c 0a20 2020 2020 2020 2027 7365  ', \.        'se
-0000dcf0: 6172 6368 5f74 7265 6527 2c20 275f 6c65  arch_tree', '_le
-0000dd00: 6172 6e69 6e67 5f70 726f 626c 656d 272c  arning_problem',
-0000dd10: 2027 5f6d 6178 5f72 756e 7469 6d65 272c   '_max_runtime',
-0000dd20: 2027 5f73 6565 6e5f 6e6f 726d 5f63 6f6e   '_seen_norm_con
-0000dd30: 6365 7074 7327 2c20 2770 7265 6469 6374  cepts', 'predict
-0000dd40: 6f72 5f6e 616d 6527 2c20 2770 7265 7472  or_name', 'pretr
-0000dd50: 6169 6e65 645f 7072 6564 6963 746f 725f  ained_predictor_
-0000dd60: 6e61 6d65 272c 205c 0a20 2020 2027 6c6f  name', \.    'lo
-0000dd70: 6164 5f70 7265 7472 6169 6e65 6427 2c20  ad_pretrained', 
-0000dd80: 276f 7574 7075 745f 7369 7a65 272c 2027  'output_size', '
-0000dd90: 6e75 6d5f 6578 616d 706c 6573 272c 2027  num_examples', '
-0000dda0: 7061 7468 5f6f 665f 656d 6265 6464 696e  path_of_embeddin
-0000ddb0: 6773 272c 2027 696e 7374 616e 6365 5f65  gs', 'instance_e
-0000ddc0: 6d62 6564 6469 6e67 7327 2c20 2769 6e70  mbeddings', 'inp
-0000ddd0: 7574 5f73 697a 6527 2c20 2764 6576 6963  ut_size', 'devic
-0000dde0: 6527 2c20 276c 656e 6774 685f 7072 6564  e', 'length_pred
-0000ddf0: 6963 746f 7227 2c20 5c0a 2020 2020 276e  ictor', \.    'n
-0000de00: 756d 5f77 6f72 6b65 7273 272c 2027 6b6e  um_workers', 'kn
-0000de10: 6f77 6c65 6467 655f 6261 7365 5f70 6174  owledge_base_pat
-0000de20: 6827 0a0a 2020 2020 6e61 6d65 203d 2027  h'..    name = '
-0000de30: 636c 6970 270a 2020 2020 6465 6620 5f5f  clip'.    def __
-0000de40: 696e 6974 5f5f 2873 656c 662c 0a20 2020  init__(self,.   
-0000de50: 2020 2020 2020 2020 2020 2020 2020 6b6e                kn
-0000de60: 6f77 6c65 6467 655f 6261 7365 3a20 4b6e  owledge_base: Kn
-0000de70: 6f77 6c65 6467 6542 6173 652c 0a20 2020  owledgeBase,.   
-0000de80: 2020 2020 2020 2020 2020 2020 2020 6b6e                kn
-0000de90: 6f77 6c65 6467 655f 6261 7365 5f70 6174  owledge_base_pat
-0000dea0: 6820 3d20 2727 2c0a 2020 2020 2020 2020  h = '',.        
-0000deb0: 2020 2020 2020 2020 2072 6561 736f 6e65           reasone
-0000dec0: 723a 204f 7074 696f 6e61 6c5b 4f57 4c52  r: Optional[OWLR
-0000ded0: 6561 736f 6e65 725d 203d 204e 6f6e 652c  easoner] = None,
-0000dee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000def0: 2020 7265 6669 6e65 6d65 6e74 5f6f 7065    refinement_ope
-0000df00: 7261 746f 723a 204f 7074 696f 6e61 6c5b  rator: Optional[
-0000df10: 4261 7365 5265 6669 6e65 6d65 6e74 5b4f  BaseRefinement[O
-0000df20: 454e 6f64 655d 5d20 3d20 4578 7072 6573  ENode]] = Expres
-0000df30: 7352 6566 696e 656d 656e 742c 0a20 2020  sRefinement,.   
-0000df40: 2020 2020 2020 2020 2020 2020 2020 7175                qu
-0000df50: 616c 6974 795f 6675 6e63 3a20 4f70 7469  ality_func: Opti
-0000df60: 6f6e 616c 5b41 6273 7472 6163 7453 636f  onal[AbstractSco
-0000df70: 7265 725d 203d 204e 6f6e 652c 0a20 2020  rer] = None,.   
-0000df80: 2020 2020 2020 2020 2020 2020 2020 6865                he
-0000df90: 7572 6973 7469 635f 6675 6e63 3a20 4f70  uristic_func: Op
-0000dfa0: 7469 6f6e 616c 5b41 6273 7472 6163 7448  tional[AbstractH
-0000dfb0: 6575 7269 7374 6963 5d20 3d20 4e6f 6e65  euristic] = None
-0000dfc0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000dfd0: 2020 2074 6572 6d69 6e61 7465 5f6f 6e5f     terminate_on_
-0000dfe0: 676f 616c 3a20 4f70 7469 6f6e 616c 5b62  goal: Optional[b
-0000dff0: 6f6f 6c5d 203d 204e 6f6e 652c 0a20 2020  ool] = None,.   
-0000e000: 2020 2020 2020 2020 2020 2020 2020 6974                it
-0000e010: 6572 5f62 6f75 6e64 3a20 4f70 7469 6f6e  er_bound: Option
-0000e020: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c0a  al[int] = None,.
-0000e030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e040: 206d 6178 5f6e 756d 5f6f 665f 636f 6e63   max_num_of_conc
-0000e050: 6570 7473 5f74 6573 7465 643a 204f 7074  epts_tested: Opt
-0000e060: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
-0000e070: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-0000e080: 2020 2020 6d61 785f 7275 6e74 696d 653a      max_runtime:
-0000e090: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-0000e0a0: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-0000e0b0: 2020 2020 2020 2020 6d61 785f 7265 7375          max_resu
-0000e0c0: 6c74 733a 2069 6e74 203d 2031 302c 0a20  lts: int = 10,. 
-0000e0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e0e0: 6265 7374 5f6f 6e6c 793a 2062 6f6f 6c20  best_only: bool 
-0000e0f0: 3d20 4661 6c73 652c 0a20 2020 2020 2020  = False,.       
-0000e100: 2020 2020 2020 2020 2020 6361 6c63 756c            calcul
-0000e110: 6174 655f 6d69 6e5f 6d61 783a 2062 6f6f  ate_min_max: boo
-0000e120: 6c20 3d20 5472 7565 2c0a 2020 2020 2020  l = True,.      
-0000e130: 2020 2020 2020 2020 2020 2070 6174 685f             path_
-0000e140: 6f66 5f65 6d62 6564 6469 6e67 733d 2222  of_embeddings=""
-0000e150: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000e160: 2020 2070 7265 6469 6374 6f72 5f6e 616d     predictor_nam
-0000e170: 6520 3d20 4e6f 6e65 2c0a 2020 2020 2020  e = None,.      
-0000e180: 2020 2020 2020 2020 2020 2070 7265 7472             pretr
-0000e190: 6169 6e65 645f 7072 6564 6963 746f 725f  ained_predictor_
-0000e1a0: 6e61 6d65 203d 205b 2253 6574 5472 616e  name = ["SetTran
-0000e1b0: 7366 6f72 6d65 7222 2c20 224c 5354 4d22  sformer", "LSTM"
-0000e1c0: 2c20 2247 5255 222c 2022 434e 4e22 5d2c  , "GRU", "CNN"],
-0000e1d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000e1e0: 2020 6c6f 6164 5f70 7265 7472 6169 6e65    load_pretraine
-0000e1f0: 6420 3d20 4661 6c73 652c 0a20 2020 2020  d = False,.     
-0000e200: 2020 2020 2020 2020 2020 2020 6e75 6d5f              num_
-0000e210: 776f 726b 6572 7320 3d20 342c 0a20 2020  workers = 4,.   
-0000e220: 2020 2020 2020 2020 2020 2020 2020 6e75                nu
-0000e230: 6d5f 6578 616d 706c 6573 203d 2031 3030  m_examples = 100
-0000e240: 302c 0a20 2020 2020 2020 2020 2020 2020  0,.             
-0000e250: 2020 2020 6f75 7470 7574 5f73 697a 6520      output_size 
-0000e260: 3d20 3135 0a20 2020 2020 2020 2020 2020  = 15.           
-0000e270: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
-0000e280: 7375 7065 7228 292e 5f5f 696e 6974 5f5f  super().__init__
-0000e290: 286b 6e6f 776c 6564 6765 5f62 6173 652c  (knowledge_base,
-0000e2a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000e2b0: 2020 2020 2020 2020 2020 7265 6173 6f6e            reason
-0000e2c0: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
-0000e2d0: 2020 2020 2020 2020 2020 2020 2072 6566               ref
-0000e2e0: 696e 656d 656e 745f 6f70 6572 6174 6f72  inement_operator
-0000e2f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000e300: 2020 2020 2020 2020 2020 2071 7561 6c69             quali
-0000e310: 7479 5f66 756e 632c 0a20 2020 2020 2020  ty_func,.       
-0000e320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e330: 2020 6865 7572 6973 7469 635f 6675 6e63    heuristic_func
-0000e340: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000e350: 2020 2020 2020 2020 2020 2074 6572 6d69             termi
-0000e360: 6e61 7465 5f6f 6e5f 676f 616c 2c0a 2020  nate_on_goal,.  
-0000e370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e380: 2020 2020 2020 2069 7465 725f 626f 756e         iter_boun
-0000e390: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
-0000e3a0: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
-0000e3b0: 6e75 6d5f 6f66 5f63 6f6e 6365 7074 735f  num_of_concepts_
-0000e3c0: 7465 7374 6564 2c0a 2020 2020 2020 2020  tested,.        
-0000e3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e3e0: 206d 6178 5f72 756e 7469 6d65 2c0a 2020   max_runtime,.  
-0000e3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e400: 2020 2020 2020 206d 6178 5f72 6573 756c         max_resul
-0000e410: 7473 2c0a 2020 2020 2020 2020 2020 2020  ts,.            
-0000e420: 2020 2020 2020 2020 2020 2020 2062 6573               bes
-0000e430: 745f 6f6e 6c79 2c0a 2020 2020 2020 2020  t_only,.        
-0000e440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e450: 2063 616c 6375 6c61 7465 5f6d 696e 5f6d   calculate_min_m
-0000e460: 6178 290a 2020 2020 2020 2020 6173 7365  ax).        asse
-0000e470: 7274 2068 6173 6174 7472 2872 6566 696e  rt hasattr(refin
-0000e480: 656d 656e 745f 6f70 6572 6174 6f72 2c20  ement_operator, 
-0000e490: 2265 7870 7265 7373 6976 6974 7922 292c  "expressivity"),
-0000e4a0: 2066 2243 4c49 5020 7761 7320 6465 7665   f"CLIP was deve
-0000e4b0: 6c6f 7065 6420 746f 2072 756e 206d 6f72  loped to run mor
-0000e4c0: 6520 6566 6669 6369 656e 746c 7920 7769  e efficiently wi
-0000e4d0: 7468 2045 7870 7265 7373 5265 6669 6e65  th ExpressRefine
-0000e4e0: 6d65 6e74 2c20 6e6f 7420 7b72 6566 696e  ment, not {refin
-0000e4f0: 656d 656e 745f 6f70 6572 6174 6f72 7d22  ement_operator}"
-0000e500: 0a20 2020 2020 2020 2073 656c 662e 7072  .        self.pr
-0000e510: 6564 6963 746f 725f 6e61 6d65 203d 2070  edictor_name = p
-0000e520: 7265 6469 6374 6f72 5f6e 616d 650a 2020  redictor_name.  
-0000e530: 2020 2020 2020 7365 6c66 2e70 7265 7472        self.pretr
-0000e540: 6169 6e65 645f 7072 6564 6963 746f 725f  ained_predictor_
-0000e550: 6e61 6d65 203d 2070 7265 7472 6169 6e65  name = pretraine
-0000e560: 645f 7072 6564 6963 746f 725f 6e61 6d65  d_predictor_name
-0000e570: 0a20 2020 2020 2020 2073 656c 662e 6b6e  .        self.kn
-0000e580: 6f77 6c65 6467 655f 6261 7365 5f70 6174  owledge_base_pat
-0000e590: 6820 3d20 6b6e 6f77 6c65 6467 655f 6261  h = knowledge_ba
-0000e5a0: 7365 5f70 6174 680a 2020 2020 2020 2020  se_path.        
-0000e5b0: 7365 6c66 2e6c 6f61 645f 7072 6574 7261  self.load_pretra
-0000e5c0: 696e 6564 203d 206c 6f61 645f 7072 6574  ined = load_pret
-0000e5d0: 7261 696e 6564 0a20 2020 2020 2020 2073  rained.        s
-0000e5e0: 656c 662e 6e75 6d5f 776f 726b 6572 7320  elf.num_workers 
-0000e5f0: 3d20 6e75 6d5f 776f 726b 6572 730a 2020  = num_workers.  
-0000e600: 2020 2020 2020 7365 6c66 2e6f 7574 7075        self.outpu
-0000e610: 745f 7369 7a65 203d 206f 7574 7075 745f  t_size = output_
-0000e620: 7369 7a65 0a20 2020 2020 2020 2073 656c  size.        sel
-0000e630: 662e 6e75 6d5f 6578 616d 706c 6573 203d  f.num_examples =
-0000e640: 206e 756d 5f65 7861 6d70 6c65 730a 2020   num_examples.  
-0000e650: 2020 2020 2020 7365 6c66 2e70 6174 685f        self.path_
-0000e660: 6f66 5f65 6d62 6564 6469 6e67 7320 3d20  of_embeddings = 
-0000e670: 7061 7468 5f6f 665f 656d 6265 6464 696e  path_of_embeddin
-0000e680: 6773 0a20 2020 2020 2020 2061 7373 6572  gs.        asser
-0000e690: 7420 6f73 2e70 6174 682e 6973 6669 6c65  t os.path.isfile
-0000e6a0: 2873 656c 662e 7061 7468 5f6f 665f 656d  (self.path_of_em
-0000e6b0: 6265 6464 696e 6773 292c 2027 2121 2120  beddings), '!!! 
-0000e6c0: 5772 6f6e 6720 7061 7468 2066 6f72 2043  Wrong path for C
-0000e6d0: 4c49 5020 656d 6265 6464 696e 6773 270a  LIP embeddings'.
-0000e6e0: 2020 2020 2020 2020 7365 6c66 2e69 6e73          self.ins
-0000e6f0: 7461 6e63 655f 656d 6265 6464 696e 6773  tance_embeddings
-0000e700: 203d 2070 642e 7265 6164 5f63 7376 2870   = pd.read_csv(p
-0000e710: 6174 685f 6f66 5f65 6d62 6564 6469 6e67  ath_of_embedding
-0000e720: 732c 2069 6e64 6578 5f63 6f6c 3d30 290a  s, index_col=0).
-0000e730: 2020 2020 2020 2020 7365 6c66 2e69 6e70          self.inp
-0000e740: 7574 5f73 697a 6520 3d20 7365 6c66 2e69  ut_size = self.i
-0000e750: 6e73 7461 6e63 655f 656d 6265 6464 696e  nstance_embeddin
-0000e760: 6773 2e73 6861 7065 5b31 5d0a 2020 2020  gs.shape[1].    
-0000e770: 2020 2020 7365 6c66 2e64 6576 6963 6520      self.device 
-0000e780: 3d20 746f 7263 682e 6465 7669 6365 2822  = torch.device("
-0000e790: 6375 6461 2220 6966 2074 6f72 6368 2e63  cuda" if torch.c
-0000e7a0: 7564 612e 6973 5f61 7661 696c 6162 6c65  uda.is_available
-0000e7b0: 2829 2065 6c73 6520 2263 7075 2229 0a20  () else "cpu"). 
-0000e7c0: 2020 2020 2020 2073 656c 662e 6c65 6e67         self.leng
-0000e7d0: 7468 5f70 7265 6469 6374 6f72 203d 2073  th_predictor = s
-0000e7e0: 656c 662e 6765 745f 6c65 6e67 7468 5f70  elf.get_length_p
-0000e7f0: 7265 6469 6374 6f72 2829 0a20 2020 2020  redictor().     
-0000e800: 2020 200a 2020 2020 6465 6620 6765 745f     .    def get_
-0000e810: 6c65 6e67 7468 5f70 7265 6469 6374 6f72  length_predictor
-0000e820: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000e830: 6465 6620 6c6f 6164 5f6d 6f64 656c 2870  def load_model(p
-0000e840: 7265 6469 6374 6f72 5f6e 616d 652c 206c  redictor_name, l
-0000e850: 6f61 645f 7072 6574 7261 696e 6564 293a  oad_pretrained):
-0000e860: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000e870: 7072 6564 6963 746f 725f 6e61 6d65 2069  predictor_name i
-0000e880: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-0000e890: 2020 2020 2020 2020 7265 7475 726e 205b          return [
-0000e8a0: 5d0a 2020 2020 2020 2020 2020 2020 6966  ].            if
-0000e8b0: 2070 7265 6469 6374 6f72 5f6e 616d 6520   predictor_name 
-0000e8c0: 3d3d 2027 5365 7454 7261 6e73 666f 726d  == 'SetTransform
-0000e8d0: 6572 273a 0a20 2020 2020 2020 2020 2020  er':.           
-0000e8e0: 2020 2020 206d 6f64 656c 203d 204c 656e       model = Len
-0000e8f0: 6774 684c 6561 726e 6572 5f53 6574 5472  gthLearner_SetTr
-0000e900: 616e 7366 6f72 6d65 7228 7365 6c66 2e69  ansformer(self.i
-0000e910: 6e70 7574 5f73 697a 652c 2073 656c 662e  nput_size, self.
-0000e920: 6f75 7470 7574 5f73 697a 652c 2070 726f  output_size, pro
-0000e930: 6a5f 6469 6d3d 3235 362c 206e 756d 5f68  j_dim=256, num_h
-0000e940: 6561 6473 3d34 2c20 6e75 6d5f 7365 6564  eads=4, num_seed
-0000e950: 733d 312c 206e 756d 5f69 6e64 733d 3332  s=1, num_inds=32
-0000e960: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0000e970: 6966 2070 7265 6469 6374 6f72 5f6e 616d  if predictor_nam
-0000e980: 6520 3d3d 2027 4752 5527 3a0a 2020 2020  e == 'GRU':.    
-0000e990: 2020 2020 2020 2020 2020 2020 6d6f 6465              mode
-0000e9a0: 6c20 3d20 4c65 6e67 7468 4c65 6172 6e65  l = LengthLearne
-0000e9b0: 725f 4752 5528 7365 6c66 2e69 6e70 7574  r_GRU(self.input
-0000e9c0: 5f73 697a 652c 2073 656c 662e 6f75 7470  _size, self.outp
-0000e9d0: 7574 5f73 697a 652c 2070 726f 6a5f 6469  ut_size, proj_di
-0000e9e0: 6d3d 3235 362c 2072 6e6e 5f6e 5f6c 6179  m=256, rnn_n_lay
-0000e9f0: 6572 733d 322c 2064 726f 705f 7072 6f62  ers=2, drop_prob
-0000ea00: 3d30 2e32 290a 2020 2020 2020 2020 2020  =0.2).          
-0000ea10: 2020 656c 6966 2070 7265 6469 6374 6f72    elif predictor
-0000ea20: 5f6e 616d 6520 3d3d 2027 4c53 544d 273a  _name == 'LSTM':
-0000ea30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ea40: 206d 6f64 656c 203d 204c 656e 6774 684c   model = LengthL
-0000ea50: 6561 726e 6572 5f4c 5354 4d28 7365 6c66  earner_LSTM(self
-0000ea60: 2e69 6e70 7574 5f73 697a 652c 2073 656c  .input_size, sel
-0000ea70: 662e 6f75 7470 7574 5f73 697a 652c 2070  f.output_size, p
-0000ea80: 726f 6a5f 6469 6d3d 3235 362c 2072 6e6e  roj_dim=256, rnn
-0000ea90: 5f6e 5f6c 6179 6572 733d 322c 2064 726f  _n_layers=2, dro
-0000eaa0: 705f 7072 6f62 3d30 2e32 290a 2020 2020  p_prob=0.2).    
-0000eab0: 2020 2020 2020 2020 656c 6966 2070 7265          elif pre
-0000eac0: 6469 6374 6f72 5f6e 616d 6520 3d3d 2027  dictor_name == '
-0000ead0: 434e 4e27 3a0a 2020 2020 2020 2020 2020  CNN':.          
-0000eae0: 2020 2020 2020 6d6f 6465 6c20 3d20 4c65        model = Le
-0000eaf0: 6e67 7468 4c65 6172 6e65 725f 434e 4e28  ngthLearner_CNN(
-0000eb00: 7365 6c66 2e69 6e70 7574 5f73 697a 652c  self.input_size,
-0000eb10: 2073 656c 662e 6f75 7470 7574 5f73 697a   self.output_siz
-0000eb20: 652c 2073 656c 662e 6e75 6d5f 6578 616d  e, self.num_exam
-0000eb30: 706c 6573 2c20 7072 6f6a 5f64 696d 3d32  ples, proj_dim=2
-0000eb40: 3536 2c20 6b65 726e 656c 5f73 697a 653d  56, kernel_size=
-0000eb50: 5b5b 352c 375d 2c20 5b35 2c37 5d5d 2c20  [[5,7], [5,7]], 
-0000eb60: 7374 7269 6465 3d5b 5b33 2c33 5d2c 205b  stride=[[3,3], [
-0000eb70: 332c 335d 5d29 0a20 2020 2020 2020 2020  3,3]]).         
-0000eb80: 2020 2070 7265 7472 6169 6e65 645f 6d6f     pretrained_mo
-0000eb90: 6465 6c5f 7061 7468 203d 2073 656c 662e  del_path = self.
-0000eba0: 7061 7468 5f6f 665f 656d 6265 6464 696e  path_of_embeddin
-0000ebb0: 6773 2e73 706c 6974 2822 656d 6265 6464  gs.split("embedd
-0000ebc0: 696e 6773 2229 5b30 5d20 2b20 2274 7261  ings")[0] + "tra
-0000ebd0: 696e 6564 5f6d 6f64 656c 732f 7472 6169  ined_models/trai
-0000ebe0: 6e65 645f 2220 2b20 7072 6564 6963 746f  ned_" + predicto
-0000ebf0: 725f 6e61 6d65 202b 2022 2e70 7422 0a20  r_name + ".pt". 
-0000ec00: 2020 2020 2020 2020 2020 2069 6620 6c6f             if lo
-0000ec10: 6164 5f70 7265 7472 6169 6e65 6420 616e  ad_pretrained an
-0000ec20: 6420 6f73 2e70 6174 682e 6973 6669 6c65  d os.path.isfile
-0000ec30: 2870 7265 7472 6169 6e65 645f 6d6f 6465  (pretrained_mode
-0000ec40: 6c5f 7061 7468 293a 0a20 2020 2020 2020  l_path):.       
-0000ec50: 2020 2020 2020 2020 206d 6f64 656c 2e6c           model.l
-0000ec60: 6f61 645f 7374 6174 655f 6469 6374 2874  oad_state_dict(t
-0000ec70: 6f72 6368 2e6c 6f61 6428 7072 6574 7261  orch.load(pretra
-0000ec80: 696e 6564 5f6d 6f64 656c 5f70 6174 682c  ined_model_path,
-0000ec90: 206d 6170 5f6c 6f63 6174 696f 6e3d 7365   map_location=se
-0000eca0: 6c66 2e64 6576 6963 6529 290a 2020 2020  lf.device)).    
-0000ecb0: 2020 2020 2020 2020 2020 2020 6d6f 6465              mode
-0000ecc0: 6c2e 6576 616c 2829 0a20 2020 2020 2020  l.eval().       
-0000ecd0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-0000ece0: 5c6e 204c 6f61 6465 6420 6c65 6e67 7468  \n Loaded length
-0000ecf0: 2070 7265 6469 6374 6f72 2122 290a 2020   predictor!").  
-0000ed00: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000ed10: 206d 6f64 656c 0a20 2020 2020 2020 200a   model.        .
-0000ed20: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
-0000ed30: 656c 662e 6c6f 6164 5f70 7265 7472 6169  elf.load_pretrai
-0000ed40: 6e65 643a 0a20 2020 2020 2020 2020 2020  ned:.           
-0000ed50: 2072 6574 7572 6e20 5b6c 6f61 645f 6d6f   return [load_mo
-0000ed60: 6465 6c28 7365 6c66 2e70 7265 6469 6374  del(self.predict
-0000ed70: 6f72 5f6e 616d 652c 2073 656c 662e 6c6f  or_name, self.lo
-0000ed80: 6164 5f70 7265 7472 6169 6e65 6429 5d0a  ad_pretrained)].
-0000ed90: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
-0000eda0: 662e 6c6f 6164 5f70 7265 7472 6169 6e65  f.load_pretraine
-0000edb0: 6420 616e 6420 6973 696e 7374 616e 6365  d and isinstance
-0000edc0: 2873 656c 662e 7072 6574 7261 696e 6564  (self.pretrained
-0000edd0: 5f70 7265 6469 6374 6f72 5f6e 616d 652c  _predictor_name,
-0000ede0: 2073 7472 293a 0a20 2020 2020 2020 2020   str):.         
-0000edf0: 2020 2072 6574 7572 6e20 5b6c 6f61 645f     return [load_
-0000ee00: 6d6f 6465 6c28 7365 6c66 2e70 7265 7472  model(self.pretr
-0000ee10: 6169 6e65 645f 7072 6564 6963 746f 725f  ained_predictor_
-0000ee20: 6e61 6d65 2c20 7365 6c66 2e6c 6f61 645f  name, self.load_
-0000ee30: 7072 6574 7261 696e 6564 295d 0a20 2020  pretrained)].   
-0000ee40: 2020 2020 2065 6c69 6620 7365 6c66 2e6c       elif self.l
-0000ee50: 6f61 645f 7072 6574 7261 696e 6564 2061  oad_pretrained a
-0000ee60: 6e64 2069 7369 6e73 7461 6e63 6528 7365  nd isinstance(se
-0000ee70: 6c66 2e70 7265 7472 6169 6e65 645f 7072  lf.pretrained_pr
-0000ee80: 6564 6963 746f 725f 6e61 6d65 2c20 6c69  edictor_name, li
-0000ee90: 7374 293a 0a20 2020 2020 2020 2020 2020  st):.           
-0000eea0: 2072 6574 7572 6e20 5b6c 6f61 645f 6d6f   return [load_mo
-0000eeb0: 6465 6c28 6e61 6d65 2c20 7365 6c66 2e6c  del(name, self.l
-0000eec0: 6f61 645f 7072 6574 7261 696e 6564 2920  oad_pretrained) 
-0000eed0: 666f 7220 6e61 6d65 2069 6e20 7365 6c66  for name in self
-0000eee0: 2e70 7265 7472 6169 6e65 645f 7072 6564  .pretrained_pred
-0000eef0: 6963 746f 725f 6e61 6d65 5d0a 2020 2020  ictor_name].    
-0000ef00: 2020 2020 0a20 2020 2064 6566 2072 6566      .    def ref
-0000ef10: 7265 7368 2873 656c 6629 3a0a 2020 2020  resh(self):.    
-0000ef20: 2020 2020 7365 6c66 2e6c 656e 6774 685f      self.length_
-0000ef30: 7072 6564 6963 746f 7220 3d20 7365 6c66  predictor = self
-0000ef40: 2e67 6574 5f6c 656e 6774 685f 7072 6564  .get_length_pred
-0000ef50: 6963 746f 7228 290a 2020 2020 2020 2020  ictor().        
-0000ef60: 0a20 2020 2064 6566 2063 6f6c 6c61 7465  .    def collate
-0000ef70: 5f62 6174 6368 2873 656c 662c 2062 6174  _batch(self, bat
-0000ef80: 6368 293a 0a20 2020 2020 2020 2070 6f73  ch):.        pos
-0000ef90: 5f65 6d62 5f6c 6973 7420 3d20 5b5d 0a20  _emb_list = []. 
-0000efa0: 2020 2020 2020 206e 6567 5f65 6d62 5f6c         neg_emb_l
-0000efb0: 6973 7420 3d20 5b5d 0a20 2020 2020 2020  ist = [].       
-0000efc0: 2074 6172 6765 745f 6c61 6265 6c73 203d   target_labels =
-0000efd0: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
-0000efe0: 706f 735f 656d 622c 206e 6567 5f65 6d62  pos_emb, neg_emb
-0000eff0: 2c20 6c61 6265 6c20 696e 2062 6174 6368  , label in batch
-0000f000: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0000f010: 2070 6f73 5f65 6d62 2e6e 6469 6d20 213d   pos_emb.ndim !=
-0000f020: 2032 3a0a 2020 2020 2020 2020 2020 2020   2:.            
-0000f030: 2020 2020 706f 735f 656d 6220 3d20 706f      pos_emb = po
-0000f040: 735f 656d 622e 7265 7368 6170 6528 312c  s_emb.reshape(1,
-0000f050: 202d 3129 0a20 2020 2020 2020 2020 2020   -1).           
-0000f060: 2069 6620 6e65 675f 656d 622e 6e64 696d   if neg_emb.ndim
-0000f070: 2021 3d20 323a 0a20 2020 2020 2020 2020   != 2:.         
-0000f080: 2020 2020 2020 206e 6567 5f65 6d62 203d         neg_emb =
-0000f090: 206e 6567 5f65 6d62 2e72 6573 6861 7065   neg_emb.reshape
-0000f0a0: 2831 2c20 2d31 290a 2020 2020 2020 2020  (1, -1).        
-0000f0b0: 2020 2020 706f 735f 656d 625f 6c69 7374      pos_emb_list
-0000f0c0: 2e61 7070 656e 6428 706f 735f 656d 6229  .append(pos_emb)
-0000f0d0: 0a20 2020 2020 2020 2020 2020 206e 6567  .            neg
-0000f0e0: 5f65 6d62 5f6c 6973 742e 6170 7065 6e64  _emb_list.append
-0000f0f0: 286e 6567 5f65 6d62 290a 2020 2020 2020  (neg_emb).      
-0000f100: 2020 2020 2020 7461 7267 6574 5f6c 6162        target_lab
-0000f110: 656c 732e 6170 7065 6e64 286c 6162 656c  els.append(label
-0000f120: 290a 2020 2020 2020 2020 706f 735f 656d  ).        pos_em
-0000f130: 625f 6c69 7374 5b30 5d20 3d20 462e 7061  b_list[0] = F.pa
-0000f140: 6428 706f 735f 656d 625f 6c69 7374 5b30  d(pos_emb_list[0
-0000f150: 5d2c 2028 302c 2030 2c20 302c 2073 656c  ], (0, 0, 0, sel
-0000f160: 662e 6e75 6d5f 6578 616d 706c 6573 202d  f.num_examples -
-0000f170: 2070 6f73 5f65 6d62 5f6c 6973 745b 305d   pos_emb_list[0]
-0000f180: 2e73 6861 7065 5b30 5d29 2c20 2263 6f6e  .shape[0]), "con
-0000f190: 7374 616e 7422 2c20 3029 0a20 2020 2020  stant", 0).     
-0000f1a0: 2020 2070 6f73 5f65 6d62 5f6c 6973 7420     pos_emb_list 
-0000f1b0: 3d20 7061 645f 7365 7175 656e 6365 2870  = pad_sequence(p
-0000f1c0: 6f73 5f65 6d62 5f6c 6973 742c 2062 6174  os_emb_list, bat
-0000f1d0: 6368 5f66 6972 7374 3d54 7275 652c 2070  ch_first=True, p
-0000f1e0: 6164 6469 6e67 5f76 616c 7565 3d30 290a  adding_value=0).
-0000f1f0: 2020 2020 2020 2020 6e65 675f 656d 625f          neg_emb_
-0000f200: 6c69 7374 5b30 5d20 3d20 462e 7061 6428  list[0] = F.pad(
-0000f210: 6e65 675f 656d 625f 6c69 7374 5b30 5d2c  neg_emb_list[0],
-0000f220: 2028 302c 2030 2c20 302c 2073 656c 662e   (0, 0, 0, self.
-0000f230: 6e75 6d5f 6578 616d 706c 6573 202d 206e  num_examples - n
-0000f240: 6567 5f65 6d62 5f6c 6973 745b 305d 2e73  eg_emb_list[0].s
-0000f250: 6861 7065 5b30 5d29 2c20 2263 6f6e 7374  hape[0]), "const
-0000f260: 616e 7422 2c20 3029 0a20 2020 2020 2020  ant", 0).       
-0000f270: 206e 6567 5f65 6d62 5f6c 6973 7420 3d20   neg_emb_list = 
-0000f280: 7061 645f 7365 7175 656e 6365 286e 6567  pad_sequence(neg
-0000f290: 5f65 6d62 5f6c 6973 742c 2062 6174 6368  _emb_list, batch
-0000f2a0: 5f66 6972 7374 3d54 7275 652c 2070 6164  _first=True, pad
-0000f2b0: 6469 6e67 5f76 616c 7565 3d30 290a 2020  ding_value=0).  
-0000f2c0: 2020 2020 2020 7265 7475 726e 2070 6f73        return pos
-0000f2d0: 5f65 6d62 5f6c 6973 742c 206e 6567 5f65  _emb_list, neg_e
-0000f2e0: 6d62 5f6c 6973 742c 2074 6f72 6368 2e4c  mb_list, torch.L
-0000f2f0: 6f6e 6754 656e 736f 7228 7461 7267 6574  ongTensor(target
-0000f300: 5f6c 6162 656c 7329 0a20 2020 200a 2020  _labels).    .  
-0000f310: 2020 6465 6620 636f 6c6c 6174 655f 6261    def collate_ba
-0000f320: 7463 685f 696e 6665 7265 6e63 6528 7365  tch_inference(se
-0000f330: 6c66 2c20 6261 7463 6829 3a0a 2020 2020  lf, batch):.    
-0000f340: 2020 2020 706f 735f 656d 625f 6c69 7374      pos_emb_list
-0000f350: 203d 205b 5d0a 2020 2020 2020 2020 6e65   = [].        ne
-0000f360: 675f 656d 625f 6c69 7374 203d 205b 5d0a  g_emb_list = [].
-0000f370: 2020 2020 2020 2020 666f 7220 706f 735f          for pos_
-0000f380: 656d 622c 206e 6567 5f65 6d62 2069 6e20  emb, neg_emb in 
-0000f390: 6261 7463 683a 0a20 2020 2020 2020 2020  batch:.         
-0000f3a0: 2020 2069 6620 706f 735f 656d 622e 6e64     if pos_emb.nd
-0000f3b0: 696d 2021 3d20 323a 0a20 2020 2020 2020  im != 2:.       
-0000f3c0: 2020 2020 2020 2020 2070 6f73 5f65 6d62           pos_emb
-0000f3d0: 203d 2070 6f73 5f65 6d62 2e72 6573 6861   = pos_emb.resha
-0000f3e0: 7065 2831 2c20 2d31 290a 2020 2020 2020  pe(1, -1).      
-0000f3f0: 2020 2020 2020 6966 206e 6567 5f65 6d62        if neg_emb
-0000f400: 2e6e 6469 6d20 213d 2032 3a0a 2020 2020  .ndim != 2:.    
-0000f410: 2020 2020 2020 2020 2020 2020 6e65 675f              neg_
-0000f420: 656d 6220 3d20 6e65 675f 656d 622e 7265  emb = neg_emb.re
-0000f430: 7368 6170 6528 312c 202d 3129 0a20 2020  shape(1, -1).   
-0000f440: 2020 2020 2020 2020 2070 6f73 5f65 6d62           pos_emb
-0000f450: 5f6c 6973 742e 6170 7065 6e64 2870 6f73  _list.append(pos
-0000f460: 5f65 6d62 290a 2020 2020 2020 2020 2020  _emb).          
-0000f470: 2020 6e65 675f 656d 625f 6c69 7374 2e61    neg_emb_list.a
-0000f480: 7070 656e 6428 6e65 675f 656d 6229 0a20  ppend(neg_emb). 
-0000f490: 2020 2020 2020 2070 6f73 5f65 6d62 5f6c         pos_emb_l
-0000f4a0: 6973 745b 305d 203d 2046 2e70 6164 2870  ist[0] = F.pad(p
-0000f4b0: 6f73 5f65 6d62 5f6c 6973 745b 305d 2c20  os_emb_list[0], 
-0000f4c0: 2830 2c20 302c 2030 2c20 7365 6c66 2e6e  (0, 0, 0, self.n
-0000f4d0: 756d 5f65 7861 6d70 6c65 7320 2d20 706f  um_examples - po
-0000f4e0: 735f 656d 625f 6c69 7374 5b30 5d2e 7368  s_emb_list[0].sh
-0000f4f0: 6170 655b 305d 292c 2022 636f 6e73 7461  ape[0]), "consta
-0000f500: 6e74 222c 2030 290a 2020 2020 2020 2020  nt", 0).        
-0000f510: 706f 735f 656d 625f 6c69 7374 203d 2070  pos_emb_list = p
-0000f520: 6164 5f73 6571 7565 6e63 6528 706f 735f  ad_sequence(pos_
-0000f530: 656d 625f 6c69 7374 2c20 6261 7463 685f  emb_list, batch_
-0000f540: 6669 7273 743d 5472 7565 2c20 7061 6464  first=True, padd
-0000f550: 696e 675f 7661 6c75 653d 3029 0a20 2020  ing_value=0).   
-0000f560: 2020 2020 206e 6567 5f65 6d62 5f6c 6973       neg_emb_lis
-0000f570: 745b 305d 203d 2046 2e70 6164 286e 6567  t[0] = F.pad(neg
-0000f580: 5f65 6d62 5f6c 6973 745b 305d 2c20 2830  _emb_list[0], (0
-0000f590: 2c20 302c 2030 2c20 7365 6c66 2e6e 756d  , 0, 0, self.num
-0000f5a0: 5f65 7861 6d70 6c65 7320 2d20 6e65 675f  _examples - neg_
-0000f5b0: 656d 625f 6c69 7374 5b30 5d2e 7368 6170  emb_list[0].shap
-0000f5c0: 655b 305d 292c 2022 636f 6e73 7461 6e74  e[0]), "constant
-0000f5d0: 222c 2030 290a 2020 2020 2020 2020 6e65  ", 0).        ne
-0000f5e0: 675f 656d 625f 6c69 7374 203d 2070 6164  g_emb_list = pad
-0000f5f0: 5f73 6571 7565 6e63 6528 6e65 675f 656d  _sequence(neg_em
-0000f600: 625f 6c69 7374 2c20 6261 7463 685f 6669  b_list, batch_fi
-0000f610: 7273 743d 5472 7565 2c20 7061 6464 696e  rst=True, paddin
-0000f620: 675f 7661 6c75 653d 3029 0a20 2020 2020  g_value=0).     
-0000f630: 2020 2072 6574 7572 6e20 706f 735f 656d     return pos_em
-0000f640: 625f 6c69 7374 2c20 6e65 675f 656d 625f  b_list, neg_emb_
-0000f650: 6c69 7374 0a20 2020 200a 2020 2020 6465  list.    .    de
-0000f660: 6620 706f 735f 6e65 675f 746f 5f74 656e  f pos_neg_to_ten
-0000f670: 736f 7228 7365 6c66 2c20 706f 733a 2055  sor(self, pos: U
-0000f680: 6e69 6f6e 5b53 6574 5b4f 574c 4e61 6d65  nion[Set[OWLName
-0000f690: 6449 6e64 6976 6964 7561 6c5d 5d2c 206e  dIndividual]], n
-0000f6a0: 6567 3a20 556e 696f 6e5b 5365 745b 4f57  eg: Union[Set[OW
-0000f6b0: 4c4e 616d 6564 496e 6469 7669 6475 616c  LNamedIndividual
-0000f6c0: 5d2c 2053 6574 5b73 7472 5d5d 293a 0a20  ], Set[str]]):. 
-0000f6d0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0000f6e0: 616e 6365 2870 6f73 5b30 5d2c 204f 574c  ance(pos[0], OWL
-0000f6f0: 4e61 6d65 6449 6e64 6976 6964 7561 6c29  NamedIndividual)
-0000f700: 3a0a 2020 2020 2020 2020 2020 2020 706f  :.            po
-0000f710: 735f 7374 7220 3d20 5b69 6e64 2e67 6574  s_str = [ind.get
-0000f720: 5f69 7269 2829 2e61 735f 7374 7228 292e  _iri().as_str().
-0000f730: 7370 6c69 7428 222f 2229 5b2d 315d 2066  split("/")[-1] f
-0000f740: 6f72 2069 6e64 2069 6e20 706f 735d 5b3a  or ind in pos][:
-0000f750: 7365 6c66 2e6e 756d 5f65 7861 6d70 6c65  self.num_example
-0000f760: 735d 0a20 2020 2020 2020 2020 2020 206e  s].            n
-0000f770: 6567 5f73 7472 203d 205b 696e 642e 6765  eg_str = [ind.ge
-0000f780: 745f 6972 6928 292e 6173 5f73 7472 2829  t_iri().as_str()
-0000f790: 2e73 706c 6974 2822 2f22 295b 2d31 5d20  .split("/")[-1] 
-0000f7a0: 666f 7220 696e 6420 696e 206e 6567 5d5b  for ind in neg][
-0000f7b0: 3a73 656c 662e 6e75 6d5f 6578 616d 706c  :self.num_exampl
-0000f7c0: 6573 5d0a 2020 2020 2020 2020 656c 6966  es].        elif
-0000f7d0: 2069 7369 6e73 7461 6e63 6528 706f 735b   isinstance(pos[
-0000f7e0: 305d 2c20 7374 7229 3a0a 2020 2020 2020  0], str):.      
-0000f7f0: 2020 2020 2020 706f 735f 7374 7220 3d20        pos_str = 
-0000f800: 706f 735b 3a73 656c 662e 6e75 6d5f 6578  pos[:self.num_ex
-0000f810: 616d 706c 6573 5d0a 2020 2020 2020 2020  amples].        
-0000f820: 2020 2020 6e65 675f 7374 7220 3d20 6e65      neg_str = ne
-0000f830: 675b 3a73 656c 662e 6e75 6d5f 6578 616d  g[:self.num_exam
-0000f840: 706c 6573 5d0a 2020 2020 2020 2020 656c  ples].        el
-0000f850: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0000f860: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
-0000f870: 2866 2249 6e76 616c 6964 2069 6e70 7574  (f"Invalid input
-0000f880: 2074 7970 652c 2077 6173 2065 7870 6563   type, was expec
-0000f890: 7469 6e67 204f 574c 4e61 6d65 6449 6e64  ting OWLNamedInd
-0000f8a0: 6976 6964 7561 6c20 6f72 2073 7472 2062  ividual or str b
-0000f8b0: 7574 2066 6f75 6e64 207b 7479 7065 2870  ut found {type(p
-0000f8c0: 6f73 5b30 5d29 7d22 290a 0a20 2020 2020  os[0])}")..     
-0000f8d0: 2020 2061 7373 6572 7420 7365 6c66 2e6c     assert self.l
-0000f8e0: 6f61 645f 7072 6574 7261 696e 6564 2061  oad_pretrained a
-0000f8f0: 6e64 2073 656c 662e 7072 6574 7261 696e  nd self.pretrain
-0000f900: 6564 5f70 7265 6469 6374 6f72 5f6e 616d  ed_predictor_nam
-0000f910: 652c 205c 0a20 2020 2020 2020 2020 2020  e, \.           
-0000f920: 2022 4e6f 2070 7265 7472 6169 6e65 6420   "No pretrained 
-0000f930: 6d6f 6465 6c20 666f 756e 642e 2050 6c65  model found. Ple
-0000f940: 6173 6520 6669 7273 7420 7472 6169 6e20  ase first train 
-0000f950: 6c65 6e67 7468 2070 7265 6469 6374 6f72  length predictor
-0000f960: 732c 2073 6565 2074 6865 203c 3c74 7261  s, see the <<tra
-0000f970: 696e 3e3e 206d 6574 686f 6420 6265 6c6f  in>> method belo
-0000f980: 7722 0a0a 2020 2020 2020 2020 6461 7461  w"..        data
-0000f990: 7365 7420 3d20 434c 4950 4461 7461 4c6f  set = CLIPDataLo
-0000f9a0: 6164 6572 496e 6665 7265 6e63 6528 5b28  aderInference([(
-0000f9b0: 2222 2c20 706f 735f 7374 722c 206e 6567  "", pos_str, neg
-0000f9c0: 5f73 7472 295d 2c20 7365 6c66 2e69 6e73  _str)], self.ins
-0000f9d0: 7461 6e63 655f 656d 6265 6464 696e 6773  tance_embeddings
-0000f9e0: 2c20 4661 6c73 652c 2046 616c 7365 290a  , False, False).
-0000f9f0: 2020 2020 2020 2020 6461 7461 6c6f 6164          dataload
-0000fa00: 6572 203d 2044 6174 614c 6f61 6465 7228  er = DataLoader(
-0000fa10: 6461 7461 7365 742c 2062 6174 6368 5f73  dataset, batch_s
-0000fa20: 697a 653d 312c 206e 756d 5f77 6f72 6b65  ize=1, num_worke
-0000fa30: 7273 3d73 656c 662e 6e75 6d5f 776f 726b  rs=self.num_work
-0000fa40: 6572 732c 0a20 2020 2020 2020 2020 2020  ers,.           
-0000fa50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fa60: 2020 2020 2063 6f6c 6c61 7465 5f66 6e3d       collate_fn=
-0000fa70: 7365 6c66 2e63 6f6c 6c61 7465 5f62 6174  self.collate_bat
-0000fa80: 6368 5f69 6e66 6572 656e 6365 2c20 7368  ch_inference, sh
-0000fa90: 7566 666c 653d 4661 6c73 6529 0a20 2020  uffle=False).   
-0000faa0: 2020 2020 2078 5f70 6f73 2c20 785f 6e65       x_pos, x_ne
-0000fab0: 6720 3d20 6e65 7874 2869 7465 7228 6461  g = next(iter(da
-0000fac0: 7461 6c6f 6164 6572 2929 0a20 2020 2020  taloader)).     
-0000fad0: 2020 2072 6574 7572 6e20 785f 706f 732c     return x_pos,
-0000fae0: 2078 5f6e 6567 0a0a 2020 2020 6465 6620   x_neg..    def 
-0000faf0: 7072 6564 6963 745f 6c65 6e67 7468 2873  predict_length(s
-0000fb00: 656c 662c 206d 6f64 656c 732c 2078 312c  elf, models, x1,
-0000fb10: 2078 3229 3a0a 2020 2020 2020 2020 666f   x2):.        fo
-0000fb20: 7220 692c 206d 6f64 656c 2069 6e20 656e  r i, model in en
-0000fb30: 756d 6572 6174 6528 6d6f 6465 6c73 293a  umerate(models):
-0000fb40: 0a20 2020 2020 2020 2020 2020 206d 6f64  .            mod
-0000fb50: 656c 2e65 7661 6c28 290a 2020 2020 2020  el.eval().      
-0000fb60: 2020 2020 2020 6d6f 6465 6c2e 746f 2873        model.to(s
-0000fb70: 656c 662e 6465 7669 6365 290a 2020 2020  elf.device).    
-0000fb80: 2020 2020 2020 2020 7831 203d 2078 312e          x1 = x1.
-0000fb90: 746f 2873 656c 662e 6465 7669 6365 290a  to(self.device).
-0000fba0: 2020 2020 2020 2020 2020 2020 7832 203d              x2 =
-0000fbb0: 2078 322e 746f 2873 656c 662e 6465 7669   x2.to(self.devi
-0000fbc0: 6365 290a 2020 2020 2020 2020 2020 2020  ce).            
-0000fbd0: 6966 2069 203d 3d20 303a 0a20 2020 2020  if i == 0:.     
-0000fbe0: 2020 2020 2020 2020 2020 2073 636f 7265             score
-0000fbf0: 7320 3d20 6d6f 6465 6c28 7831 2c20 7832  s = model(x1, x2
-0000fc00: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0000fc10: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0000fc20: 2020 2020 7363 203d 206d 6f64 656c 2878      sc = model(x
-0000fc30: 312c 2078 3229 0a20 2020 2020 2020 2020  1, x2).         
-0000fc40: 2020 2020 2020 2073 636f 7265 7320 3d20         scores = 
-0000fc50: 7363 6f72 6573 202b 2073 630a 2020 2020  scores + sc.    
-0000fc60: 2020 2020 7363 6f72 6573 203d 2073 636f      scores = sco
-0000fc70: 7265 7320 2f20 6c65 6e28 6d6f 6465 6c73  res / len(models
-0000fc80: 290a 2020 2020 2020 2020 7072 6564 6963  ).        predic
-0000fc90: 7469 6f6e 203d 2069 6e74 2873 636f 7265  tion = int(score
-0000fca0: 732e 6172 676d 6178 2831 292e 6370 7528  s.argmax(1).cpu(
-0000fcb0: 2929 0a20 2020 2020 2020 2070 7269 6e74  )).        print
-0000fcc0: 2866 225c 6e2a 2a2a 2a2a 2050 7265 6469  (f"\n***** Predi
-0000fcd0: 6374 6564 206c 656e 6774 683a 207b 7072  cted length: {pr
-0000fce0: 6564 6963 7469 6f6e 7d20 2a2a 2a2a 2a5c  ediction} *****\
-0000fcf0: 6e22 290a 2020 2020 2020 2020 7265 7475  n").        retu
-0000fd00: 726e 2070 7265 6469 6374 696f 6e0a 2020  rn prediction.  
-0000fd10: 2020 0a20 2020 2064 6566 2066 6974 2873    .    def fit(s
-0000fd20: 656c 662c 202a 6172 6773 2c20 2a2a 6b77  elf, *args, **kw
-0000fd30: 6172 6773 293a 0a20 2020 2020 2020 2022  args):.        "
-0000fd40: 2222 0a20 2020 2020 2020 2046 696e 6420  "".        Find 
-0000fd50: 6879 706f 7468 6573 6573 2074 6861 7420  hypotheses that 
-0000fd60: 6578 706c 6169 6e20 706f 7320 616e 6420  explain pos and 
-0000fd70: 6e65 672e 0a20 2020 2020 2020 2022 2222  neg..        """
-0000fd80: 0a20 2020 2020 2020 2073 656c 662e 636c  .        self.cl
-0000fd90: 6561 6e28 290a 2020 2020 2020 2020 6d61  ean().        ma
-0000fda0: 785f 7275 6e74 696d 6520 3d20 6b77 6172  x_runtime = kwar
-0000fdb0: 6773 2e70 6f70 2822 6d61 785f 7275 6e74  gs.pop("max_runt
-0000fdc0: 696d 6522 2c20 4e6f 6e65 290a 2020 2020  ime", None).    
-0000fdd0: 2020 2020 6c65 6172 6e69 6e67 5f70 726f      learning_pro
-0000fde0: 626c 656d 203d 2073 656c 662e 636f 6e73  blem = self.cons
-0000fdf0: 7472 7563 745f 6c65 6172 6e69 6e67 5f70  truct_learning_p
-0000fe00: 726f 626c 656d 2850 6f73 4e65 674c 5053  roblem(PosNegLPS
-0000fe10: 7461 6e64 6172 642c 2061 7267 732c 206b  tandard, args, k
-0000fe20: 7761 7267 7329 0a0a 2020 2020 2020 2020  wargs)..        
-0000fe30: 6173 7365 7274 206e 6f74 2073 656c 662e  assert not self.
-0000fe40: 7365 6172 6368 5f74 7265 650a 2020 2020  search_tree.    
-0000fe50: 2020 2020 7365 6c66 2e5f 6c65 6172 6e69      self._learni
-0000fe60: 6e67 5f70 726f 626c 656d 203d 206c 6561  ng_problem = lea
-0000fe70: 726e 696e 675f 7072 6f62 6c65 6d2e 656e  rning_problem.en
-0000fe80: 636f 6465 5f6b 6228 7365 6c66 2e6b 6229  code_kb(self.kb)
-0000fe90: 0a0a 2020 2020 2020 2020 6966 206d 6178  ..        if max
-0000fea0: 5f72 756e 7469 6d65 2069 7320 6e6f 7420  _runtime is not 
-0000feb0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0000fec0: 2020 7365 6c66 2e5f 6d61 785f 7275 6e74    self._max_runt
-0000fed0: 696d 6520 3d20 6d61 785f 7275 6e74 696d  ime = max_runtim
-0000fee0: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
-0000fef0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000ff00: 2e5f 6d61 785f 7275 6e74 696d 6520 3d20  ._max_runtime = 
-0000ff10: 7365 6c66 2e6d 6178 5f72 756e 7469 6d65  self.max_runtime
-0000ff20: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
-0000ff30: 2020 6966 2028 7365 6c66 2e70 7265 7472    if (self.pretr
-0000ff40: 6169 6e65 645f 7072 6564 6963 746f 725f  ained_predictor_
-0000ff50: 6e61 6d65 2069 7320 6e6f 7420 4e6f 6e65  name is not None
-0000ff60: 2920 616e 6420 2873 656c 662e 6c65 6e67  ) and (self.leng
-0000ff70: 7468 5f70 7265 6469 6374 6f72 2069 7320  th_predictor is 
-0000ff80: 6e6f 7420 4e6f 6e65 293a 0a20 2020 2020  not None):.     
-0000ff90: 2020 2020 2020 2078 5f70 6f73 2c20 785f         x_pos, x_
-0000ffa0: 6e65 6720 3d20 7365 6c66 2e70 6f73 5f6e  neg = self.pos_n
-0000ffb0: 6567 5f74 6f5f 7465 6e73 6f72 286c 6973  eg_to_tensor(lis
-0000ffc0: 7428 7365 6c66 2e5f 6c65 6172 6e69 6e67  t(self._learning
-0000ffd0: 5f70 726f 626c 656d 2e6b 625f 706f 7329  _problem.kb_pos)
-0000ffe0: 5b3a 7365 6c66 2e6e 756d 5f65 7861 6d70  [:self.num_examp
-0000fff0: 6c65 735d 2c20 6c69 7374 2873 656c 662e  les], list(self.
-00010000: 5f6c 6561 726e 696e 675f 7072 6f62 6c65  _learning_proble
-00010010: 6d2e 6b62 5f6e 6567 295b 3a73 656c 662e  m.kb_neg)[:self.
-00010020: 6e75 6d5f 6578 616d 706c 6573 5d29 0a20  num_examples]). 
-00010030: 2020 2020 2020 2020 2020 206d 6178 5f6c             max_l
-00010040: 656e 6774 6820 3d20 7365 6c66 2e70 7265  ength = self.pre
-00010050: 6469 6374 5f6c 656e 6774 6828 7365 6c66  dict_length(self
-00010060: 2e6c 656e 6774 685f 7072 6564 6963 746f  .length_predicto
-00010070: 722c 2078 5f70 6f73 2c20 785f 6e65 6729  r, x_pos, x_neg)
-00010080: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00010090: 662e 6f70 6572 6174 6f72 2e6d 6178 5f63  f.operator.max_c
-000100a0: 6869 6c64 5f6c 656e 6774 6820 3d20 6d61  hild_length = ma
-000100b0: 785f 6c65 6e67 7468 0a20 2020 2020 2020  x_length.       
-000100c0: 2020 2020 2070 7269 6e74 2866 272a 2a2a       print(f'***
-000100d0: 2a2a 2050 7265 6469 6374 6564 206c 656e  ** Predicted len
-000100e0: 6774 683a 207b 6d61 785f 6c65 6e67 7468  gth: {max_length
-000100f0: 7d20 2a2a 2a2a 2a27 290a 2020 2020 2020  } *****').      
-00010100: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00010110: 2020 2020 7072 696e 7428 275c 6e21 2121      print('\n!!!
-00010120: 204e 6f20 6c65 6e67 7468 2070 7265 6469   No length predi
-00010130: 6374 6f72 2070 726f 7669 6465 642c 2072  ctor provided, r
-00010140: 756e 6e69 6e67 2043 4c49 5020 7769 7468  unning CLIP with
-00010150: 6f75 7420 6c65 6e67 7468 2070 7265 6469  out length predi
-00010160: 6374 6f72 2021 2121 2729 0a0a 2020 2020  ctor !!!')..    
-00010170: 2020 2020 2020 2020 0a20 2020 2020 2020          .       
-00010180: 2072 6f6f 7420 3d20 7365 6c66 2e6d 616b   root = self.mak
-00010190: 655f 6e6f 6465 285f 636f 6e63 6570 745f  e_node(_concept_
-000101a0: 6f70 6572 616e 645f 736f 7274 6572 2e73  operand_sorter.s
-000101b0: 6f72 7428 7365 6c66 2e73 7461 7274 5f63  ort(self.start_c
-000101c0: 6c61 7373 292c 2069 735f 726f 6f74 3d54  lass), is_root=T
-000101d0: 7275 6529 0a20 2020 2020 2020 2073 656c  rue).        sel
-000101e0: 662e 5f61 6464 5f6e 6f64 6528 726f 6f74  f._add_node(root
-000101f0: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-00010200: 6173 7365 7274 206c 656e 2873 656c 662e  assert len(self.
-00010210: 6865 7572 6973 7469 635f 7175 6575 6529  heuristic_queue)
-00010220: 203d 3d20 310a 2020 2020 2020 2020 2320   == 1.        # 
-00010230: 544f 444f 3a43 443a 7375 6767 6573 7420  TODO:CD:suggest 
-00010240: 746f 2061 6464 2061 6e6f 7468 6572 2061  to add another a
-00010250: 7373 6572 742c 652e 672e 2061 7373 6572  ssert,e.g. asser
-00010260: 7420 232e 206f 6620 696e 7374 616e 6365  t #. of instance
-00010270: 2069 6e20 726f 6f74 203e 2031 0a0a 2020   in root > 1..  
-00010280: 2020 2020 2020 7365 6c66 2e73 7461 7274        self.start
-00010290: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
-000102a0: 6528 290a 2020 2020 2020 2020 666f 7220  e().        for 
-000102b0: 6a20 696e 2072 616e 6765 2831 2c20 7365  j in range(1, se
-000102c0: 6c66 2e69 7465 725f 626f 756e 6429 3a0a  lf.iter_bound):.
-000102d0: 2020 2020 2020 2020 2020 2020 6d6f 7374              most
-000102e0: 5f70 726f 6d69 7369 6e67 203d 2073 656c  _promising = sel
-000102f0: 662e 6e65 7874 5f6e 6f64 655f 746f 5f65  f.next_node_to_e
-00010300: 7870 616e 6428 6a29 0a20 2020 2020 2020  xpand(j).       
-00010310: 2020 2020 2074 7265 655f 7061 7265 6e74       tree_parent
-00010320: 203d 2073 656c 662e 7472 6565 5f6e 6f64   = self.tree_nod
-00010330: 6528 6d6f 7374 5f70 726f 6d69 7369 6e67  e(most_promising
-00010340: 290a 2020 2020 2020 2020 2020 2020 6d69  ).            mi
-00010350: 6e69 6d75 6d5f 6c65 6e67 7468 203d 206d  nimum_length = m
-00010360: 6f73 745f 7072 6f6d 6973 696e 672e 685f  ost_promising.h_
-00010370: 6578 700a 2020 2020 2020 2020 2020 2020  exp.            
-00010380: 6966 206c 6f67 6765 722e 6973 456e 6162  if logger.isEnab
-00010390: 6c65 6446 6f72 286f 706c 6f67 6769 6e67  ledFor(oplogging
-000103a0: 2e54 5241 4345 293a 0a20 2020 2020 2020  .TRACE):.       
-000103b0: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
-000103c0: 6465 6275 6728 226e 6f77 2072 6566 696e  debug("now refin
-000103d0: 696e 6720 2573 222c 206d 6f73 745f 7072  ing %s", most_pr
-000103e0: 6f6d 6973 696e 6729 0a20 2020 2020 2020  omising).       
-000103f0: 2020 2020 2066 6f72 2072 6566 2069 6e20       for ref in 
-00010400: 7365 6c66 2e64 6f77 6e77 6172 645f 7265  self.downward_re
-00010410: 6669 6e65 6d65 6e74 286d 6f73 745f 7072  finement(most_pr
-00010420: 6f6d 6973 696e 6729 3a0a 2020 2020 2020  omising):.      
-00010430: 2020 2020 2020 2020 2020 2320 7765 2069            # we i
-00010440: 676e 6f72 6520 616c 6c20 7265 6669 6e65  gnore all refine
-00010450: 6d65 6e74 7320 7769 7468 206c 6f77 6572  ments with lower
-00010460: 206c 656e 6774 680a 2020 2020 2020 2020   length.        
-00010470: 2020 2020 2020 2020 2320 2874 6869 7320          # (this 
-00010480: 616c 736f 2061 766f 6964 7320 6475 706c  also avoids dupl
-00010490: 6963 6174 6520 6e6f 6465 2063 6869 6c64  icate node child
-000104a0: 7265 6e29 0a20 2020 2020 2020 2020 2020  ren).           
-000104b0: 2020 2020 2023 2054 4f44 4f3a 2069 676e       # TODO: ign
-000104c0: 6f72 6520 746f 6f20 6869 6768 2064 6570  ore too high dep
-000104d0: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
-000104e0: 2020 2069 6620 7265 662e 6c65 6e20 3c20     if ref.len < 
-000104f0: 6d69 6e69 6d75 6d5f 6c65 6e67 7468 3a0a  minimum_length:.
-00010500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010510: 2020 2020 2320 6967 6e6f 7269 6e67 2072      # ignoring r
-00010520: 6566 696e 656d 656e 742c 2069 7420 646f  efinement, it do
-00010530: 6573 206e 6f74 2073 6174 6973 6679 206d  es not satisfy m
-00010540: 696e 696d 756d 5f6c 656e 6774 6820 636f  inimum_length co
-00010550: 6e64 6974 696f 6e0a 2020 2020 2020 2020  ndition.        
-00010560: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-00010570: 696e 7565 0a0a 2020 2020 2020 2020 2020  inue..          
-00010580: 2020 2020 2020 2320 6e6f 7465 3a20 7472        # note: tr
-00010590: 6565 5f70 6172 656e 7420 6861 7320 746f  ee_parent has to
-000105a0: 2062 6520 6571 7561 6c20 746f 206e 6f64   be equal to nod
-000105b0: 655f 7472 6565 5f70 6172 656e 7428 7265  e_tree_parent(re
-000105c0: 662e 7061 7265 6e74 5f6e 6f64 6529 210a  f.parent_node)!.
-000105d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000105e0: 6164 6465 6420 3d20 7365 6c66 2e5f 6164  added = self._ad
-000105f0: 645f 6e6f 6465 2872 6566 2c20 7472 6565  d_node(ref, tree
-00010600: 5f70 6172 656e 7429 0a0a 2020 2020 2020  _parent)..      
-00010610: 2020 2020 2020 2020 2020 676f 616c 5f66            goal_f
-00010620: 6f75 6e64 203d 2061 6464 6564 2061 6e64  ound = added and
-00010630: 2072 6566 2e71 7561 6c69 7479 203d 3d20   ref.quality == 
-00010640: 312e 300a 0a20 2020 2020 2020 2020 2020  1.0..           
-00010650: 2020 2020 2069 6620 676f 616c 5f66 6f75       if goal_fou
-00010660: 6e64 2061 6e64 2073 656c 662e 7465 726d  nd and self.term
-00010670: 696e 6174 655f 6f6e 5f67 6f61 6c3a 0a20  inate_on_goal:. 
-00010680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010690: 2020 2072 6574 7572 6e20 7365 6c66 2e74     return self.t
-000106a0: 6572 6d69 6e61 7465 2829 0a0a 2020 2020  erminate()..    
-000106b0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000106c0: 6361 6c63 756c 6174 655f 6d69 6e5f 6d61  calculate_min_ma
-000106d0: 783a 0a20 2020 2020 2020 2020 2020 2020  x:.             
-000106e0: 2020 2023 2054 6869 7320 6973 2070 7572     # This is pur
-000106f0: 656c 7920 6120 7374 6174 6973 7469 6361  ely a statistica
-00010700: 6c20 6675 6e63 7469 6f6e 2c20 6974 2064  l function, it d
-00010710: 6f65 7320 6e6f 7420 696e 666c 7565 6e63  oes not influenc
-00010720: 6520 4345 4c4f 450a 2020 2020 2020 2020  e CELOE.        
-00010730: 2020 2020 2020 2020 7365 6c66 2e75 7064          self.upd
-00010740: 6174 655f 6d69 6e5f 6d61 785f 686f 7269  ate_min_max_hori
-00010750: 7a5f 6578 7028 6d6f 7374 5f70 726f 6d69  z_exp(most_promi
-00010760: 7369 6e67 290a 0a20 2020 2020 2020 2020  sing)..         
-00010770: 2020 2069 6620 7469 6d65 2e74 696d 6528     if time.time(
-00010780: 2920 2d20 7365 6c66 2e73 7461 7274 5f74  ) - self.start_t
-00010790: 696d 6520 3e20 7365 6c66 2e5f 6d61 785f  ime > self._max_
-000107a0: 7275 6e74 696d 653a 0a20 2020 2020 2020  runtime:.       
-000107b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000107c0: 7365 6c66 2e74 6572 6d69 6e61 7465 2829  self.terminate()
-000107d0: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-000107e0: 2073 656c 662e 6e75 6d62 6572 5f6f 665f   self.number_of_
-000107f0: 7465 7374 6564 5f63 6f6e 6365 7074 7320  tested_concepts 
-00010800: 3e3d 2073 656c 662e 6d61 785f 6e75 6d5f  >= self.max_num_
-00010810: 6f66 5f63 6f6e 6365 7074 735f 7465 7374  of_concepts_test
-00010820: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
-00010830: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00010840: 7465 726d 696e 6174 6528 290a 0a20 2020  terminate()..   
-00010850: 2020 2020 2020 2020 2069 6620 6c6f 6767           if logg
-00010860: 6572 2e69 7345 6e61 626c 6564 466f 7228  er.isEnabledFor(
-00010870: 6f70 6c6f 6767 696e 672e 5452 4143 4529  oplogging.TRACE)
-00010880: 2061 6e64 206a 2025 2031 3030 203d 3d20   and j % 100 == 
-00010890: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-000108a0: 2020 2073 656c 662e 5f6c 6f67 5f63 7572     self._log_cur
-000108b0: 7265 6e74 5f62 6573 7428 6a29 0a0a 2020  rent_best(j)..  
-000108c0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-000108d0: 662e 7465 726d 696e 6174 6528 290a 2020  f.terminate().  
-000108e0: 2020 0a20 2020 2064 6566 2074 7261 696e    .    def train
-000108f0: 2873 656c 662c 2064 6174 613a 2049 7465  (self, data: Ite
-00010900: 7261 626c 655b 4c69 7374 5b54 7570 6c65  rable[List[Tuple
-00010910: 5d5d 2c20 6570 6f63 6873 3d33 3030 2c20  ]], epochs=300, 
-00010920: 6261 7463 685f 7369 7a65 3d32 3536 2c20  batch_size=256, 
-00010930: 6c65 6172 6e69 6e67 5f72 6174 653d 3165  learning_rate=1e
-00010940: 2d33 2c20 6465 6361 795f 7261 7465 3d30  -3, decay_rate=0
-00010950: 2e30 2c0a 2020 2020 2020 2020 2020 2020  .0,.            
-00010960: 2020 636c 6970 5f76 616c 7565 3d35 2e30    clip_value=5.0
-00010970: 2c20 7361 7665 5f6d 6f64 656c 3d54 7275  , save_model=Tru
-00010980: 652c 2073 746f 7261 6765 5f70 6174 683d  e, storage_path=
-00010990: 4e6f 6e65 2c20 6f70 7469 6d69 7a65 723d  None, optimizer=
-000109a0: 2741 6461 6d27 2c20 7265 636f 7264 5f72  'Adam', record_r
-000109b0: 756e 7469 6d65 3d54 7275 652c 0a20 2020  untime=True,.   
-000109c0: 2020 2020 2020 2020 2020 2065 7861 6d70             examp
-000109d0: 6c65 5f73 697a 6573 3d4e 6f6e 652c 2073  le_sizes=None, s
-000109e0: 6875 6666 6c65 5f65 7861 6d70 6c65 733d  huffle_examples=
-000109f0: 4661 6c73 6529 3a0a 2020 2020 2020 2020  False):.        
-00010a00: 7472 6169 6e5f 6461 7461 7365 7420 3d20  train_dataset = 
-00010a10: 434c 4950 4461 7461 4c6f 6164 6572 2864  CLIPDataLoader(d
-00010a20: 6174 612c 2073 656c 662e 696e 7374 616e  ata, self.instan
-00010a30: 6365 5f65 6d62 6564 6469 6e67 732c 2073  ce_embeddings, s
-00010a40: 6875 6666 6c65 5f65 7861 6d70 6c65 733d  huffle_examples=
-00010a50: 7368 7566 666c 655f 6578 616d 706c 6573  shuffle_examples
-00010a60: 2c20 6578 616d 706c 655f 7369 7a65 733d  , example_sizes=
-00010a70: 6578 616d 706c 655f 7369 7a65 7329 0a20  example_sizes). 
-00010a80: 2020 2020 2020 2074 7261 696e 5f64 6174         train_dat
-00010a90: 616c 6f61 6465 7220 3d20 4461 7461 4c6f  aloader = DataLo
-00010aa0: 6164 6572 2874 7261 696e 5f64 6174 6173  ader(train_datas
-00010ab0: 6574 2c20 6261 7463 685f 7369 7a65 3d62  et, batch_size=b
-00010ac0: 6174 6368 5f73 697a 652c 206e 756d 5f77  atch_size, num_w
-00010ad0: 6f72 6b65 7273 3d73 656c 662e 6e75 6d5f  orkers=self.num_
-00010ae0: 776f 726b 6572 732c 0a20 2020 2020 2020  workers,.       
-00010af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010b00: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00010b10: 6f6c 6c61 7465 5f66 6e3d 7365 6c66 2e63  ollate_fn=self.c
-00010b20: 6f6c 6c61 7465 5f62 6174 6368 2c20 7368  ollate_batch, sh
-00010b30: 7566 666c 653d 5472 7565 290a 2020 2020  uffle=True).    
-00010b40: 2020 2020 6966 2073 746f 7261 6765 5f70      if storage_p
-00010b50: 6174 6820 6973 204e 6f6e 653a 0a20 2020  ath is None:.   
-00010b60: 2020 2020 2020 2020 2073 746f 7261 6765           storage
-00010b70: 5f70 6174 6820 3d20 7365 6c66 2e6b 6e6f  _path = self.kno
-00010b80: 776c 6564 6765 5f62 6173 655f 7061 7468  wledge_base_path
-00010b90: 5b3a 7365 6c66 2e6b 6e6f 776c 6564 6765  [:self.knowledge
-00010ba0: 5f62 6173 655f 7061 7468 2e72 6669 6e64  _base_path.rfind
-00010bb0: 2822 2f22 295d 0a20 2020 2020 2020 2065  ("/")].        e
-00010bc0: 6c69 6620 6e6f 7420 6f73 2e70 6174 682e  lif not os.path.
-00010bd0: 6578 6973 7473 2873 746f 7261 6765 5f70  exists(storage_p
-00010be0: 6174 6829 3a0a 2020 2020 2020 2020 2020  ath):.          
-00010bf0: 2020 6f73 2e6d 6b64 6972 2873 746f 7261    os.mkdir(stora
-00010c00: 6765 5f70 6174 6829 0a20 2020 2020 2020  ge_path).       
-00010c10: 2074 7261 696e 6572 203d 2043 4c49 5054   trainer = CLIPT
-00010c20: 7261 696e 6572 2873 656c 662c 2065 706f  rainer(self, epo
-00010c30: 6368 733d 6570 6f63 6873 2c20 6c65 6172  chs=epochs, lear
-00010c40: 6e69 6e67 5f72 6174 653d 6c65 6172 6e69  ning_rate=learni
-00010c50: 6e67 5f72 6174 652c 2064 6563 6179 5f72  ng_rate, decay_r
-00010c60: 6174 653d 6465 6361 795f 7261 7465 2c0a  ate=decay_rate,.
-00010c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010c80: 2020 2020 2020 2020 2020 2020 2020 636c                cl
-00010c90: 6970 5f76 616c 7565 3d63 6c69 705f 7661  ip_value=clip_va
-00010ca0: 6c75 652c 2073 746f 7261 6765 5f70 6174  lue, storage_pat
-00010cb0: 683d 7374 6f72 6167 655f 7061 7468 290a  h=storage_path).
-00010cc0: 2020 2020 2020 2020 7472 6169 6e65 722e          trainer.
-00010cd0: 7472 6169 6e28 7472 6169 6e5f 6461 7461  train(train_data
-00010ce0: 6c6f 6164 6572 2c20 7361 7665 5f6d 6f64  loader, save_mod
-00010cf0: 656c 2c20 6f70 7469 6d69 7a65 722c 2072  el, optimizer, r
-00010d00: 6563 6f72 645f 7275 6e74 696d 6529 0a0a  ecord_runtime)..
-00010d10: 0a63 6c61 7373 204e 4345 5328 4261 7365  .class NCES(Base
-00010d20: 4e43 4553 293a 0a20 2020 2022 2222 4e65  NCES):.    """Ne
-00010d30: 7572 616c 2043 6c61 7373 2045 7870 7265  ural Class Expre
-00010d40: 7373 696f 6e20 5379 6e74 6865 7369 732e  ssion Synthesis.
-00010d50: 2222 220a 0a20 2020 2064 6566 205f 5f69  """..    def __i
-00010d60: 6e69 745f 5f28 7365 6c66 2c20 6b6e 6f77  nit__(self, know
-00010d70: 6c65 6467 655f 6261 7365 5f70 6174 682c  ledge_base_path,
-00010d80: 200a 2020 2020 2020 2020 2020 2020 2020   .              
-00010d90: 2020 2071 7561 6c69 7479 5f66 756e 633a     quality_func:
-00010da0: 204f 7074 696f 6e61 6c5b 4162 7374 7261   Optional[Abstra
-00010db0: 6374 5363 6f72 6572 5d20 3d20 4e6f 6e65  ctScorer] = None
-00010dc0: 2c20 6e75 6d5f 7072 6564 6963 7469 6f6e  , num_prediction
-00010dd0: 733d 352c 0a20 2020 2020 2020 2020 2020  s=5,.           
-00010de0: 2020 2020 2020 6c65 6172 6e65 725f 6e61        learner_na
-00010df0: 6d65 3d22 5365 7454 7261 6e73 666f 726d  me="SetTransform
-00010e00: 6572 222c 2070 6174 685f 6f66 5f65 6d62  er", path_of_emb
-00010e10: 6564 6469 6e67 733d 2222 2c20 7072 6f6a  eddings="", proj
-00010e20: 5f64 696d 3d31 3238 2c20 726e 6e5f 6e5f  _dim=128, rnn_n_
-00010e30: 6c61 7965 7273 3d32 2c20 6472 6f70 5f70  layers=2, drop_p
-00010e40: 726f 623d 302e 312c 0a20 2020 2020 2020  rob=0.1,.       
-00010e50: 2020 2020 2020 2020 2020 6e75 6d5f 6865            num_he
-00010e60: 6164 733d 342c 206e 756d 5f73 6565 6473  ads=4, num_seeds
-00010e70: 3d31 2c20 6e75 6d5f 696e 6473 3d33 322c  =1, num_inds=32,
-00010e80: 206c 6e3d 4661 6c73 652c 206c 6561 726e   ln=False, learn
-00010e90: 696e 675f 7261 7465 3d31 652d 342c 2064  ing_rate=1e-4, d
-00010ea0: 6563 6179 5f72 6174 653d 302e 302c 2063  ecay_rate=0.0, c
-00010eb0: 6c69 705f 7661 6c75 653d 352e 302c 0a20  lip_value=5.0,. 
-00010ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010ed0: 6261 7463 685f 7369 7a65 3d32 3536 2c20  batch_size=256, 
-00010ee0: 6e75 6d5f 776f 726b 6572 733d 382c 206d  num_workers=8, m
-00010ef0: 6178 5f6c 656e 6774 683d 3438 2c20 6c6f  ax_length=48, lo
-00010f00: 6164 5f70 7265 7472 6169 6e65 643d 5472  ad_pretrained=Tr
-00010f10: 7565 2c20 736f 7274 6564 5f65 7861 6d70  ue, sorted_examp
-00010f20: 6c65 733d 4661 6c73 652c 0a20 2020 2020  les=False,.     
-00010f30: 2020 2020 2020 2020 2020 2020 7072 6574              pret
-00010f40: 7261 696e 6564 5f6d 6f64 656c 5f6e 616d  rained_model_nam
-00010f50: 653d 4e6f 6e65 293a 0a20 2020 2020 2020  e=None):.       
-00010f60: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-00010f70: 5f28 6b6e 6f77 6c65 6467 655f 6261 7365  _(knowledge_base
-00010f80: 5f70 6174 682c 206c 6561 726e 6572 5f6e  _path, learner_n
-00010f90: 616d 652c 2070 6174 685f 6f66 5f65 6d62  ame, path_of_emb
-00010fa0: 6564 6469 6e67 732c 2062 6174 6368 5f73  eddings, batch_s
-00010fb0: 697a 652c 206c 6561 726e 696e 675f 7261  ize, learning_ra
-00010fc0: 7465 2c20 6465 6361 795f 7261 7465 2c0a  te, decay_rate,.
-00010fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010fe0: 2020 2020 2020 2020 2063 6c69 705f 7661           clip_va
-00010ff0: 6c75 652c 206e 756d 5f77 6f72 6b65 7273  lue, num_workers
-00011000: 290a 2020 2020 2020 2020 7365 6c66 2e71  ).        self.q
-00011010: 7561 6c69 7479 5f66 756e 6320 3d20 7175  uality_func = qu
-00011020: 616c 6974 795f 6675 6e63 0a20 2020 2020  ality_func.     
-00011030: 2020 2073 656c 662e 6e75 6d5f 7072 6564     self.num_pred
-00011040: 6963 7469 6f6e 7320 3d20 6e75 6d5f 7072  ictions = num_pr
-00011050: 6564 6963 7469 6f6e 730a 2020 2020 2020  edictions.      
-00011060: 2020 7365 6c66 2e70 6174 685f 6f66 5f65    self.path_of_e
-00011070: 6d62 6564 6469 6e67 7320 3d20 7061 7468  mbeddings = path
-00011080: 5f6f 665f 656d 6265 6464 696e 6773 0a20  _of_embeddings. 
-00011090: 2020 2020 2020 2073 656c 662e 6465 7669         self.devi
-000110a0: 6365 203d 2074 6f72 6368 2e64 6576 6963  ce = torch.devic
-000110b0: 6528 2763 7564 6127 2069 6620 746f 7263  e('cuda' if torc
-000110c0: 682e 6375 6461 2e69 735f 6176 6169 6c61  h.cuda.is_availa
-000110d0: 626c 6528 2920 656c 7365 2027 6370 7527  ble() else 'cpu'
-000110e0: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
-000110f0: 6178 5f6c 656e 6774 6820 3d20 6d61 785f  ax_length = max_
-00011100: 6c65 6e67 7468 0a20 2020 2020 2020 2073  length.        s
-00011110: 656c 662e 7072 6f6a 5f64 696d 203d 2070  elf.proj_dim = p
-00011120: 726f 6a5f 6469 6d0a 2020 2020 2020 2020  roj_dim.        
-00011130: 7365 6c66 2e72 6e6e 5f6e 5f6c 6179 6572  self.rnn_n_layer
-00011140: 7320 3d20 726e 6e5f 6e5f 6c61 7965 7273  s = rnn_n_layers
-00011150: 0a20 2020 2020 2020 2073 656c 662e 6472  .        self.dr
-00011160: 6f70 5f70 726f 6220 3d20 6472 6f70 5f70  op_prob = drop_p
-00011170: 726f 620a 2020 2020 2020 2020 7365 6c66  rob.        self
-00011180: 2e6e 756d 5f68 6561 6473 203d 206e 756d  .num_heads = num
-00011190: 5f68 6561 6473 0a20 2020 2020 2020 2073  _heads.        s
-000111a0: 656c 662e 6e75 6d5f 7365 6564 7320 3d20  elf.num_seeds = 
-000111b0: 6e75 6d5f 7365 6564 730a 2020 2020 2020  num_seeds.      
-000111c0: 2020 7365 6c66 2e6e 756d 5f69 6e64 7320    self.num_inds 
-000111d0: 3d20 6e75 6d5f 696e 6473 0a20 2020 2020  = num_inds.     
-000111e0: 2020 2073 656c 662e 6c6e 203d 206c 6e0a     self.ln = ln.
-000111f0: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-00011200: 645f 7072 6574 7261 696e 6564 203d 206c  d_pretrained = l
-00011210: 6f61 645f 7072 6574 7261 696e 6564 0a20  oad_pretrained. 
-00011220: 2020 2020 2020 2073 656c 662e 736f 7274         self.sort
-00011230: 6564 5f65 7861 6d70 6c65 7320 3d20 736f  ed_examples = so
-00011240: 7274 6564 5f65 7861 6d70 6c65 730a 2020  rted_examples.  
-00011250: 2020 2020 2020 7365 6c66 2e70 7265 7472        self.pretr
-00011260: 6169 6e65 645f 6d6f 6465 6c5f 6e61 6d65  ained_model_name
-00011270: 203d 2070 7265 7472 6169 6e65 645f 6d6f   = pretrained_mo
-00011280: 6465 6c5f 6e61 6d65 0a20 2020 2020 2020  del_name.       
-00011290: 2073 656c 662e 6d6f 6465 6c20 3d20 7365   self.model = se
-000112a0: 6c66 2e67 6574 5f73 796e 7468 6573 697a  lf.get_synthesiz
-000112b0: 6572 2829 0a20 2020 2020 2020 2073 656c  er().        sel
-000112c0: 662e 646c 5f70 6172 7365 7220 3d20 444c  f.dl_parser = DL
-000112d0: 5379 6e74 6178 5061 7273 6572 286e 616d  SyntaxParser(nam
-000112e0: 6573 7061 6365 3d73 656c 662e 6b62 5f6e  espace=self.kb_n
-000112f0: 616d 6573 7061 6365 290a 2020 2020 2020  amespace).      
-00011300: 2020 7365 6c66 2e62 6573 745f 7072 6564    self.best_pred
-00011310: 6963 7469 6f6e 7320 3d20 4e6f 6e65 0a0a  ictions = None..
-00011320: 2020 2020 6465 6620 6765 745f 7379 6e74      def get_synt
-00011330: 6865 7369 7a65 7228 7365 6c66 293a 0a20  hesizer(self):. 
-00011340: 2020 2020 2020 2064 6566 206c 6f61 645f         def load_
-00011350: 6d6f 6465 6c28 6c65 6172 6e65 725f 6e61  model(learner_na
-00011360: 6d65 2c20 6c6f 6164 5f70 7265 7472 6169  me, load_pretrai
-00011370: 6e65 6429 3a0a 2020 2020 2020 2020 2020  ned):.          
-00011380: 2020 6966 206c 6561 726e 6572 5f6e 616d    if learner_nam
-00011390: 6520 3d3d 2027 5365 7454 7261 6e73 666f  e == 'SetTransfo
-000113a0: 726d 6572 273a 0a20 2020 2020 2020 2020  rmer':.         
-000113b0: 2020 2020 2020 206d 6f64 656c 203d 2053         model = S
-000113c0: 6574 5472 616e 7366 6f72 6d65 7228 7365  etTransformer(se
-000113d0: 6c66 2e6b 6e6f 776c 6564 6765 5f62 6173  lf.knowledge_bas
-000113e0: 655f 7061 7468 2c20 7365 6c66 2e76 6f63  e_path, self.voc
-000113f0: 6162 2c20 7365 6c66 2e69 6e76 5f76 6f63  ab, self.inv_voc
-00011400: 6162 2c20 7365 6c66 2e6d 6178 5f6c 656e  ab, self.max_len
-00011410: 6774 682c 0a20 2020 2020 2020 2020 2020  gth,.           
-00011420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011430: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00011440: 2e69 6e70 7574 5f73 697a 652c 2073 656c  .input_size, sel
-00011450: 662e 7072 6f6a 5f64 696d 2c20 7365 6c66  f.proj_dim, self
-00011460: 2e6e 756d 5f68 6561 6473 2c20 7365 6c66  .num_heads, self
-00011470: 2e6e 756d 5f73 6565 6473 2c20 7365 6c66  .num_seeds, self
-00011480: 2e6e 756d 5f69 6e64 732c 0a20 2020 2020  .num_inds,.     
-00011490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000114a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000114b0: 2020 7365 6c66 2e6c 6e29 0a20 2020 2020    self.ln).     
-000114c0: 2020 2020 2020 2065 6c69 6620 6c65 6172         elif lear
-000114d0: 6e65 725f 6e61 6d65 203d 3d20 2747 5255  ner_name == 'GRU
-000114e0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-000114f0: 2020 206d 6f64 656c 203d 2047 5255 2873     model = GRU(s
-00011500: 656c 662e 6b6e 6f77 6c65 6467 655f 6261  elf.knowledge_ba
-00011510: 7365 5f70 6174 682c 2073 656c 662e 766f  se_path, self.vo
-00011520: 6361 622c 2073 656c 662e 696e 765f 766f  cab, self.inv_vo
-00011530: 6361 622c 2073 656c 662e 6d61 785f 6c65  cab, self.max_le
-00011540: 6e67 7468 2c20 7365 6c66 2e69 6e70 7574  ngth, self.input
-00011550: 5f73 697a 652c 0a20 2020 2020 2020 2020  _size,.         
-00011560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011570: 2020 2073 656c 662e 7072 6f6a 5f64 696d     self.proj_dim
-00011580: 2c20 7365 6c66 2e72 6e6e 5f6e 5f6c 6179  , self.rnn_n_lay
-00011590: 6572 732c 2073 656c 662e 6472 6f70 5f70  ers, self.drop_p
-000115a0: 726f 6229 0a20 2020 2020 2020 2020 2020  rob).           
-000115b0: 2065 6c69 6620 6c65 6172 6e65 725f 6e61   elif learner_na
-000115c0: 6d65 203d 3d20 274c 5354 4d27 3a0a 2020  me == 'LSTM':.  
-000115d0: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
-000115e0: 6465 6c20 3d20 4c53 544d 2873 656c 662e  del = LSTM(self.
-000115f0: 6b6e 6f77 6c65 6467 655f 6261 7365 5f70  knowledge_base_p
-00011600: 6174 682c 2073 656c 662e 766f 6361 622c  ath, self.vocab,
-00011610: 2073 656c 662e 696e 765f 766f 6361 622c   self.inv_vocab,
-00011620: 2073 656c 662e 6d61 785f 6c65 6e67 7468   self.max_length
-00011630: 2c20 7365 6c66 2e69 6e70 7574 5f73 697a  , self.input_siz
-00011640: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-00011650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011660: 7365 6c66 2e70 726f 6a5f 6469 6d2c 2073  self.proj_dim, s
-00011670: 656c 662e 726e 6e5f 6e5f 6c61 7965 7273  elf.rnn_n_layers
-00011680: 2c20 7365 6c66 2e64 726f 705f 7072 6f62  , self.drop_prob
-00011690: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-000116a0: 206c 6f61 645f 7072 6574 7261 696e 6564   load_pretrained
-000116b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000116c0: 2020 6d6f 6465 6c5f 7061 7468 203d 2073    model_path = s
-000116d0: 656c 662e 7061 7468 5f6f 665f 656d 6265  elf.path_of_embe
-000116e0: 6464 696e 6773 2e73 706c 6974 2822 656d  ddings.split("em
-000116f0: 6265 6464 696e 6773 2229 5b0a 2020 2020  beddings")[.    
-00011700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011710: 2020 2020 2020 2020 2020 2020 2030 5d20               0] 
-00011720: 2b20 2274 7261 696e 6564 5f6d 6f64 656c  + "trained_model
-00011730: 732f 7472 6169 6e65 645f 2220 2b20 6c65  s/trained_" + le
-00011740: 6172 6e65 725f 6e61 6d65 202b 2022 2e70  arner_name + ".p
-00011750: 7422 0a20 2020 2020 2020 2020 2020 2020  t".             
-00011760: 2020 206d 6f64 656c 2e6c 6f61 645f 7374     model.load_st
-00011770: 6174 655f 6469 6374 2874 6f72 6368 2e6c  ate_dict(torch.l
-00011780: 6f61 6428 6d6f 6465 6c5f 7061 7468 2c20  oad(model_path, 
-00011790: 6d61 705f 6c6f 6361 7469 6f6e 3d73 656c  map_location=sel
-000117a0: 662e 6465 7669 6365 2929 0a20 2020 2020  f.device)).     
-000117b0: 2020 2020 2020 2020 2020 206d 6f64 656c             model
-000117c0: 2e65 7661 6c28 290a 2020 2020 2020 2020  .eval().        
-000117d0: 2020 2020 2020 2020 7072 696e 7428 225c          print("\
-000117e0: 6e20 4c6f 6164 6564 2073 796e 7468 6573  n Loaded synthes
-000117f0: 697a 6572 206d 6f64 656c 2122 290a 2020  izer model!").  
-00011800: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00011810: 206d 6f64 656c 0a0a 2020 2020 2020 2020   model..        
-00011820: 6966 206e 6f74 2073 656c 662e 6c6f 6164  if not self.load
-00011830: 5f70 7265 7472 6169 6e65 643a 0a20 2020  _pretrained:.   
-00011840: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00011850: 5b6c 6f61 645f 6d6f 6465 6c28 7365 6c66  [load_model(self
-00011860: 2e6c 6561 726e 6572 5f6e 616d 652c 2073  .learner_name, s
-00011870: 656c 662e 6c6f 6164 5f70 7265 7472 6169  elf.load_pretrai
-00011880: 6e65 6429 5d0a 2020 2020 2020 2020 656c  ned)].        el
-00011890: 6966 2073 656c 662e 6c6f 6164 5f70 7265  if self.load_pre
-000118a0: 7472 6169 6e65 6420 616e 6420 6973 696e  trained and isin
-000118b0: 7374 616e 6365 2873 656c 662e 7072 6574  stance(self.pret
-000118c0: 7261 696e 6564 5f6d 6f64 656c 5f6e 616d  rained_model_nam
-000118d0: 652c 2073 7472 293a 0a20 2020 2020 2020  e, str):.       
-000118e0: 2020 2020 2072 6574 7572 6e20 5b6c 6f61       return [loa
-000118f0: 645f 6d6f 6465 6c28 7365 6c66 2e70 7265  d_model(self.pre
-00011900: 7472 6169 6e65 645f 6d6f 6465 6c5f 6e61  trained_model_na
-00011910: 6d65 2c20 7365 6c66 2e6c 6f61 645f 7072  me, self.load_pr
-00011920: 6574 7261 696e 6564 295d 0a20 2020 2020  etrained)].     
-00011930: 2020 2065 6c69 6620 7365 6c66 2e6c 6f61     elif self.loa
-00011940: 645f 7072 6574 7261 696e 6564 2061 6e64  d_pretrained and
-00011950: 2069 7369 6e73 7461 6e63 6528 7365 6c66   isinstance(self
-00011960: 2e70 7265 7472 6169 6e65 645f 6d6f 6465  .pretrained_mode
-00011970: 6c5f 6e61 6d65 2c20 6c69 7374 293a 0a20  l_name, list):. 
-00011980: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00011990: 6e20 5b6c 6f61 645f 6d6f 6465 6c28 6e61  n [load_model(na
-000119a0: 6d65 2c20 7365 6c66 2e6c 6f61 645f 7072  me, self.load_pr
-000119b0: 6574 7261 696e 6564 2920 666f 7220 6e61  etrained) for na
-000119c0: 6d65 2069 6e20 7365 6c66 2e70 7265 7472  me in self.pretr
-000119d0: 6169 6e65 645f 6d6f 6465 6c5f 6e61 6d65  ained_model_name
-000119e0: 5d0a 0a20 2020 2064 6566 2072 6566 7265  ]..    def refre
-000119f0: 7368 2873 656c 6629 3a0a 2020 2020 2020  sh(self):.      
-00011a00: 2020 7365 6c66 2e6d 6f64 656c 203d 2073    self.model = s
-00011a10: 656c 662e 6765 745f 7379 6e74 6865 7369  elf.get_synthesi
-00011a20: 7a65 7228 290a 0a20 2020 2064 6566 2073  zer()..    def s
-00011a30: 616d 706c 655f 6578 616d 706c 6573 2873  ample_examples(s
-00011a40: 656c 662c 2070 6f73 2c20 6e65 6729 3a0a  elf, pos, neg):.
-00011a50: 2020 2020 2020 2020 6173 7365 7274 2074          assert t
-00011a60: 7970 6528 706f 735b 305d 2920 3d3d 2074  ype(pos[0]) == t
-00011a70: 7970 6528 6e65 675b 305d 292c 2022 5468  ype(neg[0]), "Th
-00011a80: 6520 7477 6f20 6974 6572 6162 6c65 7320  e two iterables 
-00011a90: 706f 7320 616e 6420 6e65 6720 6d75 7374  pos and neg must
-00011aa0: 2062 6520 6f66 2073 616d 6520 7479 7065   be of same type
-00011ab0: 220a 2020 2020 2020 2020 6e75 6d5f 6578  ".        num_ex
-00011ac0: 203d 2073 656c 662e 6e75 6d5f 6578 616d   = self.num_exam
-00011ad0: 706c 6573 0a20 2020 2020 2020 2069 6620  ples.        if 
-00011ae0: 6d69 6e28 6c65 6e28 706f 7329 2c20 6c65  min(len(pos), le
-00011af0: 6e28 6e65 6729 2920 3e3d 206e 756d 5f65  n(neg)) >= num_e
-00011b00: 7820 2f2f 2032 3a0a 2020 2020 2020 2020  x // 2:.        
-00011b10: 2020 2020 6966 206c 656e 2870 6f73 2920      if len(pos) 
-00011b20: 3e20 6c65 6e28 6e65 6729 3a0a 2020 2020  > len(neg):.    
-00011b30: 2020 2020 2020 2020 2020 2020 6e75 6d5f              num_
-00011b40: 6e65 675f 6578 203d 206e 756d 5f65 7820  neg_ex = num_ex 
-00011b50: 2f2f 2032 0a20 2020 2020 2020 2020 2020  // 2.           
-00011b60: 2020 2020 206e 756d 5f70 6f73 5f65 7820       num_pos_ex 
-00011b70: 3d20 6e75 6d5f 6578 202d 206e 756d 5f6e  = num_ex - num_n
-00011b80: 6567 5f65 780a 2020 2020 2020 2020 2020  eg_ex.          
-00011b90: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00011ba0: 2020 2020 2020 2020 6e75 6d5f 706f 735f          num_pos_
-00011bb0: 6578 203d 206e 756d 5f65 7820 2f2f 2032  ex = num_ex // 2
-00011bc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011bd0: 206e 756d 5f6e 6567 5f65 7820 3d20 6e75   num_neg_ex = nu
-00011be0: 6d5f 6578 202d 206e 756d 5f70 6f73 5f65  m_ex - num_pos_e
-00011bf0: 780a 2020 2020 2020 2020 656c 6966 206c  x.        elif l
-00011c00: 656e 2870 6f73 2920 2b20 6c65 6e28 6e65  en(pos) + len(ne
-00011c10: 6729 203e 3d20 6e75 6d5f 6578 2061 6e64  g) >= num_ex and
-00011c20: 206c 656e 2870 6f73 2920 3e20 6c65 6e28   len(pos) > len(
-00011c30: 6e65 6729 3a0a 2020 2020 2020 2020 2020  neg):.          
-00011c40: 2020 6e75 6d5f 6e65 675f 6578 203d 206c    num_neg_ex = l
-00011c50: 656e 286e 6567 290a 2020 2020 2020 2020  en(neg).        
-00011c60: 2020 2020 6e75 6d5f 706f 735f 6578 203d      num_pos_ex =
-00011c70: 206e 756d 5f65 7820 2d20 6e75 6d5f 6e65   num_ex - num_ne
-00011c80: 675f 6578 0a20 2020 2020 2020 2065 6c69  g_ex.        eli
-00011c90: 6620 6c65 6e28 706f 7329 202b 206c 656e  f len(pos) + len
-00011ca0: 286e 6567 2920 3e3d 206e 756d 5f65 7820  (neg) >= num_ex 
-00011cb0: 616e 6420 6c65 6e28 706f 7329 203c 206c  and len(pos) < l
-00011cc0: 656e 286e 6567 293a 0a20 2020 2020 2020  en(neg):.       
-00011cd0: 2020 2020 206e 756d 5f70 6f73 5f65 7820       num_pos_ex 
-00011ce0: 3d20 6c65 6e28 706f 7329 0a20 2020 2020  = len(pos).     
-00011cf0: 2020 2020 2020 206e 756d 5f6e 6567 5f65         num_neg_e
-00011d00: 7820 3d20 6e75 6d5f 6578 202d 206e 756d  x = num_ex - num
-00011d10: 5f70 6f73 5f65 780a 2020 2020 2020 2020  _pos_ex.        
-00011d20: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00011d30: 2020 6e75 6d5f 706f 735f 6578 203d 206c    num_pos_ex = l
-00011d40: 656e 2870 6f73 290a 2020 2020 2020 2020  en(pos).        
-00011d50: 2020 2020 6e75 6d5f 6e65 675f 6578 203d      num_neg_ex =
-00011d60: 206c 656e 286e 6567 290a 2020 2020 2020   len(neg).      
-00011d70: 2020 706f 7369 7469 7665 203d 2072 616e    positive = ran
-00011d80: 646f 6d2e 7361 6d70 6c65 2870 6f73 2c20  dom.sample(pos, 
-00011d90: 6d69 6e28 6e75 6d5f 706f 735f 6578 2c20  min(num_pos_ex, 
-00011da0: 6c65 6e28 706f 7329 2929 0a20 2020 2020  len(pos))).     
-00011db0: 2020 206e 6567 6174 6976 6520 3d20 7261     negative = ra
-00011dc0: 6e64 6f6d 2e73 616d 706c 6528 6e65 672c  ndom.sample(neg,
-00011dd0: 206d 696e 286e 756d 5f6e 6567 5f65 782c   min(num_neg_ex,
-00011de0: 206c 656e 286e 6567 2929 290a 2020 2020   len(neg))).    
-00011df0: 2020 2020 7265 7475 726e 2070 6f73 6974      return posit
-00011e00: 6976 652c 206e 6567 6174 6976 650a 0a20  ive, negative.. 
-00011e10: 2020 2064 6566 2067 6574 5f70 7265 6469     def get_predi
-00011e20: 6374 696f 6e28 7365 6c66 2c20 6d6f 6465  ction(self, mode
-00011e30: 6c73 2c20 7831 2c20 7832 293a 0a20 2020  ls, x1, x2):.   
-00011e40: 2020 2020 2066 6f72 2069 2c20 6d6f 6465       for i, mode
-00011e50: 6c20 696e 2065 6e75 6d65 7261 7465 286d  l in enumerate(m
-00011e60: 6f64 656c 7329 3a0a 2020 2020 2020 2020  odels):.        
-00011e70: 2020 2020 6d6f 6465 6c2e 6576 616c 2829      model.eval()
-00011e80: 0a20 2020 2020 2020 2020 2020 206d 6f64  .            mod
-00011e90: 656c 2e74 6f28 7365 6c66 2e64 6576 6963  el.to(self.devic
-00011ea0: 6529 0a20 2020 2020 2020 2020 2020 2078  e).            x
-00011eb0: 3120 3d20 7831 2e74 6f28 7365 6c66 2e64  1 = x1.to(self.d
-00011ec0: 6576 6963 6529 0a20 2020 2020 2020 2020  evice).         
-00011ed0: 2020 2078 3220 3d20 7832 2e74 6f28 7365     x2 = x2.to(se
-00011ee0: 6c66 2e64 6576 6963 6529 0a20 2020 2020  lf.device).     
-00011ef0: 2020 2020 2020 2069 6620 6920 3d3d 2030         if i == 0
-00011f00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00011f10: 2020 5f2c 2073 636f 7265 7320 3d20 6d6f    _, scores = mo
-00011f20: 6465 6c28 7831 2c20 7832 290a 2020 2020  del(x1, x2).    
-00011f30: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00011f40: 2020 2020 2020 2020 2020 2020 2020 5f2c                _,
-00011f50: 2073 6320 3d20 6d6f 6465 6c28 7831 2c20   sc = model(x1, 
-00011f60: 7832 290a 2020 2020 2020 2020 2020 2020  x2).            
-00011f70: 2020 2020 7363 6f72 6573 203d 2073 636f      scores = sco
-00011f80: 7265 7320 2b20 7363 0a20 2020 2020 2020  res + sc.       
-00011f90: 2073 636f 7265 7320 3d20 7363 6f72 6573   scores = scores
-00011fa0: 202f 206c 656e 286d 6f64 656c 7329 0a20   / len(models). 
-00011fb0: 2020 2020 2020 2070 7265 6469 6374 696f         predictio
-00011fc0: 6e20 3d20 6d6f 6465 6c2e 696e 765f 766f  n = model.inv_vo
-00011fd0: 6361 625b 7363 6f72 6573 2e61 7267 6d61  cab[scores.argma
-00011fe0: 7828 3129 2e63 7075 2829 5d0a 2020 2020  x(1).cpu()].    
-00011ff0: 2020 2020 7265 7475 726e 2070 7265 6469      return predi
-00012000: 6374 696f 6e0a 2020 2020 0a20 2020 2064  ction.    .    d
-00012010: 6566 2066 6974 5f6f 6e65 2873 656c 662c  ef fit_one(self,
-00012020: 2070 6f73 3a20 556e 696f 6e5b 5365 745b   pos: Union[Set[
-00012030: 4f57 4c4e 616d 6564 496e 6469 7669 6475  OWLNamedIndividu
-00012040: 616c 5d2c 2053 6574 5b73 7472 5d5d 2c20  al], Set[str]], 
-00012050: 6e65 673a 2055 6e69 6f6e 5b53 6574 5b4f  neg: Union[Set[O
-00012060: 574c 4e61 6d65 6449 6e64 6976 6964 7561  WLNamedIndividua
-00012070: 6c5d 2c20 5365 745b 7374 725d 5d2c 2076  l], Set[str]], v
-00012080: 6572 626f 7365 3d46 616c 7365 293a 0a20  erbose=False):. 
-00012090: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-000120a0: 616e 6365 2870 6f73 5b30 5d2c 204f 574c  ance(pos[0], OWL
-000120b0: 4e61 6d65 6449 6e64 6976 6964 7561 6c29  NamedIndividual)
-000120c0: 3a0a 2020 2020 2020 2020 2020 2020 706f  :.            po
-000120d0: 735f 7374 7220 3d20 5b69 6e64 2e67 6574  s_str = [ind.get
-000120e0: 5f69 7269 2829 2e61 735f 7374 7228 292e  _iri().as_str().
-000120f0: 7370 6c69 7428 222f 2229 5b2d 315d 2066  split("/")[-1] f
-00012100: 6f72 2069 6e64 2069 6e20 706f 735d 0a20  or ind in pos]. 
-00012110: 2020 2020 2020 2020 2020 206e 6567 5f73             neg_s
-00012120: 7472 203d 205b 696e 642e 6765 745f 6972  tr = [ind.get_ir
-00012130: 6928 292e 6173 5f73 7472 2829 2e73 706c  i().as_str().spl
-00012140: 6974 2822 2f22 295b 2d31 5d20 666f 7220  it("/")[-1] for 
-00012150: 696e 6420 696e 206e 6567 5d0a 2020 2020  ind in neg].    
-00012160: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-00012170: 6e63 6528 706f 735b 305d 2c20 7374 7229  nce(pos[0], str)
-00012180: 3a0a 2020 2020 2020 2020 2020 2020 706f  :.            po
-00012190: 735f 7374 7220 3d20 706f 730a 2020 2020  s_str = pos.    
-000121a0: 2020 2020 2020 2020 6e65 675f 7374 7220          neg_str 
-000121b0: 3d20 6e65 670a 2020 2020 2020 2020 656c  = neg.        el
-000121c0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000121d0: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
-000121e0: 2866 2249 6e76 616c 6964 2069 6e70 7574  (f"Invalid input
-000121f0: 2074 7970 652c 2077 6173 2065 7870 6563   type, was expec
-00012200: 7469 6e67 204f 574c 4e61 6d65 6449 6e64  ting OWLNamedInd
-00012210: 6976 6964 7561 6c20 6f72 2073 7472 2062  ividual or str b
-00012220: 7574 2066 6f75 6e64 207b 7479 7065 2870  ut found {type(p
-00012230: 6f73 5b30 5d29 7d22 290a 2020 2020 2020  os[0])}").      
-00012240: 2020 506f 7320 3d20 5b72 616e 646f 6d2e    Pos = [random.
-00012250: 7361 6d70 6c65 2870 6f73 5f73 7472 2c20  sample(pos_str, 
-00012260: 6c65 6e28 706f 735f 7374 7229 2920 666f  len(pos_str)) fo
-00012270: 7220 5f20 696e 2072 616e 6765 2873 656c  r _ in range(sel
-00012280: 662e 6e75 6d5f 7072 6564 6963 7469 6f6e  f.num_prediction
-00012290: 7329 5d0a 2020 2020 2020 2020 4e65 6720  s)].        Neg 
-000122a0: 3d20 5b72 616e 646f 6d2e 7361 6d70 6c65  = [random.sample
-000122b0: 286e 6567 5f73 7472 2c20 6c65 6e28 6e65  (neg_str, len(ne
-000122c0: 675f 7374 7229 2920 666f 7220 5f20 696e  g_str)) for _ in
-000122d0: 2072 616e 6765 2873 656c 662e 6e75 6d5f   range(self.num_
-000122e0: 7072 6564 6963 7469 6f6e 7329 5d0a 0a20  predictions)].. 
-000122f0: 2020 2020 2020 2061 7373 6572 7420 7365         assert se
-00012300: 6c66 2e6c 6f61 645f 7072 6574 7261 696e  lf.load_pretrain
-00012310: 6564 2061 6e64 2073 656c 662e 7072 6574  ed and self.pret
-00012320: 7261 696e 6564 5f6d 6f64 656c 5f6e 616d  rained_model_nam
-00012330: 652c 205c 0a20 2020 2020 2020 2020 2020  e, \.           
-00012340: 2022 4e6f 2070 7265 7472 6169 6e65 6420   "No pretrained 
-00012350: 6d6f 6465 6c20 666f 756e 642e 2050 6c65  model found. Ple
-00012360: 6173 6520 6669 7273 7420 7472 6169 6e20  ase first train 
-00012370: 4e43 4553 2c20 7365 6520 7468 6520 3c3c  NCES, see the <<
-00012380: 7472 6169 6e3e 3e20 6d65 7468 6f64 2062  train>> method b
-00012390: 656c 6f77 220a 0a20 2020 2020 2020 2064  elow"..        d
-000123a0: 6174 6173 6574 203d 204e 4345 5344 6174  ataset = NCESDat
-000123b0: 614c 6f61 6465 7249 6e66 6572 656e 6365  aLoaderInference
-000123c0: 285b 2822 222c 2050 6f73 5f73 7472 2c20  ([("", Pos_str, 
-000123d0: 4e65 675f 7374 7229 2066 6f72 2028 506f  Neg_str) for (Po
-000123e0: 735f 7374 722c 204e 6567 5f73 7472 2920  s_str, Neg_str) 
-000123f0: 696e 207a 6970 2850 6f73 2c20 4e65 6729  in zip(Pos, Neg)
-00012400: 5d2c 2073 656c 662e 696e 7374 616e 6365  ], self.instance
-00012410: 5f65 6d62 6564 6469 6e67 732c 0a20 2020  _embeddings,.   
-00012420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012440: 2020 2020 2020 2073 656c 662e 766f 6361         self.voca
-00012450: 622c 2073 656c 662e 696e 765f 766f 6361  b, self.inv_voca
-00012460: 622c 2046 616c 7365 2c20 7365 6c66 2e73  b, False, self.s
-00012470: 6f72 7465 645f 6578 616d 706c 6573 290a  orted_examples).
-00012480: 2020 2020 2020 2020 6461 7461 6c6f 6164          dataload
-00012490: 6572 203d 2044 6174 614c 6f61 6465 7228  er = DataLoader(
-000124a0: 6461 7461 7365 742c 2062 6174 6368 5f73  dataset, batch_s
-000124b0: 697a 653d 7365 6c66 2e62 6174 6368 5f73  ize=self.batch_s
-000124c0: 697a 652c 206e 756d 5f77 6f72 6b65 7273  ize, num_workers
-000124d0: 3d73 656c 662e 6e75 6d5f 776f 726b 6572  =self.num_worker
-000124e0: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-000124f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012500: 2020 2063 6f6c 6c61 7465 5f66 6e3d 7365     collate_fn=se
-00012510: 6c66 2e63 6f6c 6c61 7465 5f62 6174 6368  lf.collate_batch
-00012520: 5f69 6e66 6572 656e 6365 2c20 7368 7566  _inference, shuf
-00012530: 666c 653d 4661 6c73 6529 0a20 2020 2020  fle=False).     
-00012540: 2020 2078 5f70 6f73 2c20 785f 6e65 6720     x_pos, x_neg 
-00012550: 3d20 6e65 7874 2869 7465 7228 6461 7461  = next(iter(data
-00012560: 6c6f 6164 6572 2929 0a20 2020 2020 2020  loader)).       
-00012570: 2073 696d 706c 6553 6f6c 7574 696f 6e20   simpleSolution 
-00012580: 3d20 5369 6d70 6c65 536f 6c75 7469 6f6e  = SimpleSolution
-00012590: 286c 6973 7428 7365 6c66 2e76 6f63 6162  (list(self.vocab
-000125a0: 292c 2073 656c 662e 6174 6f6d 6963 5f63  ), self.atomic_c
-000125b0: 6f6e 6365 7074 5f6e 616d 6573 290a 2020  oncept_names).  
-000125c0: 2020 2020 2020 7072 6564 6963 7469 6f6e        prediction
-000125d0: 735f 7261 7720 3d20 7365 6c66 2e67 6574  s_raw = self.get
-000125e0: 5f70 7265 6469 6374 696f 6e28 7365 6c66  _prediction(self
-000125f0: 2e6d 6f64 656c 2c20 785f 706f 732c 2078  .model, x_pos, x
-00012600: 5f6e 6567 290a 2020 2020 2020 2020 7072  _neg).        pr
-00012610: 6564 6963 7469 6f6e 7320 3d20 5b5d 0a20  edictions = []. 
-00012620: 2020 2020 2020 2066 6f72 2070 7265 6469         for predi
-00012630: 6374 696f 6e20 696e 2070 7265 6469 6374  ction in predict
-00012640: 696f 6e73 5f72 6177 3a0a 2020 2020 2020  ions_raw:.      
-00012650: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-00012660: 2020 2020 2020 2020 2020 2070 7265 6469             predi
-00012670: 6374 696f 6e5f 7374 7220 3d20 2222 2e6a  ction_str = "".j
-00012680: 6f69 6e28 6265 666f 7265 5f70 6164 2870  oin(before_pad(p
-00012690: 7265 6469 6374 696f 6e2e 7371 7565 657a  rediction.squeez
-000126a0: 6528 2929 290a 2020 2020 2020 2020 2020  e())).          
-000126b0: 2020 2020 2020 636f 6e63 6570 7420 3d20        concept = 
-000126c0: 7365 6c66 2e64 6c5f 7061 7273 6572 2e70  self.dl_parser.p
-000126d0: 6172 7365 2870 7265 6469 6374 696f 6e5f  arse(prediction_
-000126e0: 7374 7229 0a20 2020 2020 2020 2020 2020  str).           
-000126f0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-00012700: 2020 2020 2020 2020 2070 7265 6469 6374           predict
-00012710: 696f 6e5f 7374 7220 3d20 7369 6d70 6c65  ion_str = simple
-00012720: 536f 6c75 7469 6f6e 2e70 7265 6469 6374  Solution.predict
-00012730: 2822 222e 6a6f 696e 2862 6566 6f72 655f  ("".join(before_
-00012740: 7061 6428 7072 6564 6963 7469 6f6e 2e73  pad(prediction.s
-00012750: 7175 6565 7a65 2829 2929 290a 2020 2020  queeze()))).    
-00012760: 2020 2020 2020 2020 2020 2020 636f 6e63              conc
-00012770: 6570 7420 3d20 7365 6c66 2e64 6c5f 7061  ept = self.dl_pa
-00012780: 7273 6572 2e70 6172 7365 2870 7265 6469  rser.parse(predi
-00012790: 6374 696f 6e5f 7374 7229 0a20 2020 2020  ction_str).     
-000127a0: 2020 2020 2020 2020 2020 2069 6620 7665             if ve
-000127b0: 7262 6f73 653a 0a20 2020 2020 2020 2020  rbose:.         
-000127c0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-000127d0: 2822 5072 6564 6963 7469 6f6e 3a20 222c  ("Prediction: ",
-000127e0: 2070 7265 6469 6374 696f 6e5f 7374 7229   prediction_str)
-000127f0: 0a20 2020 2020 2020 2020 2020 2070 7265  .            pre
-00012800: 6469 6374 696f 6e73 2e61 7070 656e 6428  dictions.append(
-00012810: 636f 6e63 6570 7429 0a20 2020 2020 2020  concept).       
-00012820: 2072 6574 7572 6e20 7072 6564 6963 7469   return predicti
-00012830: 6f6e 730a 0a20 2020 2064 6566 2066 6974  ons..    def fit
-00012840: 2873 656c 662c 2070 6f73 3a20 556e 696f  (self, pos: Unio
-00012850: 6e5b 5365 745b 4f57 4c4e 616d 6564 496e  n[Set[OWLNamedIn
-00012860: 6469 7669 6475 616c 5d2c 2053 6574 5b73  dividual], Set[s
-00012870: 7472 5d5d 2c20 6e65 673a 2055 6e69 6f6e  tr]], neg: Union
-00012880: 5b53 6574 5b4f 574c 4e61 6d65 6449 6e64  [Set[OWLNamedInd
-00012890: 6976 6964 7561 6c5d 2c20 5365 745b 7374  ividual], Set[st
-000128a0: 725d 5d2c 2076 6572 626f 7365 3d46 616c  r]], verbose=Fal
-000128b0: 7365 2c20 2a2a 6b77 6172 6773 293a 0a20  se, **kwargs):. 
-000128c0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-000128d0: 616e 6365 2870 6f73 2c20 7365 7429 206f  ance(pos, set) o
-000128e0: 7220 6973 696e 7374 616e 6365 2870 6f73  r isinstance(pos
-000128f0: 2c20 6672 6f7a 656e 7365 7429 3a0a 2020  , frozenset):.  
-00012900: 2020 2020 2020 2020 2020 706f 735f 6c69            pos_li
-00012910: 7374 203d 206c 6973 7428 706f 7329 0a20  st = list(pos). 
-00012920: 2020 2020 2020 2020 2020 206e 6567 5f6c             neg_l
-00012930: 6973 7420 3d20 6c69 7374 286e 6567 290a  ist = list(neg).
-00012940: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00012950: 656c 662e 736f 7274 6564 5f65 7861 6d70  elf.sorted_examp
-00012960: 6c65 733a 0a20 2020 2020 2020 2020 2020  les:.           
-00012970: 2020 2020 2070 6f73 5f6c 6973 7420 3d20       pos_list = 
-00012980: 736f 7274 6564 2870 6f73 5f6c 6973 7429  sorted(pos_list)
-00012990: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000129a0: 206e 6567 5f6c 6973 7420 3d20 736f 7274   neg_list = sort
-000129b0: 6564 286e 6567 5f6c 6973 7429 0a20 2020  ed(neg_list).   
-000129c0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000129d0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-000129e0: 7565 4572 726f 7228 6622 4578 7065 6374  ueError(f"Expect
-000129f0: 6564 2070 6f73 2061 6e64 206e 6567 2074  ed pos and neg t
-00012a00: 6f20 6265 2073 6574 732c 2067 6f74 207b  o be sets, got {
-00012a10: 7479 7065 2870 6f73 297d 2061 6e64 207b  type(pos)} and {
-00012a20: 7479 7065 286e 6567 297d 2229 0a20 2020  type(neg)}").   
-00012a30: 2020 2020 2070 7265 6469 6374 696f 6e73       predictions
-00012a40: 203d 2073 656c 662e 6669 745f 6f6e 6528   = self.fit_one(
-00012a50: 706f 735f 6c69 7374 2c20 6e65 675f 6c69  pos_list, neg_li
-00012a60: 7374 2c20 7665 7262 6f73 653d 7665 7262  st, verbose=verb
-00012a70: 6f73 6529 0a20 2020 2020 2020 2070 7265  ose).        pre
-00012a80: 6469 6374 696f 6e73 5f61 735f 6e6f 6465  dictions_as_node
-00012a90: 7320 3d20 5b5d 0a20 2020 2020 2020 2066  s = [].        f
-00012aa0: 6f72 2063 6f6e 6365 7074 2069 6e20 7072  or concept in pr
-00012ab0: 6564 6963 7469 6f6e 733a 0a20 2020 2020  edictions:.     
-00012ac0: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-00012ad0: 2020 2020 2020 2020 2020 2020 636f 6e63              conc
-00012ae0: 6570 745f 696e 6469 7669 6475 616c 735f  ept_individuals_
-00012af0: 636f 756e 7420 3d20 7365 6c66 2e6b 622e  count = self.kb.
-00012b00: 696e 6469 7669 6475 616c 735f 636f 756e  individuals_coun
-00012b10: 7428 636f 6e63 6570 7429 0a20 2020 2020  t(concept).     
-00012b20: 2020 2020 2020 2065 7863 6570 7420 4174         except At
-00012b30: 7472 6962 7574 6545 7272 6f72 3a0a 2020  tributeError:.  
-00012b40: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00012b50: 6e63 6570 7420 3d20 7365 6c66 2e64 6c5f  ncept = self.dl_
-00012b60: 7061 7273 6572 2e70 6172 7365 2827 e28a  parser.parse('..
-00012b70: a427 290a 2020 2020 2020 2020 2020 2020  .').            
-00012b80: 2020 2020 636f 6e63 6570 745f 696e 6469      concept_indi
-00012b90: 7669 6475 616c 735f 636f 756e 7420 3d20  viduals_count = 
-00012ba0: 7365 6c66 2e6b 622e 696e 6469 7669 6475  self.kb.individu
-00012bb0: 616c 735f 636f 756e 7428 636f 6e63 6570  als_count(concep
-00012bc0: 7429 0a20 2020 2020 2020 2020 2020 2063  t).            c
-00012bd0: 6f6e 6365 7074 5f6c 656e 6774 6820 3d20  oncept_length = 
-00012be0: 696e 6974 5f6c 656e 6774 685f 6d65 7472  init_length_metr
-00012bf0: 6963 2829 2e6c 656e 6774 6828 636f 6e63  ic().length(conc
-00012c00: 6570 7429 0a20 2020 2020 2020 2020 2020  ept).           
-00012c10: 2063 6f6e 6365 7074 5f69 6e73 7461 6e63   concept_instanc
-00012c20: 6573 203d 2073 6574 2873 656c 662e 6b62  es = set(self.kb
-00012c30: 2e69 6e64 6976 6964 7561 6c73 2863 6f6e  .individuals(con
-00012c40: 6365 7074 2929 2069 6620 6973 696e 7374  cept)) if isinst
-00012c50: 616e 6365 2870 6f73 5f6c 6973 745b 305d  ance(pos_list[0]
-00012c60: 2c20 4f57 4c4e 616d 6564 496e 6469 7669  , OWLNamedIndivi
-00012c70: 6475 616c 2920 656c 7365 2073 6574 285b  dual) else set([
-00012c80: 696e 642e 6765 745f 6972 6928 292e 6173  ind.get_iri().as
-00012c90: 5f73 7472 2829 2e73 706c 6974 2822 2f22  _str().split("/"
-00012ca0: 295b 2d31 5d20 666f 7220 696e 6420 696e  )[-1] for ind in
-00012cb0: 2073 656c 662e 6b62 2e69 6e64 6976 6964   self.kb.individ
-00012cc0: 7561 6c73 2863 6f6e 6365 7074 295d 290a  uals(concept)]).
-00012cd0: 2020 2020 2020 2020 2020 2020 7470 2c20              tp, 
-00012ce0: 666e 2c20 6670 2c20 746e 203d 2063 6f6d  fn, fp, tn = com
-00012cf0: 7075 7465 5f74 705f 666e 5f66 705f 746e  pute_tp_fn_fp_tn
-00012d00: 2863 6f6e 6365 7074 5f69 6e73 7461 6e63  (concept_instanc
-00012d10: 6573 2c20 706f 732c 206e 6567 290a 2020  es, pos, neg).  
-00012d20: 2020 2020 2020 2020 2020 7175 616c 6974            qualit
-00012d30: 7920 3d20 7365 6c66 2e71 7561 6c69 7479  y = self.quality
-00012d40: 5f66 756e 632e 7363 6f72 6532 2874 702c  _func.score2(tp,
-00012d50: 2066 6e2c 2066 702c 2074 6e29 5b31 5d0a   fn, fp, tn)[1].
-00012d60: 2020 2020 2020 2020 2020 2020 6e6f 6465              node
-00012d70: 203d 204e 4345 534e 6f64 6528 636f 6e63   = NCESNode(conc
-00012d80: 6570 742c 206c 656e 6774 683d 636f 6e63  ept, length=conc
-00012d90: 6570 745f 6c65 6e67 7468 2c20 696e 6469  ept_length, indi
-00012da0: 7669 6475 616c 735f 636f 756e 743d 636f  viduals_count=co
-00012db0: 6e63 6570 745f 696e 6469 7669 6475 616c  ncept_individual
-00012dc0: 735f 636f 756e 742c 2071 7561 6c69 7479  s_count, quality
-00012dd0: 3d71 7561 6c69 7479 290a 2020 2020 2020  =quality).      
-00012de0: 2020 2020 2020 7072 6564 6963 7469 6f6e        prediction
-00012df0: 735f 6173 5f6e 6f64 6573 2e61 7070 656e  s_as_nodes.appen
-00012e00: 6428 6e6f 6465 290a 2020 2020 2020 2020  d(node).        
-00012e10: 7072 6564 6963 7469 6f6e 735f 6173 5f6e  predictions_as_n
-00012e20: 6f64 6573 203d 2073 6f72 7465 6428 7072  odes = sorted(pr
-00012e30: 6564 6963 7469 6f6e 735f 6173 5f6e 6f64  edictions_as_nod
-00012e40: 6573 2c20 6b65 793d 6c61 6d62 6461 2078  es, key=lambda x
-00012e50: 3a20 2d78 2e71 7561 6c69 7479 290a 2020  : -x.quality).  
-00012e60: 2020 2020 2020 7365 6c66 2e62 6573 745f        self.best_
-00012e70: 7072 6564 6963 7469 6f6e 7320 3d20 7072  predictions = pr
-00012e80: 6564 6963 7469 6f6e 735f 6173 5f6e 6f64  edictions_as_nod
-00012e90: 6573 0a20 2020 2020 2020 2072 6574 7572  es.        retur
-00012ea0: 6e20 7365 6c66 0a20 2020 200a 2020 2020  n self.    .    
-00012eb0: 6465 6620 6265 7374 5f68 7970 6f74 6865  def best_hypothe
-00012ec0: 7365 7328 7365 6c66 2c20 6e3d 3129 2d3e  ses(self, n=1)->
-00012ed0: 556e 696f 6e5b 4e43 4553 4e6f 6465 2c20  Union[NCESNode, 
-00012ee0: 4974 6572 6162 6c65 5b4e 4345 534e 6f64  Iterable[NCESNod
-00012ef0: 655d 5d3a 0a20 2020 2020 2020 2069 6620  e]]:.        if 
-00012f00: 7365 6c66 2e62 6573 745f 7072 6564 6963  self.best_predic
-00012f10: 7469 6f6e 7320 6973 204e 6f6e 653a 0a20  tions is None:. 
-00012f20: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00012f30: 2822 4e43 4553 206e 6565 6473 2074 6f20  ("NCES needs to 
-00012f40: 6265 2066 6974 7465 6420 746f 2061 2070  be fitted to a p
-00012f50: 726f 626c 656d 2066 6972 7374 2229 0a20  roblem first"). 
-00012f60: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00012f70: 6e20 4e6f 6e65 0a20 2020 2020 2020 2065  n None.        e
-00012f80: 6c69 6620 6c65 6e28 7365 6c66 2e62 6573  lif len(self.bes
-00012f90: 745f 7072 6564 6963 7469 6f6e 7329 203d  t_predictions) =
-00012fa0: 3d20 3120 6f72 206e 203d 3d20 313a 0a20  = 1 or n == 1:. 
-00012fb0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00012fc0: 6e20 7365 6c66 2e62 6573 745f 7072 6564  n self.best_pred
-00012fd0: 6963 7469 6f6e 735b 305d 0a20 2020 2020  ictions[0].     
-00012fe0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00012ff0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00013000: 2e62 6573 745f 7072 6564 6963 7469 6f6e  .best_prediction
-00013010: 735b 3a6e 5d0a 0a20 2020 2064 6566 2063  s[:n]..    def c
-00013020: 6f6e 7665 7274 5f74 6f5f 6c69 7374 5f73  onvert_to_list_s
-00013030: 7472 5f66 726f 6d5f 6974 6572 6162 6c65  tr_from_iterable
-00013040: 2873 656c 662c 2064 6174 6129 3a0a 2020  (self, data):.  
-00013050: 2020 2020 2020 7461 7267 6574 5f63 6f6e        target_con
-00013060: 6365 7074 5f73 7472 2c20 6578 616d 706c  cept_str, exampl
-00013070: 6573 203d 2064 6174 615b 305d 2c20 6461  es = data[0], da
-00013080: 7461 5b31 3a5d 0a20 2020 2020 2020 2070  ta[1:].        p
-00013090: 6f73 203d 206c 6973 7428 6578 616d 706c  os = list(exampl
-000130a0: 6573 5b30 5d29 0a20 2020 2020 2020 206e  es[0]).        n
-000130b0: 6567 203d 206c 6973 7428 6578 616d 706c  eg = list(exampl
-000130c0: 6573 5b31 5d29 0a20 2020 2020 2020 2069  es[1]).        i
-000130d0: 6620 6973 696e 7374 616e 6365 2870 6f73  f isinstance(pos
-000130e0: 5b30 5d2c 204f 574c 4e61 6d65 6449 6e64  [0], OWLNamedInd
-000130f0: 6976 6964 7561 6c29 3a0a 2020 2020 2020  ividual):.      
-00013100: 2020 2020 2020 706f 735f 7374 7220 3d20        pos_str = 
-00013110: 5b69 6e64 2e67 6574 5f69 7269 2829 2e61  [ind.get_iri().a
-00013120: 735f 7374 7228 292e 7370 6c69 7428 222f  s_str().split("/
-00013130: 2229 5b2d 315d 2066 6f72 2069 6e64 2069  ")[-1] for ind i
-00013140: 6e20 706f 735d 0a20 2020 2020 2020 2020  n pos].         
-00013150: 2020 206e 6567 5f73 7472 203d 205b 696e     neg_str = [in
-00013160: 642e 6765 745f 6972 6928 292e 6173 5f73  d.get_iri().as_s
-00013170: 7472 2829 2e73 706c 6974 2822 2f22 295b  tr().split("/")[
-00013180: 2d31 5d20 666f 7220 696e 6420 696e 206e  -1] for ind in n
-00013190: 6567 5d0a 2020 2020 2020 2020 656c 6966  eg].        elif
-000131a0: 2069 7369 6e73 7461 6e63 6528 706f 735b   isinstance(pos[
-000131b0: 305d 2c20 7374 7229 3a0a 2020 2020 2020  0], str):.      
-000131c0: 2020 2020 2020 706f 735f 7374 722c 206e        pos_str, n
-000131d0: 6567 5f73 7472 203d 206c 6973 7428 706f  eg_str = list(po
-000131e0: 7329 2c20 6c69 7374 286e 6567 290a 2020  s), list(neg).  
-000131f0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00013200: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00013210: 6c75 6545 7272 6f72 2866 2249 6e76 616c  lueError(f"Inval
-00013220: 6964 2069 6e70 7574 2074 7970 652c 2077  id input type, w
-00013230: 6173 2065 7870 6563 7469 6e67 204f 574c  as expecting OWL
-00013240: 4e61 6d65 6449 6e64 6976 6964 7561 6c20  NamedIndividual 
-00013250: 6f72 2073 7472 2062 7574 2066 6f75 6e64  or str but found
-00013260: 207b 7479 7065 2870 6f73 5b30 5d29 7d22   {type(pos[0])}"
-00013270: 290a 2020 2020 2020 2020 6966 2073 656c  ).        if sel
-00013280: 662e 736f 7274 6564 5f65 7861 6d70 6c65  f.sorted_example
-00013290: 733a 0a20 2020 2020 2020 2020 2020 2070  s:.            p
-000132a0: 6f73 5f73 7472 2c20 6e65 675f 7374 7220  os_str, neg_str 
-000132b0: 3d20 736f 7274 6564 2870 6f73 5f73 7472  = sorted(pos_str
-000132c0: 292c 2073 6f72 7465 6428 6e65 675f 7374  ), sorted(neg_st
-000132d0: 7229 0a20 2020 2020 2020 2072 6574 7572  r).        retur
-000132e0: 6e20 2874 6172 6765 745f 636f 6e63 6570  n (target_concep
-000132f0: 745f 7374 722c 2070 6f73 5f73 7472 2c20  t_str, pos_str, 
-00013300: 6e65 675f 7374 7229 0a0a 2020 2020 6465  neg_str)..    de
-00013310: 6620 6669 745f 6672 6f6d 5f69 7465 7261  f fit_from_itera
-00013320: 626c 6528 7365 6c66 2c20 6461 7461 7365  ble(self, datase
-00013330: 743a 2055 6e69 6f6e 5b4c 6973 745b 5475  t: Union[List[Tu
-00013340: 706c 655b 7374 722c 2053 6574 5b4f 574c  ple[str, Set[OWL
-00013350: 4e61 6d65 6449 6e64 6976 6964 7561 6c5d  NamedIndividual]
-00013360: 2c20 5365 745b 4f57 4c4e 616d 6564 496e  , Set[OWLNamedIn
-00013370: 6469 7669 6475 616c 5d5d 5d2c 0a20 2020  dividual]]],.   
-00013380: 204c 6973 745b 5475 706c 655b 7374 722c   List[Tuple[str,
-00013390: 2053 6574 5b73 7472 5d2c 2053 6574 5b73   Set[str], Set[s
-000133a0: 7472 5d5d 5d5d 2c20 7368 7566 666c 655f  tr]]]], shuffle_
-000133b0: 6578 616d 706c 6573 3d46 616c 7365 2c0a  examples=False,.
-000133c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000133d0: 2020 2020 2020 2020 2020 7665 7262 6f73            verbos
-000133e0: 653d 4661 6c73 652c 202a 2a6b 7761 7267  e=False, **kwarg
-000133f0: 7329 202d 3e20 4c69 7374 3a0a 2020 2020  s) -> List:.    
-00013400: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00013410: 2d20 4461 7461 7365 7420 6973 2061 206c  - Dataset is a l
-00013420: 6973 7420 6f66 2074 7570 6c65 7320 7768  ist of tuples wh
-00013430: 6572 6520 7468 6520 6669 7273 7420 6974  ere the first it
-00013440: 656d 7320 6172 6520 7374 7269 6e67 7320  ems are strings 
-00013450: 636f 7272 6573 706f 6e64 696e 6720 746f  corresponding to
-00013460: 2074 6172 6765 7420 636f 6e63 6570 7473   target concepts
-00013470: 2e0a 2020 2020 2020 2020 0a20 2020 2020  ..        .     
-00013480: 2020 202d 2054 6869 7320 6675 6e63 7469     - This functi
-00013490: 6f6e 2072 6574 7572 6e73 2070 7265 6469  on returns predi
-000134a0: 6374 696f 6e73 2061 7320 6f77 6c20 636c  ctions as owl cl
-000134b0: 6173 7320 6578 7072 6573 7369 6f6e 732c  ass expressions,
-000134c0: 206e 6f74 206e 6f64 6573 2061 7320 696e   not nodes as in
-000134d0: 2066 6974 0a20 2020 2020 2020 2022 2222   fit.        """
-000134e0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-000134f0: 7365 6c66 2e6c 6f61 645f 7072 6574 7261  self.load_pretra
-00013500: 696e 6564 2061 6e64 2073 656c 662e 7072  ined and self.pr
-00013510: 6574 7261 696e 6564 5f6d 6f64 656c 5f6e  etrained_model_n
-00013520: 616d 652c 205c 0a20 2020 2020 2020 2020  ame, \.         
-00013530: 2020 2022 4e6f 2070 7265 7472 6169 6e65     "No pretraine
-00013540: 6420 6d6f 6465 6c20 666f 756e 642e 2050  d model found. P
-00013550: 6c65 6173 6520 6669 7273 7420 7472 6169  lease first trai
-00013560: 6e20 4e43 4553 2c20 7265 6665 7220 746f  n NCES, refer to
-00013570: 2074 6865 203c 3c74 7261 696e 3e3e 206d   the <<train>> m
-00013580: 6574 686f 6422 0a20 2020 2020 2020 2064  ethod".        d
-00013590: 6174 6173 6574 203d 205b 7365 6c66 2e63  ataset = [self.c
-000135a0: 6f6e 7665 7274 5f74 6f5f 6c69 7374 5f73  onvert_to_list_s
-000135b0: 7472 5f66 726f 6d5f 6974 6572 6162 6c65  tr_from_iterable
-000135c0: 2864 6174 6170 6f69 6e74 2920 666f 7220  (datapoint) for 
-000135d0: 6461 7461 706f 696e 7420 696e 2064 6174  datapoint in dat
-000135e0: 6173 6574 5d0a 2020 2020 2020 2020 6461  aset].        da
-000135f0: 7461 7365 7420 3d20 4e43 4553 4461 7461  taset = NCESData
-00013600: 4c6f 6164 6572 496e 6665 7265 6e63 6528  LoaderInference(
-00013610: 6461 7461 7365 742c 2073 656c 662e 696e  dataset, self.in
-00013620: 7374 616e 6365 5f65 6d62 6564 6469 6e67  stance_embedding
-00013630: 732c 2073 656c 662e 766f 6361 622c 2073  s, self.vocab, s
-00013640: 656c 662e 696e 765f 766f 6361 622c 2073  elf.inv_vocab, s
-00013650: 6875 6666 6c65 5f65 7861 6d70 6c65 7329  huffle_examples)
-00013660: 0a20 2020 2020 2020 2064 6174 616c 6f61  .        dataloa
-00013670: 6465 7220 3d20 4461 7461 4c6f 6164 6572  der = DataLoader
-00013680: 2864 6174 6173 6574 2c20 6261 7463 685f  (dataset, batch_
-00013690: 7369 7a65 3d73 656c 662e 6261 7463 685f  size=self.batch_
-000136a0: 7369 7a65 2c20 6e75 6d5f 776f 726b 6572  size, num_worker
-000136b0: 733d 7365 6c66 2e6e 756d 5f77 6f72 6b65  s=self.num_worke
-000136c0: 7273 2c0a 2020 2020 2020 2020 2020 2020  rs,.            
-000136d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000136e0: 2020 2020 636f 6c6c 6174 655f 666e 3d73      collate_fn=s
-000136f0: 656c 662e 636f 6c6c 6174 655f 6261 7463  elf.collate_batc
-00013700: 685f 696e 6665 7265 6e63 652c 2073 6875  h_inference, shu
-00013710: 6666 6c65 3d46 616c 7365 290a 2020 2020  ffle=False).    
-00013720: 2020 2020 7369 6d70 6c65 536f 6c75 7469      simpleSoluti
-00013730: 6f6e 203d 2053 696d 706c 6553 6f6c 7574  on = SimpleSolut
-00013740: 696f 6e28 6c69 7374 2873 656c 662e 766f  ion(list(self.vo
-00013750: 6361 6229 2c20 7365 6c66 2e61 746f 6d69  cab), self.atomi
-00013760: 635f 636f 6e63 6570 745f 6e61 6d65 7329  c_concept_names)
-00013770: 0a20 2020 2020 2020 2070 7265 6469 6374  .        predict
-00013780: 696f 6e73 5f61 735f 6f77 6c5f 636c 6173  ions_as_owl_clas
-00013790: 735f 6578 7072 6573 7369 6f6e 7320 3d20  s_expressions = 
-000137a0: 5b5d 0a20 2020 2020 2020 2070 7265 6469  [].        predi
-000137b0: 6374 696f 6e73 5f73 7472 203d 205b 5d0a  ctions_str = [].
-000137c0: 2020 2020 2020 2020 666f 7220 785f 706f          for x_po
-000137d0: 732c 2078 5f6e 6567 2069 6e20 6461 7461  s, x_neg in data
-000137e0: 6c6f 6164 6572 3a0a 2020 2020 2020 2020  loader:.        
-000137f0: 2020 2020 7072 6564 6963 7469 6f6e 7320      predictions 
-00013800: 3d20 7365 6c66 2e67 6574 5f70 7265 6469  = self.get_predi
-00013810: 6374 696f 6e28 7365 6c66 2e6d 6f64 656c  ction(self.model
-00013820: 2c20 785f 706f 732c 2078 5f6e 6567 290a  , x_pos, x_neg).
-00013830: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00013840: 7072 6564 6963 7469 6f6e 2069 6e20 7072  prediction in pr
-00013850: 6564 6963 7469 6f6e 733a 0a20 2020 2020  edictions:.     
-00013860: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-00013870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013880: 2020 2020 7072 6564 6963 7469 6f6e 5f73      prediction_s
-00013890: 7472 203d 2022 222e 6a6f 696e 2862 6566  tr = "".join(bef
-000138a0: 6f72 655f 7061 6428 7072 6564 6963 7469  ore_pad(predicti
-000138b0: 6f6e 2929 0a20 2020 2020 2020 2020 2020  on)).           
-000138c0: 2020 2020 2020 2020 2063 6520 3d20 7365           ce = se
-000138d0: 6c66 2e64 6c5f 7061 7273 6572 2e70 6172  lf.dl_parser.par
-000138e0: 7365 2870 7265 6469 6374 696f 6e5f 7374  se(prediction_st
-000138f0: 7229 0a20 2020 2020 2020 2020 2020 2020  r).             
-00013900: 2020 2020 2020 2070 7265 6469 6374 696f         predictio
-00013910: 6e73 5f73 7472 2e61 7070 656e 6428 7072  ns_str.append(pr
-00013920: 6564 6963 7469 6f6e 5f73 7472 290a 2020  ediction_str).  
-00013930: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-00013940: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-00013950: 2020 2020 2020 2020 2020 7072 6564 6963            predic
-00013960: 7469 6f6e 5f73 7472 203d 2073 696d 706c  tion_str = simpl
-00013970: 6553 6f6c 7574 696f 6e2e 7072 6564 6963  eSolution.predic
-00013980: 7428 2222 2e6a 6f69 6e28 6265 666f 7265  t("".join(before
-00013990: 5f70 6164 2870 7265 6469 6374 696f 6e29  _pad(prediction)
-000139a0: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-000139b0: 2020 2020 2020 2070 7265 6469 6374 696f         predictio
-000139c0: 6e73 5f73 7472 2e61 7070 656e 6428 7072  ns_str.append(pr
-000139d0: 6564 6963 7469 6f6e 5f73 7472 290a 2020  ediction_str).  
-000139e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000139f0: 2020 6365 203d 2073 656c 662e 646c 5f70    ce = self.dl_p
-00013a00: 6172 7365 722e 7061 7273 6528 7072 6564  arser.parse(pred
-00013a10: 6963 7469 6f6e 5f73 7472 290a 2020 2020  iction_str).    
-00013a20: 2020 2020 2020 2020 2020 2020 7072 6564              pred
-00013a30: 6963 7469 6f6e 735f 6173 5f6f 776c 5f63  ictions_as_owl_c
-00013a40: 6c61 7373 5f65 7870 7265 7373 696f 6e73  lass_expressions
-00013a50: 2e61 7070 656e 6428 6365 290a 2020 2020  .append(ce).    
-00013a60: 2020 2020 6966 2076 6572 626f 7365 3a0a      if verbose:.
-00013a70: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00013a80: 7428 2250 7265 6469 6374 696f 6e73 3a20  t("Predictions: 
-00013a90: 222c 2070 7265 6469 6374 696f 6e73 5f73  ", predictions_s
-00013aa0: 7472 290a 2020 2020 2020 2020 7265 7475  tr).        retu
-00013ab0: 726e 2070 7265 6469 6374 696f 6e73 5f61  rn predictions_a
-00013ac0: 735f 6f77 6c5f 636c 6173 735f 6578 7072  s_owl_class_expr
-00013ad0: 6573 7369 6f6e 730a 0a20 2020 2064 6566  essions..    def
-00013ae0: 2074 7261 696e 2873 656c 662c 2064 6174   train(self, dat
-00013af0: 613a 2049 7465 7261 626c 655b 4c69 7374  a: Iterable[List
-00013b00: 5b54 7570 6c65 5d5d 2c20 6570 6f63 6873  [Tuple]], epochs
-00013b10: 3d33 3030 2c20 6261 7463 685f 7369 7a65  =300, batch_size
-00013b20: 3d4e 6f6e 652c 206c 6561 726e 696e 675f  =None, learning_
-00013b30: 7261 7465 3d31 652d 342c 2064 6563 6179  rate=1e-4, decay
-00013b40: 5f72 6174 653d 302e 302c 0a20 2020 2020  _rate=0.0,.     
-00013b50: 2020 2020 2020 2020 2063 6c69 705f 7661           clip_va
-00013b60: 6c75 653d 352e 302c 206e 756d 5f77 6f72  lue=5.0, num_wor
-00013b70: 6b65 7273 3d38 2c20 7361 7665 5f6d 6f64  kers=8, save_mod
-00013b80: 656c 3d54 7275 652c 2073 746f 7261 6765  el=True, storage
-00013b90: 5f70 6174 683d 4e6f 6e65 2c20 6f70 7469  _path=None, opti
-00013ba0: 6d69 7a65 723d 2741 6461 6d27 2c20 7265  mizer='Adam', re
-00013bb0: 636f 7264 5f72 756e 7469 6d65 3d54 7275  cord_runtime=Tru
-00013bc0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-00013bd0: 2065 7861 6d70 6c65 5f73 697a 6573 3d4e   example_sizes=N
-00013be0: 6f6e 652c 2073 6875 6666 6c65 5f65 7861  one, shuffle_exa
-00013bf0: 6d70 6c65 733d 4661 6c73 6529 3a0a 2020  mples=False):.  
-00013c00: 2020 2020 2020 6966 2062 6174 6368 5f73        if batch_s
-00013c10: 697a 6520 6973 204e 6f6e 653a 0a20 2020  ize is None:.   
-00013c20: 2020 2020 2020 2020 2062 6174 6368 5f73           batch_s
-00013c30: 697a 6520 3d20 7365 6c66 2e62 6174 6368  ize = self.batch
-00013c40: 5f73 697a 650a 2020 2020 2020 2020 7472  _size.        tr
-00013c50: 6169 6e5f 6461 7461 7365 7420 3d20 4e43  ain_dataset = NC
-00013c60: 4553 4461 7461 4c6f 6164 6572 2864 6174  ESDataLoader(dat
-00013c70: 612c 2073 656c 662e 696e 7374 616e 6365  a, self.instance
-00013c80: 5f65 6d62 6564 6469 6e67 732c 2073 656c  _embeddings, sel
-00013c90: 662e 766f 6361 622c 2073 656c 662e 696e  f.vocab, self.in
-00013ca0: 765f 766f 6361 622c 0a20 2020 2020 2020  v_vocab,.       
-00013cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013cd0: 7368 7566 666c 655f 6578 616d 706c 6573  shuffle_examples
-00013ce0: 3d73 6875 6666 6c65 5f65 7861 6d70 6c65  =shuffle_example
-00013cf0: 732c 206d 6178 5f6c 656e 6774 683d 7365  s, max_length=se
-00013d00: 6c66 2e6d 6178 5f6c 656e 6774 682c 0a20  lf.max_length,. 
-00013d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013d30: 2020 2020 2020 6578 616d 706c 655f 7369        example_si
-00013d40: 7a65 733d 6578 616d 706c 655f 7369 7a65  zes=example_size
-00013d50: 7329 0a20 2020 2020 2020 2074 7261 696e  s).        train
-00013d60: 5f64 6174 616c 6f61 6465 7220 3d20 4461  _dataloader = Da
-00013d70: 7461 4c6f 6164 6572 2874 7261 696e 5f64  taLoader(train_d
-00013d80: 6174 6173 6574 2c20 6261 7463 685f 7369  ataset, batch_si
-00013d90: 7a65 3d62 6174 6368 5f73 697a 652c 206e  ze=batch_size, n
-00013da0: 756d 5f77 6f72 6b65 7273 3d73 656c 662e  um_workers=self.
-00013db0: 6e75 6d5f 776f 726b 6572 732c 0a20 2020  num_workers,.   
-00013dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013de0: 2020 2063 6f6c 6c61 7465 5f66 6e3d 7365     collate_fn=se
-00013df0: 6c66 2e63 6f6c 6c61 7465 5f62 6174 6368  lf.collate_batch
-00013e00: 2c20 7368 7566 666c 653d 5472 7565 290a  , shuffle=True).
-00013e10: 2020 2020 2020 2020 6966 2073 746f 7261          if stora
-00013e20: 6765 5f70 6174 6820 6973 204e 6f6e 653a  ge_path is None:
-00013e30: 0a20 2020 2020 2020 2020 2020 2073 746f  .            sto
-00013e40: 7261 6765 5f70 6174 6820 3d20 7365 6c66  rage_path = self
-00013e50: 2e6b 6e6f 776c 6564 6765 5f62 6173 655f  .knowledge_base_
-00013e60: 7061 7468 5b3a 7365 6c66 2e6b 6e6f 776c  path[:self.knowl
-00013e70: 6564 6765 5f62 6173 655f 7061 7468 2e72  edge_base_path.r
-00013e80: 6669 6e64 2822 2f22 295d 0a20 2020 2020  find("/")].     
-00013e90: 2020 2065 6c69 6620 6e6f 7420 6f73 2e70     elif not os.p
-00013ea0: 6174 682e 6578 6973 7473 2873 746f 7261  ath.exists(stora
-00013eb0: 6765 5f70 6174 6829 3a0a 2020 2020 2020  ge_path):.      
-00013ec0: 2020 2020 2020 6f73 2e6d 6b64 6972 2873        os.mkdir(s
-00013ed0: 746f 7261 6765 5f70 6174 6829 0a20 2020  torage_path).   
-00013ee0: 2020 2020 2074 7261 696e 6572 203d 204e       trainer = N
-00013ef0: 4345 5354 7261 696e 6572 2873 656c 662c  CESTrainer(self,
-00013f00: 2065 706f 6368 733d 6570 6f63 6873 2c20   epochs=epochs, 
-00013f10: 6c65 6172 6e69 6e67 5f72 6174 653d 6c65  learning_rate=le
-00013f20: 6172 6e69 6e67 5f72 6174 652c 2064 6563  arning_rate, dec
-00013f30: 6179 5f72 6174 653d 6465 6361 795f 7261  ay_rate=decay_ra
-00013f40: 7465 2c0a 2020 2020 2020 2020 2020 2020  te,.            
-00013f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013f60: 2020 636c 6970 5f76 616c 7565 3d63 6c69    clip_value=cli
-00013f70: 705f 7661 6c75 652c 206e 756d 5f77 6f72  p_value, num_wor
-00013f80: 6b65 7273 3d6e 756d 5f77 6f72 6b65 7273  kers=num_workers
-00013f90: 2c20 7374 6f72 6167 655f 7061 7468 3d73  , storage_path=s
-00013fa0: 746f 7261 6765 5f70 6174 6829 0a20 2020  torage_path).   
-00013fb0: 2020 2020 2074 7261 696e 6572 2e74 7261       trainer.tra
-00013fc0: 696e 2874 7261 696e 5f64 6174 616c 6f61  in(train_dataloa
-00013fd0: 6465 722c 2073 6176 655f 6d6f 6465 6c2c  der, save_model,
-00013fe0: 206f 7074 696d 697a 6572 2c20 7265 636f   optimizer, reco
-00013ff0: 7264 5f72 756e 7469 6d65 290a            rd_runtime).
+0000c7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c7e0: 2020 2020 2020 2020 2020 2020 2020 6b62                kb
+0000c7f0: 3d73 656c 662e 6b62 2c20 6470 5f74 6f5f  =self.kb, dp_to_
+0000c800: 7072 696d 5f74 7970 653d 7365 6c66 2e5f  prim_type=self._
+0000c810: 6470 5f74 6f5f 7072 696d 5f74 7970 652c  dp_to_prim_type,
+0000c820: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c850: 2020 6470 5f73 706c 6974 733d 7365 6c66    dp_splits=self
+0000c860: 2e5f 6470 5f73 706c 6974 7329 0a20 2020  ._dp_splits).   
+0000c870: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0000c880: 2020 2020 2020 2070 6f70 756c 6174 696f         populatio
+0000c890: 6e20 3d20 7365 6c66 2e74 6f6f 6c62 6f78  n = self.toolbox
+0000c8a0: 2e70 6f70 756c 6174 696f 6e28 706f 7075  .population(popu
+0000c8b0: 6c61 7469 6f6e 5f73 697a 653d 7365 6c66  lation_size=self
+0000c8c0: 2e70 6f70 756c 6174 696f 6e5f 7369 7a65  .population_size
+0000c8d0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0000c8e0: 2070 6f70 756c 6174 696f 6e0a 0a20 2020   population..   
+0000c8f0: 2064 6566 2062 6573 745f 6879 706f 7468   def best_hypoth
+0000c900: 6573 6573 2873 656c 662c 206e 3a20 696e  eses(self, n: in
+0000c910: 7420 3d20 312c 206b 6579 3a20 7374 7220  t = 1, key: str 
+0000c920: 3d20 2766 6974 6e65 7373 272c 2072 6574  = 'fitness', ret
+0000c930: 7572 6e5f 6e6f 6465 3a20 626f 6f6c 203d  urn_node: bool =
+0000c940: 2046 616c 7365 2920 2d3e 2055 6e69 6f6e   False) -> Union
+0000c950: 5b4f 574c 436c 6173 7345 7870 7265 7373  [OWLClassExpress
+0000c960: 696f 6e2c 0a20 2020 2049 7465 7261 626c  ion,.    Iterabl
+0000c970: 655b 4f57 4c43 6c61 7373 4578 7072 6573  e[OWLClassExpres
+0000c980: 7369 6f6e 5d5d 3a0a 2020 2020 2020 2020  sion]]:.        
+0000c990: 6173 7365 7274 2073 656c 662e 5f72 6573  assert self._res
+0000c9a0: 756c 745f 706f 7075 6c61 7469 6f6e 2069  ult_population i
+0000c9b0: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
+0000c9c0: 2020 2061 7373 6572 7420 6c65 6e28 7365     assert len(se
+0000c9d0: 6c66 2e5f 7265 7375 6c74 5f70 6f70 756c  lf._result_popul
+0000c9e0: 6174 696f 6e29 203e 2030 0a20 2020 2020  ation) > 0.     
+0000c9f0: 2020 2069 6620 6e20 3e20 313a 0a20 2020     if n > 1:.   
+0000ca00: 2020 2020 2020 2020 2069 6620 7265 7475           if retu
+0000ca10: 726e 5f6e 6f64 653a 0a20 2020 2020 2020  rn_node:.       
+0000ca20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0000ca30: 5b69 2066 6f72 2069 2069 6e20 7365 6c66  [i for i in self
+0000ca40: 2e5f 6765 745f 746f 705f 6879 706f 7468  ._get_top_hypoth
+0000ca50: 6573 6573 2873 656c 662e 5f72 6573 756c  eses(self._resul
+0000ca60: 745f 706f 7075 6c61 7469 6f6e 2c20 6e2c  t_population, n,
+0000ca70: 206b 6579 295d 0a0a 2020 2020 2020 2020   key)]..        
+0000ca80: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000ca90: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000caa0: 205b 692e 636f 6e63 6570 7420 666f 7220   [i.concept for 
+0000cab0: 6920 696e 2073 656c 662e 5f67 6574 5f74  i in self._get_t
+0000cac0: 6f70 5f68 7970 6f74 6865 7365 7328 7365  op_hypotheses(se
+0000cad0: 6c66 2e5f 7265 7375 6c74 5f70 6f70 756c  lf._result_popul
+0000cae0: 6174 696f 6e2c 206e 2c20 6b65 7929 5d0a  ation, n, key)].
+0000caf0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0000cb00: 2020 2020 2020 2020 2020 6966 2072 6574            if ret
+0000cb10: 7572 6e5f 6e6f 6465 3a0a 2020 2020 2020  urn_node:.      
+0000cb20: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000cb30: 206e 6578 7428 7365 6c66 2e5f 6765 745f   next(self._get_
+0000cb40: 746f 705f 6879 706f 7468 6573 6573 2873  top_hypotheses(s
+0000cb50: 656c 662e 5f72 6573 756c 745f 706f 7075  elf._result_popu
+0000cb60: 6c61 7469 6f6e 2c20 6e2c 206b 6579 2929  lation, n, key))
+0000cb70: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+0000cb80: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000cb90: 2020 2072 6574 7572 6e20 6e65 7874 2873     return next(s
+0000cba0: 656c 662e 5f67 6574 5f74 6f70 5f68 7970  elf._get_top_hyp
+0000cbb0: 6f74 6865 7365 7328 7365 6c66 2e5f 7265  otheses(self._re
+0000cbc0: 7375 6c74 5f70 6f70 756c 6174 696f 6e2c  sult_population,
+0000cbd0: 206e 2c20 6b65 7929 292e 636f 6e63 6570   n, key)).concep
+0000cbe0: 740a 0a20 2020 2064 6566 205f 6765 745f  t..    def _get_
+0000cbf0: 746f 705f 6879 706f 7468 6573 6573 2873  top_hypotheses(s
+0000cc00: 656c 662c 2070 6f70 756c 6174 696f 6e3a  elf, population:
+0000cc10: 204c 6973 745b 5472 6565 5d2c 206e 3a20   List[Tree], n: 
+0000cc20: 696e 7420 3d20 352c 206b 6579 3a20 7374  int = 5, key: st
+0000cc30: 7220 3d20 2766 6974 6e65 7373 2729 205c  r = 'fitness') \
+0000cc40: 0a20 2020 2020 2020 2020 2020 202d 3e20  .            -> 
+0000cc50: 4974 6572 6162 6c65 5b45 766f 4c65 6172  Iterable[EvoLear
+0000cc60: 6e65 724e 6f64 655d 3a0a 2020 2020 2020  nerNode]:.      
+0000cc70: 2020 6265 7374 5f69 6e64 7320 3d20 746f    best_inds = to
+0000cc80: 6f6c 732e 7365 6c42 6573 7428 706f 7075  ols.selBest(popu
+0000cc90: 6c61 7469 6f6e 2c20 6b3d 6e20 2a20 3130  lation, k=n * 10
+0000cca0: 2c20 6669 745f 6174 7472 3d6b 6579 290a  , fit_attr=key).
+0000ccb0: 2020 2020 2020 2020 6265 7374 5f69 6e64          best_ind
+0000ccc0: 735f 6469 7374 696e 6374 203d 205b 5d0a  s_distinct = [].
+0000ccd0: 2020 2020 2020 2020 666f 7220 696e 6420          for ind 
+0000cce0: 696e 2062 6573 745f 696e 6473 3a0a 2020  in best_inds:.  
+0000ccf0: 2020 2020 2020 2020 2020 6966 2069 6e64            if ind
+0000cd00: 206e 6f74 2069 6e20 6265 7374 5f69 6e64   not in best_ind
+0000cd10: 735f 6469 7374 696e 6374 3a0a 2020 2020  s_distinct:.    
+0000cd20: 2020 2020 2020 2020 2020 2020 6265 7374              best
+0000cd30: 5f69 6e64 735f 6469 7374 696e 6374 2e61  _inds_distinct.a
+0000cd40: 7070 656e 6428 696e 6429 0a20 2020 2020  ppend(ind).     
+0000cd50: 2020 2062 6573 745f 636f 6e63 6570 7473     best_concepts
+0000cd60: 203d 205b 6770 2e63 6f6d 7069 6c65 2869   = [gp.compile(i
+0000cd70: 6e64 2c20 7365 6c66 2e70 7365 7429 2066  nd, self.pset) f
+0000cd80: 6f72 2069 6e64 2069 6e20 6265 7374 5f69  or ind in best_i
+0000cd90: 6e64 735f 6469 7374 696e 6374 5b3a 6e5d  nds_distinct[:n]
+0000cda0: 5d0a 0a20 2020 2020 2020 2066 6f72 2063  ]..        for c
+0000cdb0: 6f6e 2c20 696e 6420 696e 207a 6970 2862  on, ind in zip(b
+0000cdc0: 6573 745f 636f 6e63 6570 7473 2c20 6265  est_concepts, be
+0000cdd0: 7374 5f69 6e64 7329 3a0a 2020 2020 2020  st_inds):.      
+0000cde0: 2020 2020 2020 696e 6469 7669 6475 616c        individual
+0000cdf0: 735f 636f 756e 7420 3d20 6c65 6e28 7365  s_count = len(se
+0000ce00: 6c66 2e6b 622e 696e 6469 7669 6475 616c  lf.kb.individual
+0000ce10: 735f 7365 7428 636f 6e29 290a 2020 2020  s_set(con)).    
+0000ce20: 2020 2020 2020 2020 7969 656c 6420 4576          yield Ev
+0000ce30: 6f4c 6561 726e 6572 4e6f 6465 2863 6f6e  oLearnerNode(con
+0000ce40: 2c20 7365 6c66 2e6b 622e 636f 6e63 6570  , self.kb.concep
+0000ce50: 745f 6c65 6e28 636f 6e29 2c20 696e 6469  t_len(con), indi
+0000ce60: 7669 6475 616c 735f 636f 756e 742c 2069  viduals_count, i
+0000ce70: 6e64 2e71 7561 6c69 7479 2e76 616c 7565  nd.quality.value
+0000ce80: 735b 305d 2c0a 2020 2020 2020 2020 2020  s[0],.          
+0000ce90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cea0: 2020 2020 2020 206c 656e 2869 6e64 292c         len(ind),
+0000ceb0: 2069 6e64 2e68 6569 6768 7429 0a0a 2020   ind.height)..  
+0000cec0: 2020 6465 6620 5f66 6974 6e65 7373 5f66    def _fitness_f
+0000ced0: 756e 6328 7365 6c66 2c20 696e 6469 7669  unc(self, indivi
+0000cee0: 6475 616c 3a20 5472 6565 293a 0a20 2020  dual: Tree):.   
+0000cef0: 2020 2020 2069 6e64 5f73 7472 203d 2069       ind_str = i
+0000cf00: 6e64 5f74 6f5f 7374 7269 6e67 2869 6e64  nd_to_string(ind
+0000cf10: 6976 6964 7561 6c29 0a20 2020 2020 2020  ividual).       
+0000cf20: 2023 2065 7870 6572 696d 656e 7461 6c0a   # experimental.
+0000cf30: 2020 2020 2020 2020 6966 2069 6e64 5f73          if ind_s
+0000cf40: 7472 2069 6e20 7365 6c66 2e5f 6361 6368  tr in self._cach
+0000cf50: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
+0000cf60: 6e64 6976 6964 7561 6c2e 7175 616c 6974  ndividual.qualit
+0000cf70: 792e 7661 6c75 6573 203d 2028 7365 6c66  y.values = (self
+0000cf80: 2e5f 6361 6368 655b 696e 645f 7374 725d  ._cache[ind_str]
+0000cf90: 5b30 5d2c 290a 2020 2020 2020 2020 2020  [0],).          
+0000cfa0: 2020 696e 6469 7669 6475 616c 2e66 6974    individual.fit
+0000cfb0: 6e65 7373 2e76 616c 7565 7320 3d20 2873  ness.values = (s
+0000cfc0: 656c 662e 5f63 6163 6865 5b69 6e64 5f73  elf._cache[ind_s
+0000cfd0: 7472 5d5b 315d 2c29 0a20 2020 2020 2020  tr][1],).       
+0000cfe0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000cff0: 2020 2063 6f6e 6365 7074 203d 2067 702e     concept = gp.
+0000d000: 636f 6d70 696c 6528 696e 6469 7669 6475  compile(individu
+0000d010: 616c 2c20 7365 6c66 2e70 7365 7429 0a20  al, self.pset). 
+0000d020: 2020 2020 2020 2020 2020 2065 203d 2073             e = s
+0000d030: 656c 662e 6b62 2e65 7661 6c75 6174 655f  elf.kb.evaluate_
+0000d040: 636f 6e63 6570 7428 636f 6e63 6570 742c  concept(concept,
+0000d050: 2073 656c 662e 7175 616c 6974 795f 6675   self.quality_fu
+0000d060: 6e63 2c20 7365 6c66 2e5f 6c65 6172 6e69  nc, self._learni
+0000d070: 6e67 5f70 726f 626c 656d 290a 2020 2020  ng_problem).    
+0000d080: 2020 2020 2020 2020 696e 6469 7669 6475          individu
+0000d090: 616c 2e71 7561 6c69 7479 2e76 616c 7565  al.quality.value
+0000d0a0: 7320 3d20 2865 2e71 2c29 0a20 2020 2020  s = (e.q,).     
+0000d0b0: 2020 2020 2020 2073 656c 662e 6669 746e         self.fitn
+0000d0c0: 6573 735f 6675 6e63 2e61 7070 6c79 2869  ess_func.apply(i
+0000d0d0: 6e64 6976 6964 7561 6c29 0a20 2020 2020  ndividual).     
+0000d0e0: 2020 2020 2020 2073 656c 662e 5f63 6163         self._cac
+0000d0f0: 6865 5b69 6e64 5f73 7472 5d20 3d20 2865  he[ind_str] = (e
+0000d100: 2e71 2c20 696e 6469 7669 6475 616c 2e66  .q, individual.f
+0000d110: 6974 6e65 7373 2e76 616c 7565 735b 305d  itness.values[0]
+0000d120: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
+0000d130: 6c66 2e5f 6e75 6d62 6572 5f6f 665f 7465  lf._number_of_te
+0000d140: 7374 6564 5f63 6f6e 6365 7074 7320 2b3d  sted_concepts +=
+0000d150: 2031 0a0a 2020 2020 6465 6620 636c 6561   1..    def clea
+0000d160: 6e28 7365 6c66 2c20 7061 7274 6961 6c3a  n(self, partial:
+0000d170: 2062 6f6f 6c20 3d20 4661 6c73 6529 3a0a   bool = False):.
+0000d180: 2020 2020 2020 2020 2320 5265 7365 7473          # Resets
+0000d190: 2063 6c61 7373 6573 2069 6620 7468 6579   classes if they
+0000d1a0: 2061 6c72 6561 6479 2065 7869 7374 2c20   already exist, 
+0000d1b0: 6e61 6d65 7320 6d75 7374 206d 6174 6368  names must match
+0000d1c0: 2074 6865 206f 6e65 7320 7468 6174 2077   the ones that w
+0000d1d0: 6572 6520 6372 6561 7465 6420 696e 2074  ere created in t
+0000d1e0: 6865 2074 6f6f 6c62 6f78 0a20 2020 2020  he toolbox.     
+0000d1f0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+0000d200: 2020 2020 6465 6c20 6372 6561 746f 722e      del creator.
+0000d210: 4669 746e 6573 730a 2020 2020 2020 2020  Fitness.        
+0000d220: 2020 2020 6465 6c20 6372 6561 746f 722e      del creator.
+0000d230: 496e 6469 7669 6475 616c 0a20 2020 2020  Individual.     
+0000d240: 2020 2020 2020 2064 656c 2063 7265 6174         del creat
+0000d250: 6f72 2e51 7561 6c69 7479 0a20 2020 2020  or.Quality.     
+0000d260: 2020 2065 7863 6570 7420 4174 7472 6962     except Attrib
+0000d270: 7574 6545 7272 6f72 3a0a 2020 2020 2020  uteError:.      
+0000d280: 2020 2020 2020 7061 7373 0a20 2020 2020        pass.     
+0000d290: 2020 2073 7570 6572 2829 2e63 6c65 616e     super().clean
+0000d2a0: 2829 0a20 2020 2020 2020 2069 6620 6e6f  ().        if no
+0000d2b0: 7420 7061 7274 6961 6c3a 0a20 2020 2020  t partial:.     
+0000d2c0: 2020 2020 2020 2023 2052 6573 6574 2065         # Reset e
+0000d2d0: 7665 7279 7468 696e 6720 6966 2066 6974  verything if fit
+0000d2e0: 7469 6e67 206d 6f72 6520 7468 616e 206f  ting more than o
+0000d2f0: 6e65 206c 702e 2054 6573 7473 2068 6176  ne lp. Tests hav
+0000d300: 6520 7368 6f77 6e20 7468 6174 2074 6869  e shown that thi
+0000d310: 7320 6973 206e 6563 6573 7361 7279 2074  s is necessary t
+0000d320: 6f20 6765 7420 7468 650a 2020 2020 2020  o get the.      
+0000d330: 2020 2020 2020 2320 6265 7374 2070 6572        # best per
+0000d340: 666f 726d 616e 6365 206f 6620 4576 6f4c  formance of EvoL
+0000d350: 6561 726e 6572 2e0a 2020 2020 2020 2020  earner..        
+0000d360: 2020 2020 7365 6c66 2e5f 7265 7375 6c74      self._result
+0000d370: 5f70 6f70 756c 6174 696f 6e20 3d20 4e6f  _population = No
+0000d380: 6e65 0a20 2020 2020 2020 2020 2020 2073  ne.            s
+0000d390: 656c 662e 5f63 6163 6865 2e63 6c65 6172  elf._cache.clear
+0000d3a0: 2829 0a20 2020 2020 2020 2020 2020 2073  ().            s
+0000d3b0: 656c 662e 6669 746e 6573 735f 6675 6e63  elf.fitness_func
+0000d3c0: 203d 204c 696e 6561 7250 7265 7373 7572   = LinearPressur
+0000d3d0: 6546 6974 6e65 7373 2829 0a20 2020 2020  eFitness().     
+0000d3e0: 2020 2020 2020 2073 656c 662e 696e 6974         self.init
+0000d3f0: 5f6d 6574 686f 6420 3d20 4541 5261 6e64  _method = EARand
+0000d400: 6f6d 5761 6c6b 496e 6974 6961 6c69 7a61  omWalkInitializa
+0000d410: 7469 6f6e 2829 0a20 2020 2020 2020 2020  tion().         
+0000d420: 2020 2073 656c 662e 616c 676f 7269 7468     self.algorith
+0000d430: 6d20 3d20 4541 5369 6d70 6c65 2829 0a20  m = EASimple(). 
+0000d440: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000d450: 6d75 745f 756e 6966 6f72 6d5f 6765 6e20  mut_uniform_gen 
+0000d460: 3d20 4541 5261 6e64 6f6d 496e 6974 6961  = EARandomInitia
+0000d470: 6c69 7a61 7469 6f6e 286d 696e 5f68 6569  lization(min_hei
+0000d480: 6768 743d 312c 206d 6178 5f68 6569 6768  ght=1, max_heigh
+0000d490: 743d 3329 0a20 2020 2020 2020 2020 2020  t=3).           
+0000d4a0: 2073 656c 662e 7661 6c75 655f 7370 6c69   self.value_spli
+0000d4b0: 7474 6572 203d 2045 6e74 726f 7079 5661  tter = EntropyVa
+0000d4c0: 6c75 6553 706c 6974 7465 7228 290a 2020  lueSplitter().  
+0000d4d0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+0000d4e0: 6470 5f74 6f5f 7072 696d 5f74 7970 6520  dp_to_prim_type 
+0000d4f0: 3d20 6469 6374 2829 0a20 2020 2020 2020  = dict().       
+0000d500: 2020 2020 2073 656c 662e 5f64 705f 7370       self._dp_sp
+0000d510: 6c69 7473 203d 2064 6963 7428 290a 2020  lits = dict().  
+0000d520: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+0000d530: 7370 6c69 745f 7072 6f70 6572 7469 6573  split_properties
+0000d540: 203d 205b 5d0a 2020 2020 2020 2020 2020   = [].          
+0000d550: 2020 7365 6c66 2e70 7365 7420 3d20 7365    self.pset = se
+0000d560: 6c66 2e5f 5f62 7569 6c64 5f70 7269 6d69  lf.__build_primi
+0000d570: 7469 7665 5f73 6574 2829 0a20 2020 2020  tive_set().     
+0000d580: 2020 2020 2020 2073 656c 662e 746f 6f6c         self.tool
+0000d590: 626f 7820 3d20 7365 6c66 2e5f 5f62 7569  box = self.__bui
+0000d5a0: 6c64 5f74 6f6f 6c62 6f78 2829 0a0a 0a63  ld_toolbox()...c
+0000d5b0: 6c61 7373 2043 4c49 5028 4345 4c4f 4529  lass CLIP(CELOE)
+0000d5c0: 3a0a 2020 2020 2222 2243 6f6e 6365 7074  :.    """Concept
+0000d5d0: 204c 6561 726e 6572 2077 6974 6820 496e   Learner with In
+0000d5e0: 7465 6772 6174 6564 204c 656e 6774 6820  tegrated Length 
+0000d5f0: 5072 6564 6963 7469 6f6e 2e0a 2020 2020  Prediction..    
+0000d600: 5468 6973 2061 6c67 6f72 6974 686d 2065  This algorithm e
+0000d610: 7874 656e 6473 2074 6865 2043 454c 4f45  xtends the CELOE
+0000d620: 2061 6c67 6f72 6974 686d 2062 7920 7573   algorithm by us
+0000d630: 696e 6720 636f 6e63 6570 7420 6c65 6e67  ing concept leng
+0000d640: 7468 2070 7265 6469 6374 6f72 7320 616e  th predictors an
+0000d650: 6420 6120 6469 6666 6572 656e 7420 7265  d a different re
+0000d660: 6669 6e65 6d65 6e74 206f 7065 7261 746f  finement operato
+0000d670: 722c 2069 2e65 2e2c 2045 7870 7265 7373  r, i.e., Express
+0000d680: 5265 6669 6e65 6d65 6e74 0a0a 2020 2020  Refinement..    
+0000d690: 4174 7472 6962 7574 6573 3a0a 2020 2020  Attributes:.    
+0000d6a0: 2020 2020 6265 7374 5f64 6573 6372 6970      best_descrip
+0000d6b0: 7469 6f6e 7320 2845 7661 6c75 6174 6564  tions (Evaluated
+0000d6c0: 4465 7363 7269 7074 696f 6e53 6574 5b4f  DescriptionSet[O
+0000d6d0: 454e 6f64 652c 2051 7561 6c69 7479 4f72  ENode, QualityOr
+0000d6e0: 6465 7265 644e 6f64 655d 293a 2042 6573  deredNode]): Bes
+0000d6f0: 7420 6879 706f 7468 6573 6573 206f 7264  t hypotheses ord
+0000d700: 6572 6564 2e0a 2020 2020 2020 2020 6265  ered..        be
+0000d710: 7374 5f6f 6e6c 7920 2862 6f6f 6c29 3a20  st_only (bool): 
+0000d720: 4966 2046 616c 7365 2070 6963 6b20 6f6e  If False pick on
+0000d730: 6c79 206e 6f64 6573 2077 6974 6820 7175  ly nodes with qu
+0000d740: 616c 6974 7920 3c20 312e 302c 2065 6c73  ality < 1.0, els
+0000d750: 6520 7069 636b 2077 6974 686f 7574 2071  e pick without q
+0000d760: 7561 6c69 7479 2072 6573 7472 6963 7469  uality restricti
+0000d770: 6f6e 732e 0a20 2020 2020 2020 2063 616c  ons..        cal
+0000d780: 6375 6c61 7465 5f6d 696e 5f6d 6178 2028  culate_min_max (
+0000d790: 626f 6f6c 293a 2043 616c 6375 6c61 7465  bool): Calculate
+0000d7a0: 206d 696e 696d 756d 2061 6e64 206d 6178   minimum and max
+0000d7b0: 696d 756d 2068 6f72 697a 6f6e 7461 6c20  imum horizontal 
+0000d7c0: 6578 7061 6e73 696f 6e3f 2053 7461 7469  expansion? Stati
+0000d7d0: 7374 6963 616c 2070 7572 706f 7365 206f  stical purpose o
+0000d7e0: 6e6c 792e 0a20 2020 2020 2020 2068 6575  nly..        heu
+0000d7f0: 7269 7374 6963 5f66 756e 6320 2841 6273  ristic_func (Abs
+0000d800: 7472 6163 7448 6575 7269 7374 6963 293a  tractHeuristic):
+0000d810: 2046 756e 6374 696f 6e20 746f 2067 7569   Function to gui
+0000d820: 6465 2074 6865 2073 6561 7263 6820 6865  de the search he
+0000d830: 7572 6973 7469 632e 0a20 2020 2020 2020  uristic..       
+0000d840: 2068 6575 7269 7374 6963 5f71 7565 7565   heuristic_queue
+0000d850: 2028 536f 7274 6564 5365 745b 4f45 4e6f   (SortedSet[OENo
+0000d860: 6465 5d29 3a20 4120 736f 7274 6564 2073  de]): A sorted s
+0000d870: 6574 2074 6861 7420 636f 6d70 6172 6573  et that compares
+0000d880: 2074 6865 206e 6f64 6573 2062 6173 6564   the nodes based
+0000d890: 206f 6e20 4865 7572 6973 7469 632e 0a20   on Heuristic.. 
+0000d8a0: 2020 2020 2020 2069 7465 725f 626f 756e         iter_boun
+0000d8b0: 6420 2869 6e74 293a 204c 696d 6974 2074  d (int): Limit t
+0000d8c0: 6f20 7374 6f70 2074 6865 2061 6c67 6f72  o stop the algor
+0000d8d0: 6974 686d 2061 6674 6572 206e 2072 6566  ithm after n ref
+0000d8e0: 696e 656d 656e 7420 7374 6570 7320 6172  inement steps ar
+0000d8f0: 6520 646f 6e65 2e0a 2020 2020 2020 2020  e done..        
+0000d900: 6b62 2028 4b6e 6f77 6c65 6467 6542 6173  kb (KnowledgeBas
+0000d910: 6529 3a20 5468 6520 6b6e 6f77 6c65 6467  e): The knowledg
+0000d920: 6520 6261 7365 2074 6861 7420 7468 6520  e base that the 
+0000d930: 636f 6e63 6570 7420 6c65 6172 6e65 7220  concept learner 
+0000d940: 6973 2075 7369 6e67 2e0a 2020 2020 2020  is using..      
+0000d950: 2020 6d61 785f 6368 696c 645f 6c65 6e67    max_child_leng
+0000d960: 7468 2028 696e 7429 3a20 4c69 6d69 7420  th (int): Limit 
+0000d970: 7468 6520 6c65 6e67 7468 206f 6620 636f  the length of co
+0000d980: 6e63 6570 7473 2067 656e 6572 6174 6564  ncepts generated
+0000d990: 2062 7920 7468 6520 7265 6669 6e65 6d65   by the refineme
+0000d9a0: 6e74 206f 7065 7261 746f 722e 0a20 2020  nt operator..   
+0000d9b0: 2020 2020 206d 6178 5f68 6520 2869 6e74       max_he (int
+0000d9c0: 293a 204d 6178 696d 616c 2076 616c 7565  ): Maximal value
+0000d9d0: 206f 6620 686f 7269 7a6f 6e74 616c 2065   of horizontal e
+0000d9e0: 7870 616e 7369 6f6e 2e0a 2020 2020 2020  xpansion..      
+0000d9f0: 2020 6d61 785f 6e75 6d5f 6f66 5f63 6f6e    max_num_of_con
+0000da00: 6365 7074 735f 7465 7374 6564 2028 696e  cepts_tested (in
+0000da10: 7429 204c 696d 6974 2074 6f20 7374 6f70  t) Limit to stop
+0000da20: 2074 6865 2061 6c67 6f72 6974 686d 2061   the algorithm a
+0000da30: 6674 6572 206e 2063 6f6e 6365 7074 7320  fter n concepts 
+0000da40: 7465 7374 6564 2e0a 2020 2020 2020 2020  tested..        
+0000da50: 6d61 785f 7275 6e74 696d 6520 2869 6e74  max_runtime (int
+0000da60: 293a 204c 696d 6974 2074 6f20 7374 6f70  ): Limit to stop
+0000da70: 2074 6865 2061 6c67 6f72 6974 686d 2061   the algorithm a
+0000da80: 6674 6572 206e 2073 6563 6f6e 6473 2e0a  fter n seconds..
+0000da90: 2020 2020 2020 2020 6d69 6e5f 6865 2028          min_he (
+0000daa0: 696e 7429 3a20 4d69 6e69 6d61 6c20 7661  int): Minimal va
+0000dab0: 6c75 6520 6f66 2068 6f72 697a 6f6e 7461  lue of horizonta
+0000dac0: 6c20 6578 7061 6e73 696f 6e2e 0a20 2020  l expansion..   
+0000dad0: 2020 2020 206e 616d 6520 2873 7472 293a       name (str):
+0000dae0: 204e 616d 6520 6f66 2074 6865 206d 6f64   Name of the mod
+0000daf0: 656c 203d 2027 6365 6c6f 655f 7079 7468  el = 'celoe_pyth
+0000db00: 6f6e 272e 0a20 2020 2020 2020 205f 6e75  on'..        _nu
+0000db10: 6d62 6572 5f6f 665f 7465 7374 6564 5f63  mber_of_tested_c
+0000db20: 6f6e 6365 7074 7320 2869 6e74 293a 2059  oncepts (int): Y
+0000db30: 6573 2c20 796f 7520 676f 7420 6974 2e20  es, you got it. 
+0000db40: 5468 6973 2073 746f 7265 7320 7468 6520  This stores the 
+0000db50: 6e75 6d62 6572 206f 6620 7465 7374 6564  number of tested
+0000db60: 2063 6f6e 6365 7074 732e 0a20 2020 2020   concepts..     
+0000db70: 2020 206f 7065 7261 746f 7220 2842 6173     operator (Bas
+0000db80: 6552 6566 696e 656d 656e 7429 3a20 4f70  eRefinement): Op
+0000db90: 6572 6174 6f72 2075 7365 6420 746f 2067  erator used to g
+0000dba0: 656e 6572 6174 6520 7265 6669 6e65 6d65  enerate refineme
+0000dbb0: 6e74 732e 0a20 2020 2020 2020 2071 7561  nts..        qua
+0000dbc0: 6c69 7479 5f66 756e 6320 2841 6273 7472  lity_func (Abstr
+0000dbd0: 6163 7453 636f 7265 7229 2054 6865 2071  actScorer) The q
+0000dbe0: 7561 6c69 7479 2066 756e 6374 696f 6e20  uality function 
+0000dbf0: 746f 2062 6520 7573 6564 2e0a 2020 2020  to be used..    
+0000dc00: 2020 2020 7265 6173 6f6e 6572 2028 4f57      reasoner (OW
+0000dc10: 4c52 6561 736f 6e65 7229 3a20 5468 6520  LReasoner): The 
+0000dc20: 7265 6173 6f6e 6572 2074 6861 7420 7468  reasoner that th
+0000dc30: 6973 206d 6f64 656c 2069 7320 7573 696e  is model is usin
+0000dc40: 672e 0a20 2020 2020 2020 2073 6561 7263  g..        searc
+0000dc50: 685f 7472 6565 2028 4469 6374 5b4f 574c  h_tree (Dict[OWL
+0000dc60: 436c 6173 7345 7870 7265 7373 696f 6e2c  ClassExpression,
+0000dc70: 2054 7265 654e 6f64 655b 4f45 4e6f 6465   TreeNode[OENode
+0000dc80: 5d5d 293a 2044 6963 7420 746f 2073 746f  ]]): Dict to sto
+0000dc90: 7265 2074 6865 2054 7265 654e 6f64 6520  re the TreeNode 
+0000dca0: 666f 7220 6120 636c 6173 7320 6578 7072  for a class expr
+0000dcb0: 6573 7369 6f6e 2e0a 2020 2020 2020 2020  ession..        
+0000dcc0: 7374 6172 745f 636c 6173 7320 284f 574c  start_class (OWL
+0000dcd0: 436c 6173 7345 7870 7265 7373 696f 6e29  ClassExpression)
+0000dce0: 3a20 5468 6520 7374 6172 7469 6e67 2063  : The starting c
+0000dcf0: 6c61 7373 2065 7870 7265 7373 696f 6e20  lass expression 
+0000dd00: 666f 7220 7468 6520 7265 6669 6e65 6d65  for the refineme
+0000dd10: 6e74 206f 7065 7261 7469 6f6e 2e0a 2020  nt operation..  
+0000dd20: 2020 2020 2020 7374 6172 745f 7469 6d65        start_time
+0000dd30: 2028 666c 6f61 7429 3a20 5468 6520 7469   (float): The ti
+0000dd40: 6d65 2077 6865 6e20 3a6d 6574 683a 6066  me when :meth:`f
+0000dd50: 6974 6020 7374 6172 7473 2074 6865 2065  it` starts the e
+0000dd60: 7865 6375 7469 6f6e 2e20 5573 6564 2074  xecution. Used t
+0000dd70: 6f20 6361 6c63 756c 6174 6520 7468 6520  o calculate the 
+0000dd80: 746f 7461 6c20 7469 6d65 203a 6d65 7468  total time :meth
+0000dd90: 3a60 6669 7460 0a20 2020 2020 2020 2020  :`fit`.         
+0000dda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ddb0: 2020 2074 616b 6573 2074 6f20 6578 6563     takes to exec
+0000ddc0: 7574 652e 0a20 2020 2020 2020 2074 6572  ute..        ter
+0000ddd0: 6d69 6e61 7465 5f6f 6e5f 676f 616c 2028  minate_on_goal (
+0000dde0: 626f 6f6c 293a 2057 6865 7468 6572 2074  bool): Whether t
+0000ddf0: 6f20 7374 6f70 2074 6865 2061 6c67 6f72  o stop the algor
+0000de00: 6974 686d 2069 6620 6120 7065 7266 6563  ithm if a perfec
+0000de10: 7420 736f 6c75 7469 6f6e 2069 7320 666f  t solution is fo
+0000de20: 756e 642e 0a0a 2020 2020 2222 220a 2020  und...    """.  
+0000de30: 2020 5f5f 736c 6f74 735f 5f20 3d20 2762    __slots__ = 'b
+0000de40: 6573 745f 6465 7363 7269 7074 696f 6e73  est_descriptions
+0000de50: 272c 2027 6d61 785f 6865 272c 2027 6d69  ', 'max_he', 'mi
+0000de60: 6e5f 6865 272c 2027 6265 7374 5f6f 6e6c  n_he', 'best_onl
+0000de70: 7927 2c20 2763 616c 6375 6c61 7465 5f6d  y', 'calculate_m
+0000de80: 696e 5f6d 6178 272c 2027 6865 7572 6973  in_max', 'heuris
+0000de90: 7469 635f 7175 6575 6527 2c20 5c0a 2020  tic_queue', \.  
+0000dea0: 2020 2020 2020 2773 6561 7263 685f 7472        'search_tr
+0000deb0: 6565 272c 2027 5f6c 6561 726e 696e 675f  ee', '_learning_
+0000dec0: 7072 6f62 6c65 6d27 2c20 275f 6d61 785f  problem', '_max_
+0000ded0: 7275 6e74 696d 6527 2c20 275f 7365 656e  runtime', '_seen
+0000dee0: 5f6e 6f72 6d5f 636f 6e63 6570 7473 272c  _norm_concepts',
+0000def0: 2027 7072 6564 6963 746f 725f 6e61 6d65   'predictor_name
+0000df00: 272c 2027 7072 6574 7261 696e 6564 5f70  ', 'pretrained_p
+0000df10: 7265 6469 6374 6f72 5f6e 616d 6527 2c20  redictor_name', 
+0000df20: 5c0a 2020 2020 2020 2020 276c 6f61 645f  \.        'load_
+0000df30: 7072 6574 7261 696e 6564 272c 2027 6f75  pretrained', 'ou
+0000df40: 7470 7574 5f73 697a 6527 2c20 276e 756d  tput_size', 'num
+0000df50: 5f65 7861 6d70 6c65 7327 2c20 2770 6174  _examples', 'pat
+0000df60: 685f 6f66 5f65 6d62 6564 6469 6e67 7327  h_of_embeddings'
+0000df70: 2c20 2769 6e73 7461 6e63 655f 656d 6265  , 'instance_embe
+0000df80: 6464 696e 6773 272c 2027 696e 7075 745f  ddings', 'input_
+0000df90: 7369 7a65 272c 2027 6465 7669 6365 272c  size', 'device',
+0000dfa0: 2027 6c65 6e67 7468 5f70 7265 6469 6374   'length_predict
+0000dfb0: 6f72 272c 205c 0a20 2020 2020 2020 2027  or', \.        '
+0000dfc0: 6e75 6d5f 776f 726b 6572 7327 2c20 276b  num_workers', 'k
+0000dfd0: 6e6f 776c 6564 6765 5f62 6173 655f 7061  nowledge_base_pa
+0000dfe0: 7468 270a 0a20 2020 206e 616d 6520 3d20  th'..    name = 
+0000dff0: 2763 6c69 7027 0a0a 2020 2020 6465 6620  'clip'..    def 
+0000e000: 5f5f 696e 6974 5f5f 2873 656c 662c 0a20  __init__(self,. 
+0000e010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e020: 6b6e 6f77 6c65 6467 655f 6261 7365 3a20  knowledge_base: 
+0000e030: 4b6e 6f77 6c65 6467 6542 6173 652c 0a20  KnowledgeBase,. 
+0000e040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e050: 6b6e 6f77 6c65 6467 655f 6261 7365 5f70  knowledge_base_p
+0000e060: 6174 683d 2727 2c0a 2020 2020 2020 2020  ath='',.        
+0000e070: 2020 2020 2020 2020 2072 6561 736f 6e65           reasone
+0000e080: 723a 204f 7074 696f 6e61 6c5b 4f57 4c52  r: Optional[OWLR
+0000e090: 6561 736f 6e65 725d 203d 204e 6f6e 652c  easoner] = None,
+0000e0a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e0b0: 2020 7265 6669 6e65 6d65 6e74 5f6f 7065    refinement_ope
+0000e0c0: 7261 746f 723a 204f 7074 696f 6e61 6c5b  rator: Optional[
+0000e0d0: 4261 7365 5265 6669 6e65 6d65 6e74 5b4f  BaseRefinement[O
+0000e0e0: 454e 6f64 655d 5d20 3d20 4578 7072 6573  ENode]] = Expres
+0000e0f0: 7352 6566 696e 656d 656e 742c 0a20 2020  sRefinement,.   
+0000e100: 2020 2020 2020 2020 2020 2020 2020 7175                qu
+0000e110: 616c 6974 795f 6675 6e63 3a20 4f70 7469  ality_func: Opti
+0000e120: 6f6e 616c 5b41 6273 7472 6163 7453 636f  onal[AbstractSco
+0000e130: 7265 725d 203d 204e 6f6e 652c 0a20 2020  rer] = None,.   
+0000e140: 2020 2020 2020 2020 2020 2020 2020 6865                he
+0000e150: 7572 6973 7469 635f 6675 6e63 3a20 4f70  uristic_func: Op
+0000e160: 7469 6f6e 616c 5b41 6273 7472 6163 7448  tional[AbstractH
+0000e170: 6575 7269 7374 6963 5d20 3d20 4e6f 6e65  euristic] = None
+0000e180: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000e190: 2020 2074 6572 6d69 6e61 7465 5f6f 6e5f     terminate_on_
+0000e1a0: 676f 616c 3a20 4f70 7469 6f6e 616c 5b62  goal: Optional[b
+0000e1b0: 6f6f 6c5d 203d 204e 6f6e 652c 0a20 2020  ool] = None,.   
+0000e1c0: 2020 2020 2020 2020 2020 2020 2020 6974                it
+0000e1d0: 6572 5f62 6f75 6e64 3a20 4f70 7469 6f6e  er_bound: Option
+0000e1e0: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c0a  al[int] = None,.
+0000e1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e200: 206d 6178 5f6e 756d 5f6f 665f 636f 6e63   max_num_of_conc
+0000e210: 6570 7473 5f74 6573 7465 643a 204f 7074  epts_tested: Opt
+0000e220: 696f 6e61 6c5b 696e 745d 203d 204e 6f6e  ional[int] = Non
+0000e230: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+0000e240: 2020 2020 6d61 785f 7275 6e74 696d 653a      max_runtime:
+0000e250: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+0000e260: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+0000e270: 2020 2020 2020 2020 6d61 785f 7265 7375          max_resu
+0000e280: 6c74 733a 2069 6e74 203d 2031 302c 0a20  lts: int = 10,. 
+0000e290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e2a0: 6265 7374 5f6f 6e6c 793a 2062 6f6f 6c20  best_only: bool 
+0000e2b0: 3d20 4661 6c73 652c 0a20 2020 2020 2020  = False,.       
+0000e2c0: 2020 2020 2020 2020 2020 6361 6c63 756c            calcul
+0000e2d0: 6174 655f 6d69 6e5f 6d61 783a 2062 6f6f  ate_min_max: boo
+0000e2e0: 6c20 3d20 5472 7565 2c0a 2020 2020 2020  l = True,.      
+0000e2f0: 2020 2020 2020 2020 2020 2070 6174 685f             path_
+0000e300: 6f66 5f65 6d62 6564 6469 6e67 733d 2222  of_embeddings=""
+0000e310: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000e320: 2020 2070 7265 6469 6374 6f72 5f6e 616d     predictor_nam
+0000e330: 653d 4e6f 6e65 2c0a 2020 2020 2020 2020  e=None,.        
+0000e340: 2020 2020 2020 2020 2070 7265 7472 6169           pretrai
+0000e350: 6e65 645f 7072 6564 6963 746f 725f 6e61  ned_predictor_na
+0000e360: 6d65 3d5b 2253 6574 5472 616e 7366 6f72  me=["SetTransfor
+0000e370: 6d65 7222 2c20 224c 5354 4d22 2c20 2247  mer", "LSTM", "G
+0000e380: 5255 222c 2022 434e 4e22 5d2c 0a20 2020  RU", "CNN"],.   
+0000e390: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
+0000e3a0: 6164 5f70 7265 7472 6169 6e65 643d 4661  ad_pretrained=Fa
+0000e3b0: 6c73 652c 0a20 2020 2020 2020 2020 2020  lse,.           
+0000e3c0: 2020 2020 2020 6e75 6d5f 776f 726b 6572        num_worker
+0000e3d0: 733d 342c 0a20 2020 2020 2020 2020 2020  s=4,.           
+0000e3e0: 2020 2020 2020 6e75 6d5f 6578 616d 706c        num_exampl
+0000e3f0: 6573 3d31 3030 302c 0a20 2020 2020 2020  es=1000,.       
+0000e400: 2020 2020 2020 2020 2020 6f75 7470 7574            output
+0000e410: 5f73 697a 653d 3135 0a20 2020 2020 2020  _size=15.       
+0000e420: 2020 2020 2020 2020 2020 293a 0a20 2020            ):.   
+0000e430: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
+0000e440: 6e69 745f 5f28 6b6e 6f77 6c65 6467 655f  nit__(knowledge_
+0000e450: 6261 7365 2c0a 2020 2020 2020 2020 2020  base,.          
+0000e460: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0000e470: 6561 736f 6e65 722c 0a20 2020 2020 2020  easoner,.       
+0000e480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e490: 2020 7265 6669 6e65 6d65 6e74 5f6f 7065    refinement_ope
+0000e4a0: 7261 746f 722c 0a20 2020 2020 2020 2020  rator,.         
+0000e4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e4c0: 7175 616c 6974 795f 6675 6e63 2c0a 2020  quality_func,.  
+0000e4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e4e0: 2020 2020 2020 2068 6575 7269 7374 6963         heuristic
+0000e4f0: 5f66 756e 632c 0a20 2020 2020 2020 2020  _func,.         
+0000e500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e510: 7465 726d 696e 6174 655f 6f6e 5f67 6f61  terminate_on_goa
+0000e520: 6c2c 0a20 2020 2020 2020 2020 2020 2020  l,.             
+0000e530: 2020 2020 2020 2020 2020 2020 6974 6572              iter
+0000e540: 5f62 6f75 6e64 2c0a 2020 2020 2020 2020  _bound,.        
+0000e550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e560: 206d 6178 5f6e 756d 5f6f 665f 636f 6e63   max_num_of_conc
+0000e570: 6570 7473 5f74 6573 7465 642c 0a20 2020  epts_tested,.   
+0000e580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e590: 2020 2020 2020 6d61 785f 7275 6e74 696d        max_runtim
+0000e5a0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+0000e5b0: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
+0000e5c0: 7265 7375 6c74 732c 0a20 2020 2020 2020  results,.       
+0000e5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e5e0: 2020 6265 7374 5f6f 6e6c 792c 0a20 2020    best_only,.   
+0000e5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e600: 2020 2020 2020 6361 6c63 756c 6174 655f        calculate_
+0000e610: 6d69 6e5f 6d61 7829 0a20 2020 2020 2020  min_max).       
+0000e620: 2061 7373 6572 7420 6861 7361 7474 7228   assert hasattr(
+0000e630: 7265 6669 6e65 6d65 6e74 5f6f 7065 7261  refinement_opera
+0000e640: 746f 722c 0a20 2020 2020 2020 2020 2020  tor,.           
+0000e650: 2020 2020 2020 2020 2020 2020 2265 7870              "exp
+0000e660: 7265 7373 6976 6974 7922 292c 2066 2243  ressivity"), f"C
+0000e670: 4c49 5020 7761 7320 6465 7665 6c6f 7065  LIP was develope
+0000e680: 6420 746f 2072 756e 206d 6f72 6520 6566  d to run more ef
+0000e690: 6669 6369 656e 746c 7920 7769 7468 2045  ficiently with E
+0000e6a0: 7870 7265 7373 5265 6669 6e65 6d65 6e74  xpressRefinement
+0000e6b0: 2c20 6e6f 7420 7b72 6566 696e 656d 656e  , not {refinemen
+0000e6c0: 745f 6f70 6572 6174 6f72 7d22 0a20 2020  t_operator}".   
+0000e6d0: 2020 2020 2073 656c 662e 7072 6564 6963       self.predic
+0000e6e0: 746f 725f 6e61 6d65 203d 2070 7265 6469  tor_name = predi
+0000e6f0: 6374 6f72 5f6e 616d 650a 2020 2020 2020  ctor_name.      
+0000e700: 2020 7365 6c66 2e70 7265 7472 6169 6e65    self.pretraine
+0000e710: 645f 7072 6564 6963 746f 725f 6e61 6d65  d_predictor_name
+0000e720: 203d 2070 7265 7472 6169 6e65 645f 7072   = pretrained_pr
+0000e730: 6564 6963 746f 725f 6e61 6d65 0a20 2020  edictor_name.   
+0000e740: 2020 2020 2073 656c 662e 6b6e 6f77 6c65       self.knowle
+0000e750: 6467 655f 6261 7365 5f70 6174 6820 3d20  dge_base_path = 
+0000e760: 6b6e 6f77 6c65 6467 655f 6261 7365 5f70  knowledge_base_p
+0000e770: 6174 680a 2020 2020 2020 2020 7365 6c66  ath.        self
+0000e780: 2e6c 6f61 645f 7072 6574 7261 696e 6564  .load_pretrained
+0000e790: 203d 206c 6f61 645f 7072 6574 7261 696e   = load_pretrain
+0000e7a0: 6564 0a20 2020 2020 2020 2073 656c 662e  ed.        self.
+0000e7b0: 6e75 6d5f 776f 726b 6572 7320 3d20 6e75  num_workers = nu
+0000e7c0: 6d5f 776f 726b 6572 730a 2020 2020 2020  m_workers.      
+0000e7d0: 2020 7365 6c66 2e6f 7574 7075 745f 7369    self.output_si
+0000e7e0: 7a65 203d 206f 7574 7075 745f 7369 7a65  ze = output_size
+0000e7f0: 0a20 2020 2020 2020 2073 656c 662e 6e75  .        self.nu
+0000e800: 6d5f 6578 616d 706c 6573 203d 206e 756d  m_examples = num
+0000e810: 5f65 7861 6d70 6c65 730a 2020 2020 2020  _examples.      
+0000e820: 2020 7365 6c66 2e70 6174 685f 6f66 5f65    self.path_of_e
+0000e830: 6d62 6564 6469 6e67 7320 3d20 7061 7468  mbeddings = path
+0000e840: 5f6f 665f 656d 6265 6464 696e 6773 0a20  _of_embeddings. 
+0000e850: 2020 2020 2020 2061 7373 6572 7420 6f73         assert os
+0000e860: 2e70 6174 682e 6973 6669 6c65 2873 656c  .path.isfile(sel
+0000e870: 662e 7061 7468 5f6f 665f 656d 6265 6464  f.path_of_embedd
+0000e880: 696e 6773 292c 2027 2121 2120 5772 6f6e  ings), '!!! Wron
+0000e890: 6720 7061 7468 2066 6f72 2043 4c49 5020  g path for CLIP 
+0000e8a0: 656d 6265 6464 696e 6773 270a 2020 2020  embeddings'.    
+0000e8b0: 2020 2020 7365 6c66 2e69 6e73 7461 6e63      self.instanc
+0000e8c0: 655f 656d 6265 6464 696e 6773 203d 2070  e_embeddings = p
+0000e8d0: 642e 7265 6164 5f63 7376 2870 6174 685f  d.read_csv(path_
+0000e8e0: 6f66 5f65 6d62 6564 6469 6e67 732c 2069  of_embeddings, i
+0000e8f0: 6e64 6578 5f63 6f6c 3d30 290a 2020 2020  ndex_col=0).    
+0000e900: 2020 2020 7365 6c66 2e69 6e70 7574 5f73      self.input_s
+0000e910: 697a 6520 3d20 7365 6c66 2e69 6e73 7461  ize = self.insta
+0000e920: 6e63 655f 656d 6265 6464 696e 6773 2e73  nce_embeddings.s
+0000e930: 6861 7065 5b31 5d0a 2020 2020 2020 2020  hape[1].        
+0000e940: 7365 6c66 2e64 6576 6963 6520 3d20 746f  self.device = to
+0000e950: 7263 682e 6465 7669 6365 2822 6375 6461  rch.device("cuda
+0000e960: 2220 6966 2074 6f72 6368 2e63 7564 612e  " if torch.cuda.
+0000e970: 6973 5f61 7661 696c 6162 6c65 2829 2065  is_available() e
+0000e980: 6c73 6520 2263 7075 2229 0a20 2020 2020  lse "cpu").     
+0000e990: 2020 2073 656c 662e 6c65 6e67 7468 5f70     self.length_p
+0000e9a0: 7265 6469 6374 6f72 203d 2073 656c 662e  redictor = self.
+0000e9b0: 6765 745f 6c65 6e67 7468 5f70 7265 6469  get_length_predi
+0000e9c0: 6374 6f72 2829 0a0a 2020 2020 6465 6620  ctor()..    def 
+0000e9d0: 6765 745f 6c65 6e67 7468 5f70 7265 6469  get_length_predi
+0000e9e0: 6374 6f72 2873 656c 6629 3a0a 2020 2020  ctor(self):.    
+0000e9f0: 2020 2020 6465 6620 6c6f 6164 5f6d 6f64      def load_mod
+0000ea00: 656c 2870 7265 6469 6374 6f72 5f6e 616d  el(predictor_nam
+0000ea10: 652c 206c 6f61 645f 7072 6574 7261 696e  e, load_pretrain
+0000ea20: 6564 293a 0a20 2020 2020 2020 2020 2020  ed):.           
+0000ea30: 2069 6620 7072 6564 6963 746f 725f 6e61   if predictor_na
+0000ea40: 6d65 2069 7320 4e6f 6e65 3a0a 2020 2020  me is None:.    
+0000ea50: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0000ea60: 726e 205b 5d0a 2020 2020 2020 2020 2020  rn [].          
+0000ea70: 2020 6966 2070 7265 6469 6374 6f72 5f6e    if predictor_n
+0000ea80: 616d 6520 3d3d 2027 5365 7454 7261 6e73  ame == 'SetTrans
+0000ea90: 666f 726d 6572 273a 0a20 2020 2020 2020  former':.       
+0000eaa0: 2020 2020 2020 2020 206d 6f64 656c 203d           model =
+0000eab0: 204c 656e 6774 684c 6561 726e 6572 5f53   LengthLearner_S
+0000eac0: 6574 5472 616e 7366 6f72 6d65 7228 7365  etTransformer(se
+0000ead0: 6c66 2e69 6e70 7574 5f73 697a 652c 2073  lf.input_size, s
+0000eae0: 656c 662e 6f75 7470 7574 5f73 697a 652c  elf.output_size,
+0000eaf0: 2070 726f 6a5f 6469 6d3d 3235 362c 206e   proj_dim=256, n
+0000eb00: 756d 5f68 6561 6473 3d34 2c0a 2020 2020  um_heads=4,.    
+0000eb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000eb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000eb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000eb40: 206e 756d 5f73 6565 6473 3d31 2c20 6e75   num_seeds=1, nu
+0000eb50: 6d5f 696e 6473 3d33 3229 0a20 2020 2020  m_inds=32).     
+0000eb60: 2020 2020 2020 2065 6c69 6620 7072 6564         elif pred
+0000eb70: 6963 746f 725f 6e61 6d65 203d 3d20 2747  ictor_name == 'G
+0000eb80: 5255 273a 0a20 2020 2020 2020 2020 2020  RU':.           
+0000eb90: 2020 2020 206d 6f64 656c 203d 204c 656e       model = Len
+0000eba0: 6774 684c 6561 726e 6572 5f47 5255 2873  gthLearner_GRU(s
+0000ebb0: 656c 662e 696e 7075 745f 7369 7a65 2c20  elf.input_size, 
+0000ebc0: 7365 6c66 2e6f 7574 7075 745f 7369 7a65  self.output_size
+0000ebd0: 2c20 7072 6f6a 5f64 696d 3d32 3536 2c20  , proj_dim=256, 
+0000ebe0: 726e 6e5f 6e5f 6c61 7965 7273 3d32 2c0a  rnn_n_layers=2,.
+0000ebf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ec00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ec10: 2020 2020 2020 2020 2020 6472 6f70 5f70            drop_p
+0000ec20: 726f 623d 302e 3229 0a20 2020 2020 2020  rob=0.2).       
+0000ec30: 2020 2020 2065 6c69 6620 7072 6564 6963       elif predic
+0000ec40: 746f 725f 6e61 6d65 203d 3d20 274c 5354  tor_name == 'LST
+0000ec50: 4d27 3a0a 2020 2020 2020 2020 2020 2020  M':.            
+0000ec60: 2020 2020 6d6f 6465 6c20 3d20 4c65 6e67      model = Leng
+0000ec70: 7468 4c65 6172 6e65 725f 4c53 544d 2873  thLearner_LSTM(s
+0000ec80: 656c 662e 696e 7075 745f 7369 7a65 2c20  elf.input_size, 
+0000ec90: 7365 6c66 2e6f 7574 7075 745f 7369 7a65  self.output_size
+0000eca0: 2c20 7072 6f6a 5f64 696d 3d32 3536 2c20  , proj_dim=256, 
+0000ecb0: 726e 6e5f 6e5f 6c61 7965 7273 3d32 2c0a  rnn_n_layers=2,.
+0000ecc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ecd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ece0: 2020 2020 2020 2020 2020 2064 726f 705f             drop_
+0000ecf0: 7072 6f62 3d30 2e32 290a 2020 2020 2020  prob=0.2).      
+0000ed00: 2020 2020 2020 656c 6966 2070 7265 6469        elif predi
+0000ed10: 6374 6f72 5f6e 616d 6520 3d3d 2027 434e  ctor_name == 'CN
+0000ed20: 4e27 3a0a 2020 2020 2020 2020 2020 2020  N':.            
+0000ed30: 2020 2020 6d6f 6465 6c20 3d20 4c65 6e67      model = Leng
+0000ed40: 7468 4c65 6172 6e65 725f 434e 4e28 7365  thLearner_CNN(se
+0000ed50: 6c66 2e69 6e70 7574 5f73 697a 652c 2073  lf.input_size, s
+0000ed60: 656c 662e 6f75 7470 7574 5f73 697a 652c  elf.output_size,
+0000ed70: 2073 656c 662e 6e75 6d5f 6578 616d 706c   self.num_exampl
+0000ed80: 6573 2c20 7072 6f6a 5f64 696d 3d32 3536  es, proj_dim=256
+0000ed90: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000eda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000edb0: 2020 2020 2020 2020 2020 2020 6b65 726e              kern
+0000edc0: 656c 5f73 697a 653d 5b5b 352c 2037 5d2c  el_size=[[5, 7],
+0000edd0: 205b 352c 2037 5d5d 2c20 7374 7269 6465   [5, 7]], stride
+0000ede0: 3d5b 5b33 2c20 335d 2c20 5b33 2c20 335d  =[[3, 3], [3, 3]
+0000edf0: 5d29 0a20 2020 2020 2020 2020 2020 2070  ]).            p
+0000ee00: 7265 7472 6169 6e65 645f 6d6f 6465 6c5f  retrained_model_
+0000ee10: 7061 7468 203d 2073 656c 662e 7061 7468  path = self.path
+0000ee20: 5f6f 665f 656d 6265 6464 696e 6773 2e73  _of_embeddings.s
+0000ee30: 706c 6974 2822 656d 6265 6464 696e 6773  plit("embeddings
+0000ee40: 2229 5b0a 2020 2020 2020 2020 2020 2020  ")[.            
+0000ee50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ee60: 2020 2020 2020 2020 2020 2020 305d 202b              0] +
+0000ee70: 2022 7472 6169 6e65 645f 6d6f 6465 6c73   "trained_models
+0000ee80: 2f74 7261 696e 6564 5f22 202b 2070 7265  /trained_" + pre
+0000ee90: 6469 6374 6f72 5f6e 616d 6520 2b20 222e  dictor_name + ".
+0000eea0: 7074 220a 2020 2020 2020 2020 2020 2020  pt".            
+0000eeb0: 6966 206c 6f61 645f 7072 6574 7261 696e  if load_pretrain
+0000eec0: 6564 2061 6e64 206f 732e 7061 7468 2e69  ed and os.path.i
+0000eed0: 7366 696c 6528 7072 6574 7261 696e 6564  sfile(pretrained
+0000eee0: 5f6d 6f64 656c 5f70 6174 6829 3a0a 2020  _model_path):.  
+0000eef0: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
+0000ef00: 6465 6c2e 6c6f 6164 5f73 7461 7465 5f64  del.load_state_d
+0000ef10: 6963 7428 746f 7263 682e 6c6f 6164 2870  ict(torch.load(p
+0000ef20: 7265 7472 6169 6e65 645f 6d6f 6465 6c5f  retrained_model_
+0000ef30: 7061 7468 2c20 6d61 705f 6c6f 6361 7469  path, map_locati
+0000ef40: 6f6e 3d73 656c 662e 6465 7669 6365 2929  on=self.device))
+0000ef50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ef60: 206d 6f64 656c 2e65 7661 6c28 290a 2020   model.eval().  
+0000ef70: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0000ef80: 696e 7428 225c 6e20 4c6f 6164 6564 206c  int("\n Loaded l
+0000ef90: 656e 6774 6820 7072 6564 6963 746f 7221  ength predictor!
+0000efa0: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
+0000efb0: 6574 7572 6e20 6d6f 6465 6c0a 0a20 2020  eturn model..   
+0000efc0: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
+0000efd0: 2e6c 6f61 645f 7072 6574 7261 696e 6564  .load_pretrained
+0000efe0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0000eff0: 7475 726e 205b 6c6f 6164 5f6d 6f64 656c  turn [load_model
+0000f000: 2873 656c 662e 7072 6564 6963 746f 725f  (self.predictor_
+0000f010: 6e61 6d65 2c20 7365 6c66 2e6c 6f61 645f  name, self.load_
+0000f020: 7072 6574 7261 696e 6564 295d 0a20 2020  pretrained)].   
+0000f030: 2020 2020 2065 6c69 6620 7365 6c66 2e6c       elif self.l
+0000f040: 6f61 645f 7072 6574 7261 696e 6564 2061  oad_pretrained a
+0000f050: 6e64 2069 7369 6e73 7461 6e63 6528 7365  nd isinstance(se
+0000f060: 6c66 2e70 7265 7472 6169 6e65 645f 7072  lf.pretrained_pr
+0000f070: 6564 6963 746f 725f 6e61 6d65 2c20 7374  edictor_name, st
+0000f080: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+0000f090: 7265 7475 726e 205b 6c6f 6164 5f6d 6f64  return [load_mod
+0000f0a0: 656c 2873 656c 662e 7072 6574 7261 696e  el(self.pretrain
+0000f0b0: 6564 5f70 7265 6469 6374 6f72 5f6e 616d  ed_predictor_nam
+0000f0c0: 652c 2073 656c 662e 6c6f 6164 5f70 7265  e, self.load_pre
+0000f0d0: 7472 6169 6e65 6429 5d0a 2020 2020 2020  trained)].      
+0000f0e0: 2020 656c 6966 2073 656c 662e 6c6f 6164    elif self.load
+0000f0f0: 5f70 7265 7472 6169 6e65 6420 616e 6420  _pretrained and 
+0000f100: 6973 696e 7374 616e 6365 2873 656c 662e  isinstance(self.
+0000f110: 7072 6574 7261 696e 6564 5f70 7265 6469  pretrained_predi
+0000f120: 6374 6f72 5f6e 616d 652c 206c 6973 7429  ctor_name, list)
+0000f130: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0000f140: 7475 726e 205b 6c6f 6164 5f6d 6f64 656c  turn [load_model
+0000f150: 286e 616d 652c 2073 656c 662e 6c6f 6164  (name, self.load
+0000f160: 5f70 7265 7472 6169 6e65 6429 2066 6f72  _pretrained) for
+0000f170: 206e 616d 6520 696e 2073 656c 662e 7072   name in self.pr
+0000f180: 6574 7261 696e 6564 5f70 7265 6469 6374  etrained_predict
+0000f190: 6f72 5f6e 616d 655d 0a0a 2020 2020 6465  or_name]..    de
+0000f1a0: 6620 7265 6672 6573 6828 7365 6c66 293a  f refresh(self):
+0000f1b0: 0a20 2020 2020 2020 2073 656c 662e 6c65  .        self.le
+0000f1c0: 6e67 7468 5f70 7265 6469 6374 6f72 203d  ngth_predictor =
+0000f1d0: 2073 656c 662e 6765 745f 6c65 6e67 7468   self.get_length
+0000f1e0: 5f70 7265 6469 6374 6f72 2829 0a0a 2020  _predictor()..  
+0000f1f0: 2020 6465 6620 636f 6c6c 6174 655f 6261    def collate_ba
+0000f200: 7463 6828 7365 6c66 2c20 6261 7463 6829  tch(self, batch)
+0000f210: 3a0a 2020 2020 2020 2020 706f 735f 656d  :.        pos_em
+0000f220: 625f 6c69 7374 203d 205b 5d0a 2020 2020  b_list = [].    
+0000f230: 2020 2020 6e65 675f 656d 625f 6c69 7374      neg_emb_list
+0000f240: 203d 205b 5d0a 2020 2020 2020 2020 7461   = [].        ta
+0000f250: 7267 6574 5f6c 6162 656c 7320 3d20 5b5d  rget_labels = []
+0000f260: 0a20 2020 2020 2020 2066 6f72 2070 6f73  .        for pos
+0000f270: 5f65 6d62 2c20 6e65 675f 656d 622c 206c  _emb, neg_emb, l
+0000f280: 6162 656c 2069 6e20 6261 7463 683a 0a20  abel in batch:. 
+0000f290: 2020 2020 2020 2020 2020 2069 6620 706f             if po
+0000f2a0: 735f 656d 622e 6e64 696d 2021 3d20 323a  s_emb.ndim != 2:
+0000f2b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f2c0: 2070 6f73 5f65 6d62 203d 2070 6f73 5f65   pos_emb = pos_e
+0000f2d0: 6d62 2e72 6573 6861 7065 2831 2c20 2d31  mb.reshape(1, -1
+0000f2e0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+0000f2f0: 206e 6567 5f65 6d62 2e6e 6469 6d20 213d   neg_emb.ndim !=
+0000f300: 2032 3a0a 2020 2020 2020 2020 2020 2020   2:.            
+0000f310: 2020 2020 6e65 675f 656d 6220 3d20 6e65      neg_emb = ne
+0000f320: 675f 656d 622e 7265 7368 6170 6528 312c  g_emb.reshape(1,
+0000f330: 202d 3129 0a20 2020 2020 2020 2020 2020   -1).           
+0000f340: 2070 6f73 5f65 6d62 5f6c 6973 742e 6170   pos_emb_list.ap
+0000f350: 7065 6e64 2870 6f73 5f65 6d62 290a 2020  pend(pos_emb).  
+0000f360: 2020 2020 2020 2020 2020 6e65 675f 656d            neg_em
+0000f370: 625f 6c69 7374 2e61 7070 656e 6428 6e65  b_list.append(ne
+0000f380: 675f 656d 6229 0a20 2020 2020 2020 2020  g_emb).         
+0000f390: 2020 2074 6172 6765 745f 6c61 6265 6c73     target_labels
+0000f3a0: 2e61 7070 656e 6428 6c61 6265 6c29 0a20  .append(label). 
+0000f3b0: 2020 2020 2020 2070 6f73 5f65 6d62 5f6c         pos_emb_l
+0000f3c0: 6973 745b 305d 203d 2046 2e70 6164 2870  ist[0] = F.pad(p
+0000f3d0: 6f73 5f65 6d62 5f6c 6973 745b 305d 2c20  os_emb_list[0], 
+0000f3e0: 2830 2c20 302c 2030 2c20 7365 6c66 2e6e  (0, 0, 0, self.n
+0000f3f0: 756d 5f65 7861 6d70 6c65 7320 2d20 706f  um_examples - po
+0000f400: 735f 656d 625f 6c69 7374 5b30 5d2e 7368  s_emb_list[0].sh
+0000f410: 6170 655b 305d 292c 2022 636f 6e73 7461  ape[0]), "consta
+0000f420: 6e74 222c 2030 290a 2020 2020 2020 2020  nt", 0).        
+0000f430: 706f 735f 656d 625f 6c69 7374 203d 2070  pos_emb_list = p
+0000f440: 6164 5f73 6571 7565 6e63 6528 706f 735f  ad_sequence(pos_
+0000f450: 656d 625f 6c69 7374 2c20 6261 7463 685f  emb_list, batch_
+0000f460: 6669 7273 743d 5472 7565 2c20 7061 6464  first=True, padd
+0000f470: 696e 675f 7661 6c75 653d 3029 0a20 2020  ing_value=0).   
+0000f480: 2020 2020 206e 6567 5f65 6d62 5f6c 6973       neg_emb_lis
+0000f490: 745b 305d 203d 2046 2e70 6164 286e 6567  t[0] = F.pad(neg
+0000f4a0: 5f65 6d62 5f6c 6973 745b 305d 2c20 2830  _emb_list[0], (0
+0000f4b0: 2c20 302c 2030 2c20 7365 6c66 2e6e 756d  , 0, 0, self.num
+0000f4c0: 5f65 7861 6d70 6c65 7320 2d20 6e65 675f  _examples - neg_
+0000f4d0: 656d 625f 6c69 7374 5b30 5d2e 7368 6170  emb_list[0].shap
+0000f4e0: 655b 305d 292c 2022 636f 6e73 7461 6e74  e[0]), "constant
+0000f4f0: 222c 2030 290a 2020 2020 2020 2020 6e65  ", 0).        ne
+0000f500: 675f 656d 625f 6c69 7374 203d 2070 6164  g_emb_list = pad
+0000f510: 5f73 6571 7565 6e63 6528 6e65 675f 656d  _sequence(neg_em
+0000f520: 625f 6c69 7374 2c20 6261 7463 685f 6669  b_list, batch_fi
+0000f530: 7273 743d 5472 7565 2c20 7061 6464 696e  rst=True, paddin
+0000f540: 675f 7661 6c75 653d 3029 0a20 2020 2020  g_value=0).     
+0000f550: 2020 2072 6574 7572 6e20 706f 735f 656d     return pos_em
+0000f560: 625f 6c69 7374 2c20 6e65 675f 656d 625f  b_list, neg_emb_
+0000f570: 6c69 7374 2c20 746f 7263 682e 4c6f 6e67  list, torch.Long
+0000f580: 5465 6e73 6f72 2874 6172 6765 745f 6c61  Tensor(target_la
+0000f590: 6265 6c73 290a 0a20 2020 2064 6566 2063  bels)..    def c
+0000f5a0: 6f6c 6c61 7465 5f62 6174 6368 5f69 6e66  ollate_batch_inf
+0000f5b0: 6572 656e 6365 2873 656c 662c 2062 6174  erence(self, bat
+0000f5c0: 6368 293a 0a20 2020 2020 2020 2070 6f73  ch):.        pos
+0000f5d0: 5f65 6d62 5f6c 6973 7420 3d20 5b5d 0a20  _emb_list = []. 
+0000f5e0: 2020 2020 2020 206e 6567 5f65 6d62 5f6c         neg_emb_l
+0000f5f0: 6973 7420 3d20 5b5d 0a20 2020 2020 2020  ist = [].       
+0000f600: 2066 6f72 2070 6f73 5f65 6d62 2c20 6e65   for pos_emb, ne
+0000f610: 675f 656d 6220 696e 2062 6174 6368 3a0a  g_emb in batch:.
+0000f620: 2020 2020 2020 2020 2020 2020 6966 2070              if p
+0000f630: 6f73 5f65 6d62 2e6e 6469 6d20 213d 2032  os_emb.ndim != 2
+0000f640: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000f650: 2020 706f 735f 656d 6220 3d20 706f 735f    pos_emb = pos_
+0000f660: 656d 622e 7265 7368 6170 6528 312c 202d  emb.reshape(1, -
+0000f670: 3129 0a20 2020 2020 2020 2020 2020 2069  1).            i
+0000f680: 6620 6e65 675f 656d 622e 6e64 696d 2021  f neg_emb.ndim !
+0000f690: 3d20 323a 0a20 2020 2020 2020 2020 2020  = 2:.           
+0000f6a0: 2020 2020 206e 6567 5f65 6d62 203d 206e       neg_emb = n
+0000f6b0: 6567 5f65 6d62 2e72 6573 6861 7065 2831  eg_emb.reshape(1
+0000f6c0: 2c20 2d31 290a 2020 2020 2020 2020 2020  , -1).          
+0000f6d0: 2020 706f 735f 656d 625f 6c69 7374 2e61    pos_emb_list.a
+0000f6e0: 7070 656e 6428 706f 735f 656d 6229 0a20  ppend(pos_emb). 
+0000f6f0: 2020 2020 2020 2020 2020 206e 6567 5f65             neg_e
+0000f700: 6d62 5f6c 6973 742e 6170 7065 6e64 286e  mb_list.append(n
+0000f710: 6567 5f65 6d62 290a 2020 2020 2020 2020  eg_emb).        
+0000f720: 706f 735f 656d 625f 6c69 7374 5b30 5d20  pos_emb_list[0] 
+0000f730: 3d20 462e 7061 6428 706f 735f 656d 625f  = F.pad(pos_emb_
+0000f740: 6c69 7374 5b30 5d2c 2028 302c 2030 2c20  list[0], (0, 0, 
+0000f750: 302c 2073 656c 662e 6e75 6d5f 6578 616d  0, self.num_exam
+0000f760: 706c 6573 202d 2070 6f73 5f65 6d62 5f6c  ples - pos_emb_l
+0000f770: 6973 745b 305d 2e73 6861 7065 5b30 5d29  ist[0].shape[0])
+0000f780: 2c20 2263 6f6e 7374 616e 7422 2c20 3029  , "constant", 0)
+0000f790: 0a20 2020 2020 2020 2070 6f73 5f65 6d62  .        pos_emb
+0000f7a0: 5f6c 6973 7420 3d20 7061 645f 7365 7175  _list = pad_sequ
+0000f7b0: 656e 6365 2870 6f73 5f65 6d62 5f6c 6973  ence(pos_emb_lis
+0000f7c0: 742c 2062 6174 6368 5f66 6972 7374 3d54  t, batch_first=T
+0000f7d0: 7275 652c 2070 6164 6469 6e67 5f76 616c  rue, padding_val
+0000f7e0: 7565 3d30 290a 2020 2020 2020 2020 6e65  ue=0).        ne
+0000f7f0: 675f 656d 625f 6c69 7374 5b30 5d20 3d20  g_emb_list[0] = 
+0000f800: 462e 7061 6428 6e65 675f 656d 625f 6c69  F.pad(neg_emb_li
+0000f810: 7374 5b30 5d2c 2028 302c 2030 2c20 302c  st[0], (0, 0, 0,
+0000f820: 2073 656c 662e 6e75 6d5f 6578 616d 706c   self.num_exampl
+0000f830: 6573 202d 206e 6567 5f65 6d62 5f6c 6973  es - neg_emb_lis
+0000f840: 745b 305d 2e73 6861 7065 5b30 5d29 2c20  t[0].shape[0]), 
+0000f850: 2263 6f6e 7374 616e 7422 2c20 3029 0a20  "constant", 0). 
+0000f860: 2020 2020 2020 206e 6567 5f65 6d62 5f6c         neg_emb_l
+0000f870: 6973 7420 3d20 7061 645f 7365 7175 656e  ist = pad_sequen
+0000f880: 6365 286e 6567 5f65 6d62 5f6c 6973 742c  ce(neg_emb_list,
+0000f890: 2062 6174 6368 5f66 6972 7374 3d54 7275   batch_first=Tru
+0000f8a0: 652c 2070 6164 6469 6e67 5f76 616c 7565  e, padding_value
+0000f8b0: 3d30 290a 2020 2020 2020 2020 7265 7475  =0).        retu
+0000f8c0: 726e 2070 6f73 5f65 6d62 5f6c 6973 742c  rn pos_emb_list,
+0000f8d0: 206e 6567 5f65 6d62 5f6c 6973 740a 0a20   neg_emb_list.. 
+0000f8e0: 2020 2064 6566 2070 6f73 5f6e 6567 5f74     def pos_neg_t
+0000f8f0: 6f5f 7465 6e73 6f72 2873 656c 662c 2070  o_tensor(self, p
+0000f900: 6f73 3a20 556e 696f 6e5b 5365 745b 4f57  os: Union[Set[OW
+0000f910: 4c4e 616d 6564 496e 6469 7669 6475 616c  LNamedIndividual
+0000f920: 5d5d 2c20 6e65 673a 2055 6e69 6f6e 5b53  ]], neg: Union[S
+0000f930: 6574 5b4f 574c 4e61 6d65 6449 6e64 6976  et[OWLNamedIndiv
+0000f940: 6964 7561 6c5d 2c20 5365 745b 7374 725d  idual], Set[str]
+0000f950: 5d29 3a0a 2020 2020 2020 2020 6966 2069  ]):.        if i
+0000f960: 7369 6e73 7461 6e63 6528 706f 735b 305d  sinstance(pos[0]
+0000f970: 2c20 4f57 4c4e 616d 6564 496e 6469 7669  , OWLNamedIndivi
+0000f980: 6475 616c 293a 0a20 2020 2020 2020 2020  dual):.         
+0000f990: 2020 2070 6f73 5f73 7472 203d 205b 696e     pos_str = [in
+0000f9a0: 642e 7374 722e 7370 6c69 7428 222f 2229  d.str.split("/")
+0000f9b0: 5b2d 315d 2066 6f72 2069 6e64 2069 6e20  [-1] for ind in 
+0000f9c0: 706f 735d 5b3a 7365 6c66 2e6e 756d 5f65  pos][:self.num_e
+0000f9d0: 7861 6d70 6c65 735d 0a20 2020 2020 2020  xamples].       
+0000f9e0: 2020 2020 206e 6567 5f73 7472 203d 205b       neg_str = [
+0000f9f0: 696e 642e 7374 722e 7370 6c69 7428 222f  ind.str.split("/
+0000fa00: 2229 5b2d 315d 2066 6f72 2069 6e64 2069  ")[-1] for ind i
+0000fa10: 6e20 6e65 675d 5b3a 7365 6c66 2e6e 756d  n neg][:self.num
+0000fa20: 5f65 7861 6d70 6c65 735d 0a20 2020 2020  _examples].     
+0000fa30: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+0000fa40: 6365 2870 6f73 5b30 5d2c 2073 7472 293a  ce(pos[0], str):
+0000fa50: 0a20 2020 2020 2020 2020 2020 2070 6f73  .            pos
+0000fa60: 5f73 7472 203d 2070 6f73 5b3a 7365 6c66  _str = pos[:self
+0000fa70: 2e6e 756d 5f65 7861 6d70 6c65 735d 0a20  .num_examples]. 
+0000fa80: 2020 2020 2020 2020 2020 206e 6567 5f73             neg_s
+0000fa90: 7472 203d 206e 6567 5b3a 7365 6c66 2e6e  tr = neg[:self.n
+0000faa0: 756d 5f65 7861 6d70 6c65 735d 0a20 2020  um_examples].   
+0000fab0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0000fac0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+0000fad0: 7565 4572 726f 7228 6622 496e 7661 6c69  ueError(f"Invali
+0000fae0: 6420 696e 7075 7420 7479 7065 2c20 7761  d input type, wa
+0000faf0: 7320 6578 7065 6374 696e 6720 4f57 4c4e  s expecting OWLN
+0000fb00: 616d 6564 496e 6469 7669 6475 616c 206f  amedIndividual o
+0000fb10: 7220 7374 7220 6275 7420 666f 756e 6420  r str but found 
+0000fb20: 7b74 7970 6528 706f 735b 305d 297d 2229  {type(pos[0])}")
+0000fb30: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
+0000fb40: 2073 656c 662e 6c6f 6164 5f70 7265 7472   self.load_pretr
+0000fb50: 6169 6e65 6420 616e 6420 7365 6c66 2e70  ained and self.p
+0000fb60: 7265 7472 6169 6e65 645f 7072 6564 6963  retrained_predic
+0000fb70: 746f 725f 6e61 6d65 2c20 5c0a 2020 2020  tor_name, \.    
+0000fb80: 2020 2020 2020 2020 224e 6f20 7072 6574          "No pret
+0000fb90: 7261 696e 6564 206d 6f64 656c 2066 6f75  rained model fou
+0000fba0: 6e64 2e20 506c 6561 7365 2066 6972 7374  nd. Please first
+0000fbb0: 2074 7261 696e 206c 656e 6774 6820 7072   train length pr
+0000fbc0: 6564 6963 746f 7273 2c20 7365 6520 7468  edictors, see th
+0000fbd0: 6520 3c3c 7472 6169 6e3e 3e20 6d65 7468  e <<train>> meth
+0000fbe0: 6f64 2062 656c 6f77 220a 0a20 2020 2020  od below"..     
+0000fbf0: 2020 2064 6174 6173 6574 203d 2043 4c49     dataset = CLI
+0000fc00: 5044 6174 614c 6f61 6465 7249 6e66 6572  PDataLoaderInfer
+0000fc10: 656e 6365 285b 2822 222c 2070 6f73 5f73  ence([("", pos_s
+0000fc20: 7472 2c20 6e65 675f 7374 7229 5d2c 2073  tr, neg_str)], s
+0000fc30: 656c 662e 696e 7374 616e 6365 5f65 6d62  elf.instance_emb
+0000fc40: 6564 6469 6e67 732c 2046 616c 7365 2c20  eddings, False, 
+0000fc50: 4661 6c73 6529 0a20 2020 2020 2020 2064  False).        d
+0000fc60: 6174 616c 6f61 6465 7220 3d20 4461 7461  ataloader = Data
+0000fc70: 4c6f 6164 6572 2864 6174 6173 6574 2c20  Loader(dataset, 
+0000fc80: 6261 7463 685f 7369 7a65 3d31 2c20 6e75  batch_size=1, nu
+0000fc90: 6d5f 776f 726b 6572 733d 7365 6c66 2e6e  m_workers=self.n
+0000fca0: 756d 5f77 6f72 6b65 7273 2c0a 2020 2020  um_workers,.    
+0000fcb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fcc0: 2020 2020 2020 2020 2020 2020 636f 6c6c              coll
+0000fcd0: 6174 655f 666e 3d73 656c 662e 636f 6c6c  ate_fn=self.coll
+0000fce0: 6174 655f 6261 7463 685f 696e 6665 7265  ate_batch_infere
+0000fcf0: 6e63 652c 2073 6875 6666 6c65 3d46 616c  nce, shuffle=Fal
+0000fd00: 7365 290a 2020 2020 2020 2020 785f 706f  se).        x_po
+0000fd10: 732c 2078 5f6e 6567 203d 206e 6578 7428  s, x_neg = next(
+0000fd20: 6974 6572 2864 6174 616c 6f61 6465 7229  iter(dataloader)
+0000fd30: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0000fd40: 2078 5f70 6f73 2c20 785f 6e65 670a 0a20   x_pos, x_neg.. 
+0000fd50: 2020 2064 6566 2070 7265 6469 6374 5f6c     def predict_l
+0000fd60: 656e 6774 6828 7365 6c66 2c20 6d6f 6465  ength(self, mode
+0000fd70: 6c73 2c20 7831 2c20 7832 293a 0a20 2020  ls, x1, x2):.   
+0000fd80: 2020 2020 2066 6f72 2069 2c20 6d6f 6465       for i, mode
+0000fd90: 6c20 696e 2065 6e75 6d65 7261 7465 286d  l in enumerate(m
+0000fda0: 6f64 656c 7329 3a0a 2020 2020 2020 2020  odels):.        
+0000fdb0: 2020 2020 6d6f 6465 6c2e 6576 616c 2829      model.eval()
+0000fdc0: 0a20 2020 2020 2020 2020 2020 206d 6f64  .            mod
+0000fdd0: 656c 2e74 6f28 7365 6c66 2e64 6576 6963  el.to(self.devic
+0000fde0: 6529 0a20 2020 2020 2020 2020 2020 2078  e).            x
+0000fdf0: 3120 3d20 7831 2e74 6f28 7365 6c66 2e64  1 = x1.to(self.d
+0000fe00: 6576 6963 6529 0a20 2020 2020 2020 2020  evice).         
+0000fe10: 2020 2078 3220 3d20 7832 2e74 6f28 7365     x2 = x2.to(se
+0000fe20: 6c66 2e64 6576 6963 6529 0a20 2020 2020  lf.device).     
+0000fe30: 2020 2020 2020 2069 6620 6920 3d3d 2030         if i == 0
+0000fe40: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000fe50: 2020 7363 6f72 6573 203d 206d 6f64 656c    scores = model
+0000fe60: 2878 312c 2078 3229 0a20 2020 2020 2020  (x1, x2).       
+0000fe70: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0000fe80: 2020 2020 2020 2020 2020 2073 6320 3d20             sc = 
+0000fe90: 6d6f 6465 6c28 7831 2c20 7832 290a 2020  model(x1, x2).  
+0000fea0: 2020 2020 2020 2020 2020 2020 2020 7363                sc
+0000feb0: 6f72 6573 203d 2073 636f 7265 7320 2b20  ores = scores + 
+0000fec0: 7363 0a20 2020 2020 2020 2073 636f 7265  sc.        score
+0000fed0: 7320 3d20 7363 6f72 6573 202f 206c 656e  s = scores / len
+0000fee0: 286d 6f64 656c 7329 0a20 2020 2020 2020  (models).       
+0000fef0: 2070 7265 6469 6374 696f 6e20 3d20 696e   prediction = in
+0000ff00: 7428 7363 6f72 6573 2e61 7267 6d61 7828  t(scores.argmax(
+0000ff10: 3129 2e63 7075 2829 290a 2020 2020 2020  1).cpu()).      
+0000ff20: 2020 7072 696e 7428 6622 5c6e 2a2a 2a2a    print(f"\n****
+0000ff30: 2a20 5072 6564 6963 7465 6420 6c65 6e67  * Predicted leng
+0000ff40: 7468 3a20 7b70 7265 6469 6374 696f 6e7d  th: {prediction}
+0000ff50: 202a 2a2a 2a2a 5c6e 2229 0a20 2020 2020   *****\n").     
+0000ff60: 2020 2072 6574 7572 6e20 7072 6564 6963     return predic
+0000ff70: 7469 6f6e 0a0a 2020 2020 6465 6620 6669  tion..    def fi
+0000ff80: 7428 7365 6c66 2c20 2a61 7267 732c 202a  t(self, *args, *
+0000ff90: 2a6b 7761 7267 7329 3a0a 2020 2020 2020  *kwargs):.      
+0000ffa0: 2020 2222 220a 2020 2020 2020 2020 4669    """.        Fi
+0000ffb0: 6e64 2068 7970 6f74 6865 7365 7320 7468  nd hypotheses th
+0000ffc0: 6174 2065 7870 6c61 696e 2070 6f73 2061  at explain pos a
+0000ffd0: 6e64 206e 6567 2e0a 2020 2020 2020 2020  nd neg..        
+0000ffe0: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
+0000fff0: 2e63 6c65 616e 2829 0a20 2020 2020 2020  .clean().       
+00010000: 206d 6178 5f72 756e 7469 6d65 203d 206b   max_runtime = k
+00010010: 7761 7267 732e 706f 7028 226d 6178 5f72  wargs.pop("max_r
+00010020: 756e 7469 6d65 222c 204e 6f6e 6529 0a20  untime", None). 
+00010030: 2020 2020 2020 206c 6561 726e 696e 675f         learning_
+00010040: 7072 6f62 6c65 6d20 3d20 7365 6c66 2e63  problem = self.c
+00010050: 6f6e 7374 7275 6374 5f6c 6561 726e 696e  onstruct_learnin
+00010060: 675f 7072 6f62 6c65 6d28 506f 734e 6567  g_problem(PosNeg
+00010070: 4c50 5374 616e 6461 7264 2c20 6172 6773  LPStandard, args
+00010080: 2c20 6b77 6172 6773 290a 0a20 2020 2020  , kwargs)..     
+00010090: 2020 2061 7373 6572 7420 6e6f 7420 7365     assert not se
+000100a0: 6c66 2e73 6561 7263 685f 7472 6565 0a20  lf.search_tree. 
+000100b0: 2020 2020 2020 2073 656c 662e 5f6c 6561         self._lea
+000100c0: 726e 696e 675f 7072 6f62 6c65 6d20 3d20  rning_problem = 
+000100d0: 6c65 6172 6e69 6e67 5f70 726f 626c 656d  learning_problem
+000100e0: 2e65 6e63 6f64 655f 6b62 2873 656c 662e  .encode_kb(self.
+000100f0: 6b62 290a 0a20 2020 2020 2020 2069 6620  kb)..        if 
+00010100: 6d61 785f 7275 6e74 696d 6520 6973 206e  max_runtime is n
+00010110: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00010120: 2020 2020 2073 656c 662e 5f6d 6178 5f72       self._max_r
+00010130: 756e 7469 6d65 203d 206d 6178 5f72 756e  untime = max_run
+00010140: 7469 6d65 0a20 2020 2020 2020 2065 6c73  time.        els
+00010150: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+00010160: 656c 662e 5f6d 6178 5f72 756e 7469 6d65  elf._max_runtime
+00010170: 203d 2073 656c 662e 6d61 785f 7275 6e74   = self.max_runt
+00010180: 696d 650a 0a20 2020 2020 2020 2069 6620  ime..        if 
+00010190: 2873 656c 662e 7072 6574 7261 696e 6564  (self.pretrained
+000101a0: 5f70 7265 6469 6374 6f72 5f6e 616d 6520  _predictor_name 
+000101b0: 6973 206e 6f74 204e 6f6e 6529 2061 6e64  is not None) and
+000101c0: 2028 7365 6c66 2e6c 656e 6774 685f 7072   (self.length_pr
+000101d0: 6564 6963 746f 7220 6973 206e 6f74 204e  edictor is not N
+000101e0: 6f6e 6529 3a0a 2020 2020 2020 2020 2020  one):.          
+000101f0: 2020 785f 706f 732c 2078 5f6e 6567 203d    x_pos, x_neg =
+00010200: 2073 656c 662e 706f 735f 6e65 675f 746f   self.pos_neg_to
+00010210: 5f74 656e 736f 7228 6c69 7374 2873 656c  _tensor(list(sel
+00010220: 662e 5f6c 6561 726e 696e 675f 7072 6f62  f._learning_prob
+00010230: 6c65 6d2e 6b62 5f70 6f73 295b 3a73 656c  lem.kb_pos)[:sel
+00010240: 662e 6e75 6d5f 6578 616d 706c 6573 5d2c  f.num_examples],
+00010250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010280: 2020 206c 6973 7428 7365 6c66 2e5f 6c65     list(self._le
+00010290: 6172 6e69 6e67 5f70 726f 626c 656d 2e6b  arning_problem.k
+000102a0: 625f 6e65 6729 5b3a 7365 6c66 2e6e 756d  b_neg)[:self.num
+000102b0: 5f65 7861 6d70 6c65 735d 290a 2020 2020  _examples]).    
+000102c0: 2020 2020 2020 2020 6d61 785f 6c65 6e67          max_leng
+000102d0: 7468 203d 2073 656c 662e 7072 6564 6963  th = self.predic
+000102e0: 745f 6c65 6e67 7468 2873 656c 662e 6c65  t_length(self.le
+000102f0: 6e67 7468 5f70 7265 6469 6374 6f72 2c20  ngth_predictor, 
+00010300: 785f 706f 732c 2078 5f6e 6567 290a 2020  x_pos, x_neg).  
+00010310: 2020 2020 2020 2020 2020 7365 6c66 2e6f            self.o
+00010320: 7065 7261 746f 722e 6d61 785f 6368 696c  perator.max_chil
+00010330: 645f 6c65 6e67 7468 203d 206d 6178 5f6c  d_length = max_l
+00010340: 656e 6774 680a 2020 2020 2020 2020 2020  ength.          
+00010350: 2020 7072 696e 7428 6627 2a2a 2a2a 2a20    print(f'***** 
+00010360: 5072 6564 6963 7465 6420 6c65 6e67 7468  Predicted length
+00010370: 3a20 7b6d 6178 5f6c 656e 6774 687d 202a  : {max_length} *
+00010380: 2a2a 2a2a 2729 0a20 2020 2020 2020 2065  ****').        e
+00010390: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000103a0: 2070 7269 6e74 2827 5c6e 2121 2120 4e6f   print('\n!!! No
+000103b0: 206c 656e 6774 6820 7072 6564 6963 746f   length predicto
+000103c0: 7220 7072 6f76 6964 6564 2c20 7275 6e6e  r provided, runn
+000103d0: 696e 6720 434c 4950 2077 6974 686f 7574  ing CLIP without
+000103e0: 206c 656e 6774 6820 7072 6564 6963 746f   length predicto
+000103f0: 7220 2121 2127 290a 0a20 2020 2020 2020  r !!!')..       
+00010400: 2072 6f6f 7420 3d20 7365 6c66 2e6d 616b   root = self.mak
+00010410: 655f 6e6f 6465 285f 636f 6e63 6570 745f  e_node(_concept_
+00010420: 6f70 6572 616e 645f 736f 7274 6572 2e73  operand_sorter.s
+00010430: 6f72 7428 7365 6c66 2e73 7461 7274 5f63  ort(self.start_c
+00010440: 6c61 7373 292c 2069 735f 726f 6f74 3d54  lass), is_root=T
+00010450: 7275 6529 0a20 2020 2020 2020 2073 656c  rue).        sel
+00010460: 662e 5f61 6464 5f6e 6f64 6528 726f 6f74  f._add_node(root
+00010470: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
+00010480: 6173 7365 7274 206c 656e 2873 656c 662e  assert len(self.
+00010490: 6865 7572 6973 7469 635f 7175 6575 6529  heuristic_queue)
+000104a0: 203d 3d20 310a 2020 2020 2020 2020 2320   == 1.        # 
+000104b0: 544f 444f 3a43 443a 7375 6767 6573 7420  TODO:CD:suggest 
+000104c0: 746f 2061 6464 2061 6e6f 7468 6572 2061  to add another a
+000104d0: 7373 6572 742c 652e 672e 2061 7373 6572  ssert,e.g. asser
+000104e0: 7420 232e 206f 6620 696e 7374 616e 6365  t #. of instance
+000104f0: 2069 6e20 726f 6f74 203e 2031 0a0a 2020   in root > 1..  
+00010500: 2020 2020 2020 7365 6c66 2e73 7461 7274        self.start
+00010510: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
+00010520: 6528 290a 2020 2020 2020 2020 666f 7220  e().        for 
+00010530: 6a20 696e 2072 616e 6765 2831 2c20 7365  j in range(1, se
+00010540: 6c66 2e69 7465 725f 626f 756e 6429 3a0a  lf.iter_bound):.
+00010550: 2020 2020 2020 2020 2020 2020 6d6f 7374              most
+00010560: 5f70 726f 6d69 7369 6e67 203d 2073 656c  _promising = sel
+00010570: 662e 6e65 7874 5f6e 6f64 655f 746f 5f65  f.next_node_to_e
+00010580: 7870 616e 6428 6a29 0a20 2020 2020 2020  xpand(j).       
+00010590: 2020 2020 2074 7265 655f 7061 7265 6e74       tree_parent
+000105a0: 203d 2073 656c 662e 7472 6565 5f6e 6f64   = self.tree_nod
+000105b0: 6528 6d6f 7374 5f70 726f 6d69 7369 6e67  e(most_promising
+000105c0: 290a 2020 2020 2020 2020 2020 2020 6d69  ).            mi
+000105d0: 6e69 6d75 6d5f 6c65 6e67 7468 203d 206d  nimum_length = m
+000105e0: 6f73 745f 7072 6f6d 6973 696e 672e 685f  ost_promising.h_
+000105f0: 6578 700a 2020 2020 2020 2020 2020 2020  exp.            
+00010600: 6966 206c 6f67 6765 722e 6973 456e 6162  if logger.isEnab
+00010610: 6c65 6446 6f72 286f 706c 6f67 6769 6e67  ledFor(oplogging
+00010620: 2e54 5241 4345 293a 0a20 2020 2020 2020  .TRACE):.       
+00010630: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
+00010640: 6465 6275 6728 226e 6f77 2072 6566 696e  debug("now refin
+00010650: 696e 6720 2573 222c 206d 6f73 745f 7072  ing %s", most_pr
+00010660: 6f6d 6973 696e 6729 0a20 2020 2020 2020  omising).       
+00010670: 2020 2020 2066 6f72 2072 6566 2069 6e20       for ref in 
+00010680: 7365 6c66 2e64 6f77 6e77 6172 645f 7265  self.downward_re
+00010690: 6669 6e65 6d65 6e74 286d 6f73 745f 7072  finement(most_pr
+000106a0: 6f6d 6973 696e 6729 3a0a 2020 2020 2020  omising):.      
+000106b0: 2020 2020 2020 2020 2020 2320 7765 2069            # we i
+000106c0: 676e 6f72 6520 616c 6c20 7265 6669 6e65  gnore all refine
+000106d0: 6d65 6e74 7320 7769 7468 206c 6f77 6572  ments with lower
+000106e0: 206c 656e 6774 680a 2020 2020 2020 2020   length.        
+000106f0: 2020 2020 2020 2020 2320 2874 6869 7320          # (this 
+00010700: 616c 736f 2061 766f 6964 7320 6475 706c  also avoids dupl
+00010710: 6963 6174 6520 6e6f 6465 2063 6869 6c64  icate node child
+00010720: 7265 6e29 0a20 2020 2020 2020 2020 2020  ren).           
+00010730: 2020 2020 2023 2054 4f44 4f3a 2069 676e       # TODO: ign
+00010740: 6f72 6520 746f 6f20 6869 6768 2064 6570  ore too high dep
+00010750: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
+00010760: 2020 2069 6620 7265 662e 6c65 6e20 3c20     if ref.len < 
+00010770: 6d69 6e69 6d75 6d5f 6c65 6e67 7468 3a0a  minimum_length:.
+00010780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010790: 2020 2020 2320 6967 6e6f 7269 6e67 2072      # ignoring r
+000107a0: 6566 696e 656d 656e 742c 2069 7420 646f  efinement, it do
+000107b0: 6573 206e 6f74 2073 6174 6973 6679 206d  es not satisfy m
+000107c0: 696e 696d 756d 5f6c 656e 6774 6820 636f  inimum_length co
+000107d0: 6e64 6974 696f 6e0a 2020 2020 2020 2020  ndition.        
+000107e0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+000107f0: 696e 7565 0a0a 2020 2020 2020 2020 2020  inue..          
+00010800: 2020 2020 2020 2320 6e6f 7465 3a20 7472        # note: tr
+00010810: 6565 5f70 6172 656e 7420 6861 7320 746f  ee_parent has to
+00010820: 2062 6520 6571 7561 6c20 746f 206e 6f64   be equal to nod
+00010830: 655f 7472 6565 5f70 6172 656e 7428 7265  e_tree_parent(re
+00010840: 662e 7061 7265 6e74 5f6e 6f64 6529 210a  f.parent_node)!.
+00010850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010860: 6164 6465 6420 3d20 7365 6c66 2e5f 6164  added = self._ad
+00010870: 645f 6e6f 6465 2872 6566 2c20 7472 6565  d_node(ref, tree
+00010880: 5f70 6172 656e 7429 0a0a 2020 2020 2020  _parent)..      
+00010890: 2020 2020 2020 2020 2020 676f 616c 5f66            goal_f
+000108a0: 6f75 6e64 203d 2061 6464 6564 2061 6e64  ound = added and
+000108b0: 2072 6566 2e71 7561 6c69 7479 203d 3d20   ref.quality == 
+000108c0: 312e 300a 0a20 2020 2020 2020 2020 2020  1.0..           
+000108d0: 2020 2020 2069 6620 676f 616c 5f66 6f75       if goal_fou
+000108e0: 6e64 2061 6e64 2073 656c 662e 7465 726d  nd and self.term
+000108f0: 696e 6174 655f 6f6e 5f67 6f61 6c3a 0a20  inate_on_goal:. 
+00010900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010910: 2020 2072 6574 7572 6e20 7365 6c66 2e74     return self.t
+00010920: 6572 6d69 6e61 7465 2829 0a0a 2020 2020  erminate()..    
+00010930: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00010940: 6361 6c63 756c 6174 655f 6d69 6e5f 6d61  calculate_min_ma
+00010950: 783a 0a20 2020 2020 2020 2020 2020 2020  x:.             
+00010960: 2020 2023 2054 6869 7320 6973 2070 7572     # This is pur
+00010970: 656c 7920 6120 7374 6174 6973 7469 6361  ely a statistica
+00010980: 6c20 6675 6e63 7469 6f6e 2c20 6974 2064  l function, it d
+00010990: 6f65 7320 6e6f 7420 696e 666c 7565 6e63  oes not influenc
+000109a0: 6520 4345 4c4f 450a 2020 2020 2020 2020  e CELOE.        
+000109b0: 2020 2020 2020 2020 7365 6c66 2e75 7064          self.upd
+000109c0: 6174 655f 6d69 6e5f 6d61 785f 686f 7269  ate_min_max_hori
+000109d0: 7a5f 6578 7028 6d6f 7374 5f70 726f 6d69  z_exp(most_promi
+000109e0: 7369 6e67 290a 0a20 2020 2020 2020 2020  sing)..         
+000109f0: 2020 2069 6620 7469 6d65 2e74 696d 6528     if time.time(
+00010a00: 2920 2d20 7365 6c66 2e73 7461 7274 5f74  ) - self.start_t
+00010a10: 696d 6520 3e20 7365 6c66 2e5f 6d61 785f  ime > self._max_
+00010a20: 7275 6e74 696d 653a 0a20 2020 2020 2020  runtime:.       
+00010a30: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00010a40: 7365 6c66 2e74 6572 6d69 6e61 7465 2829  self.terminate()
+00010a50: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00010a60: 2073 656c 662e 6e75 6d62 6572 5f6f 665f   self.number_of_
+00010a70: 7465 7374 6564 5f63 6f6e 6365 7074 7320  tested_concepts 
+00010a80: 3e3d 2073 656c 662e 6d61 785f 6e75 6d5f  >= self.max_num_
+00010a90: 6f66 5f63 6f6e 6365 7074 735f 7465 7374  of_concepts_test
+00010aa0: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
+00010ab0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00010ac0: 7465 726d 696e 6174 6528 290a 0a20 2020  terminate()..   
+00010ad0: 2020 2020 2020 2020 2069 6620 6c6f 6767           if logg
+00010ae0: 6572 2e69 7345 6e61 626c 6564 466f 7228  er.isEnabledFor(
+00010af0: 6f70 6c6f 6767 696e 672e 5452 4143 4529  oplogging.TRACE)
+00010b00: 2061 6e64 206a 2025 2031 3030 203d 3d20   and j % 100 == 
+00010b10: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+00010b20: 2020 2073 656c 662e 5f6c 6f67 5f63 7572     self._log_cur
+00010b30: 7265 6e74 5f62 6573 7428 6a29 0a0a 2020  rent_best(j)..  
+00010b40: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00010b50: 662e 7465 726d 696e 6174 6528 290a 0a20  f.terminate().. 
+00010b60: 2020 2064 6566 2074 7261 696e 2873 656c     def train(sel
+00010b70: 662c 2064 6174 613a 2049 7465 7261 626c  f, data: Iterabl
+00010b80: 655b 4c69 7374 5b54 7570 6c65 5d5d 2c20  e[List[Tuple]], 
+00010b90: 6570 6f63 6873 3d33 3030 2c20 6261 7463  epochs=300, batc
+00010ba0: 685f 7369 7a65 3d32 3536 2c20 6c65 6172  h_size=256, lear
+00010bb0: 6e69 6e67 5f72 6174 653d 3165 2d33 2c20  ning_rate=1e-3, 
+00010bc0: 6465 6361 795f 7261 7465 3d30 2e30 2c0a  decay_rate=0.0,.
+00010bd0: 2020 2020 2020 2020 2020 2020 2020 636c                cl
+00010be0: 6970 5f76 616c 7565 3d35 2e30 2c20 7361  ip_value=5.0, sa
+00010bf0: 7665 5f6d 6f64 656c 3d54 7275 652c 2073  ve_model=True, s
+00010c00: 746f 7261 6765 5f70 6174 683d 4e6f 6e65  torage_path=None
+00010c10: 2c20 6f70 7469 6d69 7a65 723d 2741 6461  , optimizer='Ada
+00010c20: 6d27 2c20 7265 636f 7264 5f72 756e 7469  m', record_runti
+00010c30: 6d65 3d54 7275 652c 0a20 2020 2020 2020  me=True,.       
+00010c40: 2020 2020 2020 2065 7861 6d70 6c65 5f73         example_s
+00010c50: 697a 6573 3d4e 6f6e 652c 2073 6875 6666  izes=None, shuff
+00010c60: 6c65 5f65 7861 6d70 6c65 733d 4661 6c73  le_examples=Fals
+00010c70: 6529 3a0a 2020 2020 2020 2020 7472 6169  e):.        trai
+00010c80: 6e5f 6461 7461 7365 7420 3d20 434c 4950  n_dataset = CLIP
+00010c90: 4461 7461 4c6f 6164 6572 2864 6174 612c  DataLoader(data,
+00010ca0: 2073 656c 662e 696e 7374 616e 6365 5f65   self.instance_e
+00010cb0: 6d62 6564 6469 6e67 732c 2073 6875 6666  mbeddings, shuff
+00010cc0: 6c65 5f65 7861 6d70 6c65 733d 7368 7566  le_examples=shuf
+00010cd0: 666c 655f 6578 616d 706c 6573 2c0a 2020  fle_examples,.  
+00010ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010d00: 2020 2020 2065 7861 6d70 6c65 5f73 697a       example_siz
+00010d10: 6573 3d65 7861 6d70 6c65 5f73 697a 6573  es=example_sizes
+00010d20: 290a 2020 2020 2020 2020 7472 6169 6e5f  ).        train_
+00010d30: 6461 7461 6c6f 6164 6572 203d 2044 6174  dataloader = Dat
+00010d40: 614c 6f61 6465 7228 7472 6169 6e5f 6461  aLoader(train_da
+00010d50: 7461 7365 742c 2062 6174 6368 5f73 697a  taset, batch_siz
+00010d60: 653d 6261 7463 685f 7369 7a65 2c20 6e75  e=batch_size, nu
+00010d70: 6d5f 776f 726b 6572 733d 7365 6c66 2e6e  m_workers=self.n
+00010d80: 756d 5f77 6f72 6b65 7273 2c0a 2020 2020  um_workers,.    
+00010d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010db0: 2020 636f 6c6c 6174 655f 666e 3d73 656c    collate_fn=sel
+00010dc0: 662e 636f 6c6c 6174 655f 6261 7463 682c  f.collate_batch,
+00010dd0: 2073 6875 6666 6c65 3d54 7275 6529 0a20   shuffle=True). 
+00010de0: 2020 2020 2020 2069 6620 7374 6f72 6167         if storag
+00010df0: 655f 7061 7468 2069 7320 4e6f 6e65 3a0a  e_path is None:.
+00010e00: 2020 2020 2020 2020 2020 2020 7374 6f72              stor
+00010e10: 6167 655f 7061 7468 203d 2073 656c 662e  age_path = self.
+00010e20: 6b6e 6f77 6c65 6467 655f 6261 7365 5f70  knowledge_base_p
+00010e30: 6174 685b 3a73 656c 662e 6b6e 6f77 6c65  ath[:self.knowle
+00010e40: 6467 655f 6261 7365 5f70 6174 682e 7266  dge_base_path.rf
+00010e50: 696e 6428 222f 2229 5d0a 2020 2020 2020  ind("/")].      
+00010e60: 2020 656c 6966 206e 6f74 206f 732e 7061    elif not os.pa
+00010e70: 7468 2e65 7869 7374 7328 7374 6f72 6167  th.exists(storag
+00010e80: 655f 7061 7468 293a 0a20 2020 2020 2020  e_path):.       
+00010e90: 2020 2020 206f 732e 6d6b 6469 7228 7374       os.mkdir(st
+00010ea0: 6f72 6167 655f 7061 7468 290a 2020 2020  orage_path).    
+00010eb0: 2020 2020 7472 6169 6e65 7220 3d20 434c      trainer = CL
+00010ec0: 4950 5472 6169 6e65 7228 7365 6c66 2c20  IPTrainer(self, 
+00010ed0: 6570 6f63 6873 3d65 706f 6368 732c 206c  epochs=epochs, l
+00010ee0: 6561 726e 696e 675f 7261 7465 3d6c 6561  earning_rate=lea
+00010ef0: 726e 696e 675f 7261 7465 2c20 6465 6361  rning_rate, deca
+00010f00: 795f 7261 7465 3d64 6563 6179 5f72 6174  y_rate=decay_rat
+00010f10: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00010f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010f30: 2063 6c69 705f 7661 6c75 653d 636c 6970   clip_value=clip
+00010f40: 5f76 616c 7565 2c20 7374 6f72 6167 655f  _value, storage_
+00010f50: 7061 7468 3d73 746f 7261 6765 5f70 6174  path=storage_pat
+00010f60: 6829 0a20 2020 2020 2020 2074 7261 696e  h).        train
+00010f70: 6572 2e74 7261 696e 2874 7261 696e 5f64  er.train(train_d
+00010f80: 6174 616c 6f61 6465 722c 2073 6176 655f  ataloader, save_
+00010f90: 6d6f 6465 6c2c 206f 7074 696d 697a 6572  model, optimizer
+00010fa0: 2c20 7265 636f 7264 5f72 756e 7469 6d65  , record_runtime
+00010fb0: 290a 0a0a 636c 6173 7320 4e43 4553 2842  )...class NCES(B
+00010fc0: 6173 654e 4345 5329 3a0a 2020 2020 2222  aseNCES):.    ""
+00010fd0: 224e 6575 7261 6c20 436c 6173 7320 4578  "Neural Class Ex
+00010fe0: 7072 6573 7369 6f6e 2053 796e 7468 6573  pression Synthes
+00010ff0: 6973 2e22 2222 0a0a 2020 2020 6465 6620  is."""..    def 
+00011000: 5f5f 696e 6974 5f5f 2873 656c 662c 206b  __init__(self, k
+00011010: 6e6f 776c 6564 6765 5f62 6173 655f 7061  nowledge_base_pa
+00011020: 7468 2c0a 2020 2020 2020 2020 2020 2020  th,.            
+00011030: 2020 2020 2071 7561 6c69 7479 5f66 756e       quality_fun
+00011040: 633a 204f 7074 696f 6e61 6c5b 4162 7374  c: Optional[Abst
+00011050: 7261 6374 5363 6f72 6572 5d20 3d20 4e6f  ractScorer] = No
+00011060: 6e65 2c20 6e75 6d5f 7072 6564 6963 7469  ne, num_predicti
+00011070: 6f6e 733d 352c 0a20 2020 2020 2020 2020  ons=5,.         
+00011080: 2020 2020 2020 2020 6c65 6172 6e65 725f          learner_
+00011090: 6e61 6d65 3d22 5365 7454 7261 6e73 666f  name="SetTransfo
+000110a0: 726d 6572 222c 2070 6174 685f 6f66 5f65  rmer", path_of_e
+000110b0: 6d62 6564 6469 6e67 733d 2222 2c20 7072  mbeddings="", pr
+000110c0: 6f6a 5f64 696d 3d31 3238 2c20 726e 6e5f  oj_dim=128, rnn_
+000110d0: 6e5f 6c61 7965 7273 3d32 2c20 6472 6f70  n_layers=2, drop
+000110e0: 5f70 726f 623d 302e 312c 0a20 2020 2020  _prob=0.1,.     
+000110f0: 2020 2020 2020 2020 2020 2020 6e75 6d5f              num_
+00011100: 6865 6164 733d 342c 206e 756d 5f73 6565  heads=4, num_see
+00011110: 6473 3d31 2c20 6e75 6d5f 696e 6473 3d33  ds=1, num_inds=3
+00011120: 322c 206c 6e3d 4661 6c73 652c 206c 6561  2, ln=False, lea
+00011130: 726e 696e 675f 7261 7465 3d31 652d 342c  rning_rate=1e-4,
+00011140: 2064 6563 6179 5f72 6174 653d 302e 302c   decay_rate=0.0,
+00011150: 2063 6c69 705f 7661 6c75 653d 352e 302c   clip_value=5.0,
+00011160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011170: 2020 6261 7463 685f 7369 7a65 3d32 3536    batch_size=256
+00011180: 2c20 6e75 6d5f 776f 726b 6572 733d 382c  , num_workers=8,
+00011190: 206d 6178 5f6c 656e 6774 683d 3438 2c20   max_length=48, 
+000111a0: 6c6f 6164 5f70 7265 7472 6169 6e65 643d  load_pretrained=
+000111b0: 5472 7565 2c20 736f 7274 6564 5f65 7861  True, sorted_exa
+000111c0: 6d70 6c65 733d 4661 6c73 652c 0a20 2020  mples=False,.   
+000111d0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+000111e0: 6574 7261 696e 6564 5f6d 6f64 656c 5f6e  etrained_model_n
+000111f0: 616d 653d 4e6f 6e65 293a 0a20 2020 2020  ame=None):.     
+00011200: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+00011210: 745f 5f28 6b6e 6f77 6c65 6467 655f 6261  t__(knowledge_ba
+00011220: 7365 5f70 6174 682c 206c 6561 726e 6572  se_path, learner
+00011230: 5f6e 616d 652c 2070 6174 685f 6f66 5f65  _name, path_of_e
+00011240: 6d62 6564 6469 6e67 732c 2062 6174 6368  mbeddings, batch
+00011250: 5f73 697a 652c 206c 6561 726e 696e 675f  _size, learning_
+00011260: 7261 7465 2c20 6465 6361 795f 7261 7465  rate, decay_rate
+00011270: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00011280: 2020 2020 2020 2020 2020 2063 6c69 705f             clip_
+00011290: 7661 6c75 652c 206e 756d 5f77 6f72 6b65  value, num_worke
+000112a0: 7273 290a 2020 2020 2020 2020 7365 6c66  rs).        self
+000112b0: 2e71 7561 6c69 7479 5f66 756e 6320 3d20  .quality_func = 
+000112c0: 7175 616c 6974 795f 6675 6e63 0a20 2020  quality_func.   
+000112d0: 2020 2020 2073 656c 662e 6e75 6d5f 7072       self.num_pr
+000112e0: 6564 6963 7469 6f6e 7320 3d20 6e75 6d5f  edictions = num_
+000112f0: 7072 6564 6963 7469 6f6e 730a 2020 2020  predictions.    
+00011300: 2020 2020 7365 6c66 2e70 6174 685f 6f66      self.path_of
+00011310: 5f65 6d62 6564 6469 6e67 7320 3d20 7061  _embeddings = pa
+00011320: 7468 5f6f 665f 656d 6265 6464 696e 6773  th_of_embeddings
+00011330: 0a20 2020 2020 2020 2073 656c 662e 6465  .        self.de
+00011340: 7669 6365 203d 2074 6f72 6368 2e64 6576  vice = torch.dev
+00011350: 6963 6528 2763 7564 6127 2069 6620 746f  ice('cuda' if to
+00011360: 7263 682e 6375 6461 2e69 735f 6176 6169  rch.cuda.is_avai
+00011370: 6c61 626c 6528 2920 656c 7365 2027 6370  lable() else 'cp
+00011380: 7527 290a 2020 2020 2020 2020 7365 6c66  u').        self
+00011390: 2e6d 6178 5f6c 656e 6774 6820 3d20 6d61  .max_length = ma
+000113a0: 785f 6c65 6e67 7468 0a20 2020 2020 2020  x_length.       
+000113b0: 2073 656c 662e 7072 6f6a 5f64 696d 203d   self.proj_dim =
+000113c0: 2070 726f 6a5f 6469 6d0a 2020 2020 2020   proj_dim.      
+000113d0: 2020 7365 6c66 2e72 6e6e 5f6e 5f6c 6179    self.rnn_n_lay
+000113e0: 6572 7320 3d20 726e 6e5f 6e5f 6c61 7965  ers = rnn_n_laye
+000113f0: 7273 0a20 2020 2020 2020 2073 656c 662e  rs.        self.
+00011400: 6472 6f70 5f70 726f 6220 3d20 6472 6f70  drop_prob = drop
+00011410: 5f70 726f 620a 2020 2020 2020 2020 7365  _prob.        se
+00011420: 6c66 2e6e 756d 5f68 6561 6473 203d 206e  lf.num_heads = n
+00011430: 756d 5f68 6561 6473 0a20 2020 2020 2020  um_heads.       
+00011440: 2073 656c 662e 6e75 6d5f 7365 6564 7320   self.num_seeds 
+00011450: 3d20 6e75 6d5f 7365 6564 730a 2020 2020  = num_seeds.    
+00011460: 2020 2020 7365 6c66 2e6e 756d 5f69 6e64      self.num_ind
+00011470: 7320 3d20 6e75 6d5f 696e 6473 0a20 2020  s = num_inds.   
+00011480: 2020 2020 2073 656c 662e 6c6e 203d 206c       self.ln = l
+00011490: 6e0a 2020 2020 2020 2020 7365 6c66 2e6c  n.        self.l
+000114a0: 6f61 645f 7072 6574 7261 696e 6564 203d  oad_pretrained =
+000114b0: 206c 6f61 645f 7072 6574 7261 696e 6564   load_pretrained
+000114c0: 0a20 2020 2020 2020 2073 656c 662e 736f  .        self.so
+000114d0: 7274 6564 5f65 7861 6d70 6c65 7320 3d20  rted_examples = 
+000114e0: 736f 7274 6564 5f65 7861 6d70 6c65 730a  sorted_examples.
+000114f0: 2020 2020 2020 2020 7365 6c66 2e70 7265          self.pre
+00011500: 7472 6169 6e65 645f 6d6f 6465 6c5f 6e61  trained_model_na
+00011510: 6d65 203d 2070 7265 7472 6169 6e65 645f  me = pretrained_
+00011520: 6d6f 6465 6c5f 6e61 6d65 0a20 2020 2020  model_name.     
+00011530: 2020 2073 656c 662e 6d6f 6465 6c20 3d20     self.model = 
+00011540: 7365 6c66 2e67 6574 5f73 796e 7468 6573  self.get_synthes
+00011550: 697a 6572 2829 0a20 2020 2020 2020 2073  izer().        s
+00011560: 656c 662e 646c 5f70 6172 7365 7220 3d20  elf.dl_parser = 
+00011570: 444c 5379 6e74 6178 5061 7273 6572 286e  DLSyntaxParser(n
+00011580: 616d 6573 7061 6365 3d73 656c 662e 6b62  amespace=self.kb
+00011590: 5f6e 616d 6573 7061 6365 290a 2020 2020  _namespace).    
+000115a0: 2020 2020 7365 6c66 2e62 6573 745f 7072      self.best_pr
+000115b0: 6564 6963 7469 6f6e 7320 3d20 4e6f 6e65  edictions = None
+000115c0: 0a0a 2020 2020 6465 6620 6765 745f 7379  ..    def get_sy
+000115d0: 6e74 6865 7369 7a65 7228 7365 6c66 293a  nthesizer(self):
+000115e0: 0a20 2020 2020 2020 2064 6566 206c 6f61  .        def loa
+000115f0: 645f 6d6f 6465 6c28 6c65 6172 6e65 725f  d_model(learner_
+00011600: 6e61 6d65 2c20 6c6f 6164 5f70 7265 7472  name, load_pretr
+00011610: 6169 6e65 6429 3a0a 2020 2020 2020 2020  ained):.        
+00011620: 2020 2020 6966 206c 6561 726e 6572 5f6e      if learner_n
+00011630: 616d 6520 3d3d 2027 5365 7454 7261 6e73  ame == 'SetTrans
+00011640: 666f 726d 6572 273a 0a20 2020 2020 2020  former':.       
+00011650: 2020 2020 2020 2020 206d 6f64 656c 203d           model =
+00011660: 2053 6574 5472 616e 7366 6f72 6d65 7228   SetTransformer(
+00011670: 7365 6c66 2e6b 6e6f 776c 6564 6765 5f62  self.knowledge_b
+00011680: 6173 655f 7061 7468 2c20 7365 6c66 2e76  ase_path, self.v
+00011690: 6f63 6162 2c20 7365 6c66 2e69 6e76 5f76  ocab, self.inv_v
+000116a0: 6f63 6162 2c20 7365 6c66 2e6d 6178 5f6c  ocab, self.max_l
+000116b0: 656e 6774 682c 0a20 2020 2020 2020 2020  ength,.         
+000116c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000116d0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+000116e0: 6c66 2e69 6e70 7574 5f73 697a 652c 2073  lf.input_size, s
+000116f0: 656c 662e 7072 6f6a 5f64 696d 2c20 7365  elf.proj_dim, se
+00011700: 6c66 2e6e 756d 5f68 6561 6473 2c20 7365  lf.num_heads, se
+00011710: 6c66 2e6e 756d 5f73 6565 6473 2c20 7365  lf.num_seeds, se
+00011720: 6c66 2e6e 756d 5f69 6e64 732c 0a20 2020  lf.num_inds,.   
+00011730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011750: 2020 2020 7365 6c66 2e6c 6e29 0a20 2020      self.ln).   
+00011760: 2020 2020 2020 2020 2065 6c69 6620 6c65           elif le
+00011770: 6172 6e65 725f 6e61 6d65 203d 3d20 2747  arner_name == 'G
+00011780: 5255 273a 0a20 2020 2020 2020 2020 2020  RU':.           
+00011790: 2020 2020 206d 6f64 656c 203d 2047 5255       model = GRU
+000117a0: 2873 656c 662e 6b6e 6f77 6c65 6467 655f  (self.knowledge_
+000117b0: 6261 7365 5f70 6174 682c 2073 656c 662e  base_path, self.
+000117c0: 766f 6361 622c 2073 656c 662e 696e 765f  vocab, self.inv_
+000117d0: 766f 6361 622c 2073 656c 662e 6d61 785f  vocab, self.max_
+000117e0: 6c65 6e67 7468 2c20 7365 6c66 2e69 6e70  length, self.inp
+000117f0: 7574 5f73 697a 652c 0a20 2020 2020 2020  ut_size,.       
+00011800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011810: 2020 2020 2073 656c 662e 7072 6f6a 5f64       self.proj_d
+00011820: 696d 2c20 7365 6c66 2e72 6e6e 5f6e 5f6c  im, self.rnn_n_l
+00011830: 6179 6572 732c 2073 656c 662e 6472 6f70  ayers, self.drop
+00011840: 5f70 726f 6229 0a20 2020 2020 2020 2020  _prob).         
+00011850: 2020 2065 6c69 6620 6c65 6172 6e65 725f     elif learner_
+00011860: 6e61 6d65 203d 3d20 274c 5354 4d27 3a0a  name == 'LSTM':.
+00011870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011880: 6d6f 6465 6c20 3d20 4c53 544d 2873 656c  model = LSTM(sel
+00011890: 662e 6b6e 6f77 6c65 6467 655f 6261 7365  f.knowledge_base
+000118a0: 5f70 6174 682c 2073 656c 662e 766f 6361  _path, self.voca
+000118b0: 622c 2073 656c 662e 696e 765f 766f 6361  b, self.inv_voca
+000118c0: 622c 2073 656c 662e 6d61 785f 6c65 6e67  b, self.max_leng
+000118d0: 7468 2c20 7365 6c66 2e69 6e70 7574 5f73  th, self.input_s
+000118e0: 697a 652c 0a20 2020 2020 2020 2020 2020  ize,.           
+000118f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011900: 2020 7365 6c66 2e70 726f 6a5f 6469 6d2c    self.proj_dim,
+00011910: 2073 656c 662e 726e 6e5f 6e5f 6c61 7965   self.rnn_n_laye
+00011920: 7273 2c20 7365 6c66 2e64 726f 705f 7072  rs, self.drop_pr
+00011930: 6f62 290a 2020 2020 2020 2020 2020 2020  ob).            
+00011940: 6966 206c 6f61 645f 7072 6574 7261 696e  if load_pretrain
+00011950: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
+00011960: 2020 2020 6d6f 6465 6c5f 7061 7468 203d      model_path =
+00011970: 2073 656c 662e 7061 7468 5f6f 665f 656d   self.path_of_em
+00011980: 6265 6464 696e 6773 2e73 706c 6974 2822  beddings.split("
+00011990: 656d 6265 6464 696e 6773 2229 5b0a 2020  embeddings")[.  
+000119a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000119b0: 2020 2020 2020 2020 2020 2020 2020 2030                 0
+000119c0: 5d20 2b20 2274 7261 696e 6564 5f6d 6f64  ] + "trained_mod
+000119d0: 656c 732f 7472 6169 6e65 645f 2220 2b20  els/trained_" + 
+000119e0: 6c65 6172 6e65 725f 6e61 6d65 202b 2022  learner_name + "
+000119f0: 2e70 7422 0a20 2020 2020 2020 2020 2020  .pt".           
+00011a00: 2020 2020 206d 6f64 656c 2e6c 6f61 645f       model.load_
+00011a10: 7374 6174 655f 6469 6374 2874 6f72 6368  state_dict(torch
+00011a20: 2e6c 6f61 6428 6d6f 6465 6c5f 7061 7468  .load(model_path
+00011a30: 2c20 6d61 705f 6c6f 6361 7469 6f6e 3d73  , map_location=s
+00011a40: 656c 662e 6465 7669 6365 2929 0a20 2020  elf.device)).   
+00011a50: 2020 2020 2020 2020 2020 2020 206d 6f64               mod
+00011a60: 656c 2e65 7661 6c28 290a 2020 2020 2020  el.eval().      
+00011a70: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00011a80: 225c 6e20 4c6f 6164 6564 2073 796e 7468  "\n Loaded synth
+00011a90: 6573 697a 6572 206d 6f64 656c 2122 290a  esizer model!").
+00011aa0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00011ab0: 726e 206d 6f64 656c 0a0a 2020 2020 2020  rn model..      
+00011ac0: 2020 6966 206e 6f74 2073 656c 662e 6c6f    if not self.lo
+00011ad0: 6164 5f70 7265 7472 6169 6e65 643a 0a20  ad_pretrained:. 
+00011ae0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00011af0: 6e20 5b6c 6f61 645f 6d6f 6465 6c28 7365  n [load_model(se
+00011b00: 6c66 2e6c 6561 726e 6572 5f6e 616d 652c  lf.learner_name,
+00011b10: 2073 656c 662e 6c6f 6164 5f70 7265 7472   self.load_pretr
+00011b20: 6169 6e65 6429 5d0a 2020 2020 2020 2020  ained)].        
+00011b30: 656c 6966 2073 656c 662e 6c6f 6164 5f70  elif self.load_p
+00011b40: 7265 7472 6169 6e65 6420 616e 6420 6973  retrained and is
+00011b50: 696e 7374 616e 6365 2873 656c 662e 7072  instance(self.pr
+00011b60: 6574 7261 696e 6564 5f6d 6f64 656c 5f6e  etrained_model_n
+00011b70: 616d 652c 2073 7472 293a 0a20 2020 2020  ame, str):.     
+00011b80: 2020 2020 2020 2072 6574 7572 6e20 5b6c         return [l
+00011b90: 6f61 645f 6d6f 6465 6c28 7365 6c66 2e70  oad_model(self.p
+00011ba0: 7265 7472 6169 6e65 645f 6d6f 6465 6c5f  retrained_model_
+00011bb0: 6e61 6d65 2c20 7365 6c66 2e6c 6f61 645f  name, self.load_
+00011bc0: 7072 6574 7261 696e 6564 295d 0a20 2020  pretrained)].   
+00011bd0: 2020 2020 2065 6c69 6620 7365 6c66 2e6c       elif self.l
+00011be0: 6f61 645f 7072 6574 7261 696e 6564 2061  oad_pretrained a
+00011bf0: 6e64 2069 7369 6e73 7461 6e63 6528 7365  nd isinstance(se
+00011c00: 6c66 2e70 7265 7472 6169 6e65 645f 6d6f  lf.pretrained_mo
+00011c10: 6465 6c5f 6e61 6d65 2c20 6c69 7374 293a  del_name, list):
+00011c20: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00011c30: 7572 6e20 5b6c 6f61 645f 6d6f 6465 6c28  urn [load_model(
+00011c40: 6e61 6d65 2c20 7365 6c66 2e6c 6f61 645f  name, self.load_
+00011c50: 7072 6574 7261 696e 6564 2920 666f 7220  pretrained) for 
+00011c60: 6e61 6d65 2069 6e20 7365 6c66 2e70 7265  name in self.pre
+00011c70: 7472 6169 6e65 645f 6d6f 6465 6c5f 6e61  trained_model_na
+00011c80: 6d65 5d0a 0a20 2020 2064 6566 2072 6566  me]..    def ref
+00011c90: 7265 7368 2873 656c 6629 3a0a 2020 2020  resh(self):.    
+00011ca0: 2020 2020 7365 6c66 2e6d 6f64 656c 203d      self.model =
+00011cb0: 2073 656c 662e 6765 745f 7379 6e74 6865   self.get_synthe
+00011cc0: 7369 7a65 7228 290a 0a20 2020 2064 6566  sizer()..    def
+00011cd0: 2073 616d 706c 655f 6578 616d 706c 6573   sample_examples
+00011ce0: 2873 656c 662c 2070 6f73 2c20 6e65 6729  (self, pos, neg)
+00011cf0: 3a0a 2020 2020 2020 2020 6173 7365 7274  :.        assert
+00011d00: 2074 7970 6528 706f 735b 305d 2920 3d3d   type(pos[0]) ==
+00011d10: 2074 7970 6528 6e65 675b 305d 292c 2022   type(neg[0]), "
+00011d20: 5468 6520 7477 6f20 6974 6572 6162 6c65  The two iterable
+00011d30: 7320 706f 7320 616e 6420 6e65 6720 6d75  s pos and neg mu
+00011d40: 7374 2062 6520 6f66 2073 616d 6520 7479  st be of same ty
+00011d50: 7065 220a 2020 2020 2020 2020 6e75 6d5f  pe".        num_
+00011d60: 6578 203d 2073 656c 662e 6e75 6d5f 6578  ex = self.num_ex
+00011d70: 616d 706c 6573 0a20 2020 2020 2020 2069  amples.        i
+00011d80: 6620 6d69 6e28 6c65 6e28 706f 7329 2c20  f min(len(pos), 
+00011d90: 6c65 6e28 6e65 6729 2920 3e3d 206e 756d  len(neg)) >= num
+00011da0: 5f65 7820 2f2f 2032 3a0a 2020 2020 2020  _ex // 2:.      
+00011db0: 2020 2020 2020 6966 206c 656e 2870 6f73        if len(pos
+00011dc0: 2920 3e20 6c65 6e28 6e65 6729 3a0a 2020  ) > len(neg):.  
+00011dd0: 2020 2020 2020 2020 2020 2020 2020 6e75                nu
+00011de0: 6d5f 6e65 675f 6578 203d 206e 756d 5f65  m_neg_ex = num_e
+00011df0: 7820 2f2f 2032 0a20 2020 2020 2020 2020  x // 2.         
+00011e00: 2020 2020 2020 206e 756d 5f70 6f73 5f65         num_pos_e
+00011e10: 7820 3d20 6e75 6d5f 6578 202d 206e 756d  x = num_ex - num
+00011e20: 5f6e 6567 5f65 780a 2020 2020 2020 2020  _neg_ex.        
+00011e30: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00011e40: 2020 2020 2020 2020 2020 6e75 6d5f 706f            num_po
+00011e50: 735f 6578 203d 206e 756d 5f65 7820 2f2f  s_ex = num_ex //
+00011e60: 2032 0a20 2020 2020 2020 2020 2020 2020   2.             
+00011e70: 2020 206e 756d 5f6e 6567 5f65 7820 3d20     num_neg_ex = 
+00011e80: 6e75 6d5f 6578 202d 206e 756d 5f70 6f73  num_ex - num_pos
+00011e90: 5f65 780a 2020 2020 2020 2020 656c 6966  _ex.        elif
+00011ea0: 206c 656e 2870 6f73 2920 2b20 6c65 6e28   len(pos) + len(
+00011eb0: 6e65 6729 203e 3d20 6e75 6d5f 6578 2061  neg) >= num_ex a
+00011ec0: 6e64 206c 656e 2870 6f73 2920 3e20 6c65  nd len(pos) > le
+00011ed0: 6e28 6e65 6729 3a0a 2020 2020 2020 2020  n(neg):.        
+00011ee0: 2020 2020 6e75 6d5f 6e65 675f 6578 203d      num_neg_ex =
+00011ef0: 206c 656e 286e 6567 290a 2020 2020 2020   len(neg).      
+00011f00: 2020 2020 2020 6e75 6d5f 706f 735f 6578        num_pos_ex
+00011f10: 203d 206e 756d 5f65 7820 2d20 6e75 6d5f   = num_ex - num_
+00011f20: 6e65 675f 6578 0a20 2020 2020 2020 2065  neg_ex.        e
+00011f30: 6c69 6620 6c65 6e28 706f 7329 202b 206c  lif len(pos) + l
+00011f40: 656e 286e 6567 2920 3e3d 206e 756d 5f65  en(neg) >= num_e
+00011f50: 7820 616e 6420 6c65 6e28 706f 7329 203c  x and len(pos) <
+00011f60: 206c 656e 286e 6567 293a 0a20 2020 2020   len(neg):.     
+00011f70: 2020 2020 2020 206e 756d 5f70 6f73 5f65         num_pos_e
+00011f80: 7820 3d20 6c65 6e28 706f 7329 0a20 2020  x = len(pos).   
+00011f90: 2020 2020 2020 2020 206e 756d 5f6e 6567           num_neg
+00011fa0: 5f65 7820 3d20 6e75 6d5f 6578 202d 206e  _ex = num_ex - n
+00011fb0: 756d 5f70 6f73 5f65 780a 2020 2020 2020  um_pos_ex.      
+00011fc0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00011fd0: 2020 2020 6e75 6d5f 706f 735f 6578 203d      num_pos_ex =
+00011fe0: 206c 656e 2870 6f73 290a 2020 2020 2020   len(pos).      
+00011ff0: 2020 2020 2020 6e75 6d5f 6e65 675f 6578        num_neg_ex
+00012000: 203d 206c 656e 286e 6567 290a 2020 2020   = len(neg).    
+00012010: 2020 2020 706f 7369 7469 7665 203d 2072      positive = r
+00012020: 616e 646f 6d2e 7361 6d70 6c65 2870 6f73  andom.sample(pos
+00012030: 2c20 6d69 6e28 6e75 6d5f 706f 735f 6578  , min(num_pos_ex
+00012040: 2c20 6c65 6e28 706f 7329 2929 0a20 2020  , len(pos))).   
+00012050: 2020 2020 206e 6567 6174 6976 6520 3d20       negative = 
+00012060: 7261 6e64 6f6d 2e73 616d 706c 6528 6e65  random.sample(ne
+00012070: 672c 206d 696e 286e 756d 5f6e 6567 5f65  g, min(num_neg_e
+00012080: 782c 206c 656e 286e 6567 2929 290a 2020  x, len(neg))).  
+00012090: 2020 2020 2020 7265 7475 726e 2070 6f73        return pos
+000120a0: 6974 6976 652c 206e 6567 6174 6976 650a  itive, negative.
+000120b0: 0a20 2020 2064 6566 2067 6574 5f70 7265  .    def get_pre
+000120c0: 6469 6374 696f 6e28 7365 6c66 2c20 6d6f  diction(self, mo
+000120d0: 6465 6c73 2c20 7831 2c20 7832 293a 0a20  dels, x1, x2):. 
+000120e0: 2020 2020 2020 2066 6f72 2069 2c20 6d6f         for i, mo
+000120f0: 6465 6c20 696e 2065 6e75 6d65 7261 7465  del in enumerate
+00012100: 286d 6f64 656c 7329 3a0a 2020 2020 2020  (models):.      
+00012110: 2020 2020 2020 6d6f 6465 6c2e 6576 616c        model.eval
+00012120: 2829 0a20 2020 2020 2020 2020 2020 206d  ().            m
+00012130: 6f64 656c 2e74 6f28 7365 6c66 2e64 6576  odel.to(self.dev
+00012140: 6963 6529 0a20 2020 2020 2020 2020 2020  ice).           
+00012150: 2078 3120 3d20 7831 2e74 6f28 7365 6c66   x1 = x1.to(self
+00012160: 2e64 6576 6963 6529 0a20 2020 2020 2020  .device).       
+00012170: 2020 2020 2078 3220 3d20 7832 2e74 6f28       x2 = x2.to(
+00012180: 7365 6c66 2e64 6576 6963 6529 0a20 2020  self.device).   
+00012190: 2020 2020 2020 2020 2069 6620 6920 3d3d           if i ==
+000121a0: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+000121b0: 2020 2020 5f2c 2073 636f 7265 7320 3d20      _, scores = 
+000121c0: 6d6f 6465 6c28 7831 2c20 7832 290a 2020  model(x1, x2).  
+000121d0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000121e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000121f0: 5f2c 2073 6320 3d20 6d6f 6465 6c28 7831  _, sc = model(x1
+00012200: 2c20 7832 290a 2020 2020 2020 2020 2020  , x2).          
+00012210: 2020 2020 2020 7363 6f72 6573 203d 2073        scores = s
+00012220: 636f 7265 7320 2b20 7363 0a20 2020 2020  cores + sc.     
+00012230: 2020 2073 636f 7265 7320 3d20 7363 6f72     scores = scor
+00012240: 6573 202f 206c 656e 286d 6f64 656c 7329  es / len(models)
+00012250: 0a20 2020 2020 2020 2070 7265 6469 6374  .        predict
+00012260: 696f 6e20 3d20 6d6f 6465 6c2e 696e 765f  ion = model.inv_
+00012270: 766f 6361 625b 7363 6f72 6573 2e61 7267  vocab[scores.arg
+00012280: 6d61 7828 3129 2e63 7075 2829 5d0a 2020  max(1).cpu()].  
+00012290: 2020 2020 2020 7265 7475 726e 2070 7265        return pre
+000122a0: 6469 6374 696f 6e0a 0a20 2020 2064 6566  diction..    def
+000122b0: 2066 6974 5f6f 6e65 2873 656c 662c 2070   fit_one(self, p
+000122c0: 6f73 3a20 556e 696f 6e5b 5365 745b 4f57  os: Union[Set[OW
+000122d0: 4c4e 616d 6564 496e 6469 7669 6475 616c  LNamedIndividual
+000122e0: 5d2c 2053 6574 5b73 7472 5d5d 2c20 6e65  ], Set[str]], ne
+000122f0: 673a 2055 6e69 6f6e 5b53 6574 5b4f 574c  g: Union[Set[OWL
+00012300: 4e61 6d65 6449 6e64 6976 6964 7561 6c5d  NamedIndividual]
+00012310: 2c20 5365 745b 7374 725d 5d2c 0a20 2020  , Set[str]],.   
+00012320: 2020 2020 2020 2020 2020 2020 2076 6572               ver
+00012330: 626f 7365 3d46 616c 7365 293a 0a20 2020  bose=False):.   
+00012340: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00012350: 6365 2870 6f73 5b30 5d2c 204f 574c 4e61  ce(pos[0], OWLNa
+00012360: 6d65 6449 6e64 6976 6964 7561 6c29 3a0a  medIndividual):.
+00012370: 2020 2020 2020 2020 2020 2020 706f 735f              pos_
+00012380: 7374 7220 3d20 5b69 6e64 2e73 7472 2e73  str = [ind.str.s
+00012390: 706c 6974 2822 2f22 295b 2d31 5d20 666f  plit("/")[-1] fo
+000123a0: 7220 696e 6420 696e 2070 6f73 5d0a 2020  r ind in pos].  
+000123b0: 2020 2020 2020 2020 2020 6e65 675f 7374            neg_st
+000123c0: 7220 3d20 5b69 6e64 2e73 7472 2e73 706c  r = [ind.str.spl
+000123d0: 6974 2822 2f22 295b 2d31 5d20 666f 7220  it("/")[-1] for 
+000123e0: 696e 6420 696e 206e 6567 5d0a 2020 2020  ind in neg].    
+000123f0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+00012400: 6e63 6528 706f 735b 305d 2c20 7374 7229  nce(pos[0], str)
+00012410: 3a0a 2020 2020 2020 2020 2020 2020 706f  :.            po
+00012420: 735f 7374 7220 3d20 706f 730a 2020 2020  s_str = pos.    
+00012430: 2020 2020 2020 2020 6e65 675f 7374 7220          neg_str 
+00012440: 3d20 6e65 670a 2020 2020 2020 2020 656c  = neg.        el
+00012450: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00012460: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+00012470: 2866 2249 6e76 616c 6964 2069 6e70 7574  (f"Invalid input
+00012480: 2074 7970 652c 2077 6173 2065 7870 6563   type, was expec
+00012490: 7469 6e67 204f 574c 4e61 6d65 6449 6e64  ting OWLNamedInd
+000124a0: 6976 6964 7561 6c20 6f72 2073 7472 2062  ividual or str b
+000124b0: 7574 2066 6f75 6e64 207b 7479 7065 2870  ut found {type(p
+000124c0: 6f73 5b30 5d29 7d22 290a 2020 2020 2020  os[0])}").      
+000124d0: 2020 506f 7320 3d20 5b72 616e 646f 6d2e    Pos = [random.
+000124e0: 7361 6d70 6c65 2870 6f73 5f73 7472 2c20  sample(pos_str, 
+000124f0: 6c65 6e28 706f 735f 7374 7229 2920 666f  len(pos_str)) fo
+00012500: 7220 5f20 696e 2072 616e 6765 2873 656c  r _ in range(sel
+00012510: 662e 6e75 6d5f 7072 6564 6963 7469 6f6e  f.num_prediction
+00012520: 7329 5d0a 2020 2020 2020 2020 4e65 6720  s)].        Neg 
+00012530: 3d20 5b72 616e 646f 6d2e 7361 6d70 6c65  = [random.sample
+00012540: 286e 6567 5f73 7472 2c20 6c65 6e28 6e65  (neg_str, len(ne
+00012550: 675f 7374 7229 2920 666f 7220 5f20 696e  g_str)) for _ in
+00012560: 2072 616e 6765 2873 656c 662e 6e75 6d5f   range(self.num_
+00012570: 7072 6564 6963 7469 6f6e 7329 5d0a 0a20  predictions)].. 
+00012580: 2020 2020 2020 2061 7373 6572 7420 7365         assert se
+00012590: 6c66 2e6c 6f61 645f 7072 6574 7261 696e  lf.load_pretrain
+000125a0: 6564 2061 6e64 2073 656c 662e 7072 6574  ed and self.pret
+000125b0: 7261 696e 6564 5f6d 6f64 656c 5f6e 616d  rained_model_nam
+000125c0: 652c 205c 0a20 2020 2020 2020 2020 2020  e, \.           
+000125d0: 2022 4e6f 2070 7265 7472 6169 6e65 6420   "No pretrained 
+000125e0: 6d6f 6465 6c20 666f 756e 642e 2050 6c65  model found. Ple
+000125f0: 6173 6520 6669 7273 7420 7472 6169 6e20  ase first train 
+00012600: 4e43 4553 2c20 7365 6520 7468 6520 3c3c  NCES, see the <<
+00012610: 7472 6169 6e3e 3e20 6d65 7468 6f64 2062  train>> method b
+00012620: 656c 6f77 220a 0a20 2020 2020 2020 2064  elow"..        d
+00012630: 6174 6173 6574 203d 204e 4345 5344 6174  ataset = NCESDat
+00012640: 614c 6f61 6465 7249 6e66 6572 656e 6365  aLoaderInference
+00012650: 285b 2822 222c 2050 6f73 5f73 7472 2c20  ([("", Pos_str, 
+00012660: 4e65 675f 7374 7229 2066 6f72 2028 506f  Neg_str) for (Po
+00012670: 735f 7374 722c 204e 6567 5f73 7472 2920  s_str, Neg_str) 
+00012680: 696e 207a 6970 2850 6f73 2c20 4e65 6729  in zip(Pos, Neg)
+00012690: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+000126a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126b0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000126c0: 662e 696e 7374 616e 6365 5f65 6d62 6564  f.instance_embed
+000126d0: 6469 6e67 732c 0a20 2020 2020 2020 2020  dings,.         
+000126e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012700: 2073 656c 662e 766f 6361 622c 2073 656c   self.vocab, sel
+00012710: 662e 696e 765f 766f 6361 622c 2046 616c  f.inv_vocab, Fal
+00012720: 7365 2c20 7365 6c66 2e73 6f72 7465 645f  se, self.sorted_
+00012730: 6578 616d 706c 6573 290a 2020 2020 2020  examples).      
+00012740: 2020 6461 7461 6c6f 6164 6572 203d 2044    dataloader = D
+00012750: 6174 614c 6f61 6465 7228 6461 7461 7365  ataLoader(datase
+00012760: 742c 2062 6174 6368 5f73 697a 653d 7365  t, batch_size=se
+00012770: 6c66 2e62 6174 6368 5f73 697a 652c 206e  lf.batch_size, n
+00012780: 756d 5f77 6f72 6b65 7273 3d73 656c 662e  um_workers=self.
+00012790: 6e75 6d5f 776f 726b 6572 732c 0a20 2020  num_workers,.   
+000127a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000127b0: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
+000127c0: 6c61 7465 5f66 6e3d 7365 6c66 2e63 6f6c  late_fn=self.col
+000127d0: 6c61 7465 5f62 6174 6368 5f69 6e66 6572  late_batch_infer
+000127e0: 656e 6365 2c20 7368 7566 666c 653d 4661  ence, shuffle=Fa
+000127f0: 6c73 6529 0a20 2020 2020 2020 2078 5f70  lse).        x_p
+00012800: 6f73 2c20 785f 6e65 6720 3d20 6e65 7874  os, x_neg = next
+00012810: 2869 7465 7228 6461 7461 6c6f 6164 6572  (iter(dataloader
+00012820: 2929 0a20 2020 2020 2020 2073 696d 706c  )).        simpl
+00012830: 6553 6f6c 7574 696f 6e20 3d20 5369 6d70  eSolution = Simp
+00012840: 6c65 536f 6c75 7469 6f6e 286c 6973 7428  leSolution(list(
+00012850: 7365 6c66 2e76 6f63 6162 292c 2073 656c  self.vocab), sel
+00012860: 662e 6174 6f6d 6963 5f63 6f6e 6365 7074  f.atomic_concept
+00012870: 5f6e 616d 6573 290a 2020 2020 2020 2020  _names).        
+00012880: 7072 6564 6963 7469 6f6e 735f 7261 7720  predictions_raw 
+00012890: 3d20 7365 6c66 2e67 6574 5f70 7265 6469  = self.get_predi
+000128a0: 6374 696f 6e28 7365 6c66 2e6d 6f64 656c  ction(self.model
+000128b0: 2c20 785f 706f 732c 2078 5f6e 6567 290a  , x_pos, x_neg).
+000128c0: 2020 2020 2020 2020 7072 6564 6963 7469          predicti
+000128d0: 6f6e 7320 3d20 5b5d 0a20 2020 2020 2020  ons = [].       
+000128e0: 2066 6f72 2070 7265 6469 6374 696f 6e20   for prediction 
+000128f0: 696e 2070 7265 6469 6374 696f 6e73 5f72  in predictions_r
+00012900: 6177 3a0a 2020 2020 2020 2020 2020 2020  aw:.            
+00012910: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00012920: 2020 2020 2070 7265 6469 6374 696f 6e5f       prediction_
+00012930: 7374 7220 3d20 2222 2e6a 6f69 6e28 6265  str = "".join(be
+00012940: 666f 7265 5f70 6164 2870 7265 6469 6374  fore_pad(predict
+00012950: 696f 6e2e 7371 7565 657a 6528 2929 290a  ion.squeeze())).
+00012960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012970: 636f 6e63 6570 7420 3d20 7365 6c66 2e64  concept = self.d
+00012980: 6c5f 7061 7273 6572 2e70 6172 7365 2870  l_parser.parse(p
+00012990: 7265 6469 6374 696f 6e5f 7374 7229 0a20  rediction_str). 
+000129a0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+000129b0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+000129c0: 2020 2070 7265 6469 6374 696f 6e5f 7374     prediction_st
+000129d0: 7220 3d20 7369 6d70 6c65 536f 6c75 7469  r = simpleSoluti
+000129e0: 6f6e 2e70 7265 6469 6374 2822 222e 6a6f  on.predict("".jo
+000129f0: 696e 2862 6566 6f72 655f 7061 6428 7072  in(before_pad(pr
+00012a00: 6564 6963 7469 6f6e 2e73 7175 6565 7a65  ediction.squeeze
+00012a10: 2829 2929 290a 2020 2020 2020 2020 2020  ()))).          
+00012a20: 2020 2020 2020 636f 6e63 6570 7420 3d20        concept = 
+00012a30: 7365 6c66 2e64 6c5f 7061 7273 6572 2e70  self.dl_parser.p
+00012a40: 6172 7365 2870 7265 6469 6374 696f 6e5f  arse(prediction_
+00012a50: 7374 7229 0a20 2020 2020 2020 2020 2020  str).           
+00012a60: 2020 2020 2069 6620 7665 7262 6f73 653a       if verbose:
+00012a70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012a80: 2020 2020 2070 7269 6e74 2822 5072 6564       print("Pred
+00012a90: 6963 7469 6f6e 3a20 222c 2070 7265 6469  iction: ", predi
+00012aa0: 6374 696f 6e5f 7374 7229 0a20 2020 2020  ction_str).     
+00012ab0: 2020 2020 2020 2070 7265 6469 6374 696f         predictio
+00012ac0: 6e73 2e61 7070 656e 6428 636f 6e63 6570  ns.append(concep
+00012ad0: 7429 0a20 2020 2020 2020 2072 6574 7572  t).        retur
+00012ae0: 6e20 7072 6564 6963 7469 6f6e 730a 0a20  n predictions.. 
+00012af0: 2020 2064 6566 2066 6974 2873 656c 662c     def fit(self,
+00012b00: 2070 6f73 3a20 556e 696f 6e5b 5365 745b   pos: Union[Set[
+00012b10: 4f57 4c4e 616d 6564 496e 6469 7669 6475  OWLNamedIndividu
+00012b20: 616c 5d2c 2053 6574 5b73 7472 5d5d 2c20  al], Set[str]], 
+00012b30: 6e65 673a 2055 6e69 6f6e 5b53 6574 5b4f  neg: Union[Set[O
+00012b40: 574c 4e61 6d65 6449 6e64 6976 6964 7561  WLNamedIndividua
+00012b50: 6c5d 2c20 5365 745b 7374 725d 5d2c 0a20  l], Set[str]],. 
+00012b60: 2020 2020 2020 2020 2020 2076 6572 626f             verbo
+00012b70: 7365 3d46 616c 7365 2c20 2a2a 6b77 6172  se=False, **kwar
+00012b80: 6773 293a 0a20 2020 2020 2020 2069 6620  gs):.        if 
+00012b90: 6973 696e 7374 616e 6365 2870 6f73 2c20  isinstance(pos, 
+00012ba0: 7365 7429 206f 7220 6973 696e 7374 616e  set) or isinstan
+00012bb0: 6365 2870 6f73 2c20 6672 6f7a 656e 7365  ce(pos, frozense
+00012bc0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00012bd0: 706f 735f 6c69 7374 203d 206c 6973 7428  pos_list = list(
+00012be0: 706f 7329 0a20 2020 2020 2020 2020 2020  pos).           
+00012bf0: 206e 6567 5f6c 6973 7420 3d20 6c69 7374   neg_list = list
+00012c00: 286e 6567 290a 2020 2020 2020 2020 2020  (neg).          
+00012c10: 2020 6966 2073 656c 662e 736f 7274 6564    if self.sorted
+00012c20: 5f65 7861 6d70 6c65 733a 0a20 2020 2020  _examples:.     
+00012c30: 2020 2020 2020 2020 2020 2070 6f73 5f6c             pos_l
+00012c40: 6973 7420 3d20 736f 7274 6564 2870 6f73  ist = sorted(pos
+00012c50: 5f6c 6973 7429 0a20 2020 2020 2020 2020  _list).         
+00012c60: 2020 2020 2020 206e 6567 5f6c 6973 7420         neg_list 
+00012c70: 3d20 736f 7274 6564 286e 6567 5f6c 6973  = sorted(neg_lis
+00012c80: 7429 0a20 2020 2020 2020 2065 6c73 653a  t).        else:
+00012c90: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00012ca0: 7365 2056 616c 7565 4572 726f 7228 6622  se ValueError(f"
+00012cb0: 4578 7065 6374 6564 2070 6f73 2061 6e64  Expected pos and
+00012cc0: 206e 6567 2074 6f20 6265 2073 6574 732c   neg to be sets,
+00012cd0: 2067 6f74 207b 7479 7065 2870 6f73 297d   got {type(pos)}
+00012ce0: 2061 6e64 207b 7479 7065 286e 6567 297d   and {type(neg)}
+00012cf0: 2229 0a20 2020 2020 2020 2070 7265 6469  ").        predi
+00012d00: 6374 696f 6e73 203d 2073 656c 662e 6669  ctions = self.fi
+00012d10: 745f 6f6e 6528 706f 735f 6c69 7374 2c20  t_one(pos_list, 
+00012d20: 6e65 675f 6c69 7374 2c20 7665 7262 6f73  neg_list, verbos
+00012d30: 653d 7665 7262 6f73 6529 0a20 2020 2020  e=verbose).     
+00012d40: 2020 2070 7265 6469 6374 696f 6e73 5f61     predictions_a
+00012d50: 735f 6e6f 6465 7320 3d20 5b5d 0a20 2020  s_nodes = [].   
+00012d60: 2020 2020 2066 6f72 2063 6f6e 6365 7074       for concept
+00012d70: 2069 6e20 7072 6564 6963 7469 6f6e 733a   in predictions:
+00012d80: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
+00012d90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00012da0: 2020 636f 6e63 6570 745f 696e 6469 7669    concept_indivi
+00012db0: 6475 616c 735f 636f 756e 7420 3d20 7365  duals_count = se
+00012dc0: 6c66 2e6b 622e 696e 6469 7669 6475 616c  lf.kb.individual
+00012dd0: 735f 636f 756e 7428 636f 6e63 6570 7429  s_count(concept)
+00012de0: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
+00012df0: 6570 7420 4174 7472 6962 7574 6545 7272  ept AttributeErr
+00012e00: 6f72 3a0a 2020 2020 2020 2020 2020 2020  or:.            
+00012e10: 2020 2020 636f 6e63 6570 7420 3d20 7365      concept = se
+00012e20: 6c66 2e64 6c5f 7061 7273 6572 2e70 6172  lf.dl_parser.par
+00012e30: 7365 2827 e28a a427 290a 2020 2020 2020  se('...').      
+00012e40: 2020 2020 2020 2020 2020 636f 6e63 6570            concep
+00012e50: 745f 696e 6469 7669 6475 616c 735f 636f  t_individuals_co
+00012e60: 756e 7420 3d20 7365 6c66 2e6b 622e 696e  unt = self.kb.in
+00012e70: 6469 7669 6475 616c 735f 636f 756e 7428  dividuals_count(
+00012e80: 636f 6e63 6570 7429 0a20 2020 2020 2020  concept).       
+00012e90: 2020 2020 2063 6f6e 6365 7074 5f6c 656e       concept_len
+00012ea0: 6774 6820 3d20 696e 6974 5f6c 656e 6774  gth = init_lengt
+00012eb0: 685f 6d65 7472 6963 2829 2e6c 656e 6774  h_metric().lengt
+00012ec0: 6828 636f 6e63 6570 7429 0a20 2020 2020  h(concept).     
+00012ed0: 2020 2020 2020 2063 6f6e 6365 7074 5f69         concept_i
+00012ee0: 6e73 7461 6e63 6573 203d 2073 6574 2873  nstances = set(s
+00012ef0: 656c 662e 6b62 2e69 6e64 6976 6964 7561  elf.kb.individua
+00012f00: 6c73 2863 6f6e 6365 7074 2929 2069 6620  ls(concept)) if 
+00012f10: 6973 696e 7374 616e 6365 2870 6f73 5f6c  isinstance(pos_l
+00012f20: 6973 745b 305d 2c0a 2020 2020 2020 2020  ist[0],.        
+00012f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f70: 2020 2020 2020 2020 4f57 4c4e 616d 6564          OWLNamed
+00012f80: 496e 6469 7669 6475 616c 2920 656c 7365  Individual) else
+00012f90: 2073 6574 280a 2020 2020 2020 2020 2020   set(.          
+00012fa0: 2020 2020 2020 5b69 6e64 2e73 7472 2e73        [ind.str.s
+00012fb0: 706c 6974 2822 2f22 295b 2d31 5d20 666f  plit("/")[-1] fo
+00012fc0: 7220 696e 6420 696e 2073 656c 662e 6b62  r ind in self.kb
+00012fd0: 2e69 6e64 6976 6964 7561 6c73 2863 6f6e  .individuals(con
+00012fe0: 6365 7074 295d 290a 2020 2020 2020 2020  cept)]).        
+00012ff0: 2020 2020 7470 2c20 666e 2c20 6670 2c20      tp, fn, fp, 
+00013000: 746e 203d 2063 6f6d 7075 7465 5f74 705f  tn = compute_tp_
+00013010: 666e 5f66 705f 746e 2863 6f6e 6365 7074  fn_fp_tn(concept
+00013020: 5f69 6e73 7461 6e63 6573 2c20 706f 732c  _instances, pos,
+00013030: 206e 6567 290a 2020 2020 2020 2020 2020   neg).          
+00013040: 2020 7175 616c 6974 7920 3d20 7365 6c66    quality = self
+00013050: 2e71 7561 6c69 7479 5f66 756e 632e 7363  .quality_func.sc
+00013060: 6f72 6532 2874 702c 2066 6e2c 2066 702c  ore2(tp, fn, fp,
+00013070: 2074 6e29 5b31 5d0a 2020 2020 2020 2020   tn)[1].        
+00013080: 2020 2020 6e6f 6465 203d 204e 4345 534e      node = NCESN
+00013090: 6f64 6528 636f 6e63 6570 742c 206c 656e  ode(concept, len
+000130a0: 6774 683d 636f 6e63 6570 745f 6c65 6e67  gth=concept_leng
+000130b0: 7468 2c20 696e 6469 7669 6475 616c 735f  th, individuals_
+000130c0: 636f 756e 743d 636f 6e63 6570 745f 696e  count=concept_in
+000130d0: 6469 7669 6475 616c 735f 636f 756e 742c  dividuals_count,
+000130e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000130f0: 2020 2020 2020 2020 2020 2020 2071 7561               qua
+00013100: 6c69 7479 3d71 7561 6c69 7479 290a 2020  lity=quality).  
+00013110: 2020 2020 2020 2020 2020 7072 6564 6963            predic
+00013120: 7469 6f6e 735f 6173 5f6e 6f64 6573 2e61  tions_as_nodes.a
+00013130: 7070 656e 6428 6e6f 6465 290a 2020 2020  ppend(node).    
+00013140: 2020 2020 7072 6564 6963 7469 6f6e 735f      predictions_
+00013150: 6173 5f6e 6f64 6573 203d 2073 6f72 7465  as_nodes = sorte
+00013160: 6428 7072 6564 6963 7469 6f6e 735f 6173  d(predictions_as
+00013170: 5f6e 6f64 6573 2c20 6b65 793d 6c61 6d62  _nodes, key=lamb
+00013180: 6461 2078 3a20 2d78 2e71 7561 6c69 7479  da x: -x.quality
+00013190: 290a 2020 2020 2020 2020 7365 6c66 2e62  ).        self.b
+000131a0: 6573 745f 7072 6564 6963 7469 6f6e 7320  est_predictions 
+000131b0: 3d20 7072 6564 6963 7469 6f6e 735f 6173  = predictions_as
+000131c0: 5f6e 6f64 6573 0a20 2020 2020 2020 2072  _nodes.        r
+000131d0: 6574 7572 6e20 7365 6c66 0a0a 2020 2020  eturn self..    
+000131e0: 6465 6620 6265 7374 5f68 7970 6f74 6865  def best_hypothe
+000131f0: 7365 7328 7365 6c66 2c20 6e3d 3129 202d  ses(self, n=1) -
+00013200: 3e20 556e 696f 6e5b 4f57 4c43 6c61 7373  > Union[OWLClass
+00013210: 4578 7072 6573 7369 6f6e 2c20 4974 6572  Expression, Iter
+00013220: 6162 6c65 5b4f 574c 436c 6173 7345 7870  able[OWLClassExp
+00013230: 7265 7373 696f 6e5d 5d3a 0a20 2020 2020  ression]]:.     
+00013240: 2020 2069 6620 7365 6c66 2e62 6573 745f     if self.best_
+00013250: 7072 6564 6963 7469 6f6e 7320 6973 204e  predictions is N
+00013260: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00013270: 2070 7269 6e74 2822 4e43 4553 206e 6565   print("NCES nee
+00013280: 6473 2074 6f20 6265 2066 6974 7465 6420  ds to be fitted 
+00013290: 746f 2061 2070 726f 626c 656d 2066 6972  to a problem fir
+000132a0: 7374 2229 0a20 2020 2020 2020 2020 2020  st").           
+000132b0: 2072 6574 7572 6e20 4e6f 6e65 0a20 2020   return None.   
+000132c0: 2020 2020 2065 6c69 6620 6c65 6e28 7365       elif len(se
+000132d0: 6c66 2e62 6573 745f 7072 6564 6963 7469  lf.best_predicti
+000132e0: 6f6e 7329 203d 3d20 3120 6f72 206e 203d  ons) == 1 or n =
+000132f0: 3d20 313a 0a20 2020 2020 2020 2020 2020  = 1:.           
+00013300: 2072 6574 7572 6e20 7365 6c66 2e62 6573   return self.bes
+00013310: 745f 7072 6564 6963 7469 6f6e 735b 305d  t_predictions[0]
+00013320: 2e63 6f6e 6365 7074 0a20 2020 2020 2020  .concept.       
+00013330: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00013340: 2020 2072 6574 7572 6e20 7365 6c66 2e62     return self.b
+00013350: 6573 745f 7072 6564 6963 7469 6f6e 735b  est_predictions[
+00013360: 3a6e 5d0a 0a20 2020 2064 6566 2063 6f6e  :n]..    def con
+00013370: 7665 7274 5f74 6f5f 6c69 7374 5f73 7472  vert_to_list_str
+00013380: 5f66 726f 6d5f 6974 6572 6162 6c65 2873  _from_iterable(s
+00013390: 656c 662c 2064 6174 6129 3a0a 2020 2020  elf, data):.    
+000133a0: 2020 2020 7461 7267 6574 5f63 6f6e 6365      target_conce
+000133b0: 7074 5f73 7472 2c20 6578 616d 706c 6573  pt_str, examples
+000133c0: 203d 2064 6174 615b 305d 2c20 6461 7461   = data[0], data
+000133d0: 5b31 3a5d 0a20 2020 2020 2020 2070 6f73  [1:].        pos
+000133e0: 203d 206c 6973 7428 6578 616d 706c 6573   = list(examples
+000133f0: 5b30 5d29 0a20 2020 2020 2020 206e 6567  [0]).        neg
+00013400: 203d 206c 6973 7428 6578 616d 706c 6573   = list(examples
+00013410: 5b31 5d29 0a20 2020 2020 2020 2069 6620  [1]).        if 
+00013420: 6973 696e 7374 616e 6365 2870 6f73 5b30  isinstance(pos[0
+00013430: 5d2c 204f 574c 4e61 6d65 6449 6e64 6976  ], OWLNamedIndiv
+00013440: 6964 7561 6c29 3a0a 2020 2020 2020 2020  idual):.        
+00013450: 2020 2020 706f 735f 7374 7220 3d20 5b69      pos_str = [i
+00013460: 6e64 2e73 7472 2e73 706c 6974 2822 2f22  nd.str.split("/"
+00013470: 295b 2d31 5d20 666f 7220 696e 6420 696e  )[-1] for ind in
+00013480: 2070 6f73 5d0a 2020 2020 2020 2020 2020   pos].          
+00013490: 2020 6e65 675f 7374 7220 3d20 5b69 6e64    neg_str = [ind
+000134a0: 2e73 7472 2e73 706c 6974 2822 2f22 295b  .str.split("/")[
+000134b0: 2d31 5d20 666f 7220 696e 6420 696e 206e  -1] for ind in n
+000134c0: 6567 5d0a 2020 2020 2020 2020 656c 6966  eg].        elif
+000134d0: 2069 7369 6e73 7461 6e63 6528 706f 735b   isinstance(pos[
+000134e0: 305d 2c20 7374 7229 3a0a 2020 2020 2020  0], str):.      
+000134f0: 2020 2020 2020 706f 735f 7374 722c 206e        pos_str, n
+00013500: 6567 5f73 7472 203d 206c 6973 7428 706f  eg_str = list(po
+00013510: 7329 2c20 6c69 7374 286e 6567 290a 2020  s), list(neg).  
+00013520: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00013530: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+00013540: 6c75 6545 7272 6f72 2866 2249 6e76 616c  lueError(f"Inval
+00013550: 6964 2069 6e70 7574 2074 7970 652c 2077  id input type, w
+00013560: 6173 2065 7870 6563 7469 6e67 204f 574c  as expecting OWL
+00013570: 4e61 6d65 6449 6e64 6976 6964 7561 6c20  NamedIndividual 
+00013580: 6f72 2073 7472 2062 7574 2066 6f75 6e64  or str but found
+00013590: 207b 7479 7065 2870 6f73 5b30 5d29 7d22   {type(pos[0])}"
+000135a0: 290a 2020 2020 2020 2020 6966 2073 656c  ).        if sel
+000135b0: 662e 736f 7274 6564 5f65 7861 6d70 6c65  f.sorted_example
+000135c0: 733a 0a20 2020 2020 2020 2020 2020 2070  s:.            p
+000135d0: 6f73 5f73 7472 2c20 6e65 675f 7374 7220  os_str, neg_str 
+000135e0: 3d20 736f 7274 6564 2870 6f73 5f73 7472  = sorted(pos_str
+000135f0: 292c 2073 6f72 7465 6428 6e65 675f 7374  ), sorted(neg_st
+00013600: 7229 0a20 2020 2020 2020 2072 6574 7572  r).        retur
+00013610: 6e20 2874 6172 6765 745f 636f 6e63 6570  n (target_concep
+00013620: 745f 7374 722c 2070 6f73 5f73 7472 2c20  t_str, pos_str, 
+00013630: 6e65 675f 7374 7229 0a0a 2020 2020 6465  neg_str)..    de
+00013640: 6620 6669 745f 6672 6f6d 5f69 7465 7261  f fit_from_itera
+00013650: 626c 6528 7365 6c66 2c20 6461 7461 7365  ble(self, datase
+00013660: 743a 2055 6e69 6f6e 5b4c 6973 745b 5475  t: Union[List[Tu
+00013670: 706c 655b 7374 722c 2053 6574 5b4f 574c  ple[str, Set[OWL
+00013680: 4e61 6d65 6449 6e64 6976 6964 7561 6c5d  NamedIndividual]
+00013690: 2c20 5365 745b 4f57 4c4e 616d 6564 496e  , Set[OWLNamedIn
+000136a0: 6469 7669 6475 616c 5d5d 5d2c 0a20 2020  dividual]]],.   
+000136b0: 204c 6973 745b 5475 706c 655b 7374 722c   List[Tuple[str,
+000136c0: 2053 6574 5b73 7472 5d2c 2053 6574 5b73   Set[str], Set[s
+000136d0: 7472 5d5d 5d5d 2c20 7368 7566 666c 655f  tr]]]], shuffle_
+000136e0: 6578 616d 706c 6573 3d46 616c 7365 2c0a  examples=False,.
+000136f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013700: 2020 2020 2020 2020 2020 7665 7262 6f73            verbos
+00013710: 653d 4661 6c73 652c 202a 2a6b 7761 7267  e=False, **kwarg
+00013720: 7329 202d 3e20 4c69 7374 3a0a 2020 2020  s) -> List:.    
+00013730: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00013740: 2d20 4461 7461 7365 7420 6973 2061 206c  - Dataset is a l
+00013750: 6973 7420 6f66 2074 7570 6c65 7320 7768  ist of tuples wh
+00013760: 6572 6520 7468 6520 6669 7273 7420 6974  ere the first it
+00013770: 656d 7320 6172 6520 7374 7269 6e67 7320  ems are strings 
+00013780: 636f 7272 6573 706f 6e64 696e 6720 746f  corresponding to
+00013790: 2074 6172 6765 7420 636f 6e63 6570 7473   target concepts
+000137a0: 2e0a 2020 2020 2020 2020 0a20 2020 2020  ..        .     
+000137b0: 2020 202d 2054 6869 7320 6675 6e63 7469     - This functi
+000137c0: 6f6e 2072 6574 7572 6e73 2070 7265 6469  on returns predi
+000137d0: 6374 696f 6e73 2061 7320 6f77 6c20 636c  ctions as owl cl
+000137e0: 6173 7320 6578 7072 6573 7369 6f6e 732c  ass expressions,
+000137f0: 206e 6f74 206e 6f64 6573 2061 7320 696e   not nodes as in
+00013800: 2066 6974 0a20 2020 2020 2020 2022 2222   fit.        """
+00013810: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00013820: 7365 6c66 2e6c 6f61 645f 7072 6574 7261  self.load_pretra
+00013830: 696e 6564 2061 6e64 2073 656c 662e 7072  ined and self.pr
+00013840: 6574 7261 696e 6564 5f6d 6f64 656c 5f6e  etrained_model_n
+00013850: 616d 652c 205c 0a20 2020 2020 2020 2020  ame, \.         
+00013860: 2020 2022 4e6f 2070 7265 7472 6169 6e65     "No pretraine
+00013870: 6420 6d6f 6465 6c20 666f 756e 642e 2050  d model found. P
+00013880: 6c65 6173 6520 6669 7273 7420 7472 6169  lease first trai
+00013890: 6e20 4e43 4553 2c20 7265 6665 7220 746f  n NCES, refer to
+000138a0: 2074 6865 203c 3c74 7261 696e 3e3e 206d   the <<train>> m
+000138b0: 6574 686f 6422 0a20 2020 2020 2020 2064  ethod".        d
+000138c0: 6174 6173 6574 203d 205b 7365 6c66 2e63  ataset = [self.c
+000138d0: 6f6e 7665 7274 5f74 6f5f 6c69 7374 5f73  onvert_to_list_s
+000138e0: 7472 5f66 726f 6d5f 6974 6572 6162 6c65  tr_from_iterable
+000138f0: 2864 6174 6170 6f69 6e74 2920 666f 7220  (datapoint) for 
+00013900: 6461 7461 706f 696e 7420 696e 2064 6174  datapoint in dat
+00013910: 6173 6574 5d0a 2020 2020 2020 2020 6461  aset].        da
+00013920: 7461 7365 7420 3d20 4e43 4553 4461 7461  taset = NCESData
+00013930: 4c6f 6164 6572 496e 6665 7265 6e63 6528  LoaderInference(
+00013940: 6461 7461 7365 742c 2073 656c 662e 696e  dataset, self.in
+00013950: 7374 616e 6365 5f65 6d62 6564 6469 6e67  stance_embedding
+00013960: 732c 2073 656c 662e 766f 6361 622c 2073  s, self.vocab, s
+00013970: 656c 662e 696e 765f 766f 6361 622c 0a20  elf.inv_vocab,. 
+00013980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000139a0: 2020 2020 2020 2020 2073 6875 6666 6c65           shuffle
+000139b0: 5f65 7861 6d70 6c65 7329 0a20 2020 2020  _examples).     
+000139c0: 2020 2064 6174 616c 6f61 6465 7220 3d20     dataloader = 
+000139d0: 4461 7461 4c6f 6164 6572 2864 6174 6173  DataLoader(datas
+000139e0: 6574 2c20 6261 7463 685f 7369 7a65 3d73  et, batch_size=s
+000139f0: 656c 662e 6261 7463 685f 7369 7a65 2c20  elf.batch_size, 
+00013a00: 6e75 6d5f 776f 726b 6572 733d 7365 6c66  num_workers=self
+00013a10: 2e6e 756d 5f77 6f72 6b65 7273 2c0a 2020  .num_workers,.  
+00013a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013a30: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00013a40: 6c6c 6174 655f 666e 3d73 656c 662e 636f  llate_fn=self.co
+00013a50: 6c6c 6174 655f 6261 7463 685f 696e 6665  llate_batch_infe
+00013a60: 7265 6e63 652c 2073 6875 6666 6c65 3d46  rence, shuffle=F
+00013a70: 616c 7365 290a 2020 2020 2020 2020 7369  alse).        si
+00013a80: 6d70 6c65 536f 6c75 7469 6f6e 203d 2053  mpleSolution = S
+00013a90: 696d 706c 6553 6f6c 7574 696f 6e28 6c69  impleSolution(li
+00013aa0: 7374 2873 656c 662e 766f 6361 6229 2c20  st(self.vocab), 
+00013ab0: 7365 6c66 2e61 746f 6d69 635f 636f 6e63  self.atomic_conc
+00013ac0: 6570 745f 6e61 6d65 7329 0a20 2020 2020  ept_names).     
+00013ad0: 2020 2070 7265 6469 6374 696f 6e73 5f61     predictions_a
+00013ae0: 735f 6f77 6c5f 636c 6173 735f 6578 7072  s_owl_class_expr
+00013af0: 6573 7369 6f6e 7320 3d20 5b5d 0a20 2020  essions = [].   
+00013b00: 2020 2020 2070 7265 6469 6374 696f 6e73       predictions
+00013b10: 5f73 7472 203d 205b 5d0a 2020 2020 2020  _str = [].      
+00013b20: 2020 666f 7220 785f 706f 732c 2078 5f6e    for x_pos, x_n
+00013b30: 6567 2069 6e20 6461 7461 6c6f 6164 6572  eg in dataloader
+00013b40: 3a0a 2020 2020 2020 2020 2020 2020 7072  :.            pr
+00013b50: 6564 6963 7469 6f6e 7320 3d20 7365 6c66  edictions = self
+00013b60: 2e67 6574 5f70 7265 6469 6374 696f 6e28  .get_prediction(
+00013b70: 7365 6c66 2e6d 6f64 656c 2c20 785f 706f  self.model, x_po
+00013b80: 732c 2078 5f6e 6567 290a 2020 2020 2020  s, x_neg).      
+00013b90: 2020 2020 2020 666f 7220 7072 6564 6963        for predic
+00013ba0: 7469 6f6e 2069 6e20 7072 6564 6963 7469  tion in predicti
+00013bb0: 6f6e 733a 0a20 2020 2020 2020 2020 2020  ons:.           
+00013bc0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00013bd0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00013be0: 6564 6963 7469 6f6e 5f73 7472 203d 2022  ediction_str = "
+00013bf0: 222e 6a6f 696e 2862 6566 6f72 655f 7061  ".join(before_pa
+00013c00: 6428 7072 6564 6963 7469 6f6e 2929 0a20  d(prediction)). 
+00013c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013c20: 2020 2063 6520 3d20 7365 6c66 2e64 6c5f     ce = self.dl_
+00013c30: 7061 7273 6572 2e70 6172 7365 2870 7265  parser.parse(pre
+00013c40: 6469 6374 696f 6e5f 7374 7229 0a20 2020  diction_str).   
+00013c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013c60: 2070 7265 6469 6374 696f 6e73 5f73 7472   predictions_str
+00013c70: 2e61 7070 656e 6428 7072 6564 6963 7469  .append(predicti
+00013c80: 6f6e 5f73 7472 290a 2020 2020 2020 2020  on_str).        
+00013c90: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
+00013ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013cb0: 2020 2020 7072 6564 6963 7469 6f6e 5f73      prediction_s
+00013cc0: 7472 203d 2073 696d 706c 6553 6f6c 7574  tr = simpleSolut
+00013cd0: 696f 6e2e 7072 6564 6963 7428 2222 2e6a  ion.predict("".j
+00013ce0: 6f69 6e28 6265 666f 7265 5f70 6164 2870  oin(before_pad(p
+00013cf0: 7265 6469 6374 696f 6e29 2929 0a20 2020  rediction))).   
+00013d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013d10: 2070 7265 6469 6374 696f 6e73 5f73 7472   predictions_str
+00013d20: 2e61 7070 656e 6428 7072 6564 6963 7469  .append(predicti
+00013d30: 6f6e 5f73 7472 290a 2020 2020 2020 2020  on_str).        
+00013d40: 2020 2020 2020 2020 2020 2020 6365 203d              ce =
+00013d50: 2073 656c 662e 646c 5f70 6172 7365 722e   self.dl_parser.
+00013d60: 7061 7273 6528 7072 6564 6963 7469 6f6e  parse(prediction
+00013d70: 5f73 7472 290a 2020 2020 2020 2020 2020  _str).          
+00013d80: 2020 2020 2020 7072 6564 6963 7469 6f6e        prediction
+00013d90: 735f 6173 5f6f 776c 5f63 6c61 7373 5f65  s_as_owl_class_e
+00013da0: 7870 7265 7373 696f 6e73 2e61 7070 656e  xpressions.appen
+00013db0: 6428 6365 290a 2020 2020 2020 2020 6966  d(ce).        if
+00013dc0: 2076 6572 626f 7365 3a0a 2020 2020 2020   verbose:.      
+00013dd0: 2020 2020 2020 7072 696e 7428 2250 7265        print("Pre
+00013de0: 6469 6374 696f 6e73 3a20 222c 2070 7265  dictions: ", pre
+00013df0: 6469 6374 696f 6e73 5f73 7472 290a 2020  dictions_str).  
+00013e00: 2020 2020 2020 7265 7475 726e 2070 7265        return pre
+00013e10: 6469 6374 696f 6e73 5f61 735f 6f77 6c5f  dictions_as_owl_
+00013e20: 636c 6173 735f 6578 7072 6573 7369 6f6e  class_expression
+00013e30: 730a 0a20 2020 2064 6566 2074 7261 696e  s..    def train
+00013e40: 2873 656c 662c 2064 6174 613a 2049 7465  (self, data: Ite
+00013e50: 7261 626c 655b 4c69 7374 5b54 7570 6c65  rable[List[Tuple
+00013e60: 5d5d 2c20 6570 6f63 6873 3d33 3030 2c20  ]], epochs=300, 
+00013e70: 6261 7463 685f 7369 7a65 3d4e 6f6e 652c  batch_size=None,
+00013e80: 206c 6561 726e 696e 675f 7261 7465 3d31   learning_rate=1
+00013e90: 652d 342c 2064 6563 6179 5f72 6174 653d  e-4, decay_rate=
+00013ea0: 302e 302c 0a20 2020 2020 2020 2020 2020  0.0,.           
+00013eb0: 2020 2063 6c69 705f 7661 6c75 653d 352e     clip_value=5.
+00013ec0: 302c 206e 756d 5f77 6f72 6b65 7273 3d38  0, num_workers=8
+00013ed0: 2c20 7361 7665 5f6d 6f64 656c 3d54 7275  , save_model=Tru
+00013ee0: 652c 2073 746f 7261 6765 5f70 6174 683d  e, storage_path=
+00013ef0: 4e6f 6e65 2c20 6f70 7469 6d69 7a65 723d  None, optimizer=
+00013f00: 2741 6461 6d27 2c20 7265 636f 7264 5f72  'Adam', record_r
+00013f10: 756e 7469 6d65 3d54 7275 652c 0a20 2020  untime=True,.   
+00013f20: 2020 2020 2020 2020 2020 2065 7861 6d70             examp
+00013f30: 6c65 5f73 697a 6573 3d4e 6f6e 652c 2073  le_sizes=None, s
+00013f40: 6875 6666 6c65 5f65 7861 6d70 6c65 733d  huffle_examples=
+00013f50: 4661 6c73 6529 3a0a 2020 2020 2020 2020  False):.        
+00013f60: 6966 2062 6174 6368 5f73 697a 6520 6973  if batch_size is
+00013f70: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00013f80: 2020 2062 6174 6368 5f73 697a 6520 3d20     batch_size = 
+00013f90: 7365 6c66 2e62 6174 6368 5f73 697a 650a  self.batch_size.
+00013fa0: 2020 2020 2020 2020 7472 6169 6e5f 6461          train_da
+00013fb0: 7461 7365 7420 3d20 4e43 4553 4461 7461  taset = NCESData
+00013fc0: 4c6f 6164 6572 2864 6174 612c 2073 656c  Loader(data, sel
+00013fd0: 662e 696e 7374 616e 6365 5f65 6d62 6564  f.instance_embed
+00013fe0: 6469 6e67 732c 2073 656c 662e 766f 6361  dings, self.voca
+00013ff0: 622c 2073 656c 662e 696e 765f 766f 6361  b, self.inv_voca
+00014000: 622c 0a20 2020 2020 2020 2020 2020 2020  b,.             
+00014010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014020: 2020 2020 2020 2020 2020 7368 7566 666c            shuffl
+00014030: 655f 6578 616d 706c 6573 3d73 6875 6666  e_examples=shuff
+00014040: 6c65 5f65 7861 6d70 6c65 732c 206d 6178  le_examples, max
+00014050: 5f6c 656e 6774 683d 7365 6c66 2e6d 6178  _length=self.max
+00014060: 5f6c 656e 6774 682c 0a20 2020 2020 2020  _length,.       
+00014070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014090: 6578 616d 706c 655f 7369 7a65 733d 6578  example_sizes=ex
+000140a0: 616d 706c 655f 7369 7a65 7329 0a20 2020  ample_sizes).   
+000140b0: 2020 2020 2074 7261 696e 5f64 6174 616c       train_datal
+000140c0: 6f61 6465 7220 3d20 4461 7461 4c6f 6164  oader = DataLoad
+000140d0: 6572 2874 7261 696e 5f64 6174 6173 6574  er(train_dataset
+000140e0: 2c20 6261 7463 685f 7369 7a65 3d62 6174  , batch_size=bat
+000140f0: 6368 5f73 697a 652c 206e 756d 5f77 6f72  ch_size, num_wor
+00014100: 6b65 7273 3d73 656c 662e 6e75 6d5f 776f  kers=self.num_wo
+00014110: 726b 6572 732c 0a20 2020 2020 2020 2020  rkers,.         
+00014120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014130: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
+00014140: 6c61 7465 5f66 6e3d 7365 6c66 2e63 6f6c  late_fn=self.col
+00014150: 6c61 7465 5f62 6174 6368 2c20 7368 7566  late_batch, shuf
+00014160: 666c 653d 5472 7565 290a 2020 2020 2020  fle=True).      
+00014170: 2020 6966 2073 746f 7261 6765 5f70 6174    if storage_pat
+00014180: 6820 6973 204e 6f6e 653a 0a20 2020 2020  h is None:.     
+00014190: 2020 2020 2020 2073 746f 7261 6765 5f70         storage_p
+000141a0: 6174 6820 3d20 7365 6c66 2e6b 6e6f 776c  ath = self.knowl
+000141b0: 6564 6765 5f62 6173 655f 7061 7468 5b3a  edge_base_path[:
+000141c0: 7365 6c66 2e6b 6e6f 776c 6564 6765 5f62  self.knowledge_b
+000141d0: 6173 655f 7061 7468 2e72 6669 6e64 2822  ase_path.rfind("
+000141e0: 2f22 295d 0a20 2020 2020 2020 2065 6c69  /")].        eli
+000141f0: 6620 6e6f 7420 6f73 2e70 6174 682e 6578  f not os.path.ex
+00014200: 6973 7473 2873 746f 7261 6765 5f70 6174  ists(storage_pat
+00014210: 6829 3a0a 2020 2020 2020 2020 2020 2020  h):.            
+00014220: 6f73 2e6d 6b64 6972 2873 746f 7261 6765  os.mkdir(storage
+00014230: 5f70 6174 6829 0a20 2020 2020 2020 2074  _path).        t
+00014240: 7261 696e 6572 203d 204e 4345 5354 7261  rainer = NCESTra
+00014250: 696e 6572 2873 656c 662c 2065 706f 6368  iner(self, epoch
+00014260: 733d 6570 6f63 6873 2c20 6c65 6172 6e69  s=epochs, learni
+00014270: 6e67 5f72 6174 653d 6c65 6172 6e69 6e67  ng_rate=learning
+00014280: 5f72 6174 652c 2064 6563 6179 5f72 6174  _rate, decay_rat
+00014290: 653d 6465 6361 795f 7261 7465 2c0a 2020  e=decay_rate,.  
+000142a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000142b0: 2020 2020 2020 2020 2020 2020 636c 6970              clip
+000142c0: 5f76 616c 7565 3d63 6c69 705f 7661 6c75  _value=clip_valu
+000142d0: 652c 206e 756d 5f77 6f72 6b65 7273 3d6e  e, num_workers=n
+000142e0: 756d 5f77 6f72 6b65 7273 2c20 7374 6f72  um_workers, stor
+000142f0: 6167 655f 7061 7468 3d73 746f 7261 6765  age_path=storage
+00014300: 5f70 6174 6829 0a20 2020 2020 2020 2074  _path).        t
+00014310: 7261 696e 6572 2e74 7261 696e 2874 7261  rainer.train(tra
+00014320: 696e 5f64 6174 616c 6f61 6465 722c 2073  in_dataloader, s
+00014330: 6176 655f 6d6f 6465 6c2c 206f 7074 696d  ave_model, optim
+00014340: 697a 6572 2c20 7265 636f 7264 5f72 756e  izer, record_run
+00014350: 7469 6d65 290a                           time).
```

### Comparing `ontolearn-0.7.0/ontolearn/data_struct.py` & `ontolearn-0.7.1/ontolearn/data_struct.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/ea_algorithms.py` & `ontolearn-0.7.1/ontolearn/ea_algorithms.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/ea_initialization.py` & `ontolearn-0.7.1/ontolearn/ea_initialization.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,17 +1,21 @@
 """Initialization for evolutionary algorithms."""
 
 from dataclasses import dataclass
 from functools import lru_cache
 from enum import Enum, auto
 from itertools import chain, cycle
+
+from owlapy.class_expression import OWLClass, OWLClassExpression, OWLThing
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import OWLLiteral
+from owlapy.owl_property import OWLDataProperty, OWLObjectProperty
+
 from ontolearn.ea_utils import OperatorVocabulary, Tree, escape, owlliteral_to_primitive_string
 from ontolearn.knowledge_base import KnowledgeBase
-from owlapy.model import OWLClass, OWLClassExpression, OWLDataProperty, OWLLiteral, OWLNamedIndividual, \
-    OWLObjectProperty, OWLThing
 import random
 from abc import ABCMeta, abstractmethod
 from typing import Any, Callable, Dict, Final, List, Set, Union
 from deap.gp import Primitive, PrimitiveSetTyped
 
 
 class RandomInitMethod(Enum):
@@ -324,22 +328,22 @@
         if random.random() <= EARandomWalkInitialization.connection_pr:
             expr.append(pset.primitives[OWLClassExpression][2])
         else:
             expr.append(pset.primitives[OWLClassExpression][1])
 
     def _add_object_terminal(self, expr: Tree, pset: PrimitiveSetTyped, type_: OWLClass):
         for t in pset.terminals[OWLClassExpression]:
-            if t.name == escape(type_.get_iri().get_remainder()):
+            if t.name == escape(type_.iri.get_remainder()):
                 expr.append(t)
                 return
 
     def _add_data_terminal(self, expr: Tree, pset: PrimitiveSetTyped, property_: OWLDataProperty, object_: OWLLiteral):
         for t in pset.terminals[self.dp_to_prim_type[property_]]:
             if t.name == owlliteral_to_primitive_string(object_, property_):
                 expr.append(t)
                 return
 
     def _add_primitive(self, expr: Tree, pset: PrimitiveSetTyped, property_: Property, vocab: OperatorVocabulary):
         for p in pset.primitives[OWLClassExpression]:
-            if p.name == vocab + escape(property_.get_iri().get_remainder()):
+            if p.name == vocab + escape(property_.iri.get_remainder()):
                 expr.append(p)
                 return
```

### Comparing `ontolearn-0.7.0/ontolearn/ea_utils.py` & `ontolearn-0.7.1/ontolearn/ea_utils.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,23 +1,25 @@
 """Utils for evolutionary algorithms."""
 
 from enum import Enum
 from typing import Callable, Final, List, Optional, Tuple, Union
 
 from deap.gp import Primitive, Terminal
+from owlapy.class_expression import OWLObjectSomeValuesFrom, OWLObjectUnionOf, OWLClassExpression, OWLDataHasValue, \
+    OWLDataSomeValuesFrom, OWLObjectAllValuesFrom, OWLObjectIntersectionOf, OWLObjectExactCardinality, \
+    OWLObjectMaxCardinality, OWLObjectMinCardinality
+from owlapy.owl_literal import OWLLiteral, NUMERIC_DATATYPES
+from owlapy.owl_property import OWLObjectPropertyExpression, OWLDataPropertyExpression, OWLDataProperty, \
+    OWLObjectProperty
 
 from ontolearn.concept_generator import ConceptGenerator
-from owlapy.model import OWLObjectPropertyExpression, OWLObjectSomeValuesFrom, OWLObjectUnionOf, \
-    OWLClassExpression, OWLDataHasValue, OWLDataPropertyExpression, OWLDataSomeValuesFrom, OWLLiteral, \
-    OWLObjectAllValuesFrom, OWLObjectIntersectionOf, NUMERIC_DATATYPES, OWLDataProperty, OWLObjectProperty, \
-    OWLObjectExactCardinality, OWLObjectMaxCardinality, OWLObjectMinCardinality
 import re
 
-from owlapy.model.providers import OWLDatatypeMinExclusiveRestriction, OWLDatatypeMinInclusiveRestriction, \
-    OWLDatatypeMaxExclusiveRestriction, OWLDatatypeMaxInclusiveRestriction
+from owlapy.providers import owl_datatype_min_exclusive_restriction, owl_datatype_min_inclusive_restriction, \
+    owl_datatype_max_exclusive_restriction, owl_datatype_max_inclusive_restriction
 
 
 Tree = List[Union[Primitive, Terminal]]
 
 
 class PrimitiveFactory:
 
@@ -69,27 +71,27 @@
         return min_cardinality, max_cardinality, exact_cardinality
 
     def create_data_some_values(self, property_: OWLDataPropertyExpression) \
             -> Tuple[Callable[[OWLLiteral], OWLDataSomeValuesFrom], Callable[[OWLLiteral], OWLDataSomeValuesFrom],
                      Callable[[OWLLiteral], OWLDataSomeValuesFrom], Callable[[OWLLiteral], OWLDataSomeValuesFrom]]:
 
         def data_some_min_inclusive(value: OWLLiteral) -> OWLDataSomeValuesFrom:
-            filler = OWLDatatypeMinInclusiveRestriction(value)
+            filler = owl_datatype_min_inclusive_restriction(value)
             return self.generator.data_existential_restriction(filler, property_)
 
         def data_some_max_inclusive(value: OWLLiteral) -> OWLDataSomeValuesFrom:
-            filler = OWLDatatypeMaxInclusiveRestriction(value)
+            filler = owl_datatype_max_inclusive_restriction(value)
             return self.generator.data_existential_restriction(filler, property_)
 
         def data_some_min_exclusive(value: OWLLiteral) -> OWLDataSomeValuesFrom:
-            filler = OWLDatatypeMinExclusiveRestriction(value)
+            filler = owl_datatype_min_exclusive_restriction(value)
             return self.generator.data_existential_restriction(filler, property_)
 
         def data_some_max_exclusive(value: OWLLiteral) -> OWLDataSomeValuesFrom:
-            filler = OWLDatatypeMaxExclusiveRestriction(value)
+            filler = owl_datatype_max_exclusive_restriction(value)
             return self.generator.data_existential_restriction(filler, property_)
 
         return data_some_min_inclusive, data_some_max_inclusive, data_some_min_exclusive, data_some_max_exclusive
 
     def create_data_has_value(self, property_: OWLDataPropertyExpression) -> Callable[[OWLLiteral], OWLDataHasValue]:
 
         def data_has_value(value: OWLLiteral) -> OWLDataHasValue:
@@ -136,9 +138,9 @@
 
 # TODO: Ugly hack for now
 def owlliteral_to_primitive_string(lit: OWLLiteral, pe: Optional[Union[OWLDataProperty, OWLObjectProperty]] = None) \
         -> str:
     str_ = type(lit.to_python()).__name__ + escape(lit.get_literal())
     if lit.get_datatype() in NUMERIC_DATATYPES:
         assert pe is not None
-        return escape(pe.get_iri().get_remainder()) + str_
+        return escape(pe.iri.get_remainder()) + str_
     return str_
```

### Comparing `ontolearn-0.7.0/ontolearn/experiments.py` & `ontolearn-0.7.1/ontolearn/experiments.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,18 +2,18 @@
 
 import json
 import time
 from random import shuffle
 from typing import List, Tuple, Set, Dict, Any, Iterable
 
 import numpy as np
+from owlapy.iri import IRI
+from owlapy.owl_individual import OWLNamedIndividual
 from sklearn.model_selection import KFold
 
-from owlapy.model import OWLNamedIndividual, IRI
-
 
 class Experiments:
     def __init__(self, max_test_time_per_concept=3):
         self.random_state_k_fold = 1
         self.max_test_time_per_concept = max_test_time_per_concept
 
     @staticmethod
@@ -37,16 +37,16 @@
         store_json = dict()
         print('###############')
         """ (1) Convert E^+ and E^- into strings to store them in JSON format """
         for (th, lp, pred) in zip(range(len(learning_problems)), learning_problems, test_report):
             report = dict()
             target_class_expression, typed_positive, typed_negative = lp
             report.update(pred)
-            report['Positives'], report['Negatives'] = [owl_indv.get_iri().as_str() for owl_indv in typed_positive], \
-                                                       [owl_indv.get_iri().as_str() for owl_indv in typed_negative]
+            report['Positives'], report['Negatives'] = [owl_indv.str for owl_indv in typed_positive], \
+                                                       [owl_indv.str for owl_indv in typed_negative]
             store_json[th] = report
         print('##################')
         """ (2) Serialize classification report """
         with open(model.storage_path + '/classification_reports.json', 'w') as file_descriptor:
             json.dump(store_json, file_descriptor, indent=3)
         del store_json
         """ (3) Deserialize (2) for the sake of validating its correctness"""
```

### Comparing `ontolearn-0.7.0/ontolearn/fitness_functions.py` & `ontolearn-0.7.1/ontolearn/fitness_functions.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/heuristics.py` & `ontolearn-0.7.1/ontolearn/heuristics.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/knowledge_base.py` & `ontolearn-0.7.1/ontolearn/knowledge_base.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,35 +1,50 @@
 """ Knowledge Base."""
 
 import logging
 import random
-from itertools import chain
-from typing import Iterable, Optional, Callable, overload, Union, FrozenSet, Set, Dict, Tuple, Generator, cast
+from collections import Counter
+from typing import Iterable, Optional, Callable, overload, Union, FrozenSet, Set, Dict, cast, Generator
 
 import owlapy
+from owlapy.class_expression import OWLClassExpression, OWLClass, OWLObjectSomeValuesFrom, OWLObjectAllValuesFrom, \
+    OWLThing, OWLObjectMinCardinality, OWLObjectOneOf
+from owlapy.iri import IRI
+from owlapy.owl_axiom import OWLClassAssertionAxiom, OWLObjectPropertyAssertionAxiom, OWLDataPropertyAssertionAxiom, \
+    OWLSubClassOfAxiom, OWLEquivalentClassesAxiom
+from owlapy.owl_data_ranges import OWLDataRange
+from owlapy.owl_datatype import OWLDatatype
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import BooleanOWLDatatype, NUMERIC_DATATYPES, DoubleOWLDatatype, TIME_DATATYPES, OWLLiteral
+from owlapy.owl_ontology import OWLOntology
+from owlapy.owl_ontology_manager import OWLOntologyManager
+from owlapy.owl_property import OWLObjectProperty, OWLDataProperty, OWLObjectPropertyExpression, \
+    OWLDataPropertyExpression
+from owlapy.owl_reasoner import OWLReasoner
 
 from ontolearn.base import OWLOntology_Owlready2, OWLOntologyManager_Owlready2, OWLReasoner_Owlready2
 from ontolearn.base.fast_instance_checker import OWLReasoner_FastInstanceChecker
-from owlapy.model import OWLOntologyManager, OWLOntology, OWLReasoner, OWLClassExpression, \
-    OWLNamedIndividual, OWLObjectProperty, OWLClass, OWLDataProperty, IRI, OWLDataRange, OWLObjectSomeValuesFrom, \
-    OWLObjectAllValuesFrom, OWLDatatype, BooleanOWLDatatype, NUMERIC_DATATYPES, TIME_DATATYPES, OWLThing, \
-    OWLObjectPropertyExpression, OWLLiteral, OWLDataPropertyExpression, OWLClassAssertionAxiom, \
-    OWLObjectPropertyAssertionAxiom, OWLDataPropertyAssertionAxiom, OWLSubClassOfAxiom, OWLEquivalentClassesAxiom
+
 from owlapy.render import DLSyntaxObjectRenderer
 from ontolearn.search import EvaluatedConcept
 from owlapy.util import iter_count, LRUCache
 from .abstracts import AbstractKnowledgeBase, AbstractScorer, EncodedLearningProblem
 from .concept_generator import ConceptGenerator
 from ontolearn.base.owl.utils import OWLClassExpressionLengthMetric
 from .learning_problem import PosNegLPStandard, EncodedPosNegLPStandard
 from ontolearn.base.owl.hierarchy import ClassHierarchy, ObjectPropertyHierarchy, DatatypePropertyHierarchy
 
 from .utils.static_funcs import (init_length_metric, init_hierarchy_instances,
                                  init_named_individuals, init_individuals_from_concepts)
 
+from owlapy.class_expression import OWLDataMaxCardinality, OWLDataSomeValuesFrom
+from owlapy import owl_expression_to_sparql, owl_expression_to_dl
+from owlapy.owl_data_ranges import OWLDataRange
+from owlapy.class_expression import OWLDataOneOf
+
 logger = logging.getLogger(__name__)
 
 
 def depth_Default_ReasonerFactory(onto: OWLOntology) -> OWLReasoner:
     assert isinstance(onto, OWLOntology_Owlready2)
     base_reasoner = OWLReasoner_Owlready2(ontology=onto)
     return OWLReasoner_FastInstanceChecker(ontology=onto, base_reasoner=base_reasoner)
@@ -191,34 +206,35 @@
 
         if concept is None or concept.is_owl_thing():
             for i in self.ind_set:
                 yield i
         else:
             yield from self.maybe_cache_individuals(concept)
 
-    def abox(self, individuals: Union[OWLNamedIndividual, Iterable[OWLNamedIndividual]] = None, mode='native'):
+    def abox(self, individual: Union[OWLNamedIndividual, Iterable[OWLNamedIndividual]] = None, mode='native'):
         """
         Get all the abox axioms for a given individual. If no individual is given, get all abox axioms
 
         Args:
-            individuals (OWLNamedIndividual): Individual/s to get the abox axioms from.
+            individual (OWLNamedIndividual): Individual/s to get the abox axioms from.
             mode (str): The return format.
              1) 'native' -> returns triples as tuples of owlapy objects,
              2) 'iri' -> returns triples as tuples of IRIs as string,
              3) 'axiom' -> triples are represented by owlapy axioms.
 
         Returns: Iterable of tuples or owlapy axiom, depending on the mode.
         """
 
-        assert mode in ['native', 'iri', 'axiom'], "Valid modes are: 'native', 'iri' or 'axiom'"
+        assert mode in ['native', 'iri', 'axiom',
+                        "expression"], "Valid modes are: 'native', 'iri' ,'expression' or 'axiom'"
 
-        if isinstance(individuals, OWLNamedIndividual):
-            inds = [individuals]
-        elif isinstance(individuals, Iterable):
-            inds = individuals
+        if isinstance(individual, OWLNamedIndividual):
+            inds = [individual]
+        elif isinstance(individual, Iterable):
+            inds = individual
         else:
             inds = self.individuals()
 
         for i in inds:
             if mode == "native":
                 # Obtain all class assertion triples/axioms
                 # For now, 'rdfs:type' predicate will be represented as an IRI
@@ -229,36 +245,82 @@
                 for dp in self.get_data_properties_for_ind(ind=i):
                     yield from ((i, dp, literal) for literal in self.get_data_property_values(i, dp))
 
                 for op in self.get_object_properties_for_ind(ind=i):
                     yield from ((i, op, ind) for ind in self.get_object_property_values(i, op))
             elif mode == "iri":
                 yield from ((i.str, "http://www.w3.org/1999/02/22-rdf-syntax-ns#type",
-                             t.get_iri().as_str()) for t in self.get_types(ind=i, direct=True))
+                             t.str) for t in self.get_types(ind=i, direct=True))
                 for dp in self.get_data_properties_for_ind(ind=i):
-                    yield from ((i.str, dp.get_iri().as_str(), literal.get_literal()) for literal in
+                    yield from ((i.str, dp.str, literal.get_literal()) for literal in
                                 self.get_data_property_values(i, dp))
                 for op in self.get_object_properties_for_ind(ind=i):
-                    yield from ((i.str, op.get_iri().as_str(), ind.get_iri().as_str()) for ind in
+                    yield from ((i.str, op.str, ind.str) for ind in
                                 self.get_object_property_values(i, op))
             elif mode == "axiom":
                 yield from (OWLClassAssertionAxiom(i, t) for t in self.get_types(ind=i, direct=True))
                 for dp in self.get_data_properties_for_ind(ind=i):
                     yield from (OWLDataPropertyAssertionAxiom(i, dp, literal) for literal in
                                 self.get_data_property_values(i, dp))
                 for op in self.get_object_properties_for_ind(ind=i):
                     yield from (OWLObjectPropertyAssertionAxiom(i, op, ind) for ind in
                                 self.get_object_property_values(i, op))
+            elif mode == "expression":
+                object_restrictions_quantifiers = dict()
+                # To no return duplicate objects.
+                quantifier_gate = set()
+                # (1) Iterate over triples where individual is in the subject position. Recursion
+                for s, p, o in self.abox(individual=individual, mode="native"):
+                    if isinstance(p, IRI) and isinstance(o, OWLClass):
+                        """ Return OWLClass """
+                        yield o
+                    elif isinstance(p, OWLObjectProperty) and isinstance(o, OWLNamedIndividual):
+                        """ STORE: ObjectSomeValuesFrom with ObjectOneOf over OWLNamedIndividual"""
+                        object_restrictions_quantifiers.setdefault(p, []).append(o)
+                    elif isinstance(p, OWLDataProperty) and isinstance(o, OWLLiteral):
+                        """ RETURN: OWLDataSomeValuesFrom with OWLDataOneOf over OWLLiteral"""
+                        yield OWLDataSomeValuesFrom(property=p, filler=OWLDataOneOf(o))
+                    else:
+                        raise RuntimeError("Unrecognized triples to expression mappings")
+
+                for k, iter_inds in object_restrictions_quantifiers.items():
+                    # RETURN Existential Quantifiers over Nominals: \exists r. {x....y}
+                    for x in iter_inds:
+                        yield OWLObjectSomeValuesFrom(property=k, filler=OWLObjectOneOf(values=x))
+                    type_: OWLClass
+                    count: int
+                    for type_, count in Counter(
+                            [type_i for i in iter_inds for type_i in self.get_types(ind=i, direct=True)]).items():
+                        existential_quantifier = OWLObjectSomeValuesFrom(property=k, filler=type_)
+                        if existential_quantifier in quantifier_gate:
+                            continue
+                        else:
+                            # RETURN Existential Quantifiers over Concepts: \exists r. C
+                            quantifier_gate.add(existential_quantifier)
+                            yield existential_quantifier
+                        if count > 1:
+                            min_cardinality_item = OWLObjectMinCardinality(cardinality=count, property=k, filler=type_)
+                            if min_cardinality_item in quantifier_gate:
+                                continue
+                            else:
+                                quantifier_gate.add(min_cardinality_item)
+                                # RETURN \ge number r. C
+                                yield min_cardinality_item
+
+
+            else:
+                raise RuntimeError(f"Unrecognized mode:{mode}")
 
     def tbox(self, entities: Union[Iterable[OWLClass], Iterable[OWLDataProperty], Iterable[OWLObjectProperty], OWLClass,
-                                   OWLDataProperty, OWLObjectProperty, None] = None, mode='native'):
+    OWLDataProperty, OWLObjectProperty, None] = None, mode='native'):
         """Get all the tbox axioms for the given concept-s|propert-y/ies.
          If no concept-s|propert-y/ies are given, get all tbox axioms.
 
          Args:
+             @TODO: entities or namedindividuals ?!
              entities: Entities to obtain tbox axioms from. This can be a single
               OWLClass/OWLDataProperty/OWLObjectProperty object, a list of those objects or None. If you enter a list
               that combines classes and properties (which we don't recommend doing), only axioms for one type will be
               returned, whichever comes first (classes or props).
              mode (str): The return format.
               1) 'native' -> returns triples as tuples of owlapy objects,
               2) 'iri' -> returns triples as tuples of IRIs as string,
@@ -293,27 +355,29 @@
                     continue
                 if mode == 'native':
                     [results.add((j, IRI.create("http://www.w3.org/2000/01/rdf-schema#subClassOf"), concept)) for j in
                      self.get_direct_sub_concepts(concept)]
                     [results.add((concept, IRI.create("http://www.w3.org/2002/07/owl#equivalentClass"), j)) for j in
                      self.reasoner.equivalent_classes(concept, only_named=True)]
                     if not include_all:  # This kind of check is just for performance purposes
-                        [results.add((concept, IRI.create("http://www.w3.org/2000/01/rdf-schema#subClassOf"), j)) for j in
+                        [results.add((concept, IRI.create("http://www.w3.org/2000/01/rdf-schema#subClassOf"), j)) for j
+                         in
                          self.get_direct_parents(concept)]
                 elif mode == 'iri':
-                    [results.add((j.get_iri().as_str(), "http://www.w3.org/2000/01/rdf-schema#subClassOf",
-                                  concept.get_iri().as_str())) for j in self.get_direct_sub_concepts(concept)]
-                    [results.add((concept.get_iri().as_str(), "http://www.w3.org/2002/07/owl#equivalentClass",
-                                  cast(OWLClass, j).get_iri().as_str())) for j in
+                    [results.add((j.str, "http://www.w3.org/2000/01/rdf-schema#subClassOf",
+                                  concept.str)) for j in self.get_direct_sub_concepts(concept)]
+                    [results.add((concept.str, "http://www.w3.org/2002/07/owl#equivalentClass",
+                                  cast(OWLClass, j).str)) for j in
                      self.reasoner.equivalent_classes(concept, only_named=True)]
                     if not include_all:
-                        [results.add((concept.get_iri().as_str(), "http://www.w3.org/2000/01/rdf-schema#subClassOf",
-                                      j.get_iri().as_str())) for j in self.get_direct_parents(concept)]
+                        [results.add((concept.str, "http://www.w3.org/2000/01/rdf-schema#subClassOf",
+                                      j.str)) for j in self.get_direct_parents(concept)]
                 elif mode == "axiom":
-                    [results.add(OWLSubClassOfAxiom(super_class=concept, sub_class=j)) for j in self.get_direct_sub_concepts(concept)]
+                    [results.add(OWLSubClassOfAxiom(super_class=concept, sub_class=j)) for j in
+                     self.get_direct_sub_concepts(concept)]
                     [results.add(OWLEquivalentClassesAxiom([concept, j])) for j in
                      self.reasoner.equivalent_classes(concept, only_named=True)]
                     if not include_all:
                         [results.add(OWLSubClassOfAxiom(super_class=j, sub_class=concept)) for j in
                          self.get_direct_parents(concept)]
         if include_all or not classes:
             for prop in ens:
@@ -332,47 +396,49 @@
                      getattr(self.reasoner, prop_type.lower() + "_property_domains")(prop, direct=True)]
                     [results.add((prop, IRI.create("http://www.w3.org/2000/01/rdf-schema#range"), j)) for j in
                      getattr(self.reasoner, prop_type.lower() + "_property_ranges")(prop, direct=True)]
                     if not include_all:
                         [results.add((prop, IRI.create("http://www.w3.org/2000/01/rdf-schema#subPropertyOf"), j)) for j
                          in getattr(self.reasoner, "super_" + prop_type.lower() + "_properties")(prop, direct=True)]
                 elif mode == 'iri':
-                    [results.add((j.get_iri().as_str(), "http://www.w3.org/2000/01/rdf-schema#subPropertyOf",
-                                  prop.get_iri().as_str())) for j in
+                    [results.add((j.str, "http://www.w3.org/2000/01/rdf-schema#subPropertyOf",
+                                  prop.str)) for j in
                      getattr(self.reasoner, "sub_" + prop_type.lower() + "_properties")(prop, direct=True)]
-                    [results.add((prop.get_iri().as_str(), "http://www.w3.org/2002/07/owl#equivalentProperty",
-                                  j.get_iri().as_str())) for j in
+                    [results.add((prop.str, "http://www.w3.org/2002/07/owl#equivalentProperty",
+                                  j.str)) for j in
                      getattr(self.reasoner, "equivalent_" + prop_type.lower() + "_properties")(prop)]
-                    [results.add((prop.get_iri().as_str(), "http://www.w3.org/2000/01/rdf-schema#domain",
-                                  j.get_iri().as_str())) for j in
+                    [results.add((prop.str, "http://www.w3.org/2000/01/rdf-schema#domain",
+                                  j.str)) for j in
                      getattr(self.reasoner, prop_type.lower() + "_property_domains")(prop, direct=True)]
                     if prop_type == 'Object':
-                        [results.add((prop.get_iri().as_str(), "http://www.w3.org/2000/01/rdf-schema#range",
-                                      j.get_iri().as_str())) for j in
+                        [results.add((prop.str, "http://www.w3.org/2000/01/rdf-schema#range",
+                                      j.str)) for j in
                          self.reasoner.object_property_ranges(prop, direct=True)]
                     # # ranges of data properties not implemented for this mode
                     # else:
-                    #     [results.add((prop.get_iri().as_str(), "http://www.w3.org/2000/01/rdf-schema#range",
+                    #     [results.add((prop.str, "http://www.w3.org/2000/01/rdf-schema#range",
                     #                   str(j))) for j in self.reasoner.data_property_ranges(prop, direct=True)]
 
                     if not include_all:
-                        [results.add((prop.get_iri().as_str(), "http://www.w3.org/2000/01/rdf-schema#subPropertyOf",
-                                      j.get_iri().as_str())) for j
+                        [results.add((prop.str, "http://www.w3.org/2000/01/rdf-schema#subPropertyOf",
+                                      j.str)) for j
                          in getattr(self.reasoner, "super_" + prop_type.lower() + "_properties")(prop, direct=True)]
                 elif mode == 'axiom':
-                    [results.add(getattr(owlapy.model, "OWLSub" + prop_type + "PropertyOfAxiom")(j, prop)) for j in
+                    [results.add(getattr(owlapy.owl_axiom, "OWLSub" + prop_type + "PropertyOfAxiom")(j, prop)) for j in
                      getattr(self.reasoner, "sub_" + prop_type.lower() + "_properties")(prop, direct=True)]
-                    [results.add(getattr(owlapy.model, "OWLEquivalent" + prop_type + "PropertiesAxiom")([j, prop])) for j in
+                    [results.add(getattr(owlapy.owl_axiom, "OWLEquivalent" + prop_type + "PropertiesAxiom")([j, prop]))
+                     for
+                     j in
                      getattr(self.reasoner, "equivalent_" + prop_type.lower() + "_properties")(prop)]
-                    [results.add(getattr(owlapy.model, "OWL" + prop_type + "PropertyDomainAxiom")(prop, j)) for j in
+                    [results.add(getattr(owlapy.owl_axiom, "OWL" + prop_type + "PropertyDomainAxiom")(prop, j)) for j in
                      getattr(self.reasoner, prop_type.lower() + "_property_domains")(prop, direct=True)]
-                    [results.add(getattr(owlapy.model, "OWL" + prop_type + "PropertyRangeAxiom")(prop, j)) for j in
+                    [results.add(getattr(owlapy.owl_axiom, "OWL" + prop_type + "PropertyRangeAxiom")(prop, j)) for j in
                      getattr(self.reasoner, prop_type.lower() + "_property_ranges")(prop, direct=True)]
                     if not include_all:
-                        [results.add(getattr(owlapy.model, "OWLSub" + prop_type + "PropertyOfAxiom")(prop, j)) for j
+                        [results.add(getattr(owlapy.owl_axiom, "OWLSub" + prop_type + "PropertyOfAxiom")(prop, j)) for j
                          in getattr(self.reasoner, "super_" + prop_type.lower() + "_properties")(prop, direct=True)]
 
         return results
 
     def triples(self, mode="native"):
         """Get all tbox and abox axioms/triples.
 
@@ -383,15 +449,14 @@
               3) 'axiom' -> triples are represented by owlapy axioms.
 
         Returns: Iterable of tuples or owlapy axiom, depending on the mode.
         """
         yield from self.abox(mode=mode)
         yield from self.tbox(mode=mode)
 
-
     def ignore_and_copy(self, ignored_classes: Optional[Iterable[OWLClass]] = None,
                         ignored_object_properties: Optional[Iterable[OWLObjectProperty]] = None,
                         ignored_data_properties: Optional[Iterable[OWLDataProperty]] = None) -> 'KnowledgeBase':
         """Makes a copy of the knowledge base while ignoring specified concepts and properties.
 
         Args:
             ignored_classes: Classes to ignore.
@@ -455,14 +520,16 @@
         find the best results considering also the length of the concepts.
 
         Args:
             ce: The concept to be measured.
         Returns:
             Length of the concept.
         """
+        # @TODO: CD: Computing the length of a concept should be disantangled from KB
+        # @TODO: CD: Ideally, this should be a static function
 
         return self.length_metric.length(ce)
 
     def clean(self):
         """Clean all stored values (states and caches) if there is any.
 
         Note:
@@ -678,14 +745,34 @@
             concept: Atomic class for which to find leaf classes.
 
         Returns:
             Leaf classes { x \\| (x subClassOf concept) AND not exist y: y subClassOf x )}. """
         assert isinstance(concept, OWLClass)
         yield from self.class_hierarchy.leaves(of=concept)
 
+    def get_least_general_named_concepts(self) -> Generator[OWLClass, None, None]:
+        """Get leaf classes.
+        @TODO: Docstring needed
+        Returns:
+        """
+        yield from self.class_hierarchy.leaves()
+
+    def least_general_named_concepts(self) -> Generator[OWLClass, None, None]:
+        """Get leaf classes.
+        @TODO: Docstring needed
+        Returns:
+        """
+        yield from self.class_hierarchy.leaves()
+
+    def get_most_general_classes(self) -> Generator[OWLClass, None, None]:
+        """Get most general named concepts classes.
+        @TODO: Docstring needed
+        Returns:"""
+        yield from self.class_hierarchy.roots()
+
     def get_direct_sub_concepts(self, concept: OWLClass) -> Iterable[OWLClass]:
         """Direct sub-classes of atomic class.
 
         Args:
             concept: Atomic concept.
 
         Returns:
@@ -910,14 +997,17 @@
         """Get all concepts of this concept generator.
 
         Returns:
             Concepts.
         """
         yield from self.class_hierarchy.items()
 
+    def get_classes_in_signature(self):
+        return self.get_concepts()
+
     @property
     def concepts(self) -> Iterable[OWLClass]:
         """Get all concepts of this concept generator.
 
         Returns:
             Concepts.
         """
@@ -979,14 +1069,22 @@
         """Get all numeric data properties of this concept generator.
 
         Returns:
             Numeric data properties.
         """
         yield from self.get_data_properties(NUMERIC_DATATYPES)
 
+    def get_double_data_properties(self) -> Iterable[OWLDataProperty]:
+        """Get all numeric data properties of this concept generator.
+
+        Returns:
+            Numeric data properties.
+        """
+        yield from self.get_data_properties(DoubleOWLDatatype)
+
     def get_time_data_properties(self) -> Iterable[OWLDataProperty]:
         """Get all time data properties of this concept generator.
 
         Returns:
             Time data properties.
         """
         yield from self.get_data_properties(TIME_DATATYPES)
```

### Comparing `ontolearn-0.7.0/ontolearn/learners/drill.py` & `ontolearn-0.7.1/ontolearn/learners/drill.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,242 +1,341 @@
+import pandas as pd
+import json
+from owlapy.class_expression import OWLClassExpression
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy import owl_expression_to_dl
 from ontolearn.base_concept_learner import RefinementBasedConceptLearner
 from ontolearn.refinement_operators import LengthBasedRefinement
 from ontolearn.abstracts import AbstractScorer, AbstractNode
 from ontolearn.search import RL_State
-from typing import Set, List, Tuple, Optional, Generator, SupportsFloat, Iterable, FrozenSet
-from owlapy.model import OWLNamedIndividual, OWLClassExpression
+from typing import Set, List, Tuple, Optional, Generator, SupportsFloat, Iterable, FrozenSet, Callable, Union
 from ontolearn.learning_problem import PosNegLPStandard, EncodedPosNegLPStandard
 import torch
 from ontolearn.data_struct import Experience
 from ontolearn.search import DRILLSearchTreePriorityQueue
 from ontolearn.utils import create_experiment_folder
 from collections import Counter, deque
 from itertools import chain
 import time
 import dicee
 import os
-from owlapy.render import DLSyntaxObjectRenderer
+from owlapy import owl_expression_to_dl
+# F1 class will be deprecated to become compute_f1_score function.
 from ontolearn.metrics import F1
+from ontolearn.utils.static_funcs import compute_f1_score
 import random
 from ontolearn.heuristics import CeloeBasedReward
 import torch
 from ontolearn.data_struct import PrepareBatchOfTraining, PrepareBatchOfPrediction
+from tqdm import tqdm
+from ..base.owl.utils import OWLClassExpressionLengthMetric
 
 
 class Drill(RefinementBasedConceptLearner):
-    """ Neuro-Symbolic Class Expression Learning (https://www.ijcai.org/proceedings/2023/0403.pdf)
-    dice embeddings ?
-    pip3 install dicee
-    dicee --path_single_kg KGs/Family/family-benchmark_rich_background.owl --backend rdflib --model Keci --embedding_dim 32 --num_epochs 100 --path_to_store_single_run KeciFamilyRun
-
-
-    """
+    """ Neuro-Symbolic Class Expression Learning (https://www.ijcai.org/proceedings/2023/0403.pdf)"""
 
     def __init__(self, knowledge_base,
-                 path_pretrained_kge: str = None,
-                 path_pretrained_drill: str = None,
+                 path_embeddings: str = None,
                  refinement_operator: LengthBasedRefinement = None,
                  use_inverse=True,
                  use_data_properties=True,
                  use_card_restrictions=True,
-                 card_limit=10,
-                 quality_func: AbstractScorer = None,
+                 use_nominals=True,
+                 quality_func: Callable = None,
                  reward_func: object = None,
-                 batch_size=None, num_workers: int = 1, pretrained_model_name=None,
-                 iter_bound=None, max_num_of_concepts_tested=None, verbose: int = 0, terminate_on_goal=None,
+                 batch_size=None, num_workers: int = 1,
+                 iter_bound=None, max_num_of_concepts_tested=None, verbose: int = 1, terminate_on_goal=None,
                  max_len_replay_memory=256,
                  epsilon_decay: float = 0.01, epsilon_min: float = 0.0,
-                 num_epochs_per_replay: int = 100,
-                 num_episodes_per_replay: int = 2, learning_rate: float = 0.001,
+                 num_epochs_per_replay: int = 2,
+                 num_episodes_per_replay: int = 2,
+                 learning_rate: float = 0.001,
                  max_runtime=None,
                  num_of_sequential_actions=3,
+                 stop_at_goal=True,
                  num_episode=10):
 
         self.name = "DRILL"
+        self.learning_problem = None
+        # (1) Initialize KGE.
+        if path_embeddings and os.path.isfile(path_embeddings):
+            self.df_embeddings = pd.read_csv(path_embeddings, index_col=0).astype('float32')
+            self.num_entities, self.embedding_dim = self.df_embeddings.shape
+        else:
+            print("No pre-trained model...")
+            self.df_embeddings = None
+            self.num_entities, self.embedding_dim = None, 1
 
-        assert path_pretrained_drill is None, "Not implemented the integration of using pre-trained model"
-        if path_pretrained_kge is not None and os.path.isdir(path_pretrained_kge):
-            self.pre_trained_kge = dicee.KGE(path=path_pretrained_kge)
-            self.embedding_dim = self.pre_trained_kge.configs["embedding_dim"]
-        else:
-            print("No pre-trained model...", end="\t")
-            self.pre_trained_kge = None
-            self.embedding_dim = None
-
+        # (2) Initialize Refinement operator.
         if refinement_operator is None:
-            refinement_operator = LengthBasedRefinement(knowledge_base=knowledge_base,
+            refinement_operator = LengthBasedRefinement(knowledge_base=knowledge_base, use_inverse=use_inverse,
                                                         use_data_properties=use_data_properties,
                                                         use_card_restrictions=use_card_restrictions,
-                                                        card_limit=card_limit,
-                                                        use_inverse=use_inverse)
+                                                        use_nominals=use_nominals)
         else:
             refinement_operator = refinement_operator
+
+        # (3) Initialize reward function for the training.
         if reward_func is None:
             self.reward_func = CeloeBasedReward()
         else:
             self.reward_func = reward_func
 
+        # (4) Params.
         self.num_workers = num_workers
         self.learning_rate = learning_rate
         self.num_episode = num_episode
         self.num_of_sequential_actions = num_of_sequential_actions
         self.num_epochs_per_replay = num_epochs_per_replay
         self.max_len_replay_memory = max_len_replay_memory
         self.epsilon_decay = epsilon_decay
         self.epsilon_min = epsilon_min
         self.batch_size = batch_size
         self.verbose = verbose
         self.num_episodes_per_replay = num_episodes_per_replay
         self.seen_examples = dict()
         self.emb_pos, self.emb_neg = None, None
+        self.pos: FrozenSet[OWLNamedIndividual] = None
+        self.neg: FrozenSet[OWLNamedIndividual] = None
+
         self.start_time = None
         self.goal_found = False
-        if self.pre_trained_kge:
-            self.representation_mode = "averaging"
-            self.sample_size = 1
-            self.heuristic_func = DrillHeuristic(mode=self.representation_mode,
-                                                 model_args={'input_shape': (4 * self.sample_size, self.embedding_dim),
+        self.storage_path, _ = create_experiment_folder()
+        # Move to here
+        self.search_tree = DRILLSearchTreePriorityQueue()
+        self.stop_at_goal = stop_at_goal
+        self.epsilon = 1
+
+        if self.df_embeddings is not None:
+            self.heuristic_func = DrillHeuristic(mode="averaging",
+                                                 model_args={'input_shape': (4, self.embedding_dim),
                                                              'first_out_channels': 32,
                                                              'second_out_channels': 16, 'third_out_channels': 8,
                                                              'kernel_size': 3})
             self.experiences = Experience(maxlen=self.max_len_replay_memory)
-            self.epsilon = 1
-
             if self.learning_rate:
                 self.optimizer = torch.optim.Adam(self.heuristic_func.net.parameters(), lr=self.learning_rate)
-
-            if pretrained_model_name:
-                self.pre_trained_model_loaded = True
-                self.heuristic_func.net.load_state_dict(torch.load(pretrained_model_name, torch.device('cpu')))
-            else:
-                self.pre_trained_model_loaded = False
         else:
             self.heuristic_func = CeloeBasedReward()
-            self.representation_mode = None
 
+        # @CD: RefinementBasedConceptLearner redefines few attributes this should be avoided.
         RefinementBasedConceptLearner.__init__(self, knowledge_base=knowledge_base,
                                                refinement_operator=refinement_operator,
                                                quality_func=quality_func,
                                                heuristic_func=self.heuristic_func,
                                                terminate_on_goal=terminate_on_goal,
                                                iter_bound=iter_bound,
                                                max_num_of_concepts_tested=max_num_of_concepts_tested,
                                                max_runtime=max_runtime)
-        self.search_tree = DRILLSearchTreePriorityQueue()
-        self.storage_path, _ = create_experiment_folder()
-        self.learning_problem = None
-        self.renderer = DLSyntaxObjectRenderer()
-
-        self.operator: RefinementBasedConceptLearner
+        # CD: This setting the valiable will be removed later.
+        self.quality_func = compute_f1_score
 
-    def initialize_class_expression_learning_problem(self, pos: Set[OWLNamedIndividual], neg: Set[OWLNamedIndividual]):
-        """
-            Determine the learning problem and initialize the search.
-            1) Convert the string representation of an individuals into the owlready2 representation.
-            2) Sample negative examples if necessary.
-            3) Initialize the root and search tree.
-            """
-        self.clean()
+    def initialize_training_class_expression_learning_problem(self,
+                                                              pos: FrozenSet[OWLNamedIndividual],
+                                                              neg: FrozenSet[OWLNamedIndividual]) -> RL_State:
+        """ Initialize """
+        assert isinstance(pos, frozenset) and isinstance(neg, frozenset), "Pos and neg must be sets"
         assert 0 < len(pos) and 0 < len(neg)
+        # print("Initializing learning problem")
+        # (2) Obtain embeddings of positive and negative examples.
+        self.init_embeddings_of_examples(pos_uri=pos, neg_uri=neg)
 
-        # 1.
-        # Generate a Learning Problem
-        self.learning_problem = PosNegLPStandard(pos=set(pos), neg=set(neg)).encode_kb(self.kb)
-        # 2. Obtain embeddings of positive and negative examples.
-        if self.pre_trained_kge is None:
-            self.emb_pos = None
-            self.emb_neg = None
-        else:
-            self.emb_pos = self.pre_trained_kge.get_entity_embeddings([owl_indv.get_iri().as_str() for owl_indv in pos])
-            self.emb_neg = self.pre_trained_kge.get_entity_embeddings([owl_indv.get_iri().as_str() for owl_indv in neg])
+        self.pos = pos
+        self.neg = neg
 
-            # (3) Take the mean of positive and negative examples and reshape it into (1,1,embedding_dim) for mini batching.
-            self.emb_pos = torch.mean(self.emb_pos, dim=0)
-            self.emb_pos = self.emb_pos.view(1, 1, self.emb_pos.shape[0])
-            self.emb_neg = torch.mean(self.emb_neg, dim=0)
-            self.emb_neg = self.emb_neg.view(1, 1, self.emb_neg.shape[0])
-            # Sanity checking
-            if torch.isnan(self.emb_pos).any() or torch.isinf(self.emb_pos).any():
-                raise ValueError('invalid value detected in E+,\n{0}'.format(self.emb_pos))
-            if torch.isnan(self.emb_neg).any() or torch.isinf(self.emb_neg).any():
-                raise ValueError('invalid value detected in E-,\n{0}'.format(self.emb_neg))
+        self.emb_pos = self.get_embeddings_individuals(individuals=[i.str for i in self.pos])
+        self.emb_neg = self.get_embeddings_individuals(individuals=[i.str for i in self.neg])
 
-        # Initialize ROOT STATE
+        # (3) Initialize the root state of the quasi-ordered RL env.
+        # print("Initializing Root RL state...", end=" ")
         root_rl_state = self.create_rl_state(self.start_class, is_root=True)
+        # print("Computing its quality...", end=" ")
         self.compute_quality_of_class_expression(root_rl_state)
+        # print(f"{root_rl_state}...")
+        self.epsilon = 1
+        self._number_of_tested_concepts = 0
+        self.reward_func.lp = self.learning_problem
         return root_rl_state
 
-    def fit(self, lp: PosNegLPStandard, max_runtime=None):
+    def rl_learning_loop(self, num_episode: int,
+                         pos_uri: FrozenSet[OWLNamedIndividual],
+                         neg_uri: FrozenSet[OWLNamedIndividual]) -> List[float]:
+        """ Reinforcement Learning Training Loop
+
+        Initialize RL environment for a given learning problem (E^+ pos_iri and E^- neg_iri )
+
+        Training:
+                    2.1 Obtain a trajectory: A sequence of RL states/DL concepts
+                    T, Person, (Female and \forall hasSibling Female).
+                    Rewards at each transition are also computed
+        """
+
+        # (1) Initialize RL environment for training
+        root_rl_state = self.initialize_training_class_expression_learning_problem(pos_uri, neg_uri)
+        sum_of_rewards_per_actions = []
+
+        # (2) Reinforcement Learning offline training loop
+        for th in range(num_episode):
+            if self.verbose > 0:
+                print(f"Episode {th + 1}: ", end=" ")
+            # Sequence of decisions
+            start_time = time.time()
+            if self.verbose > 0:
+                print(f"Taking {self.num_of_sequential_actions} actions...", end="  ")
+
+            sequence_of_states, rewards = self.sequence_of_actions(root_rl_state)
+            if self.verbose > 0:
+                print(f"Runtime {time.time() - start_time:.3f} secs | Max reward: {max(rewards):.3f} | Prob of Explore {self.epsilon:.3f}",
+                    end=" | ")
+            # Form experiences
+            self.form_experiences(sequence_of_states, rewards)
+            sum_of_rewards_per_actions.append(sum(rewards))
+            """(3.2) Learn from experiences"""
+            self.learn_from_replay_memory()
+            """(3.4) Exploration Exploitation"""
+            if self.epsilon < 0:
+                break
+            self.epsilon -= self.epsilon_decay
+
+        return sum_of_rewards_per_actions
+
+    def train(self, dataset: Optional[Iterable[Tuple[str, Set, Set]]] = None,
+              num_of_target_concepts: int = 1,
+              num_learning_problems: int = 1):
+        """ Training RL agent
+        (1) Generate Learning Problems
+        (2) For each learning problem, perform the RL loop
+
+        """
+        if isinstance(self.heuristic_func, CeloeBasedReward):
+            print("No training")
+            return self.terminate_training()
+
+        if self.verbose > 0:
+            training_data = tqdm(self.generate_learning_problems(num_of_target_concepts,
+                                                                 num_learning_problems),
+                                 desc="Training over learning problems")
+        else:
+            training_data = self.generate_learning_problems(num_of_target_concepts,
+                                                            num_learning_problems)
+
+        for (target_owl_ce, positives, negatives) in training_data:
+            print(f"\nGoal Concept:\t {target_owl_ce}\tE^+:[{len(positives)}]\t E^-:[{len(negatives)}]")
+            sum_of_rewards_per_actions = self.rl_learning_loop(num_episode=self.num_episode,
+                                                               pos_uri=frozenset(positives),
+                                                               neg_uri=frozenset(negatives))
+            if self.verbose > 0:
+                print("Sum of rewards for each trial", sum_of_rewards_per_actions)
+
+            self.seen_examples.setdefault(len(self.seen_examples), dict()).update(
+                {'Concept': target_owl_ce,
+                 'Positives': [i.str for i in positives],
+                 'Negatives': [i.str for i in negatives]})
+        return self.terminate_training()
+
+    def save(self, directory: str) -> None:
+        """ save weights of the deep Q-network"""
+        # (1) Create a folder
+        os.makedirs(directory, exist_ok=True)
+        # (2) Save the weights
+        self.save_weights(path=directory + "/drill.pth")
+        # (3) Save seen examples
+        with open(f"{directory}/seen_examples.json", 'w', encoding='utf-8') as f:
+            json.dump(self.seen_examples, f, ensure_ascii=False, indent=4)
+
+    def load(self, directory: str = None) -> None:
+        """ load weights of the deep Q-network"""
+        if directory:
+            if os.path.isdir(directory):
+                if isinstance(self.heuristic_func, CeloeBasedReward):
+                    print("No loading because embeddings not provided")
+                else:
+                    self.heuristic_func.net.load_state_dict(torch.load(directory + "/drill.pth", torch.device('cpu')))
+            else:
+                print(f"{directory} is not found...")
+
+    def fit(self, learning_problem: PosNegLPStandard, max_runtime=None):
         if max_runtime:
-            assert isinstance(max_runtime, float)
+            assert isinstance(max_runtime, float) or isinstance(max_runtime, int)
             self.max_runtime = max_runtime
 
+        self.clean()
+        # (1) Initialize the start time
+        self.start_time = time.time()
+        # (2) Two mappings from a unique OWL Concept to integer, where a unique concept represents the type info
+        # C(x) s.t. x \in E^+ and  C(y) s.t. y \in E^-.
+        # print("Counting types of positive examples..")
         pos_type_counts = Counter(
-            [i for i in chain.from_iterable((self.kb.get_types(ind, direct=True) for ind in lp.pos))])
+            [i for i in chain.from_iterable((self.kb.get_types(ind, direct=True) for ind in learning_problem.pos))])
+        # print("Counting types of negative examples..")
         neg_type_counts = Counter(
-            [i for i in chain.from_iterable((self.kb.get_types(ind, direct=True) for ind in lp.neg))])
+            [i for i in chain.from_iterable((self.kb.get_types(ind, direct=True) for ind in learning_problem.neg))])
+        # (3) Favor some OWLClass over others
         type_bias = pos_type_counts - neg_type_counts
-        # (1) Initialize learning problem
-        root_state = self.initialize_class_expression_learning_problem(pos=lp.pos, neg=lp.neg)
-        # (2) Add root state into search tree
+        # (4) Initialize learning problem
+        root_state = self.initialize_training_class_expression_learning_problem(pos=learning_problem.pos,
+                                                                                neg=learning_problem.neg)
+        self.operator.set_input_examples(pos=learning_problem.pos, neg=learning_problem.neg)
+        assert root_state.quality>0, f"Root state {root_state} must have quality >0"
+        # (5) Add root state into search tree
         root_state.heuristic = root_state.quality
         self.search_tree.add(root_state)
-
-        self.start_time = time.time()
-        # (3) Inject Type Bias
+        best_found_quality = 0
+        # (6) Inject Type Bias/Favor
         for x in (self.create_rl_state(i, parent_node=root_state) for i in type_bias):
             self.compute_quality_of_class_expression(x)
             x.heuristic = x.quality
+            if x.quality > best_found_quality:
+                best_found_quality = x.quality
             self.search_tree.add(x)
 
-        # (3) Search
-        for i in range(1, self.iter_bound):
-            # (1) Get the most fitting RL-state
+        for _ in tqdm(range(0, self.iter_bound),
+                      desc=f"Learning OWL Class Expression at most {self.iter_bound} iteration"):
+            assert len(self.search_tree) > 0
+            self.search_tree.show_current_search_tree()
+
+            # (6.1) Get the most fitting RL-state.
             most_promising = self.next_node_to_expand()
             next_possible_states = []
-            # (2) Refine (1)
-            for ref in self.apply_refinement(most_promising):
+            # (6.2) Checking the runtime termination criterion.
+            if time.time() - self.start_time > self.max_runtime:
+                return self.terminate()
+            # (6.3) Refine (6.1)
+            # Convert this into tqdm with an update ?!
+            for ref in (tqdm_bar := tqdm(self.apply_refinement(most_promising), position=0, leave=True)):
+                # (6.3.1) Checking the runtime termination criterion.
                 if time.time() - self.start_time > self.max_runtime:
-                    return self.terminate()
-                # (2.1) If the next possible RL-state is not a dead end
-                # (2.1.) If the refinement of (1) is not equivalent to \bottom
-
-                if len(ref.instances):
-                    # Compute quality
-                    self.compute_quality_of_class_expression(ref)
-                    if ref.quality == 0:
-                        continue
-                    next_possible_states.append(ref)
+                    break
+                # (6.3.2) Compute the quality stored in the RL state
+                self.compute_quality_of_class_expression(ref)
+                if ref.quality == 0:
+                    continue
+                tqdm_bar.set_description_str(
+                    f"Step {_} | Refining {owl_expression_to_dl(most_promising.concept)} | {owl_expression_to_dl(ref.concept)} | Quality:{ref.quality:.4f}")
+
+                if ref.quality > best_found_quality:
+                    print("\nBest Found:", ref)
+                    best_found_quality = ref.quality
+                # (6.3.3) Consider qualifying RL states as next possible states to transition.
+                next_possible_states.append(ref)
+                # (6.3.4) Checking the goal termination criterion.
+                if self.stop_at_goal:
                     if ref.quality == 1.0:
                         break
-            try:
-                assert len(next_possible_states) > 0
-            except AssertionError:
-                print(f'DEAD END at {most_promising}')
-                continue
-            if len(next_possible_states) == 0:
-                # We do not need to compute Q value based on embeddings of "zeros".
+            if not next_possible_states:
                 continue
-
-            if self.pre_trained_kge:
-                preds = self.predict_values(current_state=most_promising, next_states=next_possible_states)
-            else:
-                preds = None
+            # (6.4) Predict Q-values
+            preds = self.predict_values(current_state=most_promising,
+                                        next_states=next_possible_states) if self.df_embeddings is not None else None
+            # (6.5) Add next possible states into search tree based on predicted Q values
             self.goal_found = self.update_search(next_possible_states, preds)
             if self.goal_found:
                 if self.terminate_on_goal:
                     return self.terminate()
-            if time.time() - self.start_time > self.max_runtime:
-                return self.terminate()
-
-    def show_search_tree(self, heading_step: str, top_n: int = 10) -> None:
-        assert ValueError('show_search_tree')
-
-    def terminate_training(self):
-        return self
+        return self.terminate()
 
     def fit_from_iterable(self,
                           dataset: List[Tuple[object, Set[OWLNamedIndividual], Set[OWLNamedIndividual]]],
                           max_runtime: int = None) -> List:
         """
         Dataset is a list of tuples where the first item is either str or OWL class expression indicating target
         concept.
@@ -263,182 +362,96 @@
                       'Accuracy': accuracy,
                       'NumClassTested': self._number_of_tested_concepts,
                       'Runtime': rn}
             results.append(report)
 
         return results
 
-    def init_training(self, pos_uri: Set[OWLNamedIndividual], neg_uri: Set[OWLNamedIndividual]) -> None:
-        """
-        Initialize training.
-        """
-        """ (1) Generate a Learning Problem """
-        self._learning_problem = PosNegLPStandard(pos=pos_uri, neg=neg_uri).encode_kb(self.kb)
-        """ (2) Update REWARD FUNC FOR each learning problem """
-        self.reward_func.lp = self._learning_problem
-        """ (3) Obtain embeddings of positive and negative examples """
-        if self.pre_trained_kge is not None:
-            self.emb_pos = self.pre_trained_kge.get_entity_embeddings(
-                [owl_individual.get_iri().as_str() for owl_individual in pos_uri])
-            self.emb_neg = self.pre_trained_kge.get_entity_embeddings(
-                [owl_individual.get_iri().as_str() for owl_individual in neg_uri])
+    def init_embeddings_of_examples(self, pos_uri: FrozenSet[OWLNamedIndividual],
+                                    neg_uri: FrozenSet[OWLNamedIndividual]):
+        if self.df_embeddings is not None:
+            # Shape:|E^+| x d
+            # @TODO: CD: Why not use self.get_embeddings_individuals(pos_uri)
+            self.pos = pos_uri
+            self.neg = neg_uri
+
+            self.emb_pos = torch.from_numpy(self.df_embeddings.loc[
+                                                [owl_individual.str.strip() for owl_individual in
+                                                 pos_uri]].values)
+            # Shape: |E^+| x d
+            self.emb_neg = torch.from_numpy(self.df_embeddings.loc[
+                                                [owl_individual.str.strip() for owl_individual in
+                                                 neg_uri]].values)
             """ (3) Take the mean of positive and negative examples and reshape it into (1,1,embedding_dim) for mini
              batching """
+            # Shape: d
             self.emb_pos = torch.mean(self.emb_pos, dim=0)
-            self.emb_pos = self.emb_pos.view(1, 1, self.emb_pos.shape[0])
+            # Shape: d
             self.emb_neg = torch.mean(self.emb_neg, dim=0)
+            # Shape: 1, 1, d
+            self.emb_pos = self.emb_pos.view(1, 1, self.emb_pos.shape[0])
             self.emb_neg = self.emb_neg.view(1, 1, self.emb_neg.shape[0])
             # Sanity checking
             if torch.isnan(self.emb_pos).any() or torch.isinf(self.emb_pos).any():
                 raise ValueError('invalid value detected in E+,\n{0}'.format(self.emb_pos))
             if torch.isnan(self.emb_neg).any() or torch.isinf(self.emb_neg).any():
                 raise ValueError('invalid value detected in E-,\n{0}'.format(self.emb_neg))
-        else:
-            self.emb_pos = None
-            self.emb_neg = None
-
-        # Default exploration exploitation tradeoff.
-        """ (3) Default  exploration exploitation tradeoff and number of expression tested """
-        self.epsilon = 1
-        self._number_of_tested_concepts = 0
 
     def create_rl_state(self, c: OWLClassExpression, parent_node: Optional[RL_State] = None,
                         is_root: bool = False) -> RL_State:
         """ Create an RL_State instance."""
-        instances: Generator
-        instances = set(self.kb.individuals(c))
-        instances_bitset: FrozenSet[OWLNamedIndividual]
-        instances_bitset = self.kb.individuals_set(c)
-
-        if self.pre_trained_kge is not None:
-            raise NotImplementedError("No pre-trained knowledge")
-
-        rl_state = RL_State(c, parent_node=parent_node,
-                            is_root=is_root,
-                            instances=instances,
-                            instances_bitset=instances_bitset, embeddings=None)
-        rl_state.length = self.kb.concept_len(c)
+        rl_state = RL_State(c, parent_node=parent_node, is_root=is_root)
+        # TODO: Will be fixed by https://github.com/dice-group/owlapy/issues/35
+        rl_state.length = OWLClassExpressionLengthMetric.get_default().length(c)
         return rl_state
 
     def compute_quality_of_class_expression(self, state: RL_State) -> None:
-        """ Compute Quality of owl class expression."""
-        self.quality_func.apply(state, state.instances_bitset, self.learning_problem)
-        self._number_of_tested_concepts += 1
+        """ Compute Quality of owl class expression.
+        # (1) Perform concept retrieval
+        # (2) Compute the quality w.r.t. (1), positive and negative examples
+        # (3) Increment the number of tested concepts attribute.
 
-    def apply_refinement(self, rl_state: RL_State) -> Generator:
         """
-        Refine an OWL Class expression \\|= Observing next possible states.
+        individuals = frozenset({i for i in self.kb.individuals(state.concept)})
 
-        1. Generate concepts by refining a node.
-        1.1. Compute allowed length of refinements.
-        1.2. Convert concepts if concepts do not belong to  self.concepts_to_ignore.
-             Note that          i.str not in self.concepts_to_ignore => O(1) if a set is being used.
-        3. Return Generator.
-        """
-        assert isinstance(rl_state, RL_State)
+        quality = self.quality_func(individuals=individuals, pos=self.pos, neg=self.neg)
+        state.quality = quality
+        self._number_of_tested_concepts += 1
+
+    def apply_refinement(self, rl_state: RL_State) -> Generator:
+        """ Downward refinements"""
+        assert isinstance(rl_state, RL_State), f"It must be rl state {rl_state}"
+        assert isinstance(rl_state.concept, OWLClassExpression)
         self.operator: LengthBasedRefinement
-        # 1.
         for i in self.operator.refine(rl_state.concept):  # O(N)
             yield self.create_rl_state(i, parent_node=rl_state)
 
-    def rl_learning_loop(self, num_episode: int,
-                         pos_uri: Set[OWLNamedIndividual],
-                         neg_uri: Set[OWLNamedIndividual],
-                         goal_path: List[RL_State] = None) -> List[float]:
-        """ Reinforcement Learning Training Loop
-
-        Initialize RL environment for a given learning problem (E^+ pos_iri and E^- neg_iri )
-
-        Training:
-                    2.1 Obtain a trajectory: A sequence of RL states/DL concepts
-                    T, Person, (Female and \forall hasSibling Female).
-                    Rewards at each transition are also computed
-        """
-
-        # (1) Initialize RL environment for training
-        print("Reinforcement Learning loop started...")
-        assert isinstance(pos_uri, Set) and isinstance(neg_uri, Set)
-        self.init_training(pos_uri=pos_uri, neg_uri=neg_uri)
-        root_rl_state = self.create_rl_state(self.start_class, is_root=True)
-        self.compute_quality_of_class_expression(root_rl_state)
-        sum_of_rewards_per_actions = []
-
-        # () Reinforcement Learning offline training loop
-        for th in range(num_episode):
-            print(f"Episode {th + 1}: ", end=" ")
-            # Sequence of decisions
-            start_time = time.time()
-            sequence_of_states, rewards = self.sequence_of_actions(root_rl_state)
-            print(f"Runtime {time.time() - start_time:.3f} secs", end=" | ")
-            print(f"Max reward: {max(rewards)}", end=" | ")
-            print(f"Epsilon : {self.epsilon}")
-            """
-            print('#' * 10, end='')
-            print(f'\t{th}.th Sequence of Actions\t', end='')
-            print('#' * 10)
-            for step, (current_state, next_state) in enumerate(sequence_of_states):
-                print(f'{step}. Transition \n{current_state}\n----->\n{next_state}')
-                print(f'Reward:{rewards[step]}')
-
-            print('{0}.th iter. SumOfRewards: {1:.2f}\t'
-                  'Epsilon:{2:.2f}\t'
-                  '|ReplayMem.|:{3}'.format(th, sum(rewards),
-                                            self.epsilon,
-                                            len(self.experiences)))
-            """
-            # Form experiences
-            self.form_experiences(sequence_of_states, rewards)
-            sum_of_rewards_per_actions.append(sum(rewards))
-            """(3.2) Learn from experiences"""
-            # if th % self.num_episodes_per_replay == 0:
-            self.learn_from_replay_memory()
-            """(3.4) Exploration Exploitation"""
-            if self.epsilon < 0:
-                break
-            self.epsilon -= self.epsilon_decay
-
-        return sum_of_rewards_per_actions
-
     def select_next_state(self, current_state, next_rl_states) -> Tuple[RL_State, float]:
-        if True:
-            next_selected_rl_state = self.exploration_exploitation_tradeoff(current_state, next_rl_states)
-            return next_selected_rl_state, self.reward_func.apply(current_state, next_selected_rl_state)
-        else:
-            for i in next_rl_states:
-                print(i)
-            exit(1)
+        next_selected_rl_state = self.exploration_exploitation_tradeoff(current_state, next_rl_states)
+        return next_selected_rl_state, self.reward_func.apply(current_state, next_selected_rl_state)
 
-    def sequence_of_actions(self, root_rl_state: RL_State) -> Tuple[List[Tuple[AbstractNode, AbstractNode]],
-    List[SupportsFloat]]:
+    def sequence_of_actions(self, root_rl_state: RL_State) \
+            -> Tuple[List[Tuple[RL_State, RL_State]], List[SupportsFloat]]:
+        """ Performing sequence of actions in an RL env whose root state is ⊤"""
         assert isinstance(root_rl_state, RL_State)
-
         current_state = root_rl_state
         path_of_concepts = []
         rewards = []
-
-        assert len(current_state.embeddings) > 0  # Embeddings are initialized
         assert current_state.quality > 0
         assert current_state.heuristic is None
-
         # (1)
         for _ in range(self.num_of_sequential_actions):
             assert isinstance(current_state, RL_State)
             # (1.1) Observe Next RL states, i.e., refine an OWL class expression
             next_rl_states = list(self.apply_refinement(current_state))
-            # (1.2)
-            if len(next_rl_states) == 0:  # DEAD END
-                # assert (current_state.length + 3) <= self.max_child_length
-                print('No next state')
-                break
             next_selected_rl_state, reward = self.select_next_state(current_state, next_rl_states)
             # (1.4) Remember the concept path
             path_of_concepts.append((current_state, next_selected_rl_state))
             # (1.5)
             rewards.append(reward)
-
             # (1.6)
             current_state = next_selected_rl_state
         return path_of_concepts, rewards
 
     def form_experiences(self, state_pairs: List, rewards: List) -> None:
         """
         Form experiences from a sequence of concepts and corresponding rewards.
@@ -457,14 +470,18 @@
             self.experiences.append(
                 (e, e_next, max(rewards[th:])))  # given e, e_next, Q val is the max Q value reachable.
 
     def learn_from_replay_memory(self) -> None:
         """
         Learning by replaying memory.
         """
+
+        if isinstance(self.heuristic_func, CeloeBasedReward):
+            return None
+
         # print('learn_from_replay_memory', end="\t|\t")
         current_state_batch: List[torch.FloatTensor]
         next_state_batch: List[torch.FloatTensor]
         current_state_batch, next_state_batch, y = self.experiences.retrieve()
         # N, 1, dim
         current_state_batch = torch.cat(current_state_batch, dim=0)
         # N, 1, dim
@@ -484,44 +501,40 @@
             print(e)
             raise
 
         assert current_state_batch.shape[2] == next_state_batch.shape[2] == self.emb_pos.shape[2] == self.emb_neg.shape[
             2]
 
         num_next_states = len(current_state_batch)
-
+        # Ensure that X has the same data type as parameters of DRILL
         # batch, 4, dim
-        X = torch.cat([current_state_batch, next_state_batch, self.emb_pos.repeat((num_next_states, 1, 1)),
-                       self.emb_neg.repeat((num_next_states, 1, 1))], 1)
-        """
-        # We can skip this part perhaps
-        dataset = PrepareBatchOfTraining(current_state_batch=current_state_batch,
-                                         next_state_batch=next_state_batch,
-                                         p=self.emb_pos, n=self.emb_neg, q=q_values)
-        num_experience = len(dataset)
-        data_loader = torch.utils.data.DataLoader(dataset,
-                                                  batch_size=self.batch_size, shuffle=True,
-                                                  num_workers=self.num_workers)
-        """
-        # print(f'Experiences:{X.shape}', end="\t|\t")
+        X = torch.cat([
+            current_state_batch,
+            next_state_batch,
+            self.emb_pos.repeat((num_next_states, 1, 1)),
+            self.emb_neg.repeat((num_next_states, 1, 1))], 1)
+
         self.heuristic_func.net.train()
         total_loss = 0
+        if self.verbose > 0:
+            print(f"Experience replay Experiences ({X.shape})", end=" | ")
         for m in range(self.num_epochs_per_replay):
             self.optimizer.zero_grad()  # zero the gradient buffers
             # forward: n by 4, dim
             predicted_q = self.heuristic_func.net.forward(X)
             # loss
             loss = self.heuristic_func.net.loss(predicted_q, y)
+            if self.verbose > 0:
+                print(f"{m} Replay loss: {loss.item():.5f}", end=" | ")
             total_loss += loss.item()
             # compute the derivative of the loss w.r.t. the parameters using backpropagation
             loss.backward()
             # clip gradients if gradients are killed. =>torch.nn.utils.clip_grad_norm_(self.model.parameters(), 0.5)
             self.optimizer.step()
-
-        # print(f'Average loss during training: {total_loss / self.num_epochs_per_replay:0.5f}')
+        print(f'Avg loss: {total_loss / self.num_epochs_per_replay:0.5f}')
         self.heuristic_func.net.eval()
 
     def update_search(self, concepts, predicted_Q_values=None):
         """
         @param concepts:
         @param predicted_Q_values:
         @return:
@@ -537,62 +550,30 @@
             for child_node in concepts:
                 child_node.heuristic = child_node.quality
                 if child_node.quality > 0:  # > too weak, ignore.
                     self.search_tree.add(child_node)
                 if child_node.quality == 1:
                     return child_node
 
-    def assign_embeddings(self, rl_state: RL_State) -> None:
-        """
-        Assign embeddings to a rl state. A rl state is represented with vector representation of
-        all individuals belonging to a respective OWLClassExpression.
-        """
-        assert isinstance(rl_state, RL_State)
-        # (1) Detect mode of representing OWLClassExpression
-        if self.representation_mode == 'averaging':
-            # (2) if input node has not seen before, assign embeddings.
-            if rl_state.embeddings is None:
-                assert isinstance(rl_state.concept, OWLClassExpression)
-                # (3) Retrieval instances via our retrieval function (R(C)). Be aware Open World and Closed World
+    def get_embeddings_individuals(self, individuals: List[str]) -> torch.FloatTensor:
+        assert isinstance(individuals, list)
+        if len(individuals) == 0:
+            emb = torch.zeros(1, 1, self.embedding_dim)
+        else:
 
-                rl_state.instances = set(self.kb.individuals(rl_state.concept))
-                # (4) Retrieval instances in terms of bitset.
-                rl_state.instances_bitset = self.kb.individuals_set(rl_state.concept)
-                # (5) |R(C)|=\emptyset ?
-                if len(rl_state.instances) == 0:
-                    # If|R(C)|=\emptyset, then represent C with zeros
-                    if self.pre_trained_kge is not None:
-                        emb = torch.zeros(1, self.sample_size, self.embedding_dim)
-                    else:
-                        emb = torch.rand(size=(1, self.sample_size, self.embedding_dim))
-                else:
-                    # If|R(C)| \not= \emptyset, then take the mean of individuals.
-                    str_individuals = [i.get_iri().as_str() for i in rl_state.instances]
-                    assert len(str_individuals) > 0
-                    if self.pre_trained_kge is not None:
-                        emb = self.pre_trained_kge.get_entity_embeddings(str_individuals)
-                        emb = torch.mean(emb, dim=0)
-                        emb = emb.view(1, self.sample_size, self.embedding_dim)
-                    else:
-                        emb = torch.rand(size=(1, self.sample_size, self.embedding_dim))
-                # (6) Assign embeddings
-                rl_state.embeddings = emb
+            if self.df_embeddings is not None:
+                assert isinstance(individuals[0], str)
+                emb = torch.mean(torch.from_numpy(self.df_embeddings.loc[individuals].values, ), dim=0)
+                emb = emb.view(1, 1, self.embedding_dim)
             else:
-                """ Embeddings already assigned."""
-                try:
-                    assert rl_state.embeddings.shape == (1, self.sample_size, self.embedding_dim)
-                except AssertionError as e:
-                    print(e)
-                    print(rl_state)
-                    print(rl_state.embeddings.shape)
-                    print((1, self.sample_size, self.instance_embeddings.shape[1]))
-                    raise
-        else:
-            """ No embeddings available assigned."""""
-            assert self.representation_mode is None
+                emb = torch.zeros(1, 1, self.embedding_dim)
+        return emb
+
+    def get_individuals(self, rl_state: RL_State) -> List[str]:
+        return [owl_individual.str.strip() for owl_individual in self.kb.individuals(rl_state.concept)]
 
     def get_embeddings(self, instances) -> None:
         if self.representation_mode == 'averaging':
             # (2) if input node has not seen before, assign embeddings.
             if rl_state.embeddings is None:
                 assert isinstance(rl_state.concept, OWLClassExpression)
                 # (3) Retrieval instances via our retrieval function (R(C)). Be aware Open World and Closed World
@@ -605,15 +586,15 @@
                     # If|R(C)|=\emptyset, then represent C with zeros
                     if self.pre_trained_kge is not None:
                         emb = torch.zeros(1, self.sample_size, self.embedding_dim)
                     else:
                         emb = torch.rand(size=(1, self.sample_size, self.embedding_dim))
                 else:
                     # If|R(C)| \not= \emptyset, then take the mean of individuals.
-                    str_individuals = [i.get_iri().as_str() for i in rl_state.instances]
+                    str_individuals = [i.str for i in rl_state.instances]
                     assert len(str_individuals) > 0
                     if self.pre_trained_kge is not None:
                         emb = self.pre_trained_kge.get_entity_embeddings(str_individuals)
                         emb = torch.mean(emb, dim=0)
                         emb = emb.view(1, self.sample_size, self.embedding_dim)
                     else:
                         emb = torch.rand(size=(1, self.sample_size, self.embedding_dim))
@@ -629,81 +610,87 @@
                     print(rl_state.embeddings.shape)
                     print((1, self.sample_size, self.instance_embeddings.shape[1]))
                     raise
         else:
             """ No embeddings available assigned."""""
             assert self.representation_mode is None
 
-    def save_weights(self):
+    def assign_embeddings(self, rl_state: RL_State) -> None:
         """
-        Save pytorch weights.
+        Assign embeddings to a rl state. A rl state is represented with vector representation of
+        all individuals belonging to a respective OWLClassExpression.
         """
-        # Save model.
-        torch.save(self.heuristic_func.net.state_dict(),
-                   self.storage_path + '/{0}.pth'.format(self.heuristic_func.name))
+        assert isinstance(rl_state, RL_State)
+        assert isinstance(rl_state.concept, OWLClassExpression)
+        rl_state.embeddings = self.get_embeddings_individuals(self.get_individuals(rl_state))
+
+    def save_weights(self, path: str = None) -> None:
+        """ Save weights DQL"""
+        if path:
+            pass
+        else:
+            path = f"{self.storage_path}/{self.heuristic_func.name}.pth"
 
-    def exploration_exploitation_tradeoff(self, current_state: AbstractNode,
+        if isinstance(self.heuristic_func, CeloeBasedReward):
+            print("No saving..")
+        else:
+            torch.save(self.heuristic_func.net.state_dict(), path)
+
+    def exploration_exploitation_tradeoff(self,
+                                          current_state: AbstractNode,
                                           next_states: List[AbstractNode]) -> AbstractNode:
         """
         Exploration vs Exploitation tradeoff at finding next state.
         (1) Exploration.
         (2) Exploitation.
         """
+        self.assign_embeddings(current_state)
         if random.random() < self.epsilon:
             next_state = random.choice(next_states)
-            self.assign_embeddings(next_state)
         else:
             next_state = self.exploitation(current_state, next_states)
+        self.assign_embeddings(next_state)
         self.compute_quality_of_class_expression(next_state)
         return next_state
 
-    def exploitation(self, current_state: AbstractNode, next_states: List[AbstractNode]) -> AbstractNode:
+    def exploitation(self, current_state: AbstractNode, next_states: List[AbstractNode]) -> RL_State:
         """
         Find next node that is assigned with highest predicted Q value.
 
         (1) Predict Q values : predictions.shape => torch.Size([n, 1]) where n = len(next_states).
 
         (2) Find the index of max value in predictions.
 
         (3) Use the index to obtain next state.
 
         (4) Return next state.
         """
-        predictions: torch.Tensor = self.predict_values(current_state, next_states)
+        # predictions: torch.Size([len(next_states)])
+        predictions: torch.FloatTensor = self.predict_values(current_state, next_states)
         argmax_id = int(torch.argmax(predictions))
         next_state = next_states[argmax_id]
-        """
-        # Sanity checking
-        print('#'*10)
-        for s, q in zip(next_states, predictions):
-            print(s, q)
-        print('#'*10)
-        print(next_state,f'\t {torch.max(predictions)}')
-        """
         return next_state
 
-    def predict_values(self, current_state: AbstractNode, next_states: List[AbstractNode]) -> torch.Tensor:
+    def predict_values(self, current_state: RL_State, next_states: List[RL_State]) -> torch.Tensor:
         """
         Predict promise of next states given current state.
 
         Returns:
             Predicted Q values.
         """
-        # Instead it should be get embeddings ?
-        self.assign_embeddings(current_state)
+
         assert len(next_states) > 0
         with torch.no_grad():
             self.heuristic_func.net.eval()
             # create batch batch.
             next_state_batch = []
             for _ in next_states:
-                self.assign_embeddings(_)
-                next_state_batch.append(_.embeddings)
+                next_state_batch.append(self.get_embeddings_individuals(self.get_individuals(_)))
             next_state_batch = torch.cat(next_state_batch, dim=0)
-            x = PrepareBatchOfPrediction(current_state.embeddings,
+            x = PrepareBatchOfPrediction(self.get_embeddings_individuals(self.get_individuals(current_state)),
                                          next_state_batch,
                                          self.emb_pos,
                                          self.emb_neg).get_all()
             predictions = self.heuristic_func.net.forward(x)
         return predictions
 
     @staticmethod
@@ -712,79 +699,74 @@
         if rl_state.parent_node:
             hierarchy.appendleft(rl_state.parent_node)
             while hierarchy[-1].parent_node is not None:
                 hierarchy.append(hierarchy[-1].parent_node)
             hierarchy.appendleft(rl_state)
         return list(hierarchy)
 
-    def generate_learning_problems(self, dataset: Optional[Iterable[Tuple[str, Set, Set]]] = None,
-                                   num_of_target_concepts: int = 3,
-                                   num_learning_problems: int = 5) -> Iterable[
+    def generate_learning_problems(self,
+                                   num_of_target_concepts,
+                                   num_learning_problems) -> List[
         Tuple[str, Set, Set]]:
         """ Generate learning problems if none is provided.
 
             Time complexity: O(n^2) n = named concepts
         """
+        counter = 0
+        size_of_examples = 3
+        examples=[]
+        # C: Iterate over all named OWL concepts
+        for i in self.kb.get_concepts():
+            # Retrieve(C)
+            individuals_i = set(self.kb.individuals(i))
+            if len(individuals_i)<size_of_examples:
+                continue
+            for j in self.kb.get_concepts():
+                if i == j:
+                    continue
+                str_dl_concept_i = owl_expression_to_dl(i)
+                individuals_j = set(self.kb.individuals(j))
+                if len(individuals_j) < size_of_examples:
+                    continue
+                # Generate Learning problems from a single target
+                for _ in range(num_of_target_concepts):
+                    lp = (str_dl_concept_i,
+                          set(random.sample(individuals_i, size_of_examples)),
+                          set(random.sample(individuals_j, size_of_examples)))
+                    examples.append(lp)
+                    counter += 1
+                    if counter == num_learning_problems:
+                        break
+
+                if counter == num_learning_problems:
+                    break
+
 
-        if dataset is None:
-            counter = 0
-            size_of_examples = 3
-            print("Generating learning problems on the fly...")
-            for i in self.kb.get_concepts():
-                individuals_i = set(self.kb.individuals(i))
-
-                if len(individuals_i) > size_of_examples:
-                    str_dl_concept_i = self.renderer.render(i)
-                    for j in self.kb.get_concepts():
-                        if i == j:
-                            continue
-                        individuals_j = set(self.kb.individuals(j))
-                        if len(individuals_j) < size_of_examples:
-                            continue
+            return examples
+            """
+            # if |Retrieve(C|>3
+            if len(individuals_i) > size_of_examples:
+                str_dl_concept_i = owl_expression_to_dl(i)
+                for j in self.kb.get_concepts():
+                    if i == j:
+                        continue
+                    individuals_j = set(self.kb.individuals(j))
+                    if len(individuals_j) > size_of_examples:
                         for _ in range(num_learning_problems):
                             lp = (str_dl_concept_i,
                                   set(random.sample(individuals_i, size_of_examples)),
                                   set(random.sample(individuals_j, size_of_examples)))
                             yield lp
 
-                        counter += 1
-
-                        if counter == num_of_target_concepts:
-                            break
+                    counter += 1
                     if counter == num_of_target_concepts:
                         break
-                else:
-                    """Empy concept"""
-        else:
-            return dataset
-
-    def train(self, dataset: Optional[Iterable[Tuple[str, Set, Set]]] = None, num_of_target_concepts: int = 3,
-              num_episode: int = 3, num_learning_problems: int = 3):
-        """ Train an RL agent on description logic concept learning problems """
-
-        if self.pre_trained_kge is None:
-            return self.terminate_training()
-
-        counter = 1
-        for (target_owl_ce, positives, negatives) in self.generate_learning_problems(dataset,
-                                                                                     num_of_target_concepts,
-                                                                                     num_learning_problems):
-            print(f"Goal Concept:\t {target_owl_ce}\tE^+:[{len(positives)}]\t E^-:[{len(negatives)}]")
-            sum_of_rewards_per_actions = self.rl_learning_loop(num_episode=num_episode, pos_uri=positives,
-                                                               neg_uri=negatives)
-            # print(f'Sum of Rewards in last 3 trajectories:{sum_of_rewards_per_actions[:3]}')
-
-            self.seen_examples.setdefault(counter, dict()).update(
-                {'Concept': target_owl_ce,
-                 'Positives': [i.get_iri().as_str() for i in positives],
-                 'Negatives': [i.get_iri().as_str() for i in negatives]})
-            counter += 1
-            if counter % 100 == 0:
-                self.save_weights()
-        return self.terminate_training()
+                if counter == num_of_target_concepts:
+                    break
+            """
 
     def learn_from_illustration(self, sequence_of_goal_path: List[RL_State]):
         """
         Args:
             sequence_of_goal_path: ⊤,Parent,Parent ⊓ Daughter.
         """
         current_state = sequence_of_goal_path.pop(0)
@@ -803,45 +785,67 @@
                 self.compute_quality_of_class_expression(next_state)
             sequence_of_states.append((current_state, next_state))
             rewards.append(self.reward_func.apply(current_state, next_state))
         for x in range(2):
             self.form_experiences(sequence_of_states, rewards)
         self.learn_from_replay_memory()
 
-    def best_hypotheses(self, n=1):
-        assert self.search_tree is not None
-        assert len(self.search_tree) > 1
-        if n == 1:
-            return [i for i in self.search_tree.get_top_n_nodes(n)][0]
+    def best_hypotheses(self, n=1, return_node: bool = False) -> Union[OWLClassExpression, List[OWLClassExpression]]:
+        assert self.search_tree is not None, "Search tree is not initialized"
+        assert len(self.search_tree) > 1, "Search tree is empty"
+
+        result = []
+        for i, rl_state in enumerate(self.search_tree.get_top_n_nodes(n)):
+            if return_node:
+                result.append(rl_state)
+            else:
+                result.append(rl_state.concept)
+
+        if len(result) == 1:
+            return result.pop()
         else:
-            return [i for i in self.search_tree.get_top_n_nodes(n)]
+            return result
 
     def clean(self):
         self.emb_pos, self.emb_neg = None, None
+        self.pos = None
+        self.neg = None
         self.goal_found = False
         self.start_time = None
         self.learning_problem = None
         if len(self.search_tree) != 0:
             self.search_tree.clean()
 
         try:
             assert len(self.search_tree) == 0
         except AssertionError:
             print(len(self.search_tree))
             raise AssertionError('EMPTY search tree')
 
         self._number_of_tested_concepts = 0
 
-    def downward_refinement(self, *args, **kwargs):
-        ValueError('downward_refinement')
-
     def next_node_to_expand(self) -> RL_State:
         """ Return a node that maximizes the heuristic function at time t. """
         return self.search_tree.get_most_promising()
 
+    def downward_refinement(self, *args, **kwargs):
+        ValueError('downward_refinement')
+
+    def show_search_tree(self, heading_step: str, top_n: int = 10) -> None:
+        assert ValueError('show_search_tree')
+
+    def terminate_training(self):
+        if self.verbose > 0:
+            print("Training is completed..")
+        # Save the weights
+        self.save_weights()
+        with open(f"{self.storage_path}/seen_examples.json", 'w', encoding='utf-8') as f:
+            json.dump(self.seen_examples, f, ensure_ascii=False, indent=4)
+        return self
+
 
 class DrillHeuristic:
     """
     Heuristic in Convolutional DQL concept learning.
     Heuristic implements a convolutional neural network.
     """
```

### Comparing `ontolearn-0.7.0/ontolearn/learning_problem.py` & `ontolearn-0.7.1/ontolearn/learning_problem.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 """Learning problem in Ontolearn."""
 import logging
 from typing import Set, Optional, TYPE_CHECKING
 
 if TYPE_CHECKING:
     from ontolearn.knowledge_base import KnowledgeBase
 from ontolearn.abstracts import AbstractLearningProblem, EncodedLearningProblem, EncodedPosNegLPStandardKind
-from owlapy.model import OWLNamedIndividual
+from owlapy.owl_individual import OWLNamedIndividual
 
 logger = logging.getLogger(__name__)
 
 
 class EncodedPosNegLPStandard(EncodedPosNegLPStandardKind):
     """Encoded learning problem standard.
```

### Comparing `ontolearn-0.7.0/ontolearn/learning_problem_generator.py` & `ontolearn-0.7.1/ontolearn/learning_problem_generator.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,17 +1,20 @@
 """Learning problem generator."""
 import sys
 import time
 from typing import Literal, Iterable, Set, Tuple, Dict, List, Final, Generator
-
 import numpy as np
-
-from owlapy.model import OWLClassExpression, OWLOntologyManager, OWLOntology, AddImport, \
-    OWLImportsDeclaration, OWLClass, OWLEquivalentClassesAxiom, IRI, OWLNamedIndividual, OWLAnnotationAssertionAxiom, \
-    OWLAnnotation, OWLAnnotationProperty, OWLLiteral
+from owlapy.class_expression import OWLClassExpression, OWLClass
+from owlapy.iri import IRI
+from owlapy.owl_axiom import OWLEquivalentClassesAxiom, OWLAnnotationAssertionAxiom, OWLAnnotation, \
+    OWLAnnotationProperty
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import OWLLiteral
+from owlapy.owl_ontology import OWLOntology
+from owlapy.owl_ontology_manager import OWLOntologyManager, AddImport, OWLImportsDeclaration
 from ontolearn.knowledge_base import KnowledgeBase
 from .refinement_operators import LengthBasedRefinement
 from .search import Node, RL_State
 from .utils import balanced_sets
 
 SearchAlgos = Literal['dfs', 'strict-dfs']
 
@@ -85,15 +88,15 @@
             except AttributeError:
                 if isinstance(h, RL_State):
                     inst = h.instances
                     if inst is not None:
                         count = len(inst)
 
             if count is not None:
-                num_inds = OWLAnnotationAssertionAxiom(cls_a.get_iri(), OWLAnnotation(
+                num_inds = OWLAnnotationAssertionAxiom(cls_a.iri, OWLAnnotation(
                     OWLAnnotationProperty(IRI.create(SNS, "covered_inds")), OWLLiteral(count)))
                 manager.add_axiom(ontology, num_inds)
 
         manager.save_ontology(ontology, IRI.create('file:/' + path + '.owl'))
 
     def concept_individuals_to_string_balanced_examples(self, concept: OWLClassExpression) -> Dict[str, Set]:
```

### Comparing `ontolearn-0.7.0/ontolearn/lp_generator/generate_data.py` & `ontolearn-0.7.1/ontolearn/lp_generator/generate_data.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,11 +1,12 @@
 import random
+from .helper_classes import RDFTriples, KB2Data
+
 random.seed(42)
 
-from .helper_classes import RDFTriples, KB2Data
 
 class LPGen:
     def __init__(self, kb_path, storage_dir=None, max_num_lps=1000, depth=3, max_child_length=20, refinement_expressivity=0.2,
                  downsample_refinements=True, sample_fillers_count=10, num_sub_roots=50, min_num_pos_examples=1):
         """
         Args
         - kb_path: path to the owl file representing the knowledge base/ontology
```

### Comparing `ontolearn-0.7.0/ontolearn/lp_generator/helper_classes.py` & `ontolearn-0.7.1/ontolearn/lp_generator/helper_classes.py`

 * *Files 2% similar despite different names*

```diff
@@ -160,16 +160,16 @@
     def save_data(self):
         data = dict()
         for concept in tqdm(self.train_concepts, desc="Sample examples and save data..."):
             pos = set(self.kb.individuals(concept))
             neg = set(self.kb.individuals())-pos
             if len(neg) == 0:
                 continue
-            pos = [ind.get_iri().as_str().split("/")[-1] for ind in pos]
-            neg = [ind.get_iri().as_str().split("/")[-1] for ind in neg]
+            pos = [ind.str.split("/")[-1] for ind in pos]
+            neg = [ind.str.split("/")[-1] for ind in neg]
             positive, negative = self.sample_examples(pos, neg)
             concept_name = self.dl_syntax_renderer.render(concept.get_nnf())
             data[concept_name] = {'positive examples': positive, 'negative examples': negative}
         data = list(data.items())
         os.makedirs(self.storage_dir, exist_ok=True)
         with open(f'{self.storage_dir}/LPs.json', 'w') as file_train:
             json.dump(dict(data), file_train, indent=3, ensure_ascii=False)
```

### Comparing `ontolearn-0.7.0/ontolearn/metrics.py` & `ontolearn-0.7.1/ontolearn/metrics.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/model_adapter.py` & `ontolearn-0.7.1/ontolearn/model_adapter.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,17 +1,23 @@
 """Model adapters."""
 import inspect
 import json
 import logging
 import re
 from typing import TypeVar, List, Optional, Union
+
+from owlapy.class_expression import OWLClassExpression
+from owlapy.iri import IRI
+from owlapy.owl_axiom import OWLAxiom
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_reasoner import OWLReasoner
+
 from ontolearn.abstracts import AbstractHeuristic, AbstractScorer, BaseRefinement, AbstractKnowledgeBase, \
     AbstractNode
 from ontolearn.base_concept_learner import BaseConceptLearner
-from owlapy.model import OWLReasoner, OWLNamedIndividual, OWLClassExpression, OWLAxiom, IRI
 from ontolearn.base import OWLReasoner_Owlready2_ComplexCEInstances
 from ontolearn.concept_learner import CELOE, OCEL, EvoLearner, NCES
 from ontolearn.ea_algorithms import EASimple
 from ontolearn.ea_initialization import EARandomWalkInitialization, EARandomInitialization, RandomInitMethod
 from ontolearn.fitness_functions import LinearPressureFitness
 from ontolearn.heuristics import CELOEHeuristic, OCELHeuristic
 from ontolearn.knowledge_base import KnowledgeBase
@@ -49,15 +55,15 @@
     return transformed_string
 
 
 def compute_quality(KB, solution, pos, neg, qulaity_func="f1"):
     func = metrics[qulaity_func]().score2
     instances = set(KB.individuals(solution))
     if isinstance(list(pos)[0], str):
-        instances = {ind.get_iri().as_str().split("/")[-1] for ind in instances}
+        instances = {ind.str.split("/")[-1] for ind in instances}
     tp = len(pos.intersection(instances))
     fn = len(pos.difference(instances))
     fp = len(neg.intersection(instances))
     tn = len(neg.difference(instances))
     return func(tp=tp, fn=fn, fp=fp, tn=tn)[-1]
 
 def _get_matching_opts(_Type, optargs, kwargs, *, prefix=None):
```

### Comparing `ontolearn-0.7.0/ontolearn/nces_architectures.py` & `ontolearn-0.7.1/ontolearn/nces_architectures.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/nces_modules.py` & `ontolearn-0.7.1/ontolearn/nces_modules.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/nces_trainer.py` & `ontolearn-0.7.1/ontolearn/nces_trainer.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/nces_utils.py` & `ontolearn-0.7.1/ontolearn/nces_utils.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/quality_funcs.py` & `ontolearn-0.7.1/ontolearn/quality_funcs.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/refinement_operators.py` & `ontolearn-0.7.1/ontolearn/refinement_operators.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,274 +1,256 @@
 """Refinement Operators for refinement-based concept learners."""
 from collections import defaultdict
 from itertools import chain
 import random
 from typing import DefaultDict, Dict, Set, Optional, Iterable, List, Type, Final, Generator
+
+from owlapy.class_expression import OWLObjectSomeValuesFrom, OWLObjectAllValuesFrom, OWLObjectIntersectionOf, \
+    OWLClassExpression, OWLNothing, OWLThing, OWLNaryBooleanClassExpression, OWLObjectUnionOf, OWLClass, \
+    OWLObjectComplementOf, OWLObjectMaxCardinality, OWLObjectMinCardinality, OWLDataSomeValuesFrom, \
+    OWLDatatypeRestriction, OWLDataHasValue, OWLObjectExactCardinality, OWLObjectHasValue, OWLObjectOneOf
+from owlapy.owl_individual import OWLIndividual
+from owlapy.owl_literal import OWLLiteral
+from owlapy.owl_property import OWLObjectPropertyExpression, OWLObjectInverseOf, OWLDataProperty, \
+    OWLDataPropertyExpression, OWLObjectProperty
+
 from ontolearn.value_splitter import AbstractValueSplitter, BinningValueSplitter
-from owlapy.model.providers import OWLDatatypeMaxInclusiveRestriction, OWLDatatypeMinInclusiveRestriction
+from owlapy.providers import owl_datatype_max_inclusive_restriction, owl_datatype_min_inclusive_restriction
 from owlapy.vocab import OWLFacet
 
 from .abstracts import BaseRefinement
 from .concept_generator import ConceptGenerator
 from .knowledge_base import KnowledgeBase
-from owlapy.model import OWLObjectPropertyExpression, OWLObjectSomeValuesFrom, OWLObjectAllValuesFrom, \
-    OWLObjectIntersectionOf, OWLClassExpression, OWLNothing, OWLThing, OWLNaryBooleanClassExpression, \
-    OWLObjectUnionOf, OWLClass, OWLObjectComplementOf, OWLObjectMaxCardinality, OWLObjectMinCardinality, \
-    OWLDataSomeValuesFrom, OWLDatatypeRestriction, OWLLiteral, OWLObjectInverseOf, OWLDataProperty, \
-    OWLDataHasValue, OWLDataPropertyExpression
 from .search import OENode
-from typing import Callable, Tuple
-from enum import Enum
-from owlapy.model import OWLObjectPropertyExpression, OWLObjectSomeValuesFrom, OWLObjectUnionOf, \
-    OWLClassExpression, OWLDataHasValue, OWLDataPropertyExpression, OWLDataSomeValuesFrom, OWLLiteral, \
-    OWLObjectAllValuesFrom, OWLObjectIntersectionOf, NUMERIC_DATATYPES, OWLDataProperty, OWLObjectProperty, \
-    OWLObjectExactCardinality, OWLObjectMaxCardinality, OWLObjectMinCardinality
-
-from ontolearn.ea_utils import PrimitiveFactory, OperatorVocabulary, ToolboxVocabulary, Tree, escape, ind_to_string, \
-    owlliteral_to_primitive_string
+from typing import Tuple
+import itertools
 
 
 class LengthBasedRefinement(BaseRefinement):
-    """ A top-down refinement operator in ALC."""
+    """ A top-down length based ("no semantic information leveraged) refinement operator in ALC."""
 
-    def __init__(self, knowledge_base: KnowledgeBase, use_inverse=False,
-                 use_data_properties=False, use_card_restrictions=False, card_limit=11):
+    def __init__(self, knowledge_base: KnowledgeBase,
+                 use_inverse: bool = True,
+                 use_data_properties: bool = False,
+                 use_card_restrictions: bool = True,
+                 use_nominals: bool = True):
         super().__init__(knowledge_base)
 
         self.use_inverse = use_inverse
         self.use_data_properties = use_data_properties
         self.use_card_restrictions = use_card_restrictions
-        self.card_limit = card_limit
+        self.use_nominals = use_nominals
+        self.top_refinements: set = None
+        self.pos = None
+        self.neg = None
+
+    def set_input_examples(self, pos, neg):
+        # TODO: Later, depending on pos and neg, we will not return some refinements
+        self.pos = {i for i in pos}
+        self.neg = {i for i in neg}
 
-        # 1. Number of named classes and sanity checking
-        num_of_named_classes = len(set(i for i in self.kb.ontology.classes_in_signature()))
-        assert num_of_named_classes == len(list(i for i in self.kb.ontology.classes_in_signature()))
-        self.max_len_refinement_top = 5
+    def refine_top(self) -> Iterable:
+        """ Refine Top Class Expression
 
-        self.top_refinements = None # {ref for ref in self.refine_top()}
+        rho(T)
 
-    def from_iterables(self, cls, a_operands, b_operands):
-        assert (isinstance(a_operands, Generator) is False) and (isinstance(b_operands, Generator) is False)
-        seen = set()
-        results = set()
-        for i in a_operands:
-            for j in b_operands:
-                if i == j:
-                    results.add(i)
-                elif (i, j) in seen:
-                    continue
-                else:
-                    i_and_j = cls((i, j))
-                    seen.add((i, j))
-                    seen.add((j, i))
-                    results.add(i_and_j)
-        return results
+        1- Named concepts
 
-    def refine_top(self) -> Iterable:
-        """ Refine Top Class Expression """
+        2- Negated leaf Concepts if max_len_refinement_top >2
+
+        3- Union of (1) if max_len_refinement_top>=3
+
+        4- Intersection of not disjoint of (1) if max_len_refinement_top>=3
+
+        5) Restrictions:   \forall \exist R (1)
+                           \forall \exist R neg (1)
+                           \forall \exist R⁻ (1)
+                           \forall \exist R⁻ (1)
+
+        """
+        # (1) Return all named concepts:Later get most general  classes
+        most_general_concepts = [i for i in self.kb.get_most_general_classes()]
+        yield from most_general_concepts
+
+        # (2) OWLDataSomeValuesFrom over double values fillers
+        # Two ce for each property returned. Mean value extracted-
+        # TODO: Most general_double_data_pro
+        if not isinstance(self.kb, KnowledgeBase):
+            for i in self.kb.get_double_data_properties():
+                doubles = [i.parse_double() for i in self.kb.get_range_of_double_data_properties(i)]
+                mean_doubles = sum(doubles) / len(doubles)
+                yield OWLDataSomeValuesFrom(property=i,
+                                            filler=owl_datatype_min_inclusive_restriction(
+                                                min_=OWLLiteral(mean_doubles)))
+                yield OWLDataSomeValuesFrom(property=i,
+                                            filler=owl_datatype_max_inclusive_restriction(
+                                                max_=OWLLiteral(mean_doubles)))
+        # (3) Boolean Valued OWLDataHasValue: TODO: Most general_boolean_data_pro
+        for i in self.kb.get_boolean_data_properties():
+            yield OWLDataHasValue(property=i, value=OWLLiteral(True))
+            yield OWLDataHasValue(property=i, value=OWLLiteral(False))
 
-        # (1) A
-        concepts = [i for i in self.kb.get_all_sub_concepts(self.kb.generator.thing)]
-        yield from concepts
-
-        # (2) A OR A
-        yield from self.from_iterables(cls=OWLObjectUnionOf, a_operands=concepts, b_operands=concepts)
-        # (3) A AND A
-        yield from self.from_iterables(cls=OWLObjectIntersectionOf, a_operands=concepts, b_operands=concepts)
-
-        # (4) Neg (1) the least general concepts
-        neg_concepts = [self.kb.generator.negation(i) for i in concepts]
-        # (5) neg A
+        # (4) Return least general concepts.
+        neg_concepts = [OWLObjectComplementOf(i) for i in self.kb.least_general_named_concepts()]
         yield from neg_concepts
-        # (6) neg A OR neg A
-        yield from self.from_iterables(cls=OWLObjectUnionOf, a_operands=neg_concepts, b_operands=neg_concepts)
-        # (7) neg A AND neg A
-        yield from self.from_iterables(cls=OWLObjectIntersectionOf, a_operands=neg_concepts, b_operands=neg_concepts)
-        # (8) A OR neg A
-        yield from self.from_iterables(cls=OWLObjectUnionOf, a_operands=concepts, b_operands=neg_concepts)
-        # (9) A AND neg A
-        yield from self.from_iterables(cls=OWLObjectIntersectionOf, a_operands=concepts, b_operands=neg_concepts)
+        yield from self.from_iterables(cls=OWLObjectUnionOf,
+                                       a_operands=most_general_concepts,
+                                       b_operands=most_general_concepts)
+        yield from self.from_iterables(cls=OWLObjectUnionOf, a_operands=most_general_concepts, b_operands=neg_concepts)
 
         restrictions = []
-        # (10) \for, \exist R A
-        # (11) \for, \exist R neg A
-        # (12) \for, \exist R⁻ A
-        # (13) \for, \exist R⁻ neg A
-        for c in concepts + neg_concepts + [self.kb.generator.thing, self.kb.generator.nothing]:
+        for c in most_general_concepts + [OWLThing, OWLNothing] + neg_concepts:
+            dl_role: OWLObjectProperty
             for dl_role in self.kb.get_object_properties():
-                inverse_role = dl_role.get_inverse_property()
-                restrictions.append(
-                    self.kb.generator.existential_restriction(filler=c, property=dl_role))
-                restrictions.append(
-                    self.kb.generator.universal_restriction(filler=c, property=dl_role))
-                restrictions.append(
-                    self.kb.generator.existential_restriction(filler=c, property=inverse_role))
-                restrictions.append(
-                    self.kb.generator.universal_restriction(filler=c, property=inverse_role))
-                # (4) All possible \for and \exist with (1) and (2) and \top and \bottom given roles and inverse roles
-                for card in range(0, self.card_limit):
-                    restrictions.extend(
-                        [self.kb.generator.min_cardinality_restriction(c, dl_role, card),
-                         self.kb.generator.max_cardinality_restriction(c, dl_role, card),
-                         self.kb.generator.exact_cardinality_restriction(c, dl_role, card),
-                         self.kb.generator.min_cardinality_restriction(c, inverse_role, card),
-                         self.kb.generator.max_cardinality_restriction(c, inverse_role, card),
-                         self.kb.generator.exact_cardinality_restriction(c, inverse_role, card)])
+                # TODO: Check whether the range of OWLObjectProperty contains the respective ce.
+                restrictions.append(OWLObjectSomeValuesFrom(filler=c, property=dl_role))
+                restrictions.append(OWLObjectAllValuesFrom(filler=c, property=dl_role))
+                if self.use_inverse:
+                    # TODO: Check whether we can only invert the most specific object properties.
+                    inverse_role = dl_role.get_inverse_property()
+                    restrictions.append(OWLObjectSomeValuesFrom(filler=c, property=inverse_role))
+                    restrictions.append(OWLObjectAllValuesFrom(filler=c, property=inverse_role))
+
+                # Move the card limit into existantial restrictions.
+                if self.use_card_restrictions:
+                    for card in range(1, 2):
+                        temp_res = [OWLObjectMinCardinality(cardinality=card,
+                                                            property=dl_role,
+                                                            filler=c)]
+                        if self.use_inverse:
+                            temp_res.extend([OWLObjectMinCardinality(cardinality=card,
+                                                                     property=inverse_role,
+                                                                     filler=c
+                                                                     )])
+                        restrictions.extend(temp_res)
+                    del temp_res
         yield from restrictions
 
-        for bool_dp in self.kb.get_boolean_data_properties():
-            print("Not yet boolean data properties for DRILL")
-            continue
-    def apply_union_and_intersection_from_iterable(self, cont: List) -> Iterable:
-        """ Create Union and Intersection OWL Class Expressions.
-        1. Create OWLObjectIntersectionOf via logical conjunction of cartesian product of input owl class expressions.
-        2. Create OWLObjectUnionOf class expression via logical disjunction pf cartesian product of input owl class
-         expressions.
-        Repeat 1 and 2 until all concepts having max_len_refinement_top reached.
-        """
-        cumulative_refinements = dict()
-        """ 1. Flatten list of generators """
-        for class_expression in cont:
-            if class_expression is not self.kb.generator.nothing:
-                """ 1.2. Store qualifying concepts based on their lengths """
-                cumulative_refinements.setdefault(self.len(class_expression), set()).add(class_expression)
-            else:
-                """ No need to union or intersect Nothing, i.e. ignore concept that does not satisfy constraint"""
-                yield class_expression
-        """ 2. Lengths of qualifying concepts """
-        lengths = [i for i in cumulative_refinements.keys()]
-
-        seen = set()
-        larger_cumulative_refinements = dict()
-        """ 3. Iterative over lengths """
-        for i in lengths:  # type: int
-            """ 3.1 Return all class expressions having the length i """
-            yield from cumulative_refinements[i]
-            """ 3.2 Create intersection and union of class expressions having the length i with class expressions in
-             cumulative_refinements """
-            for j in lengths:
-                """ 3.3 Ignore if we have already createdValid intersection and union """
-                if (i, j) in seen or (j, i) in seen:
-                    continue
-
-                seen.add((i, j))
-                seen.add((j, i))
-
-                len_ = i + j + 1
-
-                if len_ <= self.max_len_refinement_top:
-                    """ 3.4 Intersect concepts having length i with concepts having length j"""
-                    intersect_of_concepts = self.kb.generator.intersect_from_iterables(cumulative_refinements[i],
-                                                                                       cumulative_refinements[j])
-                    """ 3.4 Union concepts having length i with concepts having length j"""
-                    union_of_concepts = self.kb.generator.union_from_iterables(cumulative_refinements[i],
-                                                                               cumulative_refinements[j])
-                    res = set(chain(intersect_of_concepts, union_of_concepts))
-
-                    # Store newly generated concepts at 3.2.
-                    if len_ in cumulative_refinements:
-                        x = cumulative_refinements[len_]
-                        cumulative_refinements[len_] = x.union(res)
-                    else:
-                        if len_ in larger_cumulative_refinements:
-                            x = larger_cumulative_refinements[len_]
-                            larger_cumulative_refinements[len_] = x.union(res)
-                        else:
-                            larger_cumulative_refinements[len_] = res
-
-        for k, v in larger_cumulative_refinements.items():
-            yield from v
-
-    def refine_atomic_concept(self, class_expression: OWLClassExpression) -> Iterable[OWLClassExpression]:
-        assert isinstance(class_expression, OWLClassExpression)
+    def refine_atomic_concept(self, class_expression: OWLClass) -> Generator[
+        Tuple[OWLObjectIntersectionOf, OWLObjectOneOf], None, None]:
+        assert isinstance(class_expression, OWLClass), class_expression
         for i in self.top_refinements:
-            if i.is_owl_nothing() is False and (i != class_expression):
-                yield self.kb.generator.intersection((class_expression, i))
+            if i.is_owl_nothing() is False:
+                # TODO: Include are_owl_concept_disjoint into Knowledgebase class
+                if isinstance(i, OWLClass):  #:and self.kb.are_owl_concept_disjoint(class_expression, i) is False:
+                    yield OWLObjectIntersectionOf((class_expression, i))
+                else:
+                    yield OWLObjectIntersectionOf((class_expression, i))
 
-    def refine_complement_of(self, class_expression: OWLObjectComplementOf) -> Iterable[OWLClassExpression]:
-        """
-        Refine OWLObjectComplementOf
-        1- Get All direct parents,
-        2- Negate (1),
-        3- Intersection with T.
-        """
+    def refine_complement_of(self, class_expression: OWLObjectComplementOf) -> Generator[
+        OWLObjectComplementOf, None, None]:
         assert isinstance(class_expression, OWLObjectComplementOf)
-        yield from self.kb.generator.negation_from_iterables(self.kb.get_direct_parents(class_expression._operand))
-        # yield self.kb.generator.intersection((class_expression, self.kb.generator.thing))
+        # not Father => Not Person given Father subclass of Person
+        yield from (OWLObjectComplementOf(i) for i in self.kb.get_direct_parents(class_expression.get_operand()))
+        yield OWLObjectIntersectionOf((class_expression, OWLThing))
 
     def refine_object_some_values_from(self, class_expression: OWLObjectSomeValuesFrom) -> Iterable[OWLClassExpression]:
         assert isinstance(class_expression, OWLObjectSomeValuesFrom)
-        # rule 1: \exists r.D = > for all r.E
-        for i in self.refine(class_expression.get_filler()):
-            yield self.kb.generator.existential_restriction(i, class_expression.get_property())
-        # rule 2: \exists r.D = > \exists r.D AND T
-        # yield self.kb.generator.intersection((class_expression, self.kb.generator.thing))
+        # Given \exists r. C
+        yield OWLObjectIntersectionOf((class_expression, OWLThing))
+        yield from (OWLObjectSomeValuesFrom(filler=C,
+                                            property=class_expression.get_property()) for C in
+                    self.refine(class_expression.get_filler()))
 
     def refine_object_all_values_from(self, class_expression: OWLObjectAllValuesFrom) -> Iterable[OWLClassExpression]:
         assert isinstance(class_expression, OWLObjectAllValuesFrom)
-        # rule 1: \forall r.D = > \forall r.E
-        for i in self.refine(class_expression.get_filler()):
-            yield self.kb.generator.universal_restriction(i, class_expression.get_property())
-        # rule 2: \forall r.D = > \forall r.D AND T
-        # yield self.kb.generator.intersection((class_expression, self.kb.generator.thing))
+        yield OWLObjectIntersectionOf((class_expression, OWLThing))
+        yield from (OWLObjectAllValuesFrom(filler=C,
+                                           property=class_expression.get_property()) for C in
+                    self.refine(class_expression.get_filler()))
 
     def refine_object_union_of(self, class_expression: OWLObjectUnionOf) -> Iterable[OWLClassExpression]:
-        """
-        Refine C =A AND B.
-        """
+        """ Refine OWLObjectUnionof by refining each operands:"""
         assert isinstance(class_expression, OWLObjectUnionOf)
         operands: List[OWLClassExpression] = list(class_expression.operands())
-        for i in operands:
-            for ref_concept_A in self.refine(i):
-                if ref_concept_A == class_expression:
-                    # No need => Person OR MALE => rho(Person) OR MALE => MALE OR MALE
-                    yield class_expression
-                yield self.kb.generator.union((class_expression, ref_concept_A))
+        # Refine each operant
+        for i, concept in enumerate(operands):
+            for refinement_of_concept in self.refine(concept):
+                if refinement_of_concept == class_expression:
+                    continue
+                yield OWLObjectUnionOf(operands[:i] + [refinement_of_concept] + operands[i + 1:])
 
-    def refine_object_intersection_of(self, class_expression: OWLClassExpression) -> Iterable[OWLClassExpression]:
-        """ Refine C =A AND B. """
+        yield OWLObjectIntersectionOf((class_expression, OWLThing))
+
+    def refine_object_intersection_of(self, class_expression: OWLObjectIntersectionOf) -> Iterable[OWLClassExpression]:
+        """ Refine OWLObjectIntersectionOf by refining each operands:"""
         assert isinstance(class_expression, OWLObjectIntersectionOf)
         operands: List[OWLClassExpression] = list(class_expression.operands())
-        for i in operands:
-            for ref_concept_A in self.refine(i):
-                if ref_concept_A == class_expression:
-                    yield class_expression
-                yield self.kb.generator.intersection((class_expression, ref_concept_A))
+        # Refine each operant
+        for i, concept in enumerate(operands):
+            for refinement_of_concept in self.refine(concept):
+                if refinement_of_concept == class_expression:
+                    continue
+                yield OWLObjectIntersectionOf(operands[:i] + [refinement_of_concept] + operands[i + 1:])
+
+        yield OWLObjectIntersectionOf((class_expression, OWLThing))
 
     def refine(self, class_expression) -> Iterable[OWLClassExpression]:
         assert isinstance(class_expression, OWLClassExpression)
+        # (1) Initialize top refinement if it has not been initialized.
         if self.top_refinements is None:
-            self.top_refinements = {ref for ref in self.refine_top()}
-
+            self.top_refinements = set()
+            for i in self.refine_top():
+                self.top_refinements.add(i)
+                yield i
         if class_expression.is_owl_thing():
             yield from self.top_refinements
+        elif isinstance(class_expression, OWLClass):
+            yield from self.refine_atomic_concept(class_expression)
         elif class_expression.is_owl_nothing():
             yield from {class_expression}
         elif isinstance(class_expression, OWLObjectIntersectionOf):
             yield from self.refine_object_intersection_of(class_expression)
         elif isinstance(class_expression, OWLObjectComplementOf):
             yield from self.refine_complement_of(class_expression)
         elif isinstance(class_expression, OWLObjectAllValuesFrom):
             yield from self.refine_object_all_values_from(class_expression)
         elif isinstance(class_expression, OWLObjectUnionOf):
             yield from self.refine_object_union_of(class_expression)
         elif isinstance(class_expression, OWLObjectSomeValuesFrom):
             yield from self.refine_object_some_values_from(class_expression)
-        elif self.len(class_expression) == 1:
-            yield from self.refine_atomic_concept(class_expression)
-
         elif isinstance(class_expression, OWLObjectMaxCardinality):
-            yield from (self.kb.generator.intersection((class_expression, i)) for i in self.top_refinements)
+            yield from (OWLObjectIntersectionOf((class_expression, i)) for i in self.top_refinements)
         elif isinstance(class_expression, OWLObjectExactCardinality):
-            yield from (self.kb.generator.intersection((class_expression, i)) for i in self.top_refinements)
+            yield from (OWLObjectIntersectionOf((class_expression, i)) for i in self.top_refinements)
         elif isinstance(class_expression, OWLObjectMinCardinality):
-            yield from (self.kb.generator.intersection((class_expression, i)) for i in self.top_refinements)
+            yield from (OWLObjectIntersectionOf((class_expression, i)) for i in self.top_refinements)
+        elif isinstance(class_expression, OWLDataSomeValuesFrom):
+            """unclear how to refine OWLDataHasValue via refining a the property
+            We may need to modify the literal little bit right little bit left fashion
+            ∃ lumo.xsd:double[≤ -1.6669212962962956] 
+            
+            ∃ lumo.xsd:double[≥ -1.6669212962962956] 
+            """
+            yield from (OWLObjectIntersectionOf((class_expression, i)) for i in self.top_refinements)
+        elif isinstance(class_expression, OWLDataHasValue):
+            yield from (OWLObjectIntersectionOf((class_expression, i)) for i in self.top_refinements)
+        elif isinstance(class_expression, OWLObjectOneOf):
+            raise NotImplementedError("Remove an individual from the set of individuals, If empty use bottom.")
         else:
             raise ValueError(f"{type(class_expression)} objects are not yet supported")
 
+    @staticmethod
+    def from_iterables(cls, a_operands, b_operands):
+        assert (isinstance(a_operands, Generator) is False) and (isinstance(b_operands, Generator) is False)
+        seen = set()
+        results = set()
+        for i in a_operands:
+            for j in b_operands:
+                #if i == j:
+                #    results.add(i)
+                if (i, j) in seen:
+                    continue
+                else:
+                    i_and_j = cls((i, j))
+                    seen.add((i, j))
+                    seen.add((j, i))
+                    results.add(i_and_j)
+        return results
+
 
 class ModifiedCELOERefinement(BaseRefinement[OENode]):
     """
      A top down/downward refinement operator in SHIQ(D).
     """
     __slots__ = 'max_child_length', 'use_negation', 'use_all_constructor', 'use_inverse', 'use_card_restrictions', \
         'max_nr_fillers', 'card_limit', 'use_numeric_datatypes', 'use_boolean_datatype', 'dp_splits', \
@@ -299,19 +281,14 @@
                  use_all_constructor: bool = True,
                  use_inverse: bool = True,
                  use_card_restrictions: bool = True,
                  use_numeric_datatypes: bool = True,
                  use_time_datatypes: bool = True,
                  use_boolean_datatype: bool = True,
                  card_limit: int = 10):
-        # self.topRefinementsCumulative = dict()
-        # self.topRefinementsLength = 0
-        # self.combos = dict()
-        # self.topRefinements = dict()
-        # self.topARefinements = dict()
         self.value_splitter = value_splitter
         self.max_child_length = max_child_length
         self.use_negation = use_negation
         self.use_all_constructor = use_all_constructor
         self.use_inverse = use_inverse
         self.use_card_restrictions = use_card_restrictions
         self.use_numeric_datatypes = use_numeric_datatypes
@@ -369,17 +346,17 @@
 
     def _get_dp_restrictions(self, data_properties: Iterable[OWLDataProperty]) -> List[OWLDataSomeValuesFrom]:
         restrictions = []
         for dp in data_properties:
             splits = self.dp_splits[dp]
             if len(splits) > 0:
                 restrictions.append(self.generator.data_existential_restriction(
-                    filler=OWLDatatypeMinInclusiveRestriction(splits[0]), property=dp))
+                    filler=owl_datatype_min_inclusive_restriction(splits[0]), property=dp))
                 restrictions.append(self.generator.data_existential_restriction(
-                    filler=OWLDatatypeMaxInclusiveRestriction(splits[-1]), property=dp))
+                    filler=owl_datatype_max_inclusive_restriction(splits[-1]), property=dp))
         return restrictions
 
     def _get_current_domain(self, property_: OWLObjectPropertyExpression) -> OWLClassExpression:
         func = self.kb.get_object_property_domains \
             if isinstance(property_, OWLObjectInverseOf) else self.kb.get_object_property_ranges
         return func(property_.get_named_property())
 
@@ -411,77 +388,61 @@
 
         if current_domain is None:
             current_domain = OWLThing
 
         iter_container: List[Iterable[OWLClassExpression]] = []
         # (1) Generate all_sub_concepts. Note that originally CELOE obtains only direct subconcepts
         iter_container.append(self.kb.get_direct_sub_concepts(ce))
-        # for i in self.kb.get_direct_sub_concepts(ce):
-        #     yield i
-
-        # (2.1) Generate all direct_sub_concepts
-        # for i in self.kb.get_direct_sub_concepts(ce):
-        #     yield self.kb.intersection((ce, i))
-        #     yield self.kb.union((ce, i))
 
         if self.use_negation:
             # TODO probably not correct/complete
             if max_length >= 2 and (self.len(ce) + 1 <= self.max_child_length):
                 # (2.2) Create negation of all leaf_concepts
                 iter_container.append(self.generator.negation_from_iterables(self.kb.get_leaf_concepts(ce)))
-                # yield from self.kb.negation_from_iterables(self.kb.get_leaf_concepts(ce))
 
         if max_length >= 3 and (self.len(ce) + 2 <= self.max_child_length):
             # (2.3) Create ∀.r.T and ∃.r.T where r is the most general relation.
             iter_container.append(self.kb.most_general_existential_restrictions(domain=current_domain))
-            # yield from self.kb.most_general_existential_restrictions(domain=ce)
             if self.use_all_constructor:
                 iter_container.append(self.kb.most_general_universal_restrictions(domain=current_domain))
-                # yield from self.kb.most_general_universal_restrictions(domain=ce)
             if self.use_inverse:
                 iter_container.append(self.kb.most_general_existential_restrictions_inverse(domain=current_domain))
-                # yield from self.kb.most_general_existential_restrictions_inverse(domain=ce)
                 if self.use_all_constructor:
                     iter_container.append(self.kb.most_general_universal_restrictions_inverse(domain=current_domain))
-                    # yield from self.kb.most_general_universal_restrictions_inverse(domain=ce)
             if self.use_numeric_datatypes:
                 iter_container.append(self._get_dp_restrictions(
                     self.kb.most_general_numeric_data_properties(domain=current_domain)))
             if self.use_time_datatypes:
                 iter_container.append(self._get_dp_restrictions(
                     self.kb.most_general_time_data_properties(domain=current_domain)))
             if self.use_boolean_datatype:
                 bool_res = []
                 for bool_dp in self.kb.most_general_boolean_data_properties(domain=current_domain):
                     bool_res.append(self.generator.data_has_value_restriction(value=OWLLiteral(True), property=bool_dp))
                     bool_res.append(self.generator.data_has_value_restriction(value=OWLLiteral(False),
                                                                               property=bool_dp))
                 iter_container.append(bool_res)
-            # yield self.kb.intersection((ce, ce))
-            # yield self.kb.union((ce, ce))
 
         if self.use_card_restrictions and max_length >= 4 and (self.max_child_length >= self.len(ce) + 3):
             card_res = []
             for prop in self.kb.most_general_object_properties(domain=current_domain):
                 max_ = self.max_nr_fillers[prop]
                 if max_ > 1 or (self.use_negation and max_ > 0):
                     card_res.append(self.generator.max_cardinality_restriction(self.generator.thing, prop, max_ - 1))
             iter_container.append(card_res)
 
-        # a, b = tee(chain.from_iterable(iter_container))
         refs = []
         for i in chain.from_iterable(iter_container):
             yield i
             refs.append(i)
 
         # Compute all possible combinations of the disjunction and conjunctions.
         mem = set()
         for i in refs:
             # assert i is not None
-            # yield i
             i_inds = None
             for j in refs:
                 # assert j is not None
                 if (i, j) in mem or i == j:
                     continue
                 mem.add((j, i))
                 mem.add((i, j))
@@ -494,24 +455,20 @@
                             i_inds = self.kb.individuals_set(i)
                         j_inds = self.kb.individuals_set(j)
                         if not j_inds.difference(i_inds):
                             # already contained
                             continue
                         else:
                             yield self.generator.union((i, j))
-                        # if self.kb.individuals_count(temp_union) < self.kb.individuals_count():
-                        #     yield temp_union
 
                         if not j_inds.intersection(i_inds):
                             # empty
                             continue
                         else:
                             yield self.generator.intersection((i, j))
-                        # temp_intersection = self.kb.intersection((i, j))
-                        # if self.kb.individuals_count(temp_intersection) > 0:
 
     def refine_complement_of(self, ce: OWLObjectComplementOf) -> Iterable[OWLClassExpression]:
         """ Refine owl:complementOf.
 
         Args:
             ce (OWLObjectComplementOf): owl:complementOf - class expression.
 
@@ -708,18 +665,18 @@
             if len(splits) > 0 and len(datarange.get_facet_restrictions()) > 0:
                 facet_res = datarange.get_facet_restrictions()[0]
                 val = facet_res.get_facet_value()
                 idx = splits.index(val)
 
                 if facet_res.get_facet() == OWLFacet.MIN_INCLUSIVE and (next_idx := idx + 1) < len(splits):
                     yield self.generator.data_existential_restriction(
-                        OWLDatatypeMinInclusiveRestriction(splits[next_idx]), ce.get_property())
+                        owl_datatype_min_inclusive_restriction(splits[next_idx]), ce.get_property())
                 elif facet_res.get_facet() == OWLFacet.MAX_INCLUSIVE and (next_idx := idx - 1) >= 0:
                     yield self.generator.data_existential_restriction(
-                        OWLDatatypeMaxInclusiveRestriction(splits[next_idx]), ce.get_property())
+                        owl_datatype_max_inclusive_restriction(splits[next_idx]), ce.get_property())
 
     def refine_data_has_value(self, ce: OWLDataHasValue) -> Iterable[OWLDataHasValue]:
         """ Refine owl:hasValue.
 
         Args:
             ce (OWLDataHasValue): owl:hasValue - class expression.
 
@@ -1089,19 +1046,19 @@
             if len(splits) > 0 and len(datarange.get_facet_restrictions()) > 0:
                 facet_res = datarange.get_facet_restrictions()[0]
                 val = facet_res.get_facet_value()
                 idx = splits.index(val)
 
                 if facet_res.get_facet() == OWLFacet.MIN_INCLUSIVE and (next_idx := idx + 1) < len(splits):
                     yield self.generator.data_existential_restriction(
-                        OWLDatatypeMinInclusiveRestriction(splits[next_idx]), ce.get_property())
+                        owl_datatype_min_inclusive_restriction(splits[next_idx]), ce.get_property())
                     any_refinement = True
                 elif facet_res.get_facet() == OWLFacet.MAX_INCLUSIVE and (next_idx := idx - 1) >= 0:
                     yield self.generator.data_existential_restriction(
-                        OWLDatatypeMaxInclusiveRestriction(splits[next_idx]), ce.get_property())
+                        owl_datatype_max_inclusive_restriction(splits[next_idx]), ce.get_property())
                     any_refinement = True
         if not any_refinement:
             yield ce
 
     def refine_data_has_value(self, ce: OWLDataHasValue) -> Iterable[OWLDataHasValue]:
         """ Refine owl:hasValue.
```

### Comparing `ontolearn-0.7.0/ontolearn/search.py` & `ontolearn-0.7.1/ontolearn/search.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,25 +1,25 @@
 """Node representation."""
 import weakref
 from _weakref import ReferenceType
 from abc import abstractmethod, ABCMeta
 from functools import total_ordering
 from queue import PriorityQueue
 from typing import List, Optional, ClassVar, Final, Iterable, TypeVar, Generic, Set, Tuple, Dict
-
-from owlapy.io import OWLObjectRenderer
-from owlapy.model import OWLClassExpression
+from owlapy.owl_object import OWLObjectRenderer
+from owlapy.class_expression import OWLClassExpression
 from owlapy.render import DLSyntaxObjectRenderer
 from owlapy.util import as_index, OrderedOWLObject
 from .abstracts import AbstractNode, AbstractHeuristic, AbstractScorer, AbstractOEHeuristicNode, LBLSearchTree, \
     AbstractConceptNode, EncodedLearningProblem, DRILLAbstractTree
-from typing import FrozenSet
 
 _N = TypeVar('_N')  #:
 
+from owlapy import owl_expression_to_dl
+
 
 # Due to a bug in Python, we cannot use the slots like we should be able to. Hence, the attribute access is also
 # invalid but there is nothing we can do. See https://mail.python.org/pipermail/python-list/2002-December/126637.html
 
 # noinspection PyUnresolvedReferences
 # noinspection PyDunderSlots
 class _NodeConcept(metaclass=ABCMeta):
@@ -289,15 +289,15 @@
             _NodeQuality.__str__(self),
             f'Length:{self._len}',
             f'Tree Length:{self._tree_length}',
             f'Tree Depth:{self._tree_depth}',
             _NodeIndividualsCount.__str__(self),
         ))
 
-    
+
 class NCESNode(_NodeConcept, _NodeLen, _NodeIndividualsCount, _NodeQuality, AbstractNode, AbstractConceptNode):
     """
     EvoLearner search tree node.
     """
     __slots__ = '_concept', '_len', '_individuals_count', '_quality'
 
     def __init__(self,
@@ -315,65 +315,55 @@
         return "\t".join((
             AbstractNode.__str__(self),
             _NodeConcept.__str__(self),
             _NodeQuality.__str__(self),
             f'Length:{self._len}',
             _NodeIndividualsCount.__str__(self),
         ))
-    
+
 
 class RL_State(_NodeConcept, _NodeQuality, _NodeHeuristic, AbstractNode, _NodeParentRef['RL_State']):
     renderer: ClassVar[OWLObjectRenderer] = DLSyntaxObjectRenderer()
     """RL_State node."""
-    __slots__ = '_concept', '_quality', '_heuristic', \
-        'embeddings', 'individuals', \
-        'instances_bitset', 'length', 'instances', 'parent_node', 'is_root', '_parent_ref', '__weakref__'
+    __slots__ = '_concept', 'embeddings', '_quality', '_heuristic', 'length', 'parent_node', 'is_root', '_parent_ref', '__weakref__'
 
-    def __init__(self, concept: OWLClassExpression, parent_node: Optional['RL_State'] = None, is_root: bool = False,
-                 embeddings=None, instances: Set = None, instances_bitset: FrozenSet = None, length=None):
+    def __init__(self, concept: OWLClassExpression, parent_node: Optional['RL_State'] = None,
+                 embeddings=None, is_root: bool = False, length=None):
         _NodeConcept.__init__(self, concept)
         _NodeQuality.__init__(self)
         _NodeHeuristic.__init__(self)
         _NodeParentRef.__init__(self, parent_node=parent_node, is_root=is_root)
-
-        assert isinstance(instances, set), f"Instances must be a set {type(instances)}"
-        assert isinstance(instances_bitset, frozenset), "Instances must be a set"
-        # TODO: CD _NodeParentRef causes unintended results:
-        #  Without using _NodeParentRef, one can reach the top class expression via recursive calling parent_node
-        #  However, if one uses _NodeParentRef amd comments self.parent_node and self.is_root, we can reach T.
         AbstractNode.__init__(self)
         self.parent_node = parent_node
         self.is_root = is_root
-
-        self.embeddings = embeddings  # tensor
-        self.instances = instances  # list
-        self.instances_bitset = instances_bitset  # bitset
         self.length = length
+        self.embeddings = embeddings
         self.__sanity_checking()
 
     def __sanity_checking(self):
         assert self.concept
         if self.is_root is False:
             assert self.parent_node
 
     def __str__(self):
-
-        if self.instances is None:
-            s = 'Not Init.'
+        if self.embeddings is None:
+            return "\t".join((
+                AbstractNode.__str__(self),
+                _NodeConcept.__str__(self),
+                _NodeQuality.__str__(self),
+                _NodeHeuristic.__str__(self),
+                f'Length:{self.length}'))
         else:
-            s = len(self.instances)
-
-        return "\t".join((
-            AbstractNode.__str__(self),
-            _NodeConcept.__str__(self),
-            _NodeQuality.__str__(self),
-            _NodeHeuristic.__str__(self),
-            f'|Instance|:{s}',
-            f'Length:{self.length}',
-        ))
+            return "\t".join((
+                AbstractNode.__str__(self),
+                _NodeConcept.__str__(self),
+                _NodeQuality.__str__(self),
+                _NodeHeuristic.__str__(self),
+                f'Length:{self.length}',
+                f'Embeddings:{self.embeddings.shape}',))
 
     def __lt__(self, other):
         return self.heuristic <= other.heuristic
 
     def __gt__(self, other):
         return self.heuristic > other.heuristic
 
@@ -690,14 +680,16 @@
             assert isinstance(parent_tree_node, TreeNode)
             parent_tree_node.children.add(self)
 
 
 class DRILLSearchTreePriorityQueue(DRILLAbstractTree):
     """
 
+    #@TODO Move to learners/drill.py
+
     Search tree based on priority queue.
 
     Parameters
     ----------
     quality_func : An instance of a subclass of AbstractScorer that measures the quality of a node.
     heuristic_func : An instance of a subclass of AbstractScorer that measures the promise of a node.
 
@@ -722,39 +714,51 @@
         Parameters
         ----------
         node : A RL_State object
         Returns
         -------
         None
         """
-        assert node.quality > 0
+        assert node.quality > 0, f"{RL_State.concept} cannot be added into the search tree"
         assert node.heuristic is not None
-        self.items_in_queue.put((-node.heuristic, node))  # gets the smallest one.
-        self.nodes[node] = node
+        dl_representation = owl_expression_to_dl(node.concept.get_nnf())
+        if dl_representation in self.nodes:
+            """Do nothing"""
+        else:
+            self.items_in_queue.put(
+                (-node.heuristic, len(owl_expression_to_dl(node.concept)), dl_representation))  # gets the smallest one.
+            self.nodes[dl_representation] = node
+
+    def show_current_search_tree(self, top_n=10):
+        """
+        Show search tree.
+        """
+        predictions = sorted(
+            [(neg_heuristic, length, self.nodes[dl_representation]) for neg_heuristic, length, dl_representation in
+             self.items_in_queue.queue])[:top_n]
+        print(f"\n######## Current Search Tree {len(self.items_in_queue.queue)} ###########\n")
+        for ith, (_, __, node) in enumerate(predictions):
+            print(
+                f"{ith + 1}-\t{owl_expression_to_dl(node.concept)} | Quality:{node.quality:.3f}| Heuristic:{node.heuristic:.3f}")
+        print('\n######## Current Search Tree ###########\n')
+        return predictions
 
-    def get_most_promising(self) -> Node:
+    def get_most_promising(self) -> RL_State:
         """
         Gets the current most promising node from Queue.
 
         Returns
         -------
         node: A node object
         """
-        _, most_promising_str = self.items_in_queue.get()  # get
-        try:
-            node = self.nodes[most_promising_str]
-            # We do not need to put the node again into the queue.
-            # self.items_in_queue.put((-node.heuristic, node.concept.name))
-            return node
-        except KeyError:
-            print(most_promising_str, 'is not found')
-            print('####')
-            for k, v in self.nodes.items():
-                print(k)
-            exit(1)
+        assert len(self.items_in_queue.queue) > 0
+        _, __, dl_representation = self.items_in_queue.get(timeout=1.0)
+        # R
+        node = self.nodes[dl_representation]
+        return node
 
     def get_top_n(self, n: int, key='quality') -> List[Node]:
         """
         Gets the top n nodes determined by key from the search tree.
 
         Returns
         -------
```

### Comparing `ontolearn-0.7.0/ontolearn/tentris.py` & `ontolearn-0.7.1/ontolearn/tentris.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,35 +1,41 @@
 """Tentris representations."""
+
 import logging
 from functools import singledispatchmethod
 from types import MappingProxyType
 from typing import Optional, Iterable
 
 import httpx as httpx
+from owlapy.class_expression import OWLClassExpression, OWLClass, OWLThing
+from owlapy.iri import IRI
+from owlapy.owl_axiom import OWLDataPropertyRangeAxiom, OWLObjectPropertyRangeAxiom, OWLObjectPropertyDomainAxiom, \
+    OWLDataPropertyDomainAxiom
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import OWLLiteral
+from owlapy.owl_object import OWLEntity
+from owlapy.owl_ontology import OWLOntology, OWLOntologyID, _M
+from owlapy.owl_property import OWLObjectPropertyExpression, OWLObjectProperty, OWLDataProperty
 
 from ontolearn.knowledge_base import KnowledgeBase
 from ontolearn.abstracts import AbstractScorer, AbstractLearningProblem, AbstractKnowledgeBase, \
     EncodedPosNegLPStandardKind
 from ontolearn.base.owl.utils import OWLClassExpressionLengthMetric
-from ontolearn.knowledge_base import Factory, _Default_ClassExpressionLengthMetricFactory
 from ontolearn.search import EvaluatedConcept
 from ontolearn.learning_problem import PosNegLPStandard
 from ontolearn.metrics import F1, Precision, Accuracy, Recall
-from ontolearn.utils import oplogging
+from ontolearn.utils import oplogging, Factory
 from ontolearn.base.ext import OWLReasonerEx
-from owlapy.model import OWLClassExpression, OWLEntity, OWLOntology, OWLClass, OWLNamedIndividual, \
-    OWLObjectPropertyExpression, OWLDataProperty, OWLObjectProperty, OWLOntologyID, _M, OWLDataPropertyRangeAxiom, \
-    IRI, OWLThing, OWLLiteral, OWLObjectPropertyRangeAxiom, OWLObjectPropertyDomainAxiom, OWLDataPropertyDomainAxiom
 from ontolearn.base import OWLOntologyManager_Owlready2, OWLReasoner_Owlready2
 from owlapy.render import ManchesterOWLSyntaxOWLObjectRenderer, DLSyntaxObjectRenderer
 from owlapy.util import LRUCache
 
 logger = logging.getLogger(__name__)
 
-# TODO: 14 warnings that need to be fixed
+# TODO: Stale script! Should be updated or removed!
 
 _Metric_map = MappingProxyType({
     F1: 'f1_score',
     Precision: 'precision',
     Recall: 'recall',
     Accuracy: 'accuracy',
     # WeightedAccuracy: ,
```

### Comparing `ontolearn-0.7.0/ontolearn/utils/__init__.py` & `ontolearn-0.7.1/ontolearn/utils/__init__.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,19 +1,21 @@
 """Ontolearn utils."""
 import datetime
 import os
 import pickle
 import random
 import time
 from typing import Callable, Set, TypeVar, Tuple, Union
-
+from owlapy.class_expression import OWLClass
+from owlapy.iri import IRI
+from owlapy.meta_classes import HasIRI
+from owlapy.owl_individual import OWLNamedIndividual
 from ontolearn.utils.log_config import setup_logging  # noqa: F401
-from owlapy.model import OWLNamedIndividual, IRI, OWLClass, HasIRI
 import pandas as pd
-
+from .static_funcs import compute_f1_score
 Factory = Callable
 
 # DEFAULT_FMT = '[{elapsed:0.8f}s] {name}({args}) -> {result}'
 DEFAULT_FMT = 'Func:{name} took {elapsed:0.8f}s'
 flag_for_performance = False
```

### Comparing `ontolearn-0.7.0/ontolearn/utils/log_config.py` & `ontolearn-0.7.1/ontolearn/utils/log_config.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/ontolearn/value_splitter.py` & `ontolearn-0.7.1/ontolearn/value_splitter.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,21 +1,24 @@
 """Value splitters."""
 from abc import ABCMeta, abstractmethod
 from copy import deepcopy
 from dataclasses import dataclass
 from datetime import date, datetime
 from functools import total_ordering
 from itertools import chain
+
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import OWLLiteral
+from owlapy.owl_property import OWLDataProperty
+from owlapy.owl_reasoner import OWLReasoner
 from pandas import Timedelta
 from scipy.stats import entropy
 from sortedcontainers import SortedDict
 from typing import Dict, List, Optional, Set, Tuple, Union
 
-from owlapy.model import OWLDataProperty, OWLLiteral, OWLNamedIndividual, OWLReasoner
-
 import math
 
 
 Values = Union[OWLLiteral, int, float, bool, Timedelta, datetime, date]  #:
 
 
 class AbstractValueSplitter(metaclass=ABCMeta):
@@ -129,22 +132,22 @@
 
         dp_splits: Dict[OWLDataProperty, List[OWLLiteral]] = {}
         for property_ in properties:
             dp_splits[property_] = []
             self._prop_to_values[property_] = IndividualValues(self._get_values_for_inds(reasoner, property_, pos),
                                                                self._get_values_for_inds(reasoner, property_, neg))
 
-        pos_str = [p.get_iri().get_remainder() for p in pos]
-        neg_str = [n.get_iri().get_remainder() for n in neg]
+        pos_str = [p.iri.get_remainder() for p in pos]
+        neg_str = [n.iri.get_remainder() for n in neg]
         current_splits = [Split(pos_str, neg_str, 0, set())]
         while len(properties) > 0 and len(current_splits) > 0:
             next_level_splits = []
             for property_ in properties[:]:
                 for split in current_splits:
-                    if property_.get_iri().get_remainder() not in split.used_properties:
+                    if property_.iri.get_remainder() not in split.used_properties:
                         value, new_splits = self._compute_split_value(property_, split)
 
                         if value is not None:
                             value = OWLLiteral(value)
                             if value not in dp_splits[property_]:
                                 dp_splits[property_].append(value)
                             next_level_splits.extend(new_splits)
@@ -204,15 +207,15 @@
                     best_splits.append(self._make_split(pos_above, neg_above, entropy_above, split, property_))
 
         return best_value, best_splits
 
     def _make_split(self, pos: List[str], neg: List[str], entropy: float,
                     split: Split, property_: OWLDataProperty) -> Split:
         used_properties = deepcopy(split.used_properties)
-        used_properties.add(property_.get_iri().get_remainder())
+        used_properties.add(property_.iri.get_remainder())
         return Split(pos, neg, entropy, used_properties)
 
     def _get_inds_below_above(self, value: Values, ind_value_map: 'SortedDict[Values, List[str]]') \
             -> Tuple[List[str], List[str]]:
         idx = ind_value_map.bisect(value)
         inds_below = list(chain.from_iterable(ind_value_map.values()[:idx]))
         inds_above = list(chain.from_iterable(ind_value_map.values()[idx:]))
@@ -220,14 +223,14 @@
 
     def _get_values_for_inds(self, reasoner: OWLReasoner, property_: OWLDataProperty, inds: Set[OWLNamedIndividual]) \
             -> Dict[str, Values]:
         inds_to_value = dict()
         for ind in inds:
             try:
                 val = next(iter(reasoner.data_property_values(ind, property_)))
-                inds_to_value[ind.get_iri().get_remainder()] = val.to_python()
+                inds_to_value[ind.iri.get_remainder()] = val.to_python()
             except StopIteration:
                 pass
         return inds_to_value
 
     def reset(self):
         self._prop_to_values = {}
```

### Comparing `ontolearn-0.7.0/ontolearn.egg-info/PKG-INFO` & `ontolearn-0.7.1/ontolearn.egg-info/PKG-INFO`

 * *Files 13% similar despite different names*

```diff
@@ -1,167 +1,230 @@
 Metadata-Version: 2.1
 Name: ontolearn
-Version: 0.7.0
+Version: 0.7.1
 Summary: Ontolearn is an open-source software library for structured machine learning in Python. Ontolearn includes modules for processing knowledge bases, inductive logic programming and ontology engineering.
 Home-page: https://github.com/dice-group/Ontolearn
 Author: Caglar Demir
 Author-email: caglardemir8@gmail.com
-Classifier: Programming Language :: Python :: 3.8
-Classifier: License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)
+Classifier: Programming Language :: Python :: 3.10
+Classifier: License :: OSI Approved :: MIT License
 Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
-Requires-Python: >=3.9.18
+Requires-Python: >=3.10.13
 Description-Content-Type: text/markdown
 License-File: LICENSE
 Requires-Dist: matplotlib>=3.3.4
-Requires-Dist: torch>=1.7.1
+Requires-Dist: torch<2.2.0,>=1.7.1
 Requires-Dist: rdflib>=6.0.2
 Requires-Dist: pandas>=1.5.0
 Requires-Dist: sortedcontainers>=2.4.0
 Requires-Dist: owlready2>=0.40
-Requires-Dist: owlapy==0.1.1
+Requires-Dist: owlapy==1.0.2
 Requires-Dist: flask>=1.1.2
 Requires-Dist: tqdm>=4.64.0
 Requires-Dist: transformers>=4.38.1
-Requires-Dist: dicee==0.1.2
+Requires-Dist: dicee>=0.1.2
 Requires-Dist: deap>=1.3.1
+Requires-Dist: fastapi>=0.110.1
+Requires-Dist: uvicorn>=0.29.0
 Provides-Extra: min
 Requires-Dist: matplotlib>=3.3.4; extra == "min"
-Requires-Dist: torch>=1.7.1; extra == "min"
+Requires-Dist: torch<2.2.0,>=1.7.1; extra == "min"
 Requires-Dist: rdflib>=6.0.2; extra == "min"
 Requires-Dist: pandas>=1.5.0; extra == "min"
 Requires-Dist: sortedcontainers>=2.4.0; extra == "min"
 Requires-Dist: owlready2>=0.40; extra == "min"
-Requires-Dist: owlapy==0.1.1; extra == "min"
+Requires-Dist: owlapy==1.0.2; extra == "min"
 Requires-Dist: flask>=1.1.2; extra == "min"
 Requires-Dist: tqdm>=4.64.0; extra == "min"
 Requires-Dist: transformers>=4.38.1; extra == "min"
-Requires-Dist: dicee==0.1.2; extra == "min"
+Requires-Dist: dicee>=0.1.2; extra == "min"
 Requires-Dist: deap>=1.3.1; extra == "min"
+Requires-Dist: fastapi>=0.110.1; extra == "min"
+Requires-Dist: uvicorn>=0.29.0; extra == "min"
+Provides-Extra: doc
+Requires-Dist: sphinx>=7.2.6; extra == "doc"
+Requires-Dist: sphinx-autoapi>=3.0.0; extra == "doc"
+Requires-Dist: sphinx-theme>=1.0; extra == "doc"
+Requires-Dist: sphinx_rtd_theme>=2.0.0; extra == "doc"
+Requires-Dist: sphinxcontrib-plantuml>=0.27; extra == "doc"
+Requires-Dist: plantuml-local-client>=1.2022.6; extra == "doc"
+Requires-Dist: myst-parser>=2.0.0; extra == "doc"
 Provides-Extra: full
 Requires-Dist: matplotlib>=3.3.4; extra == "full"
-Requires-Dist: torch>=1.7.1; extra == "full"
+Requires-Dist: torch<2.2.0,>=1.7.1; extra == "full"
 Requires-Dist: rdflib>=6.0.2; extra == "full"
 Requires-Dist: pandas>=1.5.0; extra == "full"
 Requires-Dist: sortedcontainers>=2.4.0; extra == "full"
 Requires-Dist: owlready2>=0.40; extra == "full"
-Requires-Dist: owlapy==0.1.1; extra == "full"
+Requires-Dist: owlapy==1.0.2; extra == "full"
 Requires-Dist: flask>=1.1.2; extra == "full"
 Requires-Dist: tqdm>=4.64.0; extra == "full"
 Requires-Dist: transformers>=4.38.1; extra == "full"
-Requires-Dist: dicee==0.1.2; extra == "full"
+Requires-Dist: dicee>=0.1.2; extra == "full"
 Requires-Dist: deap>=1.3.1; extra == "full"
+Requires-Dist: fastapi>=0.110.1; extra == "full"
+Requires-Dist: uvicorn>=0.29.0; extra == "full"
 Requires-Dist: httpx>=0.25.2; extra == "full"
 Requires-Dist: pytest>=7.2.2; extra == "full"
 Requires-Dist: gradio>=4.11.0; extra == "full"
 Requires-Dist: ontosample>=0.2.2; extra == "full"
 
-# Ontolearn
+# Ontolearn: Learning OWL Class Expression
 
-*Ontolearn* is an open-source software library for description logic learning problem.
-Find more in the [Documentation](https://ontolearn-docs-dice-group.netlify.app/usage/01_introduction).
+*Ontolearn* is an open-source software library for learning owl class expressions at large scale.
+
+Given positive and negative [OWL named individual](https://www.w3.org/TR/owl2-syntax/#Individuals) examples
+$E^+$ and $E^-$, learning [OWL Class expression](https://www.w3.org/TR/owl2-syntax/#Class_Expressions) problem refers to the following supervised Machine Learning problem
+
+$$\forall p \in E^+\ \mathcal{K} \models H(p) \wedge \forall n \in E^-\ \mathcal{K} \not \models H(n).$$
 
-Learning algorithms: 
+To tackle this supervised learnign problem, ontolearn offers many symbolic, neuro-sybmoloc and deep learning based Learning algorithms: 
 - **Drill** &rarr; [Neuro-Symbolic Class Expression Learning](https://www.ijcai.org/proceedings/2023/0403.pdf)
 - **EvoLearner** &rarr; [EvoLearner: Learning Description Logics with Evolutionary Algorithms](https://dl.acm.org/doi/abs/10.1145/3485447.3511925)
 - **NCES2** &rarr; (soon) [Neural Class Expression Synthesis in ALCHIQ(D)](https://papers.dice-research.org/2023/ECML_NCES2/NCES2_public.pdf)
 - **NCES** &rarr; [Neural Class Expression Synthesis](https://link.springer.com/chapter/10.1007/978-3-031-33455-9_13) 
 - **NERO** &rarr; (soon) [Learning Permutation-Invariant Embeddings for Description Logic Concepts](https://link.springer.com/chapter/10.1007/978-3-031-30047-9_9)
 - **CLIP** &rarr; [Learning Concept Lengths Accelerates Concept Learning in ALC](https://link.springer.com/chapter/10.1007/978-3-031-06981-9_14)
 - **CELOE** &rarr; [Class Expression Learning for Ontology Engineering](https://www.sciencedirect.com/science/article/abs/pii/S1570826811000023)
 - **OCEL** &rarr; A limited version of CELOE
 
+Find more in the [Documentation](https://ontolearn-docs-dice-group.netlify.app/usage/01_introduction).
+
 ## Installation
 
 ```shell
 pip install ontolearn 
 ```
 or
 ```shell
 git clone https://github.com/dice-group/Ontolearn.git 
-python -m venv venv && source venv/bin/activate # for Windows use: .\venv\Scripts\activate 
-pip install -r requirements.txt
+# To create a virtual python env with conda 
+conda create -n venv python=3.10.14 --no-default-packages && conda activate venv && pip install -e .
+# To download knowledge graphs
 wget https://files.dice-research.org/projects/Ontolearn/KGs.zip -O ./KGs.zip && unzip KGs.zip
 ```
-
 ```shell
-pytest -p no:warnings -x # Running 158 tests takes ~ 3 mins
+pytest -p no:warnings -x # Running 171 tests takes ~ 6 mins
 ```
 
-## Description Logic Concept Learning 
+## Learning OWL Class Expression
 ```python
-from ontolearn.concept_learner import CELOE
-from ontolearn.knowledge_base import KnowledgeBase
+from ontolearn.learners import TDL
+from ontolearn.triple_store import TripleStore
 from ontolearn.learning_problem import PosNegLPStandard
-from ontolearn.search import EvoLearnerNode
-from owlapy.model import OWLClass, OWLClassAssertionAxiom, OWLNamedIndividual, IRI, OWLObjectProperty, OWLObjectPropertyAssertionAxiom
-from owlapy.render import DLSyntaxObjectRenderer
-# (1) Load a knowledge graph.
-kb = KnowledgeBase(path='KGs/father.owl')
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy import owl_expression_to_sparql, owl_expression_to_dl
+# (1) Initialize Triplestore
+# sudo docker run -p 3030:3030 -e ADMIN_PASSWORD=pw123 stain/jena-fuseki
+# Login http://localhost:3030/#/ with admin and pw123
+# Create a new dataset called family and upload KGs/Family/family.owl
+kb = TripleStore(url="http://localhost:3030/family")
 # (2) Initialize a learner.
-model = CELOE(knowledge_base=kb)
+model = TDL(knowledge_base=kb)
 # (3) Define a description logic concept learning problem.
-lp = PosNegLPStandard(pos={OWLNamedIndividual(IRI.create("http://example.com/father#stefan")),
-                           OWLNamedIndividual(IRI.create("http://example.com/father#markus")),
-                           OWLNamedIndividual(IRI.create("http://example.com/father#martin"))},
-                      neg={OWLNamedIndividual(IRI.create("http://example.com/father#heinz")),
-                           OWLNamedIndividual(IRI.create("http://example.com/father#anna")),
-                           OWLNamedIndividual(IRI.create("http://example.com/father#michelle"))})
+lp = PosNegLPStandard(pos={OWLNamedIndividual("http://example.com/father#stefan")},
+                      neg={OWLNamedIndividual("http://example.com/father#heinz"),
+                           OWLNamedIndividual("http://example.com/father#anna"),
+                           OWLNamedIndividual("http://example.com/father#michelle")})
 # (4) Learn description logic concepts best fitting (3).
-dl_classifiers=model.fit(learning_problem=lp).best_hypotheses(2)
+h = model.fit(learning_problem=lp).best_hypotheses()
+print(h)
+print(owl_expression_to_dl(h))
+print(owl_expression_to_sparql(expression=h))
+```
 
-# (5) Inference over unseen individuals
-namespace = 'http://example.com/father#'
-# (6) New Individuals
-julia = OWLNamedIndividual(IRI.create(namespace, 'julia'))
-julian = OWLNamedIndividual(IRI.create(namespace, 'julian'))
-thomas = OWLNamedIndividual(IRI.create(namespace, 'thomas'))
-# (7) OWLClassAssertionAxiom  about (6)
-male = OWLClass(IRI.create(namespace, 'male'))
-female = OWLClass(IRI.create(namespace, 'female'))
-axiom1 = OWLClassAssertionAxiom(individual=julia, class_expression=female)
-axiom2 = OWLClassAssertionAxiom(individual=julian, class_expression=male)
-axiom3 = OWLClassAssertionAxiom(individual=thomas, class_expression=male)
-# (8) OWLObjectPropertyAssertionAxiom about (6)
-has_child = OWLObjectProperty(IRI.create(namespace, 'hasChild'))
-# Existing Individuals
-anna = OWLNamedIndividual(IRI.create(namespace, 'anna'))
-markus = OWLNamedIndividual(IRI.create(namespace, 'markus'))
-michelle = OWLNamedIndividual(IRI.create(namespace, 'michelle'))
-axiom4 = OWLObjectPropertyAssertionAxiom(subject=thomas, property_=has_child, object_=julian)
-axiom5 = OWLObjectPropertyAssertionAxiom(subject=julia, property_=has_child, object_=julian)
-
-# 4. Use loaded class expressions for predictions
-predictions = model.predict(individuals=[julia, julian, thomas, anna, markus, michelle],
-                            axioms=[axiom1, axiom2, axiom3, axiom4, axiom5],
-                            hypotheses=dl_classifiers)
-print(predictions)
-"""
-          (¬female) ⊓ (∃ hasChild.⊤)  male
-julia                            0.0   0.0
-julian                           0.0   1.0
-thomas                           1.0   1.0
-anna                             0.0   0.0
-markus                           1.0   1.0
-michelle                         0.0   0.0
-"""
+## Learning OWL Class Expression over DBpedia
+```python
+from ontolearn.utils.static_funcs import save_owl_class_expressions
+
+# (1) Initialize Triplestore
+kb = TripleStore(url="http://dice-dbpedia.cs.upb.de:9080/sparql")
+# (3) Initialize a learner.
+model = TDL(knowledge_base=kb)
+# (4) Define a description logic concept learning problem.
+lp = PosNegLPStandard(pos={OWLNamedIndividual("http://dbpedia.org/resource/Angela_Merkel")},
+                      neg={OWLNamedIndividual("http://dbpedia.org/resource/Barack_Obama")})
+# (5) Learn description logic concepts best fitting (4).
+h = model.fit(learning_problem=lp).best_hypotheses()
+print(h)
+print(owl_expression_to_dl(h))
+print(owl_expression_to_sparql(expression=h))
+save_owl_class_expressions(expressions=h,path="owl_prediction")
 ```
 
 Fore more please refer to  the [examples](https://github.com/dice-group/Ontolearn/tree/develop/examples) folder.
 
+## ontolearn-webservice 
+
+<details><summary> Click me! </summary>
+
+Load an RDF knowledge graph 
+```shell
+ontolearn-webservice --path_knowledge_base KGs/Mutagenesis/mutagenesis.owl
+```
+or launch a Tentris instance https://github.com/dice-group/tentris over Mutagenesis.
+```shell
+ontolearn-webservice --endpoint_triple_store http://0.0.0.0:9080/sparql
+```
+The below code trains DRILL with 6 randomly generated learning problems
+provided that **path_to_pretrained_drill** does not lead to a directory containing pretrained DRILL.
+Thereafter, trained DRILL is saved in the directory **path_to_pretrained_drill**.
+Finally, trained DRILL will learn an OWL class expression.
+```python
+import json
+import requests
+with open(f"LPs/Mutagenesis/lps.json") as json_file:
+    learning_problems = json.load(json_file)["problems"]
+for str_target_concept, examples in learning_problems.items():
+    response = requests.get('http://0.0.0.0:8000/cel',
+                            headers={'accept': 'application/json', 'Content-Type': 'application/json'},
+                            json={"pos": examples['positive_examples'],
+                                  "neg": examples['negative_examples'],
+                                  "model": "Drill",
+                                  "path_embeddings": "mutagenesis_embeddings/Keci_entity_embeddings.csv",
+                                  "path_to_pretrained_drill": "pretrained_drill",
+                                  # if pretrained_drill exists, upload, otherwise train one and save it there
+                                  "num_of_training_learning_problems": 2,
+                                  "num_of_target_concepts": 3,
+                                  "max_runtime": 60000,  # seconds
+                                  "iter_bound": 1  # number of iterations/applied refinement opt.
+                                  })
+    print(response.json())  # {'Prediction': '∀ hasAtom.(¬Nitrogen-34)', 'F1': 0.7283582089552239, 'saved_prediction': 'Predictions.owl'}
+```
+TDL (a more scalable learner) can also be used as follows
+```python
+import json
+import requests
+with open(f"LPs/Mutagenesis/lps.json") as json_file:
+    learning_problems = json.load(json_file)["problems"]
+for str_target_concept, examples in learning_problems.items():
+    response = requests.get('http://0.0.0.0:8000/cel',
+                            headers={'accept': 'application/json', 'Content-Type': 'application/json'},
+                            json={"pos": examples['positive_examples'],
+                                  "neg": examples['negative_examples'],
+                                  "model": "TDL"})
+    print(response.json())
+```
+
+
+</details>
+
 ## Benchmark Results
+
+<details> <summary> To see the results </summary>
+
 ```shell
 # To download learning problems. # Benchmark learners on the Family benchmark dataset with benchmark learning problems.
 wget https://files.dice-research.org/projects/Ontolearn/LPs.zip -O ./LPs.zip && unzip LPs.zip
 ```
 
 ```shell
 # To download learning problems and benchmark learners on the Family benchmark dataset with benchmark learning problems.
 python examples/concept_learning_evaluation.py --lps LPs/Family/lps.json --kb KGs/Family/family-benchmark_rich_background.owl --max_runtime 60 --report family_results.csv  && python -c 'import pandas as pd; print(pd.read_csv("family_results.csv", index_col=0).to_markdown(floatfmt=".3f"))'
 ```
-<details> <summary> To see the results </summary>
 
 Below, we report the average results of 5 runs.
 Each model has 60 second to find a fitting answer. DRILL results are obtained by using F1 score as heuristic function.
 Note that F1 scores denote the quality of the find/constructed concept w.r.t. E^+ and E^-.
 
 ### Family Benchmark Results
 
@@ -208,14 +271,16 @@
 
 Use `python examples/concept_learning_cv_evaluation.py` to apply stratified k-fold cross validation on learning problems. 
 
 </details>
 
 ## Deployment 
 
+<details> <summary> To see the results </summary>
+
 ```shell
 pip install gradio # (check `pip show gradio` first)
 ```
 
 Available models to deploy: **EvoLearner**, **NCES**, **CELOE** and **OCEL**.
 To deploy **EvoLearner** on the **Family** knowledge graph:
 ```shell
@@ -223,15 +288,29 @@
 ```
 Run the help command to see the description on this script usage:
 
 ```shell
 python deploy_cl.py --help
 ```
 
-### Citing
+</details>
+
+## Development
+
+<details> <summary> To see the results </summary>
+  
+Creating a feature branch **refactoring** from development branch
+
+```shell
+git branch refactoring develop
+```
+
+</details>
+
+## References
 Currently, we are working on our manuscript describing our framework. 
 If you find our work useful in your research, please consider citing the respective paper:
 ```
 # DRILL
 @inproceedings{demir2023drill,
   author = {Demir, Caglar and Ngomo, Axel-Cyrille Ngonga},
   booktitle = {The 32nd International Joint Conference on Artificial Intelligence, IJCAI 2023},
@@ -278,8 +357,8 @@
   booktitle={European Semantic Web Conference},
   pages={236--252},
   year={2022},
   publisher={Springer Nature Switzerland}
 }
 ```
 
-In case you have any question, please contact:  ```onto-learn@lists.uni-paderborn.de```
+In case you have any question, please contact: ```caglar.demir@upb.de``` or ```caglardemir8@gmail.com```
```

### Comparing `ontolearn-0.7.0/ontolearn.egg-info/SOURCES.txt` & `ontolearn-0.7.1/ontolearn.egg-info/SOURCES.txt`

 * *Files 3% similar despite different names*

```diff
@@ -29,14 +29,15 @@
 ontolearn/nces_utils.py
 ontolearn/quality_funcs.py
 ontolearn/refinement_operators.py
 ontolearn/search.py
 ontolearn/tentris.py
 ontolearn/triple_store.py
 ontolearn/value_splitter.py
+ontolearn/verbalizer.py
 ontolearn.egg-info/PKG-INFO
 ontolearn.egg-info/SOURCES.txt
 ontolearn.egg-info/dependency_links.txt
 ontolearn.egg-info/entry_points.txt
 ontolearn.egg-info/requires.txt
 ontolearn.egg-info/top_level.txt
 ontolearn/base/__init__.py
@@ -46,22 +47,23 @@
 ontolearn/base/fast_instance_checker.py
 ontolearn/base/plus.py
 ontolearn/base/utils.py
 ontolearn/base/ext/__init__.py
 ontolearn/base/owl/__init__.py
 ontolearn/base/owl/hierarchy.py
 ontolearn/base/owl/utils.py
-ontolearn/endpoint/__init__.py
 ontolearn/learners/__init__.py
 ontolearn/learners/drill.py
 ontolearn/learners/nero.py
 ontolearn/learners/tree_learner.py
 ontolearn/lp_generator/__init__.py
 ontolearn/lp_generator/generate_data.py
 ontolearn/lp_generator/helper_classes.py
+ontolearn/scripts/__init__.py
+ontolearn/scripts/run.py
 ontolearn/utils/__init__.py
 ontolearn/utils/log_config.py
 ontolearn/utils/oplogging.py
 ontolearn/utils/static_funcs.py
 tests/__init__.py
 tests/test_base.py
 tests/test_base_concept_learner.py
@@ -77,13 +79,14 @@
 tests/test_lp_generator.py
 tests/test_metrics.py
 tests/test_model_adapter.py
 tests/test_owlapy.py
 tests/test_owlapy_cnf_dnf.py
 tests/test_owlapy_fastinstancechecker.py
 tests/test_owlapy_nnf.py
-tests/test_owlapy_owl2sparql_converter.py
 tests/test_owlapy_owlready2.py
 tests/test_owlapy_parser.py
 tests/test_owlapy_render.py
 tests/test_refinement_operators.py
+tests/test_tdl_regression.py
+tests/test_triplestore.py
 tests/test_value_splitter.py
```

### Comparing `ontolearn-0.7.0/tests/test_base.py` & `ontolearn-0.7.1/tests/test_base.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 """ Test the base module"""
 # import os
 
 from ontolearn.knowledge_base import KnowledgeBase
 from ontolearn.utils import setup_logging
 
 PATH_FAMILY = 'KGs/Family/family-benchmark_rich_background.owl'
-PATH_FATHER = 'KGs/father.owl'
+PATH_FATHER = 'KGs/Family/father.owl'
 
 
 def test_knowledge_base():
     kb = KnowledgeBase(path=PATH_FAMILY)
     assert len([i for i in kb.tbox()]) > 0
     assert len([set(kb.tbox(j)) for j in kb.get_concepts()]) > 0
```

### Comparing `ontolearn-0.7.0/tests/test_base_concept_learner.py` & `ontolearn-0.7.1/tests/test_base_concept_learner.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,24 +1,27 @@
 import unittest
 import tempfile
 import pandas as pd
+from owlapy.class_expression import OWLClass, OWLObjectIntersectionOf, OWLObjectSomeValuesFrom, OWLThing
+from owlapy.iri import IRI
+from owlapy.owl_axiom import OWLClassAssertionAxiom, OWLObjectPropertyAssertionAxiom
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_property import OWLObjectProperty
 
 from ontolearn.concept_learner import CELOE
 from ontolearn.knowledge_base import KnowledgeBase
 from ontolearn.learning_problem import PosNegLPStandard
 from ontolearn.search import EvoLearnerNode
-from owlapy.model import OWLClass, OWLClassAssertionAxiom, OWLNamedIndividual, IRI, OWLObjectIntersectionOf, \
-                         OWLObjectProperty, OWLObjectPropertyAssertionAxiom, OWLObjectSomeValuesFrom, OWLThing
 from owlapy.render import DLSyntaxObjectRenderer
 
 
 class TestBaseConceptLearner(unittest.TestCase):
 
     def setUp(self):
-        kb = KnowledgeBase(path='KGs/father.owl')
+        kb = KnowledgeBase(path='KGs/Family/father.owl')
         self.model = CELOE(knowledge_base=kb)
         self.namespace = 'http://example.com/father#'
 
         self.male = OWLClass(IRI.create(self.namespace, 'male'))
         self.female = OWLClass(IRI.create(self.namespace, 'female'))
         self.has_child = OWLObjectProperty(IRI.create(self.namespace, 'hasChild'))
```

### Comparing `ontolearn-0.7.0/tests/test_celoe.py` & `ontolearn-0.7.1/tests/test_celoe.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,26 +1,30 @@
 """ Test the default pipeline for structured machine learning"""
 import json
+
+from owlapy.class_expression import OWLClass
+from owlapy.iri import IRI
+from owlapy.owl_individual import OWLNamedIndividual
+
 from ontolearn.knowledge_base import KnowledgeBase
 from ontolearn.concept_learner import CELOE
 from ontolearn.learning_problem import PosNegLPStandard
 from ontolearn.model_adapter import ModelAdapter
-from ontolearn.utils import setup_logging
-from owlapy.model import OWLNamedIndividual, OWLClass, IRI
+from ontolearn.utils import setup_logging, compute_f1_score
 from owlapy.render import DLSyntaxObjectRenderer
 
 PATH_FAMILY = 'KGs/Family/family-benchmark_rich_background.owl'
 PATH_MUTAGENESIS = 'KGs/Mutagenesis/mutagenesis.owl'
-PATH_DATA_FATHER = 'KGs/father.owl'
+PATH_DATA_FATHER = 'KGs/Family/father.owl'
 
 with open('examples/synthetic_problems.json') as json_file:
     settings = json.load(json_file)
 
 
-class Celoe_Test:
+class Test_Celoe:
     def test_celoe(self):
         kb = KnowledgeBase(path=PATH_FAMILY)
 
         exp_qualities = {'Aunt': .80392, 'Brother': 1.0,
                          'Cousin': .68063, 'Granddaughter': 1.0,
                          'Uncle': .88372, 'Grandgrandfather': 0.94444}
         tested = dict()
@@ -40,25 +44,23 @@
                         'http://www.benchmark.org/family#Father',
                         'http://www.benchmark.org/family#Grandparent'})))
 
             target_kb = kb.ignore_and_copy(ignored_classes=concepts_to_ignore)
             model = CELOE(knowledge_base=target_kb, max_runtime=60, max_num_of_concepts_tested=3000)
 
             returned_val = model.fit(learning_problem=lp)
-            self.assertEqual(returned_val, model, "fit should return its self")
+            assert returned_val==model, "fit should return its self"
             hypotheses = model.best_hypotheses(n=3)
+            f1_qualities=[compute_f1_score(individuals=frozenset({i for i in kb.individuals(owl)}),pos=lp.pos,neg=lp.neg)  for owl in hypotheses]
             tested[str_target_concept] = model.number_of_tested_concepts
-            found_qualities[str_target_concept] = hypotheses[0].quality
-            self.assertGreaterEqual(hypotheses[0].quality, exp_qualities[str_target_concept],
-                                    "we only ever improve the quality")
-            self.assertGreaterEqual(hypotheses[0].quality, hypotheses[1].quality, "the hypotheses are quality ordered")
-            self.assertGreaterEqual(hypotheses[1].quality, hypotheses[2].quality)
-        print(exp_qualities)
-        print(tested)
-        print(found_qualities)
+            found_qualities[str_target_concept] = f1_qualities[0]
+            assert f1_qualities[0]>=exp_qualities[str_target_concept]
+            assert f1_qualities[0]>= f1_qualities[1]
+            assert f1_qualities[1]>= f1_qualities[2]
+
 
     def test_celoe_mutagenesis(self):
         kb = KnowledgeBase(path=PATH_MUTAGENESIS)
 
         namespace_ = 'http://dl-learner.org/mutagenesis#'
         pos_inds = ['d190', 'd191', 'd194', 'd197', 'e1', 'e2', 'e27', 'f1', 'f2', 'f3', 'f4', 'f5', 'f6']
         pos = {OWLNamedIndividual(IRI.create(namespace_, ind)) for ind in pos_inds}
@@ -67,24 +69,22 @@
                     'e6', 'e7', 'e8', 'e9']
         neg = {OWLNamedIndividual(IRI.create(namespace_, ind)) for ind in neg_inds}
 
         lp = PosNegLPStandard(pos=pos, neg=neg)
         model = CELOE(knowledge_base=kb, max_runtime=60, max_num_of_concepts_tested=3000)
         returned_model = model.fit(learning_problem=lp)
         best_pred = returned_model.best_hypotheses(n=1)
-        self.assertGreaterEqual(best_pred.quality, 0.96)
+
+        assert compute_f1_score(individuals=frozenset({i for i in kb.individuals(best_pred)}), pos=lp.pos, neg=lp.neg)>=0.96
 
         r = DLSyntaxObjectRenderer()
-        self.assertEqual(r.render(best_pred.concept), '∃ act.xsd:double[≥ 0.325]')
+        assert r.render(best_pred)== '∃ act.xsd:double[≥ 0.325]'
 
     def test_celoe_father(self):
         kb = KnowledgeBase(path=PATH_DATA_FATHER)
-        # with (kb.onto):
-        #    sync_reasoner()
-        # sync_reasoner()
 
         examples = {
             'positive_examples': [
                 OWLNamedIndividual(IRI.create("http://example.com/father#stefan")),
                 OWLNamedIndividual(IRI.create("http://example.com/father#markus")),
                 OWLNamedIndividual(IRI.create("http://example.com/father#martin"))],
             'negative_examples': [
@@ -97,18 +97,18 @@
         n = set(examples['negative_examples'])
 
         lp = PosNegLPStandard(pos=p, neg=n)
         model = CELOE(knowledge_base=kb)
 
         model.fit(learning_problem=lp)
         best_pred = model.best_hypotheses(n=1)
-        print(best_pred)
-        self.assertEqual(best_pred.quality, 1.0)
+
+        assert compute_f1_score(individuals=frozenset({i for i in kb.individuals(best_pred)}), pos=lp.pos, neg=lp.neg)==1.0
         r = DLSyntaxObjectRenderer()
-        self.assertEqual(r.render(best_pred.concept), '(¬female) ⊓ (∃ hasChild.⊤)')
+        assert r.render(best_pred)=='(¬female) ⊓ (∃ hasChild.⊤)'
 
     def test_multiple_fits(self):
         kb = KnowledgeBase(path=PATH_FAMILY)
 
         pos_aunt = set(map(OWLNamedIndividual,
                            map(IRI.create,
                                settings['problems']['Aunt']['positive_examples'])))
@@ -126,20 +126,22 @@
         model = ModelAdapter(learner_type=CELOE, knowledge_base=kb, max_runtime=1000, max_num_of_concepts_tested=100)
         model.fit(pos=pos_aunt, neg=neg_aunt)
         kb.clean()
         model.fit(pos=pos_uncle, neg=neg_uncle)
 
         print("First fitted on Aunt then on Uncle:")
         hypotheses = list(model.best_hypotheses(n=2))
-        q, str_concept = hypotheses[0].quality, hypotheses[0].concept
+
+        q, str_concept = compute_f1_score(individuals={i for i in kb.individuals(hypotheses[0])}, pos=pos_uncle, neg=neg_uncle), hypotheses[0]
         kb.clean()
         kb = KnowledgeBase(path=PATH_FAMILY)
         model = ModelAdapter(learner_type=CELOE, knowledge_base=kb, max_runtime=1000, max_num_of_concepts_tested=100)
         model.fit(pos=pos_uncle, neg=neg_uncle)
 
         print("Only fitted on Uncle:")
         hypotheses = list(model.best_hypotheses(n=2))
-        q2, str_concept2 = hypotheses[0].quality, hypotheses[0].concept
 
-        self.assertEqual(q, q2)
-        self.assertEqual(str_concept, str_concept2)
+        q2, str_concept2 = compute_f1_score(individuals={i for i in kb.individuals(hypotheses[0])}, pos=pos_uncle, neg=neg_uncle), hypotheses[0]
+
+        assert q==q2
+        assert str_concept==str_concept2
```

### Comparing `ontolearn-0.7.0/tests/test_concept.py` & `ontolearn-0.7.1/tests/test_concept.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,12 +1,15 @@
 """ Test the concept module"""
 import json
+
+from owlapy.class_expression import OWLClass
+from owlapy.iri import IRI
+
 from ontolearn.knowledge_base import KnowledgeBase
 from ontolearn.utils import setup_logging
-from owlapy.model import OWLClass, IRI
 from ontolearn.base import OWLReasoner_Owlready2
 
 setup_logging("ontolearn/logging_test.conf")
 
 PATH_FAMILY = 'KGs/Family/family-benchmark_rich_background.owl'
 with open('examples/synthetic_problems.json') as json_file:
     settings = json.load(json_file)
```

### Comparing `ontolearn-0.7.0/tests/test_core_owl_hierarchy.py` & `ontolearn-0.7.1/tests/test_core_owl_hierarchy.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,13 +1,16 @@
 import unittest
 from typing import TypeVar
 
+from owlapy.class_expression import OWLClass
+from owlapy.iri import IRI
+from owlapy.owl_property import OWLObjectProperty
+
 from ontolearn.base.owl.hierarchy import ClassHierarchy, ObjectPropertyHierarchy, AbstractHierarchy
 from ontolearn.utils import setup_logging
-from owlapy.model import OWLClass, OWLObjectProperty, IRI
 from ontolearn.base import OWLOntologyManager_Owlready2, OWLReasoner_Owlready2
 
 _T = TypeVar('_T')  #:
 
 setup_logging("ontolearn/logging_test.conf")
 
 
@@ -56,20 +59,20 @@
 
         ch = ClassHierarchy(reasoner).restrict_and_copy(remove=frozenset({OWLClass(IRI(NS, 'Grandchild'))}))
 
         target_cls = frozenset({OWLClass(IRI(NS, 'Daughter')),
                                 OWLClass(IRI(NS, 'Granddaughter')),
                                 OWLClass(IRI(NS, 'Grandson')),
                                 OWLClass(IRI(NS, 'Son'))})
-        self.assertEqual(frozenset(ch.sub_classes(OWLClass(IRI(NS, 'Child')))), target_cls)
+        assert frozenset(ch.sub_classes(OWLClass(IRI(NS, 'Child'))))==target_cls
 
     def test_class_hierarchy_children(self):
         NS = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
         reasoner = OWLReasoner_Owlready2(onto)
 
         ch = ClassHierarchy(reasoner)
         # for k in sorted(ch.roots()):
         #     _print_children(ch, k)
 
         target_cls = frozenset({OWLClass(IRI(NS, 'female')),
@@ -84,18 +87,18 @@
 
         ch = ClassHierarchy(reasoner)
         grandmother = OWLClass(IRI(NS, 'Grandmother'))
         # _print_parents(ch, grandmother)
 
         target_cls = frozenset({OWLClass(IRI(NS, 'Female')),
                                 OWLClass(IRI(NS, 'Grandparent'))})
-        self.assertEqual(frozenset(ch.super_classes(grandmother)), target_cls)
+        assert frozenset(ch.super_classes(grandmother))== target_cls
 
         target_cls = frozenset({OWLClass(IRI(NS, 'Person'))})
-        self.assertEqual(frozenset(ch.roots()), target_cls)
+        assert frozenset(ch.roots())== target_cls
 
     def test_class_hierarchy_siblings(self):
         NS = "http://www.benchmark.org/family#"
         mgr = OWLOntologyManager_Owlready2()
         onto = mgr.load_ontology(IRI.create("file://KGs/Family/family-benchmark_rich_background.owl"))
         reasoner = OWLReasoner_Owlready2(onto)
```

### Comparing `ontolearn-0.7.0/tests/test_core_utils_length.py` & `ontolearn-0.7.1/tests/test_core_utils_length.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,17 +1,22 @@
 import unittest
 
+from owlapy.class_expression import OWLObjectUnionOf, OWLObjectComplementOf, OWLObjectIntersectionOf, OWLThing, \
+    OWLObjectOneOf, OWLObjectHasValue, OWLObjectMinCardinality, OWLClass, OWLObjectSomeValuesFrom, OWLDataAllValuesFrom, \
+    OWLDataExactCardinality, OWLDataHasValue, OWLDataMaxCardinality, OWLDataMinCardinality, OWLDataOneOf, \
+    OWLDataSomeValuesFrom
+from owlapy.iri import IRI
+from owlapy.owl_data_ranges import OWLDataUnionOf, OWLDataComplementOf, OWLDataIntersectionOf
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import OWLLiteral, DoubleOWLDatatype, IntegerOWLDatatype
+from owlapy.owl_property import OWLObjectProperty, OWLDataProperty
+
 from ontolearn.base.owl.utils import OWLClassExpressionLengthMetric
 from ontolearn.utils import setup_logging
-from owlapy.model.providers import OWLDatatypeMinMaxInclusiveRestriction
-from owlapy.model import OWLDataUnionOf, OWLLiteral, OWLObjectProperty, OWLObjectUnionOf, \
-    OWLObjectComplementOf, OWLObjectIntersectionOf, OWLThing, OWLNamedIndividual, OWLObjectOneOf, OWLObjectHasValue, \
-    OWLObjectMinCardinality, IRI, DoubleOWLDatatype, IntegerOWLDatatype, OWLClass, OWLObjectSomeValuesFrom, \
-    OWLDataAllValuesFrom, OWLDataComplementOf, OWLDataExactCardinality, OWLDataHasValue, OWLDataIntersectionOf, \
-    OWLDataMaxCardinality, OWLDataMinCardinality, OWLDataOneOf, OWLDataProperty, OWLDataSomeValuesFrom
+from owlapy.providers import owl_datatype_min_max_inclusive_restriction
 
 setup_logging("ontolearn/logging_test.conf")
 
 
 class Core_OWLClassExpressionLengthMetric_Test(unittest.TestCase):
     def test_ce_length(self):
         NS = "http://example.com/father#"
@@ -60,15 +65,15 @@
 
         ce = OWLDataSomeValuesFrom(property=has_age,
                                    filler=OWLDataComplementOf(DoubleOWLDatatype))
         le = cl.length(ce)
         # ∃ hasAge.¬xsd:double
         self.assertEqual(le, 4)
 
-        datatype_restriction = OWLDatatypeMinMaxInclusiveRestriction(40, 80)
+        datatype_restriction = owl_datatype_min_max_inclusive_restriction(40, 80)
 
         ce = OWLDataSomeValuesFrom(property=has_age, filler=OWLDataUnionOf([datatype_restriction, IntegerOWLDatatype]))
         le = cl.length(ce)
         # ∃ hasAge.(xsd:integer[>= 40 ,<= 80] ⊔ xsd:integer)
         self.assertEqual(le, 6)
 
         ce = OWLDataAllValuesFrom(property=has_age,
```

### Comparing `ontolearn-0.7.0/tests/test_evolearner.py` & `ontolearn-0.7.1/tests/test_evolearner.py`

 * *Files 18% similar despite different names*

```diff
@@ -1,46 +1,49 @@
 import json
 import random
 import unittest
 from ontolearn.learning_problem import PosNegLPStandard
-from owlapy.model import OWLNamedIndividual, IRI
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.iri import IRI
 
 from ontolearn.knowledge_base import KnowledgeBase
 from ontolearn.concept_learner import EvoLearner
 from ontolearn.utils import setup_logging
+
 random.seed(1)
 
 
 class TestEvoLearner(unittest.TestCase):
 
     def test_regression_family(self):
         with open('examples/synthetic_problems.json') as json_file:
             settings = json.load(json_file)
         kb = KnowledgeBase(path=settings['data_path'][3:])
+        # @TODO: Explicitly define params
         model = EvoLearner(knowledge_base=kb, max_runtime=10)
 
         regression_test_evolearner = {'Aunt': 1.0, 'Brother': 1.0,
-                                      'Cousin': 1.0, 'Granddaughter': 1.0,
-                                      'Uncle': 1.0, 'Grandgrandfather': 1.0}
+                                      'Cousin': 0.992, 'Granddaughter': 1.0,
+                                      'Uncle': 0.89, 'Grandgrandfather': 1.0}
         for str_target_concept, examples in settings['problems'].items():
             pos = set(map(OWLNamedIndividual, map(IRI.create, set(examples['positive_examples']))))
             neg = set(map(OWLNamedIndividual, map(IRI.create, set(examples['negative_examples']))))
             print('Target concept: ', str_target_concept)
 
             lp = PosNegLPStandard(pos=pos, neg=neg)
             returned_model = model.fit(learning_problem=lp)
-            self.assertEqual(returned_model, model)
-            hypotheses = list(returned_model.best_hypotheses(n=3))
-            self.assertGreaterEqual(hypotheses[0].quality, regression_test_evolearner[str_target_concept])
+            assert returned_model == model
+            hypotheses = list(returned_model.best_hypotheses(n=3, return_node=True))
+            assert hypotheses[0].quality >= regression_test_evolearner[str_target_concept]
             # best_hypotheses returns distinct hypotheses and sometimes the model will not find 'n' distinct hypothesis,
             # hence the checks
             if len(hypotheses) == 2:
-                self.assertGreaterEqual(hypotheses[0].quality, hypotheses[1].quality)
+                assert hypotheses[0].quality >= hypotheses[1].quality
             if len(hypotheses) == 3:
-                self.assertGreaterEqual(hypotheses[1].quality, hypotheses[2].quality)
+                assert hypotheses[1].quality >= hypotheses[2].quality
 
     def test_regression_mutagenesis_multiple_fits(self):
         kb = KnowledgeBase(path='KGs/Mutagenesis/mutagenesis.owl')
 
         namespace_ = 'http://dl-learner.org/mutagenesis#'
         pos_inds = ['d190', 'd191', 'd194', 'd197', 'e1', 'e2', 'e27', 'f1', 'f2', 'f3', 'f4', 'f5', 'f6']
         pos = {OWLNamedIndividual(IRI.create(namespace_, ind)) for ind in pos_inds}
@@ -48,13 +51,13 @@
                     'e17', 'e18', 'e19', 'e20', 'e21', 'e22', 'e23', 'e24', 'e25', 'e26', 'e3', 'e4', 'e5',
                     'e6', 'e7', 'e8', 'e9']
         neg = {OWLNamedIndividual(IRI.create(namespace_, ind)) for ind in neg_inds}
 
         lp = PosNegLPStandard(pos=pos, neg=neg)
         model = EvoLearner(knowledge_base=kb, max_runtime=10)
         returned_model = model.fit(learning_problem=lp)
-        best_pred = returned_model.best_hypotheses(n=1)
-        self.assertEqual(best_pred.quality, 1.00)
+        best_pred = returned_model.best_hypotheses(n=1, return_node=True)
+        assert best_pred.quality == 1.00
 
         returned_model = model.fit(learning_problem=lp)
-        best_pred = returned_model.best_hypotheses(n=1)
-        self.assertEqual(best_pred.quality, 1.00)
+        best_pred = returned_model.best_hypotheses(n=1, return_node=True)
+        assert best_pred.quality == 1.00
```

### Comparing `ontolearn-0.7.0/tests/test_express_refinement.py` & `ontolearn-0.7.1/tests/test_express_refinement.py`

 * *Files 18% similar despite different names*

```diff
@@ -1,13 +1,16 @@
 import json
 import unittest
 
+from owlapy.class_expression import OWLClass
+from owlapy.iri import IRI
+from owlapy.owl_individual import OWLNamedIndividual
+
 from ontolearn.model_adapter import ModelAdapter
 from ontolearn.refinement_operators import ExpressRefinement
-from owlapy.model import OWLClass, OWLNamedIndividual, IRI
 
 NS = 'http://www.benchmark.org/family#'
 PATH_FAMILY = 'KGs/Family/family-benchmark_rich_background.owl'
 
 with open('examples/synthetic_problems.json') as json_file:
     settings = json.load(json_file)
```

### Comparing `ontolearn-0.7.0/tests/test_knowledge_base.py` & `ontolearn-0.7.1/tests/test_knowledge_base.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,21 +1,23 @@
 import unittest
 from itertools import repeat
 
-from ontolearn.concept_generator import ConceptGenerator
-from ontolearn.knowledge_base import KnowledgeBase
-
-from owlapy.model import OWLObjectUnionOf, OWLSubDataPropertyOfAxiom, OWLSubObjectPropertyOfAxiom, OWLThing, \
-    BooleanOWLDatatype, DoubleOWLDatatype, IntegerOWLDatatype, OWLClass, OWLDataAllValuesFrom, \
-    OWLDataHasValue, OWLDataProperty, OWLDataSomeValuesFrom, OWLLiteral, OWLNamedIndividual, \
-    OWLNothing, OWLObjectAllValuesFrom, OWLObjectComplementOf, OWLObjectExactCardinality, \
-    OWLObjectHasValue, OWLObjectIntersectionOf, OWLObjectInverseOf, OWLObjectMaxCardinality, \
-    OWLObjectMinCardinality, OWLObjectProperty, IRI, OWLObjectSomeValuesFrom, OWLClassAssertionAxiom, \
+from owlapy.class_expression import OWLObjectUnionOf, OWLThing, OWLClass, OWLDataAllValuesFrom, OWLDataHasValue, \
+    OWLNothing, OWLDataSomeValuesFrom, OWLObjectComplementOf, OWLObjectExactCardinality, OWLObjectMaxCardinality, \
+    OWLObjectAllValuesFrom, OWLObjectHasValue, OWLObjectIntersectionOf, OWLObjectSomeValuesFrom, OWLObjectMinCardinality
+from owlapy.iri import IRI
+from owlapy.owl_axiom import OWLSubDataPropertyOfAxiom, OWLSubObjectPropertyOfAxiom, OWLClassAssertionAxiom, \
     OWLEquivalentClassesAxiom, OWLSubClassOfAxiom, OWLObjectPropertyAssertionAxiom, OWLObjectPropertyDomainAxiom, \
     OWLObjectPropertyRangeAxiom, OWLDataPropertyDomainAxiom
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import BooleanOWLDatatype, IntegerOWLDatatype, DoubleOWLDatatype, OWLLiteral
+from owlapy.owl_property import OWLDataProperty, OWLObjectInverseOf, OWLObjectProperty
+
+from ontolearn.concept_generator import ConceptGenerator
+from ontolearn.knowledge_base import KnowledgeBase
 
 
 class KnowledgeBaseTest(unittest.TestCase):
 
     def setUp(self):
         self.namespace = "http://dl-learner.org/mutagenesis#"
         self.kb = KnowledgeBase(path="KGs/Mutagenesis/mutagenesis.owl")
@@ -365,16 +367,18 @@
 
     def test_repr(self):
         representation = repr(self.kb)
         self.assertEqual("KnowledgeBase(path='KGs/Mutagenesis/mutagenesis.owl' <86 classes, 11 properties,"
                          " 14145 individuals)", representation)
 
     def test_tbox_abox(self):
+        """
+
 
-        kb = KnowledgeBase(path="KGs/test_ontology.owl")
+        kb = KnowledgeBase(path="KGs/Test/test_ontology.owl")
         ind1 = OWLNamedIndividual(
             IRI.create('http://www.semanticweb.org/stefan/ontologies/2023/1/untitled-ontology-11#b'))
         ind2 = OWLNamedIndividual(
             IRI.create('http://www.semanticweb.org/stefan/ontologies/2023/1/untitled-ontology-11#a'))
         dp = OWLDataProperty(
             IRI.create('http://www.semanticweb.org/stefan/ontologies/2023/1/untitled-ontology-11#dp2'))
         op1 = OWLObjectProperty(
@@ -643,7 +647,8 @@
         r9 = set(kb.triples(mode="native"))
         self.assertEqual(len(r7), len(r8))
         self.assertEqual(len(r7), len(r9))
 
         self.assertEqual(len(r7), len(r4) + len(r1))
         self.assertEqual(len(r8), len(r5) + len(r2))
         self.assertEqual(len(r9), len(r6) + len(r3))
+        """
```

### Comparing `ontolearn-0.7.0/tests/test_learners_regression.py` & `ontolearn-0.7.1/tests/test_learners_regression.py`

 * *Files 22% similar despite different names*

```diff
@@ -1,50 +1,62 @@
 import json
-import random
-import unittest
 from ontolearn.learning_problem import PosNegLPStandard
-from owlapy.model import OWLNamedIndividual, IRI
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.iri import IRI
 
 from ontolearn.knowledge_base import KnowledgeBase
 from ontolearn.concept_learner import EvoLearner, CELOE, OCEL
 from ontolearn.learners import Drill
 from ontolearn.metrics import F1
-
-import os
-import time
-from owlapy.model import OWLNamedIndividual, IRI
+from ontolearn.utils.static_funcs import compute_f1_score
 
 
 class TestConceptLearnerReg:
 
     def test_regression_family(self):
         with open('examples/synthetic_problems.json') as json_file:
             settings = json.load(json_file)
         kb = KnowledgeBase(path=settings['data_path'][3:])
-        max_runtime=10
+        max_runtime = 10
 
         ocel = OCEL(knowledge_base=kb, quality_func=F1(), max_runtime=max_runtime)
         celoe = CELOE(knowledge_base=kb, quality_func=F1(), max_runtime=max_runtime)
         evo = EvoLearner(knowledge_base=kb, quality_func=F1(), max_runtime=max_runtime)
-        drill = Drill(knowledge_base=kb, quality_func=F1(), max_runtime=max_runtime)
+        # drill = Drill(knowledge_base=kb, quality_func=F1(), max_runtime=max_runtime)
 
-        drill_quality=[]
-        celoe_quality=[]
-        ocel_quality=[]
-        evo_quality=[]
+        drill_quality = []
+        celoe_quality = []
+        ocel_quality = []
+        evo_quality = []
 
         for str_target_concept, examples in settings['problems'].items():
             pos = set(map(OWLNamedIndividual, map(IRI.create, set(examples['positive_examples']))))
             neg = set(map(OWLNamedIndividual, map(IRI.create, set(examples['negative_examples']))))
             print('Target concept: ', str_target_concept)
 
             lp = PosNegLPStandard(pos=pos, neg=neg)
             # Untrained & max runtime is not fully integrated.
-            ocel_quality.append(ocel.fit(lp).best_hypotheses(n=1).quality)
-            celoe_quality.append(celoe.fit(lp).best_hypotheses(n=1).quality)
-            evo_quality.append(evo.fit(lp).best_hypotheses(n=1).quality)
-            drill_quality.append(drill.fit(lp).best_hypotheses(n=1).quality)
-
-
-        assert sum(evo_quality)>=sum(drill_quality)
-        assert sum(celoe_quality)>=sum(ocel_quality)
+            # Compute qualities explicitly
+            ocel_quality.append(compute_f1_score(individuals=
+                                                 frozenset({i for i in kb.individuals(
+                                                     ocel.fit(lp).best_hypotheses(n=1, return_node=False))}),
+                                                 pos=lp.pos,
+                                                 neg=lp.neg))
+            celoe_quality.append(compute_f1_score(individuals=
+                                                  frozenset({i for i in kb.individuals(
+                                                      celoe.fit(lp).best_hypotheses(n=1, return_node=False))}),
+                                                  pos=lp.pos,
+                                                  neg=lp.neg))
+            evo_quality.append(compute_f1_score(individuals=
+                                                frozenset({i for i in kb.individuals(
+                                                    evo.fit(lp).best_hypotheses(n=1, return_node=False))}),
+                                                pos=lp.pos,
+                                                neg=lp.neg))
+            # @TODO:CD:Will be added after least_generate and most_general_owl get methods are implemented in KB class.
+            #drill_quality.append(compute_f1_score(individuals=
+            #                                      frozenset({i for i in kb.individuals(
+            #                                          drill.fit(lp).best_hypotheses(n=1, return_node=False))}),
+            #                                      pos=lp.pos,
+            #                                      neg=lp.neg))
 
+        # assert sum(evo_quality) >= sum(drill_quality)
+        assert sum(celoe_quality) >= sum(ocel_quality)
```

### Comparing `ontolearn-0.7.0/tests/test_learning_problem_generator.py` & `ontolearn-0.7.1/tests/test_learning_problem_generator.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/tests/test_lp_generator.py` & `ontolearn-0.7.1/tests/test_lp_generator.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/tests/test_metrics.py` & `ontolearn-0.7.1/tests/test_metrics.py`

 * *Files identical despite different names*

### Comparing `ontolearn-0.7.0/tests/test_model_adapter.py` & `ontolearn-0.7.1/tests/test_model_adapter.py`

 * *Files 6% similar despite different names*

```diff
@@ -4,20 +4,21 @@
 
 from ontolearn.concept_learner import CELOE, EvoLearner
 from ontolearn.heuristics import CELOEHeuristic
 from ontolearn.knowledge_base import KnowledgeBase
 from ontolearn.metrics import Accuracy
 from ontolearn.model_adapter import ModelAdapter
 from ontolearn.refinement_operators import ModifiedCELOERefinement
-from owlapy.model import IRI, OWLNamedIndividual
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.iri import IRI
 from ontolearn.base import OWLOntology_Owlready2, BaseReasoner_Owlready2
 from ontolearn.base import OWLReasoner_Owlready2_ComplexCEInstances
 
 
-class ModelAdapterTest(unittest.TestCase):
+class TestModelAdapter(unittest.TestCase):
 
     def test_celoe_quality_variant_1(self):
         with open('examples/synthetic_problems.json') as json_file:
             settings = json.load(json_file)
         kb_path = "KGs/Family/family-benchmark_rich_background.owl"
         kb = KnowledgeBase(path=kb_path)
         reasoner = OWLReasoner_Owlready2_ComplexCEInstances(cast(OWLOntology_Owlready2, kb.ontology),
@@ -34,16 +35,16 @@
                              quality_type=Accuracy,
                              max_runtime=5,
                              max_num_of_concepts_tested=10_000_000_000,
                              iter_bound=10_000_000_000,
                              refinement_operator=op)
 
         model = model.fit(pos=typed_pos, neg=typed_neg)
-        hypothesis = model.best_hypotheses(n=1)
-        self.assertGreaterEqual(hypothesis.quality, 0.86)
+        hypothesis = model.best_hypotheses(n=1, return_node=True)
+        assert hypothesis.quality >= 0.86
 
     def test_celoe_quality_variant_2(self):
         with open('examples/synthetic_problems.json') as json_file:
             settings = json.load(json_file)
         kb_path = "KGs/Family/family-benchmark_rich_background.owl"
         kb = KnowledgeBase(path=kb_path)
         reasoner = OWLReasoner_Owlready2_ComplexCEInstances(cast(OWLOntology_Owlready2, kb.ontology),
@@ -65,16 +66,16 @@
                              heuristic_type=CELOEHeuristic,
                              expansionPenaltyFactor=0.05,
                              startNodeBonus=1.0,
                              nodeRefinementPenalty=0.01
                              )
 
         model = model.fit(pos=typed_pos, neg=typed_neg)
-        hypothesis = model.best_hypotheses(n=1)
-        self.assertGreaterEqual(hypothesis.quality, 0.59)
+        hypothesis = model.best_hypotheses(n=1, return_node=True)
+        assert hypothesis.quality >= 0.59
 
     def test_evolearner_quality(self):
         with open('examples/synthetic_problems.json') as json_file:
             settings = json.load(json_file)
         kb = KnowledgeBase(path="KGs/Family/family-benchmark_rich_background.owl")
         reasoner = OWLReasoner_Owlready2_ComplexCEInstances(cast(OWLOntology_Owlready2, kb.ontology),
                                                             BaseReasoner_Owlready2.HERMIT)
@@ -84,13 +85,9 @@
         typed_neg = set(map(OWLNamedIndividual, map(IRI.create, n)))
 
         model = ModelAdapter(learner_type=EvoLearner,
                              knowledge_base=kb,
                              reasoner=reasoner)
 
         model = model.fit(pos=typed_pos, neg=typed_neg)
-        hypothesis = model.best_hypotheses(n=1)
-        self.assertGreaterEqual(hypothesis.quality, 0.9)
-
-
-if __name__ == '__main__':
-    unittest.main()
+        hypothesis = model.best_hypotheses(n=1,return_node=True)
+        assert hypothesis.quality >= 0.9
```

### Comparing `ontolearn-0.7.0/tests/test_owlapy.py` & `ontolearn-0.7.1/tests/test_owlapy.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,12 +1,13 @@
 import unittest
 
 from owlapy import namespaces
+from owlapy.class_expression import OWLClass, OWLObjectUnionOf
+from owlapy.iri import IRI
 from owlapy.namespaces import Namespaces
-from owlapy.model import OWLClass, OWLObjectUnionOf, IRI
 
 base = Namespaces("ex", "http://example.org/")
 
 
 class Owlapy_Test(unittest.TestCase):
     def test_iri(self):
         i1 = IRI(base, "I1")
```

### Comparing `ontolearn-0.7.0/tests/test_owlapy_cnf_dnf.py` & `ontolearn-0.7.1/tests/test_owlapy_cnf_dnf.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,13 +1,15 @@
 import unittest
 
-from owlapy.model import OWLObjectProperty, OWLObjectSomeValuesFrom, OWLObjectUnionOf, \
-    OWLClass, IRI, OWLDataProperty, OWLDataSomeValuesFrom, OWLNamedIndividual, OWLObjectComplementOf, \
-    OWLObjectIntersectionOf, OWLObjectMinCardinality, OWLObjectOneOf
-from owlapy.model.providers import OWLDatatypeMinExclusiveRestriction
+from owlapy.class_expression import OWLObjectSomeValuesFrom, OWLObjectUnionOf, OWLClass, OWLDataSomeValuesFrom, \
+    OWLObjectComplementOf, OWLObjectIntersectionOf, OWLObjectMinCardinality, OWLObjectOneOf
+from owlapy.iri import IRI
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_property import OWLObjectProperty, OWLDataProperty
+from owlapy.providers import owl_datatype_min_exclusive_restriction
 from owlapy.util import TopLevelCNF, TopLevelDNF
 
 
 class TopLevelNFTest(unittest.TestCase):
 
     def setUp(self):
         namespace = 'http://test.org/test#'
@@ -27,15 +29,15 @@
 
         # Data Properties
         self.dp1 = OWLDataProperty(IRI.create(namespace, 'dp1'))
 
         # Complex Expressions
         self.c1 = OWLObjectSomeValuesFrom(self.op1,
                                           OWLObjectUnionOf([self.a, OWLObjectIntersectionOf([self.a, self.b])]))
-        self.c2 = OWLDataSomeValuesFrom(self.dp1, OWLDatatypeMinExclusiveRestriction(5))
+        self.c2 = OWLDataSomeValuesFrom(self.dp1, owl_datatype_min_exclusive_restriction(5))
         self.c3 = OWLObjectSomeValuesFrom(self.op1, OWLObjectOneOf(OWLNamedIndividual(IRI(namespace, 'AB'))))
 
     def test_cnf(self):
         cnf = TopLevelCNF()
 
         # A or ( A and B)
         c = OWLObjectUnionOf([self.a, OWLObjectIntersectionOf([self.a, self.b])])
```

### Comparing `ontolearn-0.7.0/tests/test_owlapy_fastinstancechecker.py` & `ontolearn-0.7.1/tests/test_owlapy_fastinstancechecker.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,34 +1,36 @@
 from datetime import date, datetime
 import unittest
 
+from owlapy.class_expression import OWLObjectOneOf, OWLObjectSomeValuesFrom, OWLThing, OWLObjectComplementOf, \
+    OWLObjectAllValuesFrom, OWLNothing, OWLObjectHasValue, OWLClass, OWLDataAllValuesFrom, OWLDataHasValue, \
+    OWLDataOneOf, OWLDataSomeValuesFrom, OWLObjectExactCardinality, OWLObjectMaxCardinality, OWLObjectMinCardinality, \
+    OWLObjectIntersectionOf
+from owlapy.iri import IRI
+from owlapy.owl_axiom import OWLSubDataPropertyOfAxiom, OWLInverseObjectPropertiesAxiom, OWLSubObjectPropertyOfAxiom
+from owlapy.owl_data_ranges import OWLDataComplementOf, OWLDataIntersectionOf, OWLDataUnionOf
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import DoubleOWLDatatype, OWLLiteral, DurationOWLDatatype
+from owlapy.owl_property import OWLObjectInverseOf, OWLObjectProperty, OWLDataProperty
 from owlready2.prop import DataProperty
 from pandas import Timedelta
-
 from ontolearn.base.fast_instance_checker import OWLReasoner_FastInstanceChecker
-from owlapy.model import OWLObjectInverseOf, OWLObjectOneOf, OWLObjectProperty, OWLNamedIndividual, \
-    OWLObjectSomeValuesFrom, OWLThing, OWLObjectComplementOf, IRI, OWLObjectAllValuesFrom, OWLNothing, \
-    OWLObjectHasValue, DoubleOWLDatatype, OWLClass, OWLDataAllValuesFrom, OWLDataComplementOf, \
-    OWLDataHasValue, OWLDataIntersectionOf, OWLDataOneOf, OWLDataProperty, OWLDataSomeValuesFrom, \
-    OWLDataUnionOf, OWLLiteral, OWLObjectExactCardinality, OWLObjectMaxCardinality, OWLObjectMinCardinality, \
-    OWLObjectIntersectionOf, OWLSubDataPropertyOfAxiom, OWLSubObjectPropertyOfAxiom, OWLInverseObjectPropertiesAxiom, \
-    DurationOWLDatatype
-
-from owlapy.model.providers import OWLDatatypeMinExclusiveRestriction, \
-    OWLDatatypeMinMaxInclusiveRestriction, OWLDatatypeMinMaxExclusiveRestriction, OWLDatatypeMaxExclusiveRestriction, \
-    OWLDatatypeMaxInclusiveRestriction
+
+from owlapy.providers import owl_datatype_min_exclusive_restriction, \
+                            owl_datatype_min_max_inclusive_restriction, owl_datatype_min_max_exclusive_restriction, \
+                            owl_datatype_max_exclusive_restriction, owl_datatype_max_inclusive_restriction
 from ontolearn.base import OWLOntologyManager_Owlready2, OWLReasoner_Owlready2
 
 
 class Owlapy_FastInstanceChecker_Test(unittest.TestCase):
     # noinspection DuplicatedCode
     def test_instances(self):
         NS = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
 
         male = OWLClass(IRI.create(NS, 'male'))
         female = OWLClass(IRI.create(NS, 'female'))
         has_child = OWLObjectProperty(IRI(NS, 'hasChild'))
 
         base_reasoner = OWLReasoner_Owlready2(onto)
         reasoner = OWLReasoner_FastInstanceChecker(onto, base_reasoner=base_reasoner)
@@ -71,15 +73,15 @@
                                  OWLNamedIndividual(IRI(NS, 'michelle')),
                                  OWLNamedIndividual(IRI(NS, 'markus'))})
         self.assertEqual(inst, target_inst)
 
     def test_complement(self):
         NS = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
 
         male = OWLClass(IRI.create(NS, 'male'))
         female = OWLClass(IRI.create(NS, 'female'))
         has_child = OWLObjectProperty(IRI(NS, 'hasChild'))
 
         base_reasoner = OWLReasoner_Owlready2(onto)
         reasoner_nd = OWLReasoner_FastInstanceChecker(onto, base_reasoner=base_reasoner, negation_default=True)
@@ -99,15 +101,15 @@
         with_child = set(reasoner_open.instances(
             OWLObjectSomeValuesFrom(property=has_child, filler=OWLThing)))
         self.assertEqual(all_inds - unknown_child, with_child)
 
     def test_all_values(self):
         NS = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
 
         has_child = OWLObjectProperty(IRI(NS, 'hasChild'))
 
         base_reasoner = OWLReasoner_Owlready2(onto)
         reasoner_nd = OWLReasoner_FastInstanceChecker(onto, base_reasoner=base_reasoner, negation_default=True)
 
         # note, these answers are all wrong under OWA
@@ -115,15 +117,15 @@
         target_inst = frozenset({OWLNamedIndividual(IRI('http://example.com/father#', 'michelle')),
                                  OWLNamedIndividual(IRI('http://example.com/father#', 'heinz'))})
         self.assertEqual(no_child, target_inst)
 
     def test_complement2(self):
         NS = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
 
         male = OWLClass(IRI.create(NS, 'male'))
         female = OWLClass(IRI.create(NS, 'female'))
 
         base_reasoner = OWLReasoner_Owlready2(onto)
         reasoner_open = OWLReasoner_FastInstanceChecker(onto, base_reasoner=base_reasoner, negation_default=False)
 
@@ -186,29 +188,29 @@
         inst = frozenset(reasoner.instances(
             OWLObjectIntersectionOf((OWLDataHasValue(property=fused_rings, value=OWLLiteral(True)),
                                      OWLDataHasValue(property=act, value=OWLLiteral(2.11))))))
         target_inst = frozenset({OWLNamedIndividual(IRI(NS, 'd1'))})
         self.assertEqual(inst, target_inst)
 
         # OWLDatatypeRestriction
-        restriction = OWLDatatypeMinMaxInclusiveRestriction(-3.0, -2.8)
+        restriction = owl_datatype_min_max_inclusive_restriction(-3.0, -2.8)
         inst = frozenset(reasoner.instances(OWLDataSomeValuesFrom(property=lumo, filler=restriction)))
         target_inst = frozenset({OWLNamedIndividual(IRI(NS, 'd149')),
                                  OWLNamedIndividual(IRI(NS, 'd29')),
                                  OWLNamedIndividual(IRI(NS, 'd49')),
                                  OWLNamedIndividual(IRI(NS, 'd96'))})
         self.assertEqual(inst, target_inst)
 
         # OWLDataAllValuesFrom
         inst2 = frozenset(reasoner.instances(
             OWLObjectComplementOf(OWLDataAllValuesFrom(property=lumo, filler=OWLDataComplementOf(restriction)))))
         self.assertEqual(inst, inst2)
 
         # OWLDataComplementOf
-        restriction = OWLDatatypeMinMaxExclusiveRestriction(-2.0, 0.88)
+        restriction = owl_datatype_min_max_exclusive_restriction(-2.0, 0.88)
         inst = frozenset(reasoner.instances(OWLDataSomeValuesFrom(property=charge,
                                                                   filler=OWLDataComplementOf(restriction))))
         target_inst = frozenset({OWLNamedIndividual(IRI(NS, 'd195_12')),
                                  OWLNamedIndividual(IRI(NS, 'd33_27'))})
         self.assertEqual(inst, target_inst)
 
         # OWLDataOneOf, OWLDatatype, OWLDataIntersectionOf
@@ -221,15 +223,15 @@
         target_inst = frozenset({OWLNamedIndividual(IRI(NS, 'd101')),
                                  OWLNamedIndividual(IRI(NS, 'd109')),
                                  OWLNamedIndividual(IRI(NS, 'd104')),
                                  OWLNamedIndividual(IRI(NS, 'd180'))})
         self.assertEqual(inst, target_inst)
 
         # OWLDataUnionOf
-        restriction = OWLDatatypeMinMaxExclusiveRestriction(5.07, 5.3)
+        restriction = owl_datatype_min_max_exclusive_restriction(5.07, 5.3)
         inst = frozenset(reasoner.instances(
             OWLDataSomeValuesFrom(property=logp,
                                   filler=OWLDataUnionOf((
                                       OWLDataOneOf((OWLLiteral(6.26), OWLLiteral(6.07))), restriction)))))
         target_inst = frozenset({OWLNamedIndividual(IRI(NS, 'd101')),
                                  OWLNamedIndividual(IRI(NS, 'd109')),
                                  OWLNamedIndividual(IRI(NS, 'd92')),
@@ -237,15 +239,15 @@
                                  OWLNamedIndividual(IRI(NS, 'd104')),
                                  OWLNamedIndividual(IRI(NS, 'd180'))})
         self.assertEqual(inst, target_inst)
 
     def test_data_properties_time(self):
         NS = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
 
         with onto._onto:
             class birthDate(DataProperty):
                 range = [date]
 
             class birthDateTime(DataProperty):
                 range = [datetime]
@@ -281,35 +283,35 @@
         heinz = OWLNamedIndividual(IRI(NS, 'heinz'))
         michelle = OWLNamedIndividual(IRI(NS, 'michelle'))
         martin = OWLNamedIndividual(IRI(NS, 'martin'))
 
         base_reasoner = OWLReasoner_Owlready2(onto)
         reasoner = OWLReasoner_FastInstanceChecker(onto, base_reasoner=base_reasoner)
 
-        restriction = OWLDatatypeMinMaxExclusiveRestriction(date(year=1995, month=6, day=12),
+        restriction = owl_datatype_min_max_exclusive_restriction(date(year=1995, month=6, day=12),
                                                             date(year=1999, month=3, day=2))
         inst = frozenset(reasoner.instances(OWLDataSomeValuesFrom(property=birth_date,
                                                                   filler=restriction)))
         target_inst = frozenset({martin})
         self.assertEqual(inst, target_inst)
 
         inst = frozenset(reasoner.instances(OWLDataSomeValuesFrom(property=birth_date,
                                                                   filler=OWLDataComplementOf(restriction))))
         target_inst = frozenset({michelle, anna, heinz, markus})
         self.assertEqual(inst, target_inst)
 
-        restriction = OWLDatatypeMaxInclusiveRestriction(datetime(year=1990, month=10, day=2, hour=10,
+        restriction = owl_datatype_max_inclusive_restriction(datetime(year=1990, month=10, day=2, hour=10,
                                                                   minute=20, second=5))
         inst = frozenset(reasoner.instances(OWLDataSomeValuesFrom(property=birth_date_time,
                                                                   filler=restriction)))
         target_inst = frozenset({markus, heinz})
         self.assertEqual(inst, target_inst)
 
-        restriction_min = OWLDatatypeMinExclusiveRestriction(Timedelta(days=8030, minutes=1))
-        restriction_max = OWLDatatypeMaxExclusiveRestriction(Timedelta(days=9490, hours=4, nanoseconds=1))
+        restriction_min = owl_datatype_min_exclusive_restriction(Timedelta(days=8030, minutes=1))
+        restriction_max = owl_datatype_max_exclusive_restriction(Timedelta(days=9490, hours=4, nanoseconds=1))
         filler = OWLDataIntersectionOf([restriction_min, restriction_max, DurationOWLDatatype])
         inst = frozenset(reasoner.instances(OWLDataSomeValuesFrom(property=age_, filler=filler)))
         target_inst = frozenset({anna, martin})
         self.assertEqual(inst, target_inst)
 
     def test_sub_property_inclusion(self):
         ns = "http://dl-learner.org/mutagenesis#"
@@ -356,15 +358,15 @@
 
         mgr.remove_axiom(onto, OWLSubObjectPropertyOfAxiom(has_structure, super_has_structure))
         mgr.remove_axiom(onto, OWLSubDataPropertyOfAxiom(charge, super_charge))
 
     def test_inverse(self):
         ns = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
 
         has_child = OWLObjectProperty(IRI(ns, 'hasChild'))
         has_child_inverse = OWLObjectProperty(IRI.create(ns, 'hasChild_inverse'))
         mgr.add_axiom(onto, OWLInverseObjectPropertiesAxiom(has_child, has_child_inverse))
 
         parents = {OWLNamedIndividual(IRI.create(ns, 'anna')),
                    OWLNamedIndividual(IRI.create(ns, 'martin')),
```

### Comparing `ontolearn-0.7.0/tests/test_owlapy_nnf.py` & `ontolearn-0.7.1/tests/test_owlapy_nnf.py`

 * *Files 2% similar despite different names*

```diff
@@ -20,21 +20,26 @@
 # package: org.semanticweb.owlapi.api.test.axioms
 #
 #  * @author Matthew Horridge, The University of Manchester, Information Management Group
 #  * @since 3.0.0
 #
 import unittest
 
-from owlapy.model import OWLObjectProperty, OWLNamedIndividual, OWLObjectComplementOf, \
-    OWLObjectAllValuesFrom, OWLObjectSomeValuesFrom, OWLObjectIntersectionOf, OWLObjectUnionOf, \
-    OWLObjectMinCardinality, OWLObjectMaxCardinality, OWLObjectHasValue, OWLObjectOneOf, OWLClassExpression, IRI, \
-    BooleanOWLDatatype, DoubleOWLDatatype, IntegerOWLDatatype, OWLClass, OWLDataAllValuesFrom, OWLDataComplementOf, \
-    OWLDataIntersectionOf, OWLDataProperty, OWLDataSomeValuesFrom, OWLDataUnionOf, \
-    OWLDataHasValue, OWLDataMaxCardinality, OWLDataMinCardinality, OWLDataOneOf, OWLLiteral
-from owlapy.model.providers import OWLDatatypeMinMaxExclusiveRestriction
+from owlapy.class_expression import OWLObjectOneOf, OWLObjectSomeValuesFrom, OWLObjectComplementOf, \
+    OWLObjectAllValuesFrom, OWLObjectHasValue, OWLClass, OWLDataAllValuesFrom, OWLDataHasValue, \
+    OWLDataOneOf, OWLDataSomeValuesFrom, OWLObjectMaxCardinality, OWLObjectMinCardinality, \
+    OWLObjectIntersectionOf, OWLDataMaxCardinality, OWLDataMinCardinality, OWLObjectUnionOf, OWLClassExpression
+from owlapy.iri import IRI
+from owlapy.owl_data_ranges import OWLDataComplementOf, OWLDataIntersectionOf, OWLDataUnionOf
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import DoubleOWLDatatype, OWLLiteral, IntegerOWLDatatype, \
+    BooleanOWLDatatype
+from owlapy.owl_property import OWLObjectProperty, OWLDataProperty
+
+from owlapy.providers import owl_datatype_min_max_exclusive_restriction
 from owlapy.util import NNF
 
 
 def iri(suffix):
     NS = "http://example.org/"
     return IRI.create(NS, suffix)
 
@@ -352,15 +357,15 @@
         desc = OWLDataHasValue(prop, literal)
         neg = OWLDataComplementOf(desc)
         nnf = OWLDataAllValuesFrom(prop, OWLDataComplementOf(OWLDataOneOf(literal)))
         comp = self.get_nnf(neg)
         self.assertEqual(nnf, comp)
 
     def testDataNestedA(self):
-        restriction = OWLDatatypeMinMaxExclusiveRestriction(5, 6)
+        restriction = owl_datatype_min_max_exclusive_restriction(5, 6)
         prop = OWLDataProperty(iri("p"))
         filler_a = OWLDataUnionOf((IntegerOWLDatatype, DoubleOWLDatatype))
         op_a = OWLDataSomeValuesFrom(prop, filler_a)
         op_b = OWLDataIntersectionOf((restriction, IntegerOWLDatatype))
         desc = OWLDataUnionOf((op_a, op_b))
         nnf = OWLDataIntersectionOf(
                 (OWLDataAllValuesFrom(prop, OWLDataIntersectionOf((OWLDataComplementOf(DoubleOWLDatatype),
```

### Comparing `ontolearn-0.7.0/tests/test_owlapy_owlready2.py` & `ontolearn-0.7.1/tests/test_owlapy_owlready2.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,29 +1,34 @@
 from datetime import date, datetime
 import unittest
 
 from pandas import Timedelta
 from ontolearn.base.fast_instance_checker import OWLReasoner_FastInstanceChecker
-from owlapy.model.providers import OWLDatatypeMaxInclusiveRestriction, OWLDatatypeMinInclusiveRestriction, \
-    OWLDatatypeMinMaxExclusiveRestriction, OWLDatatypeMinMaxInclusiveRestriction
+from owlapy.providers import owl_datatype_max_inclusive_restriction, owl_datatype_min_inclusive_restriction, \
+                              owl_datatype_min_max_exclusive_restriction, owl_datatype_min_max_inclusive_restriction
 
 import owlready2
-from owlapy.model import OWLObjectInverseOf, OWLObjectPropertyRangeAxiom, OWLSameIndividualAxiom, OWLClass, \
-    OWLObjectIntersectionOf, OWLObjectSomeValuesFrom, OWLObjectComplementOf, IRI, OWLDataAllValuesFrom, \
-    OWLDataComplementOf, OWLDataHasValue, OWLDataIntersectionOf, OWLDataProperty, OWLDataSomeValuesFrom, \
-    OWLDataUnionOf, OWLLiteral, BooleanOWLDatatype, DoubleOWLDatatype, IntegerOWLDatatype, OWLDataOneOf, \
-    OWLDataExactCardinality, OWLDataMaxCardinality, OWLDataMinCardinality, OWLObjectExactCardinality, \
-    OWLObjectMaxCardinality, OWLObjectMinCardinality, OWLObjectHasValue, OWLObjectAllValuesFrom, \
-    OWLObjectOneOf, DateOWLDatatype, DateTimeOWLDatatype, DurationOWLDatatype, OWLClassAssertionAxiom, \
-    OWLNamedIndividual, OWLEquivalentClassesAxiom, OWLSubDataPropertyOfAxiom, OWLSubObjectPropertyOfAxiom, OWLThing, \
-    OWLDifferentIndividualsAxiom, OWLDisjointClassesAxiom, OWLDisjointDataPropertiesAxiom, OWLObjectUnionOf, \
+
+from owlapy.class_expression import OWLObjectOneOf, OWLObjectSomeValuesFrom, OWLThing, OWLObjectComplementOf, \
+    OWLObjectAllValuesFrom, OWLObjectHasValue, OWLClass, OWLDataAllValuesFrom, OWLDataHasValue, \
+    OWLDataOneOf, OWLDataSomeValuesFrom, OWLObjectExactCardinality, OWLObjectMaxCardinality, OWLObjectMinCardinality, \
+    OWLObjectIntersectionOf, OWLDataMaxCardinality, OWLDataMinCardinality, OWLObjectUnionOf, \
+    OWLDataExactCardinality
+from owlapy.iri import IRI
+from owlapy.owl_axiom import OWLSubDataPropertyOfAxiom, OWLInverseObjectPropertiesAxiom, OWLSubObjectPropertyOfAxiom, \
+    OWLObjectPropertyRangeAxiom, OWLSameIndividualAxiom, OWLClassAssertionAxiom, OWLEquivalentClassesAxiom, \
+    OWLDifferentIndividualsAxiom, OWLDisjointClassesAxiom, OWLDisjointDataPropertiesAxiom, \
     OWLDisjointObjectPropertiesAxiom, OWLEquivalentDataPropertiesAxiom, OWLEquivalentObjectPropertiesAxiom, \
-    OWLDataPropertyAssertionAxiom, OWLObjectProperty, OWLDataPropertyDomainAxiom, OWLDataPropertyRangeAxiom, \
-    OWLObjectPropertyAssertionAxiom, OWLObjectPropertyDomainAxiom, OWLInverseObjectPropertiesAxiom, OWLSubClassOfAxiom, \
-    OWLDeclarationAxiom
+    OWLDataPropertyDomainAxiom, OWLDataPropertyRangeAxiom, OWLSubClassOfAxiom, OWLObjectPropertyDomainAxiom, \
+    OWLDataPropertyAssertionAxiom, OWLObjectPropertyAssertionAxiom, OWLDeclarationAxiom
+from owlapy.owl_data_ranges import OWLDataComplementOf, OWLDataIntersectionOf, OWLDataUnionOf
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import DoubleOWLDatatype, OWLLiteral, DurationOWLDatatype, IntegerOWLDatatype, \
+    BooleanOWLDatatype, DateTimeOWLDatatype, DateOWLDatatype
+from owlapy.owl_property import OWLObjectInverseOf, OWLObjectProperty, OWLDataProperty
 
 from ontolearn.base import OWLOntologyManager_Owlready2, OWLReasoner_Owlready2
 from ontolearn.base import OWLReasoner_Owlready2_ComplexCEInstances
 from ontolearn.base.utils import ToOwlready2, FromOwlready2
 
 
 class Owlapy_Owlready2_Test(unittest.TestCase):
@@ -209,15 +214,15 @@
                                   OWLObjectProperty(IRI(ns, 'RIGHT'))})
         self.assertEqual(frozenset(reasoner.sub_object_properties(participants, direct=True)), target_props)
         self.assertEqual(frozenset(reasoner.sub_object_properties(participants, direct=False)), target_props)
 
     def test_instances(self):
         ns = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
         reasoner = OWLReasoner_Owlready2(onto)
 
         inst = frozenset(reasoner.instances(OWLThing))
         target_inst = frozenset({OWLNamedIndividual(IRI(ns, 'anna')),
                                  OWLNamedIndividual(IRI(ns, 'heinz')),
                                  OWLNamedIndividual(IRI(ns, 'markus')),
                                  OWLNamedIndividual(IRI(ns, 'martin')),
@@ -229,25 +234,25 @@
         target_inst = frozenset({OWLNamedIndividual(IRI(ns, 'heinz')), OWLNamedIndividual(IRI(ns, 'martin')),
                                  OWLNamedIndividual(IRI(ns, 'markus')), OWLNamedIndividual(IRI(ns, 'stefan'))})
         self.assertEqual(inst, target_inst)
 
     def test_types(self):
         ns = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
         reasoner = OWLReasoner_Owlready2(onto)
 
         types = frozenset(reasoner.types(OWLNamedIndividual(IRI.create(ns, 'stefan'))))
         target_types = frozenset({OWLThing, OWLClass(IRI(ns, 'male')), OWLClass(IRI(ns, 'person'))})
         self.assertEqual(target_types, types)
 
     def test_object_values(self):
         ns = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
         reasoner = OWLReasoner_Owlready2(onto)
 
         stefan = OWLNamedIndividual(IRI.create(ns, 'stefan'))
         markus = OWLNamedIndividual(IRI.create(ns, 'markus'))
         heinz = OWLNamedIndividual(IRI(ns, 'heinz'))
         has_child = OWLObjectProperty(IRI.create(ns, 'hasChild'))
         super_has_child = OWLObjectProperty(IRI.create(ns, 'super_hasChild'))
@@ -350,15 +355,15 @@
         values = frozenset(reasoner.all_data_property_values(super_charge, direct=False))
         self.assertEqual(529, len(values))
         mgr.remove_axiom(onto, OWLSubDataPropertyOfAxiom(charge, super_charge))
 
     def test_ind_object_properties(self):
         ns = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
         base_reasoner = OWLReasoner_Owlready2(onto)
         reasoner = OWLReasoner_FastInstanceChecker(onto, base_reasoner)
 
         stefan = OWLNamedIndividual(IRI.create(ns, 'stefan'))
         has_child = OWLObjectProperty(IRI.create(ns, 'hasChild'))
         super_has_child = OWLObjectProperty(IRI.create(ns, 'super_hasChild'))
         mgr.add_axiom(onto, OWLSubObjectPropertyOfAxiom(has_child, super_has_child))
@@ -392,15 +397,15 @@
         target_properties = frozenset({charge, super_charge})
         self.assertEqual(target_properties, properties)
         mgr.remove_axiom(onto, OWLSubDataPropertyOfAxiom(charge, super_charge))
 
     def test_add_remove_axiom(self):
         ns = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
         reasoner = OWLReasoner_Owlready2(onto)
 
         markus = OWLNamedIndividual(IRI.create(ns, 'markus'))
         michelle = OWLNamedIndividual(IRI.create(ns, 'michelle'))
         anna = OWLNamedIndividual(IRI.create(ns, 'anna'))
         marius = OWLNamedIndividual(IRI.create(ns, 'marius'))
         person1 = OWLNamedIndividual(IRI.create(ns, 'person1'))
@@ -527,26 +532,26 @@
         mgr.add_axiom(onto, OWLEquivalentDataPropertiesAxiom([age, test1]))
         self.assertIn(test1, list(reasoner.equivalent_data_properties(age)))
         mgr.remove_axiom(onto, OWLEquivalentDataPropertiesAxiom([age, test1]))
         self.assertNotIn(test1, list(reasoner.equivalent_data_properties(age)))
 
         self.assertFalse(list(reasoner.same_individuals(markus)))
         mgr.add_axiom(onto, OWLSameIndividualAxiom([markus, anna, person1]))
-        self.assertEqual(set([anna, person1]), set(reasoner.same_individuals(markus)))
+        self.assertEqual({anna, person1}, set(reasoner.same_individuals(markus)))
         mgr.remove_axiom(onto, OWLSameIndividualAxiom([markus, anna, person1]))
         self.assertFalse(set(reasoner.same_individuals(markus)))
 
         self.assertFalse(list(reasoner.disjoint_classes(brother)))
         self.assertFalse(list(reasoner.disjoint_classes(person)))
         mgr.add_axiom(onto, OWLDisjointClassesAxiom([brother, sister, aerial_animal]))
-        self.assertEqual(set([sister, aerial_animal]), set(reasoner.disjoint_classes(brother)))
+        self.assertEqual({sister, aerial_animal}, set(reasoner.disjoint_classes(brother)))
         mgr.remove_axiom(onto, OWLDisjointClassesAxiom([brother, sister, aerial_animal]))
         self.assertFalse(set(reasoner.disjoint_classes(brother)))
         mgr.add_axiom(onto, OWLDisjointClassesAxiom([person, animal]))
-        self.assertEqual(set([animal, aerial_animal]), set(reasoner.disjoint_classes(person)))
+        self.assertEqual({animal, aerial_animal}, set(reasoner.disjoint_classes(person)))
         mgr.remove_axiom(onto, OWLDisjointClassesAxiom([person, animal]))
         self.assertFalse(set(reasoner.disjoint_classes(person)))
 
         self.assertFalse(list(reasoner.disjoint_object_properties(has_sibling)))
         self.assertFalse(list(reasoner.disjoint_object_properties(has_child)))
         mgr.add_axiom(onto, OWLDisjointObjectPropertiesAxiom([has_child, has_sibling]))
         self.assertIn(has_sibling, set(reasoner.disjoint_object_properties(has_child)))
@@ -564,25 +569,25 @@
         self.assertNotIn(test1, set(reasoner.disjoint_data_properties(age)))
         self.assertNotIn(age, set(reasoner.disjoint_data_properties(test1)))
 
         self.assertFalse(list(reasoner.different_individuals(markus)))
         self.assertFalse(list(reasoner.different_individuals(michelle)))
         mgr.add_axiom(onto, OWLDifferentIndividualsAxiom([markus, michelle]))
         mgr.add_axiom(onto, OWLDifferentIndividualsAxiom([markus, anna, marius]))
-        self.assertEqual(set([michelle, anna, marius]), set(reasoner.different_individuals(markus)))
-        self.assertEqual(set([markus]), set(reasoner.different_individuals(michelle)))
+        self.assertEqual({michelle, anna, marius}, set(reasoner.different_individuals(markus)))
+        self.assertEqual({markus}, set(reasoner.different_individuals(michelle)))
         mgr.remove_axiom(onto, OWLDifferentIndividualsAxiom([markus, michelle]))
         mgr.remove_axiom(onto, OWLDifferentIndividualsAxiom([markus, anna, marius]))
         self.assertFalse(set(reasoner.different_individuals(markus)))
         self.assertFalse(set(reasoner.different_individuals(michelle)))
 
     def test_mapping(self):
         ns = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
 
         male = OWLClass(IRI.create(ns, 'male'))
         female = OWLClass(IRI.create(ns, 'female'))
         has_child = OWLObjectProperty(IRI(ns, 'hasChild'))
 
         to_owlready = ToOwlready2(world=onto._world)
 
@@ -648,27 +653,27 @@
         setattr(owlready2.ConstrainedDatatype, '__eq__', constraint_datatype_eq)
         setattr(owlready2.ConstrainedDatatype, '__hash__', lambda self: hash(frozenset(self.__dict__.items())))
 
         ce = OWLDataSomeValuesFrom(act, DateOWLDatatype)
         owlready_ce = onto._onto.act.some(date)
         self.assertEqual(owlready_ce, to_owlready.map_concept(ce))
 
-        res = OWLDatatypeMinInclusiveRestriction(20)
+        res = owl_datatype_min_inclusive_restriction(20)
         ce = OWLDataAllValuesFrom(charge, OWLDataComplementOf(res))
         owlready_ce = onto._onto.charge.only(owlready2.Not(owlready2.ConstrainedDatatype(int, min_inclusive=20)))
         self.assertEqual(owlready_ce, to_owlready.map_concept(ce))
 
-        res_both = OWLDatatypeMinMaxExclusiveRestriction(0.5, 1)
+        res_both = owl_datatype_min_max_exclusive_restriction(0.5, 1)
         ce = OWLDataAllValuesFrom(charge, OWLDataUnionOf([res, res_both]))
         owlready_ce = onto._onto.charge.only(
             owlready2.Or([owlready2.ConstrainedDatatype(int, min_inclusive=20),
                           owlready2.ConstrainedDatatype(float, min_exclusive=0.5, max_exclusive=1.0)]))
         self.assertEqual(owlready_ce, to_owlready.map_concept(ce))
 
-        res = OWLDatatypeMaxInclusiveRestriction(1.2)
+        res = owl_datatype_max_inclusive_restriction(1.2)
         oneof = OWLDataOneOf([OWLLiteral(2.3), OWLLiteral(5.9), OWLLiteral(7.2)])
         ce = OWLDataAllValuesFrom(charge, OWLDataIntersectionOf([res, oneof]))
         owlready_ce = onto._onto.charge.only(owlready2.ConstrainedDatatype(float, max_inclusive=1.2) &
                                              owlready2.OneOf([2.3, 5.9, 7.2]))
         self.assertEqual(owlready_ce, to_owlready.map_concept(ce))
 
         ce = OWLDataSomeValuesFrom(charge, OWLDataIntersectionOf([res, BooleanOWLDatatype]))
@@ -687,15 +692,15 @@
         ce = OWLDataExactCardinality(3, charge, OWLDataComplementOf(IntegerOWLDatatype))
         owlready_ce = onto._onto.charge.exactly(3, owlready2.Not(int))
         self.assertEqual(owlready_ce, to_owlready.map_concept(ce))
 
     def test_mapping_rev(self):
         ns = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
 
         male = onto._onto.male
         female = onto._onto.female
         has_child = onto._onto.hasChild
 
         from_owlready = FromOwlready2()
 
@@ -751,22 +756,22 @@
         from_owlready = FromOwlready2()
 
         ce = act.some(float)
         owl_ce = OWLDataSomeValuesFrom(OWLDataProperty(IRI(ns, 'act')), DoubleOWLDatatype)
         self.assertEqual(owl_ce, from_owlready.map_concept(ce))
 
         ce = charge.only(owlready2.Not(owlready2.ConstrainedDatatype(int, max_inclusive=2)))
-        res = OWLDatatypeMaxInclusiveRestriction(2)
+        res = owl_datatype_max_inclusive_restriction(2)
         owl_ce = OWLDataAllValuesFrom(OWLDataProperty(IRI(ns, 'charge')), OWLDataComplementOf(res))
         self.assertEqual(owl_ce, from_owlready.map_concept(ce))
 
         ce = charge.some(owlready2.Not(owlready2.ConstrainedDatatype(int, max_inclusive=2)) |
                          owlready2.ConstrainedDatatype(float, min_inclusive=2.1, max_inclusive=2.2))
-        res = OWLDatatypeMaxInclusiveRestriction(2)
-        res2 = OWLDatatypeMinMaxInclusiveRestriction(2.1, 2.2)
+        res = owl_datatype_max_inclusive_restriction(2)
+        res2 = owl_datatype_min_max_inclusive_restriction(2.1, 2.2)
         owl_ce = OWLDataSomeValuesFrom(OWLDataProperty(IRI(ns, 'charge')),
                                        OWLDataUnionOf([OWLDataComplementOf(res), res2]))
         self.assertEqual(owl_ce, from_owlready.map_concept(ce))
 
         ce = act.only(owlready2.Not(owlready2.ConstrainedDatatype(int, max_inclusive=2)) & datetime)
         owl_ce = OWLDataAllValuesFrom(OWLDataProperty(IRI(ns, 'act')),
                                       OWLDataIntersectionOf([OWLDataComplementOf(res), DateTimeOWLDatatype]))
@@ -796,15 +801,15 @@
 
 
 class Owlapy_Owlready2_ComplexCEInstances_Test(unittest.TestCase):
     # noinspection DuplicatedCode
     def test_instances(self):
         ns = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
 
         male = OWLClass(IRI.create(ns, 'male'))
         female = OWLClass(IRI.create(ns, 'female'))
         has_child = OWLObjectProperty(IRI(ns, 'hasChild'))
 
         # reasoner = OWLReasoner_Owlready2(onto)
         reasoner = OWLReasoner_Owlready2_ComplexCEInstances(onto)
@@ -824,15 +829,15 @@
         target_inst = frozenset({OWLNamedIndividual(IRI(ns, 'anna'))})
         self.assertEqual(inst, target_inst)
 
     def test_isolated_ontology(self):
 
         ns = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
 
         reasoner1 = OWLReasoner_Owlready2(onto)
         ccei_reasoner = OWLReasoner_Owlready2_ComplexCEInstances(onto, isolate=True)
 
         new_individual = OWLNamedIndividual(IRI(ns, 'bob'))
         male_ce = OWLClass(IRI(ns, "male"))
         axiom1 = OWLDeclarationAxiom(new_individual)
```

### Comparing `ontolearn-0.7.0/tests/test_owlapy_parser.py` & `ontolearn-0.7.1/tests/test_owlapy_parser.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,21 +1,24 @@
 import unittest
 from datetime import date, datetime, timedelta, timezone
 
 from pandas import Timedelta
-from owlapy.model import OWLObjectInverseOf, OWLObjectMinCardinality, OWLObjectSomeValuesFrom, \
-    OWLObjectUnionOf, DoubleOWLDatatype, IntegerOWLDatatype, OWLClass, IRI, OWLDataAllValuesFrom, \
-    OWLDataIntersectionOf, OWLDataOneOf, OWLDataProperty, OWLDataSomeValuesFrom, OWLDatatypeRestriction,  \
-    OWLLiteral, OWLNamedIndividual, OWLObjectAllValuesFrom, OWLObjectComplementOf, OWLObjectExactCardinality, \
-    OWLObjectHasSelf, OWLObjectHasValue, OWLObjectIntersectionOf, OWLObjectMaxCardinality, OWLObjectOneOf, \
-    OWLObjectProperty, OWLDataComplementOf, OWLDataExactCardinality, OWLDataMaxCardinality, OWLDataUnionOf, \
-    OWLDataMinCardinality, OWLDataHasValue, OWLThing, OWLNothing, OWLFacetRestriction
 
-from owlapy.model.providers import OWLDatatypeMinExclusiveRestriction,\
-    OWLDatatypeMinMaxExclusiveRestriction, OWLDatatypeMaxExclusiveRestriction
+from owlapy.class_expression import OWLObjectOneOf, OWLObjectSomeValuesFrom, OWLThing, OWLObjectComplementOf, \
+    OWLObjectAllValuesFrom, OWLNothing, OWLObjectHasValue, OWLClass, OWLDataAllValuesFrom, OWLDataHasValue, \
+    OWLDataOneOf, OWLDataSomeValuesFrom, OWLObjectExactCardinality, OWLObjectMaxCardinality, OWLObjectMinCardinality, \
+    OWLObjectIntersectionOf, OWLDataMaxCardinality, OWLDataMinCardinality, OWLObjectUnionOf, \
+    OWLDataExactCardinality, OWLObjectHasSelf, OWLFacetRestriction, OWLDatatypeRestriction
+from owlapy.iri import IRI
+from owlapy.owl_data_ranges import OWLDataComplementOf, OWLDataIntersectionOf, OWLDataUnionOf
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import DoubleOWLDatatype, OWLLiteral, IntegerOWLDatatype
+from owlapy.owl_property import OWLObjectInverseOf, OWLObjectProperty, OWLDataProperty
+from owlapy.providers import owl_datatype_min_exclusive_restriction, owl_datatype_min_max_exclusive_restriction, \
+    owl_datatype_max_exclusive_restriction
 from owlapy.parser import DLSyntaxParser, ManchesterOWLSyntaxParser
 from owlapy.vocab import OWLFacet
 
 
 class ManchesterOWLSyntaxParserTest(unittest.TestCase):
 
     def setUp(self):
@@ -116,36 +119,36 @@
         c2 = OWLObjectIntersectionOf((c1, OWLObjectComplementOf(self.compound)))
         c3 = OWLObjectSomeValuesFrom(self.has_bond, OWLObjectMaxCardinality(4, self.in_bond, self.bond))
         c = OWLObjectUnionOf((c2, c3))
         self.assertEqual(p, c)
 
     def test_data_properties_numeric(self):
         p = self.parser.parse_expression('charge some xsd:integer[> 4]')
-        c = OWLDataSomeValuesFrom(self.charge, OWLDatatypeMinExclusiveRestriction(4))
+        c = OWLDataSomeValuesFrom(self.charge, owl_datatype_min_exclusive_restriction(4))
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('act only double')
         c = OWLDataAllValuesFrom(self.act, DoubleOWLDatatype)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('charge some <http://www.w3.org/2001/XMLSchema#double>'
                                          '[> "4.4"^^xsd:double, < -32.5]')
-        c = OWLDataSomeValuesFrom(self.charge, OWLDatatypeMinMaxExclusiveRestriction(4.4, -32.5))
+        c = OWLDataSomeValuesFrom(self.charge, owl_datatype_min_max_exclusive_restriction(4.4, -32.5))
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('charge max 4 not (integer[> +4] and integer or xsd:integer[< "1"^^integer])')
-        filler1 = OWLDataIntersectionOf((OWLDatatypeMinExclusiveRestriction(4), IntegerOWLDatatype))
-        filler = OWLDataComplementOf(OWLDataUnionOf((filler1, OWLDatatypeMaxExclusiveRestriction(1))))
+        filler1 = OWLDataIntersectionOf((owl_datatype_min_exclusive_restriction(4), IntegerOWLDatatype))
+        filler = OWLDataComplementOf(OWLDataUnionOf((filler1, owl_datatype_max_exclusive_restriction(1))))
         c = OWLDataMaxCardinality(4, self.charge, filler)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('charge min 25 (not (xsd:integer[> 9] and '
                                          '(xsd:integer or not xsd:integer[< "6"^^integer])))')
-        filler1 = OWLDataUnionOf((IntegerOWLDatatype, OWLDataComplementOf(OWLDatatypeMaxExclusiveRestriction(6))))
-        filler = OWLDataComplementOf(OWLDataIntersectionOf((OWLDatatypeMinExclusiveRestriction(9), filler1)))
+        filler1 = OWLDataUnionOf((IntegerOWLDatatype, OWLDataComplementOf(owl_datatype_max_exclusive_restriction(6))))
+        filler = OWLDataComplementOf(OWLDataIntersectionOf((owl_datatype_min_exclusive_restriction(9), filler1)))
         c = OWLDataMinCardinality(25, self.charge, filler)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('act exactly 11 xsd:integer[totalDigits "5"^^xsd:integer, > -100]')
         filler = OWLDatatypeRestriction(IntegerOWLDatatype, (OWLFacetRestriction(OWLFacet.TOTAL_DIGITS, 5),
                                                              OWLFacetRestriction(OWLFacet.MIN_EXCLUSIVE, -100)))
         c = OWLDataExactCardinality(11, self.act, filler)
@@ -182,37 +185,37 @@
         p = self.parser.parse_expression('charge value "Test\\"123456"')
         c = OWLDataHasValue(self.charge, OWLLiteral("Test\\\"123456"))
         self.assertEqual(p, c)
 
     def test_data_properties_time(self):
         p = self.parser.parse_expression('charge some <http://www.w3.org/2001/XMLSchema#date>'
                                          '[> 2012-10-09, < "1990-01-31"^^xsd:date]')
-        filler = OWLDatatypeMinMaxExclusiveRestriction(date(year=2012, month=10, day=9),
+        filler = owl_datatype_min_max_exclusive_restriction(date(year=2012, month=10, day=9),
                                                        date(year=1990, month=1, day=31))
         c = OWLDataSomeValuesFrom(self.charge, filler)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('charge exactly 10 dateTime'
                                          '[> 2012-12-31T23:59:59Z, < 2000-01-01 01:01:01.999999]')
-        filler = OWLDatatypeMinMaxExclusiveRestriction(datetime(year=2012, month=12, day=31, hour=23,
+        filler = owl_datatype_min_max_exclusive_restriction(datetime(year=2012, month=12, day=31, hour=23,
                                                                 minute=59, second=59, tzinfo=timezone.utc),
                                                        datetime(year=2000, month=1, day=1, hour=1, minute=1,
                                                                 second=1, microsecond=999999))
         c = OWLDataExactCardinality(10, self.charge, filler)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('charge value "2000-01-01T01:01:01.000001+04:00:59.999899"^^xsd:dateTime')
         literal = OWLLiteral(datetime(year=2000, month=1, day=1, hour=1, minute=1, second=1, microsecond=1,
                                       tzinfo=timezone(timedelta(hours=4, seconds=59, microseconds=999899))))
         c = OWLDataHasValue(self.charge, literal)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('charge only <http://www.w3.org/2001/XMLSchema#duration>'
                                          '[> P10W20DT8H12M10S, < "P10M10.999999S"^^xsd:duration]')
-        filler = OWLDatatypeMinMaxExclusiveRestriction(Timedelta(weeks=10, days=20, hours=8, minutes=12, seconds=10),
+        filler = owl_datatype_min_max_exclusive_restriction(Timedelta(weeks=10, days=20, hours=8, minutes=12, seconds=10),
                                                        Timedelta(minutes=10, seconds=10, microseconds=999999))
         c = OWLDataAllValuesFrom(self.charge, filler)
         self.assertEqual(p, c)
 
     def test_full_iri(self):
         p = self.parser.parse_expression('<http://dl-learner.org/mutagenesis#hasBond> only '
                                          '<http://dl-learner.org/mutagenesis#Atom>')
@@ -234,16 +237,16 @@
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('<http://dl-learner.org/mutagenesis#charge> max 4 not '
                                          '(<http://www.w3.org/2001/XMLSchema#integer>[> +4] and '
                                          '<http://www.w3.org/2001/XMLSchema#integer> or '
                                          '<http://www.w3.org/2001/XMLSchema#integer>[< '
                                          '"1"^^<http://www.w3.org/2001/XMLSchema#integer>])')
-        filler1 = OWLDataIntersectionOf((OWLDatatypeMinExclusiveRestriction(4), IntegerOWLDatatype))
-        filler = OWLDataComplementOf(OWLDataUnionOf((filler1, OWLDatatypeMaxExclusiveRestriction(1))))
+        filler1 = OWLDataIntersectionOf((owl_datatype_min_exclusive_restriction(4), IntegerOWLDatatype))
+        filler = OWLDataComplementOf(OWLDataUnionOf((filler1, owl_datatype_max_exclusive_restriction(1))))
         c = OWLDataMaxCardinality(4, self.charge, filler)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('<http://dl-learner.org/mutagenesis#hasBond> only '
                                          '{<http://dl-learner.org/mutagenesis#d91_32>, '
                                          '<http://dl-learner.org/mutagenesis#d91_17>, '
                                          '<http://dl-learner.org/mutagenesis#bond5225>}')
@@ -376,36 +379,36 @@
         c2 = OWLObjectIntersectionOf((c1, OWLObjectComplementOf(self.compound)))
         c3 = OWLObjectSomeValuesFrom(self.has_bond, OWLObjectMaxCardinality(4, self.in_bond, self.bond))
         c = OWLObjectUnionOf((c2, c3))
         self.assertEqual(p, c)
 
     def test_data_properties_numeric(self):
         p = self.parser.parse_expression('∃ charge.(xsd:integer[> 4])')
-        c = OWLDataSomeValuesFrom(self.charge, OWLDatatypeMinExclusiveRestriction(4))
+        c = OWLDataSomeValuesFrom(self.charge, owl_datatype_min_exclusive_restriction(4))
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('∀ act.double')
         c = OWLDataAllValuesFrom(self.act, DoubleOWLDatatype)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('∃ charge.<http://www.w3.org/2001/XMLSchema#double>'
                                          '[> "4.4"^^xsd:double, < -32.5]')
-        c = OWLDataSomeValuesFrom(self.charge, OWLDatatypeMinMaxExclusiveRestriction(4.4, -32.5))
+        c = OWLDataSomeValuesFrom(self.charge, owl_datatype_min_max_exclusive_restriction(4.4, -32.5))
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('≤ 4 charge.(¬(integer[> +4] ⊓ integer ⊔ xsd:integer[< "1"^^integer]))')
-        filler1 = OWLDataIntersectionOf((OWLDatatypeMinExclusiveRestriction(4), IntegerOWLDatatype))
-        filler = OWLDataComplementOf(OWLDataUnionOf((filler1, OWLDatatypeMaxExclusiveRestriction(1))))
+        filler1 = OWLDataIntersectionOf((owl_datatype_min_exclusive_restriction(4), IntegerOWLDatatype))
+        filler = OWLDataComplementOf(OWLDataUnionOf((filler1, owl_datatype_max_exclusive_restriction(1))))
         c = OWLDataMaxCardinality(4, self.charge, filler)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('≤ 25 charge.(¬(xsd:integer[> 9] ⊓ '
                                          '(xsd:integer ⊔ ¬xsd:integer[< "6"^^integer])))')
-        filler1 = OWLDataUnionOf((IntegerOWLDatatype, OWLDataComplementOf(OWLDatatypeMaxExclusiveRestriction(6))))
-        filler = OWLDataComplementOf(OWLDataIntersectionOf((OWLDatatypeMinExclusiveRestriction(9), filler1)))
+        filler1 = OWLDataUnionOf((IntegerOWLDatatype, OWLDataComplementOf(owl_datatype_max_exclusive_restriction(6))))
+        filler = OWLDataComplementOf(OWLDataIntersectionOf((owl_datatype_min_exclusive_restriction(9), filler1)))
         c = OWLDataMaxCardinality(25, self.charge, filler)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('= 11 act.xsd:integer[totalDigits "5"^^xsd:integer, > -100]')
         filler = OWLDatatypeRestriction(IntegerOWLDatatype, (OWLFacetRestriction(OWLFacet.TOTAL_DIGITS, 5),
                                                              OWLFacetRestriction(OWLFacet.MIN_EXCLUSIVE, -100)))
         c = OWLDataExactCardinality(11, self.act, filler)
@@ -442,37 +445,37 @@
         p = self.parser.parse_expression('∃ charge.{"Test\\"123456"}')
         c = OWLDataHasValue(self.charge, OWLLiteral("Test\\\"123456"))
         self.assertEqual(p, c)
 
     def test_data_properties_time(self):
         p = self.parser.parse_expression('∃ charge.<http://www.w3.org/2001/XMLSchema#date>'
                                          '[> 2012-10-09, < "1990-01-31"^^xsd:date]')
-        filler = OWLDatatypeMinMaxExclusiveRestriction(date(year=2012, month=10, day=9),
+        filler = owl_datatype_min_max_exclusive_restriction(date(year=2012, month=10, day=9),
                                                        date(year=1990, month=1, day=31))
         c = OWLDataSomeValuesFrom(self.charge, filler)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('= 10 charge.dateTime'
                                          '[> 2012-12-31T23:59:59Z, < 2000-01-01 01:01:01.999999]')
-        filler = OWLDatatypeMinMaxExclusiveRestriction(datetime(year=2012, month=12, day=31, hour=23,
+        filler = owl_datatype_min_max_exclusive_restriction(datetime(year=2012, month=12, day=31, hour=23,
                                                                 minute=59, second=59, tzinfo=timezone.utc),
                                                        datetime(year=2000, month=1, day=1, hour=1, minute=1,
                                                                 second=1, microsecond=999999))
         c = OWLDataExactCardinality(10, self.charge, filler)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('∃ charge.{"2000-01-01T01:01:01.000001+04:00:59.999899"^^xsd:dateTime}')
         literal = OWLLiteral(datetime(year=2000, month=1, day=1, hour=1, minute=1, second=1, microsecond=1,
                                       tzinfo=timezone(timedelta(hours=4, seconds=59, microseconds=999899))))
         c = OWLDataHasValue(self.charge, literal)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('∀ charge.<http://www.w3.org/2001/XMLSchema#duration>'
                                          '[> P10W20DT8H12M10S, < "P10M10.999999S"^^xsd:duration]')
-        filler = OWLDatatypeMinMaxExclusiveRestriction(Timedelta(weeks=10, days=20, hours=8, minutes=12, seconds=10),
+        filler = owl_datatype_min_max_exclusive_restriction(Timedelta(weeks=10, days=20, hours=8, minutes=12, seconds=10),
                                                        Timedelta(minutes=10, seconds=10, microseconds=999999))
         c = OWLDataAllValuesFrom(self.charge, filler)
         self.assertEqual(p, c)
 
     def test_full_iri(self):
         p = self.parser.parse_expression('∀ <http://dl-learner.org/mutagenesis#hasBond>.'
                                          '<http://dl-learner.org/mutagenesis#Atom>')
@@ -494,16 +497,16 @@
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('≤ 4 <http://dl-learner.org/mutagenesis#charge>.¬'
                                          '(<http://www.w3.org/2001/XMLSchema#integer>[> +4] ⊓ '
                                          '<http://www.w3.org/2001/XMLSchema#integer> ⊔ '
                                          '<http://www.w3.org/2001/XMLSchema#integer>[< '
                                          '"1"^^<http://www.w3.org/2001/XMLSchema#integer>])')
-        filler1 = OWLDataIntersectionOf((OWLDatatypeMinExclusiveRestriction(4), IntegerOWLDatatype))
-        filler = OWLDataComplementOf(OWLDataUnionOf((filler1, OWLDatatypeMaxExclusiveRestriction(1))))
+        filler1 = OWLDataIntersectionOf((owl_datatype_min_exclusive_restriction(4), IntegerOWLDatatype))
+        filler = OWLDataComplementOf(OWLDataUnionOf((filler1, owl_datatype_max_exclusive_restriction(1))))
         c = OWLDataMaxCardinality(4, self.charge, filler)
         self.assertEqual(p, c)
 
         p = self.parser.parse_expression('∀ <http://dl-learner.org/mutagenesis#hasBond>.'
                                          '{<http://dl-learner.org/mutagenesis#d91_32> ⊔ '
                                          '<http://dl-learner.org/mutagenesis#d91_17> ⊔ '
                                          '<http://dl-learner.org/mutagenesis#bond5225>}')
```

### Comparing `ontolearn-0.7.0/tests/test_owlapy_render.py` & `ontolearn-0.7.1/tests/test_owlapy_render.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,16 +1,21 @@
 import unittest
 
-from owlapy.model import OWLDataMinCardinality, OWLObjectIntersectionOf, OWLObjectSomeValuesFrom, \
-    OWLThing, OWLObjectComplementOf, OWLObjectUnionOf, OWLNamedIndividual, OWLObjectOneOf, OWLObjectHasValue, \
-    OWLObjectMinCardinality, IRI, OWLDataProperty, DoubleOWLDatatype, OWLClass, OWLDataComplementOf, \
-    OWLDataIntersectionOf, IntegerOWLDatatype, OWLDataExactCardinality, OWLDataHasValue, OWLDataAllValuesFrom, \
-    OWLDataOneOf, OWLDataSomeValuesFrom, OWLDataUnionOf, OWLLiteral, OWLObjectProperty, BooleanOWLDatatype, \
-    OWLDataMaxCardinality
-from owlapy.model.providers import OWLDatatypeMinMaxInclusiveRestriction
+from owlapy.class_expression import OWLObjectOneOf, OWLObjectSomeValuesFrom, OWLThing, OWLObjectComplementOf, \
+    OWLObjectHasValue, OWLClass, OWLDataAllValuesFrom, OWLDataHasValue, \
+    OWLDataOneOf, OWLDataSomeValuesFrom, OWLObjectMinCardinality, \
+    OWLObjectIntersectionOf, OWLDataMaxCardinality, OWLDataMinCardinality, OWLObjectUnionOf, \
+    OWLDataExactCardinality
+from owlapy.iri import IRI
+from owlapy.owl_data_ranges import OWLDataComplementOf, OWLDataIntersectionOf, OWLDataUnionOf
+from owlapy.owl_individual import OWLNamedIndividual
+from owlapy.owl_literal import DoubleOWLDatatype, OWLLiteral, IntegerOWLDatatype, BooleanOWLDatatype
+from owlapy.owl_property import OWLObjectProperty, OWLDataProperty
+
+from owlapy.providers import owl_datatype_min_max_inclusive_restriction
 from owlapy.render import DLSyntaxObjectRenderer, ManchesterOWLSyntaxOWLObjectRenderer
 
 
 class Owlapy_DLRenderer_Test(unittest.TestCase):
     def test_ce_render(self):
         renderer = DLSyntaxObjectRenderer()
         NS = "http://example.com/father#"
@@ -39,15 +44,15 @@
         self.assertEqual(r, "∃ hasChild.(∃ hasChild.(∃ hasChild.⊤))")
 
         i1 = OWLNamedIndividual(IRI.create(NS, 'heinz'))
         i2 = OWLNamedIndividual(IRI.create(NS, 'marie'))
         oneof = OWLObjectOneOf((i1, i2))
         r = renderer.render(oneof)
         print(r)
-        self.assertEqual(r, "{heinz ⊔ marie}")
+        self.assertEqual(r, "{heinz , marie}")  # TODO AB: Should we reset this to: "{heinz ⊔ marie}" ? (in owlapy)
 
         hasvalue = OWLObjectHasValue(property=has_child, individual=i1)
         r = renderer.render(hasvalue)
         print(r)
         self.assertEqual(r, "∃ hasChild.{heinz}")
 
         mincard = OWLObjectMinCardinality(cardinality=2, property=has_child, filler=OWLThing)
@@ -57,15 +62,15 @@
 
         d = OWLDataSomeValuesFrom(property=has_age,
                                   filler=OWLDataComplementOf(DoubleOWLDatatype))
         r = renderer.render(d)
         print(r)
         self.assertEqual(r, "∃ hasAge.¬xsd:double")
 
-        datatype_restriction = OWLDatatypeMinMaxInclusiveRestriction(40, 80)
+        datatype_restriction = owl_datatype_min_max_inclusive_restriction(40, 80)
 
         dr = OWLDataAllValuesFrom(property=has_age, filler=OWLDataUnionOf([datatype_restriction, IntegerOWLDatatype]))
         r = renderer.render(dr)
         print(r)
         self.assertEqual(r, "∀ hasAge.(xsd:integer[≥ 40 , ≤ 80] ⊔ xsd:integer)")
 
         dr = OWLDataSomeValuesFrom(property=has_age,
@@ -143,15 +148,15 @@
 
         d = OWLDataSomeValuesFrom(property=has_age,
                                   filler=OWLDataComplementOf(DoubleOWLDatatype))
         r = renderer.render(d)
         print(r)
         self.assertEqual(r, "hasAge some not xsd:double")
 
-        datatype_restriction = OWLDatatypeMinMaxInclusiveRestriction(40, 80)
+        datatype_restriction = owl_datatype_min_max_inclusive_restriction(40, 80)
 
         dr = OWLDataAllValuesFrom(property=has_age, filler=OWLDataUnionOf([datatype_restriction, IntegerOWLDatatype]))
         r = renderer.render(dr)
         print(r)
         self.assertEqual(r, "hasAge only (xsd:integer[>= 40 , <= 80] or xsd:integer)")
 
         dr = OWLDataSomeValuesFrom(property=has_age,
```

### Comparing `ontolearn-0.7.0/tests/test_refinement_operators.py` & `ontolearn-0.7.1/tests/test_refinement_operators.py`

 * *Files 6% similar despite different names*

```diff
@@ -5,20 +5,24 @@
 
 import json
 
 from ontolearn.concept_generator import ConceptGenerator
 from ontolearn.knowledge_base import KnowledgeBase
 from ontolearn.base.owl.utils import ConceptOperandSorter
 from ontolearn.utils import setup_logging
-from owlapy.model.providers import OWLDatatypeMaxInclusiveRestriction, OWLDatatypeMinInclusiveRestriction
+from owlapy.providers import owl_datatype_max_inclusive_restriction, owl_datatype_min_inclusive_restriction
 from owlapy.render import DLSyntaxObjectRenderer
-from owlapy.model import OWLObjectMinCardinality, OWLObjectProperty, OWLObjectSomeValuesFrom, \
-    OWLClass, IRI, OWLDataHasValue, OWLDataProperty, OWLDataSomeValuesFrom, OWLLiteral, OWLObjectAllValuesFrom, \
-    OWLObjectCardinalityRestriction, OWLObjectComplementOf, OWLObjectIntersectionOf, OWLObjectMaxCardinality, \
-    OWLObjectUnionOf
+
+from owlapy.class_expression import OWLObjectSomeValuesFrom, OWLObjectComplementOf, \
+    OWLObjectAllValuesFrom, OWLClass, OWLDataHasValue, OWLDataSomeValuesFrom, OWLObjectMaxCardinality, \
+    OWLObjectMinCardinality, OWLObjectIntersectionOf, OWLObjectUnionOf, OWLObjectCardinalityRestriction
+from owlapy.iri import IRI
+from owlapy.owl_literal import OWLLiteral
+from owlapy.owl_property import OWLObjectProperty, OWLDataProperty
+
 from ontolearn.refinement_operators import ModifiedCELOERefinement, LengthBasedRefinement, \
     ExpressRefinement
 
 
 setup_logging("ontolearn/logging_test.conf")
 
 
@@ -126,18 +130,18 @@
     def test_atomic_refinements_data_properties(self):
         rho = ModifiedCELOERefinement(self.kb, use_numeric_datatypes=True, use_boolean_datatype=True)
         # Just set some static splits
         splits = list(map(OWLLiteral, range(1, 10)))
         rho.dp_splits = {p: splits for p in rho.dp_splits}
 
         # numeric
-        true_act = {OWLDataSomeValuesFrom(self.act, OWLDatatypeMinInclusiveRestriction(1)),
-                    OWLDataSomeValuesFrom(self.act, OWLDatatypeMaxInclusiveRestriction(9))}
-        true_charge = {OWLDataSomeValuesFrom(self.charge, OWLDatatypeMinInclusiveRestriction(1)),
-                       OWLDataSomeValuesFrom(self.charge, OWLDatatypeMaxInclusiveRestriction(9))}
+        true_act = {OWLDataSomeValuesFrom(self.act, owl_datatype_min_inclusive_restriction(1)),
+                    OWLDataSomeValuesFrom(self.act, owl_datatype_max_inclusive_restriction(9))}
+        true_charge = {OWLDataSomeValuesFrom(self.charge, owl_datatype_min_inclusive_restriction(1)),
+                       OWLDataSomeValuesFrom(self.charge, owl_datatype_max_inclusive_restriction(9))}
         thing_refs = set(rho.refine(self.generator.thing, max_length=3, current_domain=self.generator.thing))
         compound_refs = set(rho.refine(self.compound, max_length=3, current_domain=self.compound))
         bond_refs = set(rho.refine(self.bond, max_length=3, current_domain=self.bond))
         self.assertLessEqual(true_act, thing_refs)
         self.assertLessEqual(true_act, compound_refs)
         self.assertFalse(true_act & bond_refs)
         self.assertLessEqual(true_charge, thing_refs)
@@ -233,32 +237,32 @@
     def test_data_some_values_from_refinements(self):
         rho = ModifiedCELOERefinement(self.kb, use_numeric_datatypes=True)
         # Just set some static splits
         splits = list(map(OWLLiteral, range(1, 10)))
         rho.dp_splits = {p: splits for p in rho.dp_splits}
 
         # min inclusive
-        refs = set(rho.refine(OWLDataSomeValuesFrom(self.charge, OWLDatatypeMinInclusiveRestriction(4)),
+        refs = set(rho.refine(OWLDataSomeValuesFrom(self.charge, owl_datatype_min_inclusive_restriction(4)),
                               max_length=0, current_domain=self.generator.thing))
-        true_refs = {OWLDataSomeValuesFrom(self.charge, OWLDatatypeMinInclusiveRestriction(5))}
+        true_refs = {OWLDataSomeValuesFrom(self.charge, owl_datatype_min_inclusive_restriction(5))}
         self.assertEqual(refs, true_refs)
 
         # test empty
-        refs = set(rho.refine(OWLDataSomeValuesFrom(self.act, OWLDatatypeMinInclusiveRestriction(9)),
+        refs = set(rho.refine(OWLDataSomeValuesFrom(self.act, owl_datatype_min_inclusive_restriction(9)),
                               max_length=0, current_domain=self.generator.thing))
         self.assertFalse(refs)
 
         # max inclusive
-        refs = set(rho.refine(OWLDataSomeValuesFrom(self.charge, OWLDatatypeMaxInclusiveRestriction(8)),
+        refs = set(rho.refine(OWLDataSomeValuesFrom(self.charge, owl_datatype_max_inclusive_restriction(8)),
                               max_length=0, current_domain=self.generator.thing))
-        true_refs = {OWLDataSomeValuesFrom(self.charge, OWLDatatypeMaxInclusiveRestriction(7))}
+        true_refs = {OWLDataSomeValuesFrom(self.charge, owl_datatype_max_inclusive_restriction(7))}
         self.assertEqual(refs, true_refs)
 
         # test empty
-        refs = set(rho.refine(OWLDataSomeValuesFrom(self.act, OWLDatatypeMaxInclusiveRestriction(1)),
+        refs = set(rho.refine(OWLDataSomeValuesFrom(self.act, owl_datatype_max_inclusive_restriction(1)),
                               max_length=0, current_domain=self.generator.thing))
         self.assertFalse(refs)
 
     def test_cardinality_refinements(self):
         rho = ModifiedCELOERefinement(self.kb, card_limit=10, use_card_restrictions=True)
 
         # min cardinality
```

### Comparing `ontolearn-0.7.0/tests/test_value_splitter.py` & `ontolearn-0.7.1/tests/test_value_splitter.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,23 +1,24 @@
 from datetime import date
 import unittest
 
 from owlready2.prop import DataProperty
 from ontolearn.value_splitter import BinningValueSplitter
 from ontolearn.base.fast_instance_checker import OWLReasoner_FastInstanceChecker
-from owlapy.model import OWLDataProperty, OWLLiteral, IRI
+from owlapy.owl_literal import OWLDataProperty, OWLLiteral
+from owlapy.iri import IRI
 from ontolearn.base import OWLOntologyManager_Owlready2, OWLReasoner_Owlready2
 
 
 class BinningValueSplitter_Test(unittest.TestCase):
 
     def test_binning_splitter_numeric(self):
         namespace_ = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
 
         with onto._onto:
             class test_int(DataProperty):
                 range = [int]
 
             class test_float(DataProperty):
                 range = [float]
@@ -41,15 +42,15 @@
                    test_float_dp: [OWLLiteral(-5.6), OWLLiteral(-2.2), OWLLiteral(2.3), OWLLiteral(6.45),
                                    OWLLiteral(14.8), OWLLiteral(20.1)]}
         self.assertEqual(splits, results)
 
     def test_binning_splitter_time(self):
         namespace_ = "http://example.com/father#"
         mgr = OWLOntologyManager_Owlready2()
-        onto = mgr.load_ontology(IRI.create("file://KGs/father.owl"))
+        onto = mgr.load_ontology(IRI.create("file://KGs/Family/father.owl"))
 
         with onto._onto:
             class test_time(DataProperty):
                 range = [date]
 
         values_datetime = [date(2000, 10, 21), date(2003, 2, 10), date(1998, 7, 30), date(1990, 8, 3),
                            date(2006, 6, 6), date(2008, 5, 6), date(2012, 5, 3), date(2010, 1, 1),
```

